"use strict";(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[429],{429:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Ns});var a=t(3673),n=t(1959),o=t(2323),s=(t(1082),t(8825));t(4564);const i={class:"text-h6"},d={class:"text-h6"},r={class:"text-h6"},u=(0,a._)("div",{class:"text-h6"},"Generate event",-1),m=(0,a._)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1),c={class:"q-pa-md q-gutter-sm"},p="SendEventDialog",v={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(),v=e,b=l,g=(0,a.Fl)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.YP)(g,(()=>{console.log(p+": WATCH model")})),(0,a.wF)((()=>{console.log("SendEventDialog onBeforeMount")})),(0,a.bv)((()=>{console.log("SendEventDialog onMounted")}));const f=()=>{console.log("send on "+v.eventIdentifier);var e=parseInt(v.eventIdentifier.slice(0,4),16);0==e?t.methods.short_on_event(v.sendingNodeNumber,v.eventNumber):t.methods.long_on_event(e,v.eventNumber)},w=()=>{console.log("send off "+v.eventIdentifier);var e=parseInt(v.eventIdentifier.slice(0,4),16);0==e?t.methods.short_off_event(v.sendingNodeNumber,v.eventNumber):t.methods.long_off_event(e,v.eventNumber)};return(e,l)=>{const p=(0,a.up)("q-btn"),b=(0,a.up)("q-banner"),y=(0,a.up)("q-card-section"),_=(0,a.up)("q-card-actions"),V=(0,a.up)("q-card"),N=(0,a.up)("q-dialog"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(N,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[q]])])),default:(0,a.w5)((()=>[(0,a._)("div",i," Test event : "+(0,o.zw)((0,n.SU)(t).getters.event_name(v.eventIdentifier)),1)])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,"Sending Node "+(0,o.zw)(v.sendingNodeNumber),1),(0,a._)("div",r,"Event "+(0,o.zw)(s.value)+":"+(0,o.zw)(v.eventNumber),1)])),_:1}),(0,a.Wm)(y,{class:"q-pa-md"},{default:(0,a.w5)((()=>[u,m,(0,a._)("div",c,[(0,a.wy)((0,a.Wm)(p,{color:"green",label:"ON",onClick:l[0]||(l[0]=e=>f())},null,512),[[q]]),(0,a.wy)((0,a.Wm)(p,{color:"negative",label:"OFF",onClick:l[1]||(l[1]=e=>w())},null,512),[[q]])])])),_:1}),(0,a.Wm)(_,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}};var b=t(6778),g=t(151),f=t(5607),w=t(8240),y=t(5589),_=t(9367),V=t(677),N=t(7518),q=t.n(N);const h=v,x=h;q()(v,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QCardActions:_.Z}),q()(v,"directives",{ClosePopup:V.Z});const W={class:"text-h6"},S=(0,a._)("div",{class:"text-h6"},"Are you sure you want to delete this event?",-1),k={__name:"DeleteEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=e,i=l,d=(0,a.Fl)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log("removeEvent "+s.nodeNumber+" "+s.eventIdentifier),t.methods.remove_event(s.nodeNumber,s.eventIdentifier)};return(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(e,l)=>{const i=(0,a.up)("q-btn"),u=(0,a.up)("q-banner"),m=(0,a.up)("q-card-section"),c=(0,a.up)("q-card-actions"),p=(0,a.up)("q-card"),v=(0,a.up)("q-dialog"),b=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(v,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[b]])])),default:(0,a.w5)((()=>[(0,a._)("div",W," Delete event : "+(0,o.zw)((0,n.SU)(t).getters.event_name(s.eventIdentifier)),1)])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[S])),_:1}),(0,a.Wm)(c,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,{flat:"",color:"positive",label:"Yes",onClick:l[0]||(l[0]=e=>r())},null,512),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},U=k,I=U;q()(k,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QCardActions:_.Z}),q()(k,"directives",{ClosePopup:V.Z});const C={class:"text-h6"},T=(0,a._)("div",{class:"text-h6"},"Event name",-1),Z={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(""),i=e,d=l,r=(0,a.Fl)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=()=>{console.log("new event name: "+i.eventIdentifier+" "+s.value),t.setters.event_name(i.eventIdentifier,s.value),s.value=""};return(0,a.ic)((()=>{console.log("NameEventDialog onUpdated "+i.eventIdentifier),t.state.layout.eventDetails[i.eventIdentifier]&&(s.value=t.state.layout.eventDetails[i.eventIdentifier].name)})),(e,l)=>{const d=(0,a.up)("q-btn"),m=(0,a.up)("q-banner"),c=(0,a.up)("q-input"),p=(0,a.up)("q-card-section"),v=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card"),g=(0,a.up)("q-dialog"),f=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.w5)((()=>[(0,a._)("div",C," Edit name for event : "+(0,o.zw)((0,n.SU)(t).getters.event_name(i.eventIdentifier)),1)])),_:1}),(0,a.Wm)(p,{class:"q-pt-none"},{default:(0,a.w5)((()=>[T,(0,a.Wm)(c,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",label:"Accept",onClick:l[1]||(l[1]=e=>u())},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var Q=t(4689);const D=Z,E=D;q()(Z,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QInput:Q.Z,QCardActions:_.Z}),q()(Z,"directives",{ClosePopup:V.Z});const B={class:"text-h6"},H={class:"q-pa-md row items-start q-gutter-md"},z=(0,a._)("div",{class:"text-h6"},"Teach Event",-1),F=(0,a._)("div",{class:"text-subtitle2"},"To consumer nodes only",-1),j={class:"q-pa-xs q-gutter-sm"},O=(0,a._)("div",{class:"text-h6"},"Taught Events",-1),P=(0,a._)("div",{class:"text-subtitle2"},"Nodes using this event",-1),M={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=e,i=l,d=(0,a.Fl)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=(0,n.iH)(),u=(0,n.iH)([]),m=(0,n.iH)([]),c=(0,n.iH)([]),p=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0}],v=(0,a.Fl)((()=>Object.values(t.state.nodes)));(0,a.YP)(v,(()=>{b()}));const b=()=>{c.value=[],m.value=[],v.value.forEach((e=>{if(Object.values(e.storedEvents).length>0){let l=Object.values(e.storedEvents);l.forEach((l=>{if(l.eventIdentifier==s.eventIdentifier){m.value.push(l.node);var a=t.state.layout.nodeDetails[e.nodeNumber].name;c.value.push({number:e.nodeNumber,name:a})}}))}})),g()},g=()=>{u.value=[];var e=t.state.nodes;for(var l in e){var a=!0;for(var n in m.value)m.value[n]==l&&(a=!1);if(a&&e[l].consumer){var o=l+": ";t.state.layout.nodeDetails[l]&&(o+=t.state.layout.nodeDetails[l].name),u.value.push(o)}}},f=()=>{if(console.log(`teach_event : ${r.value} : ${s.eventIdentifier}`),""!=r.value){var e=r.value.split(":");console.log(`teach_event : ${e[0]} : ${s.eventIdentifier}`),t.methods.teach_event(e[0],s.eventIdentifier,s.eventIndex),r.value=void 0}};return(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(0,a.ic)((()=>{console.log("EventTeachDialog onUpdated"),s.eventIdentifier&&b()})),(e,l)=>{const i=(0,a.up)("q-btn"),m=(0,a.up)("q-banner"),v=(0,a.up)("q-select"),b=(0,a.up)("q-card-section"),g=(0,a.up)("q-card"),w=(0,a.up)("q-table"),y=(0,a.up)("q-card-actions"),_=(0,a.up)("q-dialog"),V=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,a.w5)((()=>[(0,a._)("div",B," Teach event : "+(0,o.zw)((0,n.SU)(t).getters.event_name(s.eventIdentifier)),1)])),_:1}),(0,a._)("div",H,[(0,a.Wm)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[z,F,(0,a.Wm)(v,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),options:u.value},null,8,["modelValue","options"]),(0,a._)("div",j,[(0,a.Wm)(i,{color:"negative",label:"Teach",onClick:l[1]||(l[1]=e=>f()),"no-caps":""})])])),_:1})])),_:1}),(0,a.Wm)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[O,P,(0,a.Wm)(w,{flat:"",bordered:"",dense:"",rows:c.value,columns:p,"row-key":"number","hide-header":"",pagination:{rowsPerPage:10}},null,8,["rows"])])),_:1})])),_:1})]),(0,a.Wm)(y,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,{flat:"",label:"Cancel"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var A=t(3314),L=t(6429);const Y=M,$=Y;q()(M,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QSelect:A.Z,QTable:L.Z,QCardActions:_.Z}),q()(M,"directives",{ClosePopup:V.Z});const R={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.f3)("store")),o={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,n.iH)(!1);let i=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].eventIdentifier;const d=(0,a.Fl)((()=>t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]));(0,a.YP)(d,(()=>{s.value=!!(t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]&o[l.bit])}));const r=()=>{let e=d.value;console.log(`EventVariableBit update_checked ${s.value} ${e}`),s.value?e|=o[l.bit]:e&=~o[l.bit],console.log(`EventVariableBit update_checked-2 ${s.value} ${e}`),t.methods.update_event_variable(l.nodeNumber,i,l.eventIndex,l.eventVariableIndex,e)};return(0,a.bv)((()=>{const e=!!(t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]&o[l.bit]);s.value=e})),(l,t)=>{const n=(0,a.up)("q-checkbox");return(0,a.wg)(),(0,a.j4)(n,{"min-width":"100",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:e.name,onClick:r,"left-label":""},null,8,["modelValue","label"])}}};var J=t(6271);const K=R,G=K;q()(R,"components",{QCheckbox:J.Z});const X={class:"text-h6"},ee={class:"text-subtitle2"},le={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){(0,a.f3)("store");return(0,a.bv)((()=>{})),(l,t)=>{const s=(0,a.up)("q-card-section"),i=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(i,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",X,(0,o.zw)(e.displayTitle),1),(0,a._)("div",ee,(0,o.zw)(e.displaySubTitle),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.bitCollection,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l},[(0,a.Wm)((0,n.SU)(G),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIndex:e.eventIndex,bit:l.bitPosition,name:l.label},null,8,["nodeNumber","eventVariableIndex","eventIndex","bit","name"])])))),128))])),_:1})])),_:1})}}},te=le,ae=te;q()(le,"components",{QCard:g.Z,QCardSection:y.Z});const ne={class:"text-h6"},oe={class:"text-subtitle2"},se={__name:"EventVariableBitSingle",props:{eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=(0,a.f3)("store");return(0,a.bv)((()=>{})),(t,s)=>{const i=(0,a.up)("q-card-section"),d=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(d,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",ne,(0,o.zw)(e.displayTitle),1),(0,a._)("div",oe,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)((0,n.SU)(G),{nodeNumber:(0,n.SU)(l).state.selected_node,eventIndex:e.eventIndex,eventVariableIndex:e.eventVariableIndex,bit:e.bit,name:e.name},null,8,["nodeNumber","eventIndex","eventVariableIndex","bit","name"])])),_:1})])),_:1})}}},ie=se,de=ie;q()(se,"components",{QCard:g.Z,QCardSection:y.Z});const re={class:"q-pa-xs row"},ue={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},me={class:"GroupTitle q-py-none"},ce="EventVariableGroup",pe={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e;(0,a.f3)("store");return(0,a.bv)((()=>{console.log(ce+": onMounted"),console.log(ce+":  props: "+JSON.stringify(l))})),(l,t)=>((0,a.wg)(),(0,a.iD)("div",re,[(0,a._)("div",ue,[(0,a._)("div",me,(0,o.zw)(e.configuration.displayTitle),1),(0,a.Wm)((0,n.SU)(Ge),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIndex:e.eventIndex,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIndex","eventIdentifier"])])]))}};var ve=t(4260);const be=(0,ve.Z)(pe,[["__scopeId","data-v-2c474780"]]),ge=be,fe={class:"text-h6"},we={class:"text-subtitle2"},ye={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},name:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},displayOffset:{type:Number,default:0}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.f3)("store")),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,n.iH)();let r=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].eventIdentifier;console.log(`EventVariableNumber: Props : ${JSON.stringify(l)}`);const u=(0,a.Fl)((()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e}));console.log(`EventVariableNumber: bitMask2 : ${u.value}`);const m=(0,a.Fl)((()=>t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]));(0,a.YP)(m,(()=>{d.value=((m.value&u.value)>>l.startBit)+l.displayOffset}));const c=e=>{let a=m.value,n=e;n-=l.displayOffset,n<l.min||n>l.max||""==e?(s.value=!0,i.value="Invalid Value "+e+" : Valid Range "+(l.min+l.displayOffset)+" - "+(l.max+l.displayOffset)):(n<<=l.startBit,a|=n&u.value,a&=n|~u.value,i.value="",s.value=!1,t.methods.update_event_variable(l.nodeNumber,r,l.eventIndex,l.eventVariableIndex,a))};return(0,a.bv)((()=>{console.log("EventVariableNumber: onMounted");let e=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex];d.value=((e&u.value)>>l.startBit)+l.displayOffset})),(l,t)=>{const n=(0,a.up)("q-input"),r=(0,a.up)("q-card-section"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",fe,(0,o.zw)(e.displayTitle),1),(0,a._)("div",we,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:c},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}},_e=ye,Ve=_e;function Ne(e,l){var t=null;if(e.nv){var a=l.state.nodes[l.state.selected_node].nodeVariables[e.nv];for(var n in e.labels)a==e.labels[n].value&&(t=e.labels[n].label)}return console.log("overloadedLabel: element "+JSON.stringify(e)+" result = "+t),t}function qe(e,l,t){var a=!0;if(void 0!=e.evBit)if(void 0!=t){var n=l.state.nodes[l.state.selected_node].storedEvents[t];if(n){var o=n.variables[e.evBit.index];o=(o&2**e.evBit.bit)>>e.evBit.bit,a=he(o,e),console.log("parseLogicElement: evBit result = "+a)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=e.ev){n=l.state.nodes[l.state.selected_node].storedEvents[t];if(n){o=n.variables[e.ev];a=he(o,e),console.log("parseLogicElement: ev result = "+a)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}if(void 0!=e.nvBit){o=l.state.nodes[l.state.selected_node].nodeVariables[e.nvBit.index];o=(o&2**e.nvBit.bit)>>e.nvBit.bit,a=he(o,e),console.log("parseLogicElement: nvBit result = "+a)}if(void 0!=e.nv){o=l.state.nodes[l.state.selected_node].nodeVariables[e.nv];a=he(o,e),console.log("parseLogicElement: nv result = "+a)}return a}function he(e,l){var t=!0;return void 0!=l.equals&&l.equals!=e&&(t=!1),void 0!=l.in&&(t=!1,l.in.forEach((function(l){e==l&&(t=!0)}))),void 0!=l.notEqual&&l.notEqual==e&&(t=!1),t}q()(ye,"components",{QCard:g.Z,QCardSection:y.Z,QInput:Q.Z});const xe={class:"text-h6"},We={class:"text-subtitle2"},Se={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.f3)("store")),s=(0,n.iH)();let i=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].eventIdentifier;var d=(0,n.iH)();const r=(0,a.Fl)((()=>t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]));(0,a.YP)(r,(()=>{s.value=r.value&l.bitMask}));const u=e=>{console.log(`EventVariableSelect: newValue ${e.value}`);let a=r.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,console.log(`EventVariableSelect: byteValue ${a}`),t.methods.update_event_variable(l.nodeNumber,i,l.eventIndex,l.eventVariableIndex,a)};return(0,a.bv)((()=>{for(var e in console.log("EventVariableSelect: onMounted"),s.value=r.value&l.bitMask,console.log(`EventVariableSelect: props: ${JSON.stringify(l)}`),d.value=[],l.options)if(console.log(`EventVariableComplexSelect: item: ${e}`),void 0!=l.options[e].overload){var a=Ne(l.options[e].overload,t);if(a){var n={value:l.options[e].value,label:a};d.value.push(n)}}else void 0!=l.options[e].label&&d.value.push(l.options[e]);console.log(`EventVariableSelect: items: ${JSON.stringify(d.value)}`)})),(l,t)=>{const i=(0,a.up)("q-select"),r=(0,a.up)("q-card-section"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",xe,(0,o.zw)(e.displayTitle),1),(0,a._)("div",We,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(i,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),u],options:(0,n.SU)(d),"popup-content-class":"q-pm-none","map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},ke=Se,Ue=ke;q()(Se,"components",{QCard:g.Z,QCardSection:y.Z,QSelect:A.Z});const Ie={class:"text-h6"},Ce={class:"text-subtitle2"},Te={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.f3)("store")),s=(0,n.iH)(!1),i=(0,n.iH)("");let d=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].eventIdentifier;console.log(`EventVariableSlider Props : ${JSON.stringify(l)}`);const r=(0,a.Fl)((()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e}));console.log(`EventVariableSlider: bitMask : ${r.value}`);const u=(0,a.Fl)({get(){return(t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]&r.value)>>l.startBit},set(e){let a=t.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex];if(console.log(`OldByteValue : ${a}`),console.log(`NewValue : ${e}`),e<=l.max&&e>=l.min){console.log(`update_variable : ${e}`);let n=e;n<<=l.startBit,a|=n&r.value,a&=n|~r.value,s.value=!1,i.value="",t.methods.update_event_variable(l.nodeNumber,d,l.eventIndex,l.eventVariableIndex,a)}else console.log(`Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),m=e=>{s.value?console.log(`Invalid Value : ${e}`):console.log(`update slider value : ${e}`)};return(0,a.bv)((()=>{console.log("EventVariableSlider onMounted")})),(l,t)=>{const n=(0,a.up)("q-badge"),s=(0,a.up)("q-slider"),i=(0,a.up)("q-card-section"),d=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(d,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",Ie,(0,o.zw)(e.displayTitle),1),(0,a._)("div",Ce,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{color:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(u.value*e.displayScale+e.displayOffset)+" "+(0,o.zw)(e.displayUnits),1)])),_:1}),(0,a.Wm)(s,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),max:e.max,min:e.min,onChange:m},null,8,["modelValue","max","min"])])),_:1})])),_:1})}}};var Ze=t(9721),Qe=t(2064);const De=Te,Ee=De;q()(Te,"components",{QCard:g.Z,QCardSection:y.Z,QBadge:Ze.Z,QSlider:Qe.Z});const Be={class:"no-padding no-margin"},He={class:"no-padding no-margin"},ze={class:"no-padding no-margin row",style:{border:"1px solid grey"}},Fe="EventVariableTabs",je={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,n.iH)(),o=(0,n.iH)();(0,a.f3)("store");return(0,a.bv)((()=>{console.log(Fe+": props: "+JSON.stringify(l)),t.value=l.configuration.tabPanels,console.log(Fe+": tabPanels: "+JSON.stringify(t.value)),o.value=t.value[0].displayTitle})),(e,s)=>{const i=(0,a.up)("q-tab"),d=(0,a.up)("q-tabs"),r=(0,a.up)("q-tab-panel"),u=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.iD)("div",Be,[(0,a.Wm)(d,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a._)("div",He,[(0,a.Wm)(u,{"keep-alive":"",modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.w5)((()=>[(0,a._)("div",ze,[(0,a.Wm)((0,n.SU)(Ge),{configuration:e.items,nodeNumber:l.nodeNumber,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier},null,8,["configuration","nodeNumber","eventIndex","eventIdentifier"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])}}};var Oe=t(7547),Pe=t(3269),Me=t(5906),Ae=t(6602);const Le=je,Ye=Le;q()(je,"components",{QTabs:Oe.Z,QTab:Pe.Z,QTabPanels:Me.Z,QTabPanel:Ae.Z});const $e={class:"q-pa-xs row"},Re="EventVariables",Je={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,a.f3)("store"),o=e=>{var l=!0;return e.visibilityLogic&&(l=qe(e.visibilityLogic,t,t.state.selected_event_index)),console.log(Re+": isVisible: "+l+" "+e.type),l};return(0,a.wF)((()=>{console.log(Re+": onBeforeMount")})),(0,a.bv)((()=>{console.log(Re+": onMounted")})),(0,a.ic)((()=>{console.log(Re+": onUpdated")})),(t,s)=>((0,a.wg)(),(0,a.iD)("div",$e,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.configuration,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},["EventVariableBitArray"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(ae),{key:0,nodeNumber:l.nodeNumber,eventIndex:l.eventIndex,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIndex","eventVariableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.kq)("",!0),"EventVariableBitSingle"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(de),{key:1,nodeNumber:l.nodeNumber,eventIndex:l.eventIndex,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIndex","eventVariableIndex","bit","displayTitle","displaySubTitle"])):(0,a.kq)("",!0),"EventVariableGroup"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(ge),{key:2,"node-number":l.nodeNumber,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIndex","eventIdentifier","configuration"])):(0,a.kq)("",!0),"EventVariableNumber"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ve),{key:3,"node-number":l.nodeNumber,eventIndex:l.eventIndex,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,startBit:e.startBit,endBit:e.endBit,displayOffset:e.displayOffset,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIndex","eventVariableIndex","displayTitle","displaySubTitle","startBit","endBit","displayOffset","min","max","configuration"])):(0,a.kq)("",!0),"EventVariableSelect"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ue),{key:4,nodeNumber:l.nodeNumber,eventIndex:l.eventIndex,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeNumber","eventIndex","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options"])):(0,a.kq)("",!0),"EventVariableSlider"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ee),{key:5,"node-number":l.nodeNumber,eventIndex:l.eventIndex,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit},null,8,["node-number","eventIndex","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit"])):(0,a.kq)("",!0),"EventVariableTabs"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ye),{key:6,"node-number":l.nodeNumber,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIndex","eventIdentifier","configuration"])):(0,a.kq)("",!0)])))),128))]))}},Ke=Je,Ge=Ke,Xe={__name:"EventVariableRaw",props:{nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,t=l.name?l.name:"Event Variable "+l.eventVariableIndex,o=(0,a.f3)("store"),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,n.iH)();let r=o.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].eventIdentifier;const u=(0,a.Fl)((()=>o.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]));(0,a.YP)(u,(()=>{d.value=u.value}));const m=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,o.methods.update_event_variable(l.nodeNumber,r,l.eventIndex,l.eventVariableIndex,e))};return(0,a.bv)((()=>{d.value=o.state.nodes[l.nodeNumber].storedEvents[l.eventIndex].variables[l.eventVariableIndex]})),(e,l)=>{const o=(0,a.up)("q-input"),r=(0,a.up)("q-card-section"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{class:"q-pa-none",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o,{mask:"###",label:(0,n.SU)(t),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:m},null,8,["label","modelValue","error-message","error"])])),_:1})])),_:1})}}},el=Xe,ll=el;q()(Xe,"components",{QCard:g.Z,QCardSection:y.Z,QInput:Q.Z});const tl=(0,a._)("div",{class:"text-h6"}," Module Descriptor ",-1),al={class:"row items-start q-gutter-md"},nl={key:0,class:"text-subtitle2"},ol=(0,a._)("p",{class:"text-negative"},"Module Descriptor not found",-1),sl=[ol],il=(0,a._)("div",{class:"text-h6"}," Module Descriptor Data ",-1),dl={class:"text-h6"},rl=(0,a._)("div",{class:"text-h6"}," File upload ",-1),ul=(0,a._)("div",{class:"text-subtitle2"},"Select a file to upload",-1),ml=(0,a._)("div",{class:"text-subtitle2"},[(0,a.Uk)(" The file will be stored with it's original filename"),(0,a._)("br"),(0,a.Uk)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a._)("br"),(0,a.Uk)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1),cl=(0,a._)("div",{class:"text-subtitle2"},"Current node:",-1),pl={class:"text-subtitle2"},vl=(0,a._)("br",null,null,-1),bl=(0,a._)("br",null,null,-1),gl=(0,a._)("br",null,null,-1),fl=(0,a._)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1),wl="ManageModuleDescriptorsDialog",yl={__name:"ManageModuleDescriptorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(!1),i=(0,n.iH)(!1),d=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)(),m=e,c=l,p=(0,a.Fl)({get(){return m.modelValue},set(e){c("update:modelValue",e)}});(0,a.YP)(p,(()=>{console.log(wl+": WATCH model")}));const v=(0,a.Fl)((()=>t.state.nodes[t.state.selected_node].moduleDescriptorFilename)),b=(0,a.Fl)((()=>{var e="";return t.state.nodes[t.state.selected_node].moduleDescriptorFilename&&(e=t.state.nodes[t.state.selected_node].moduleDescriptorFilename.split(".",1)[0],g()),e}));(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const g=()=>{console.log("checkFileLoad"),t.state.nodeDescriptors[t.state.selected_node]?(r.value=!0,console.log(wl+": WATCH moduleDescriptorFilename "+r.value)):console.log(wl+": checkFileLoad failed for node "+t.state.selected_node)},f=()=>{let e=JSON.stringify(t.state.nodeDescriptors[t.state.selected_node],null,"  "),l=document.createElement("a");l.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",t.state.nodes[t.state.selected_node].moduleDescriptorFilename),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},w=()=>{if(u.value){var e=u.value.name;console.log(wl+": selected filename "+e);let l=new FileReader;l.readAsText(u.value),l.onload=function(){try{var a=JSON.parse(l.result);a["moduleDescriptorFilename"]=e,console.log(wl+": actionUpload: "+a.moduleDescriptorFilename),console.log(wl+": actionUpload: result: "+JSON.stringify(a)),t.methods.import_module_descriptor(a)}catch(n){console.log(wl+": actionUpload: failed JSON parse")}},u.value=null}else console.log(wl+": actionUpload: uploadFile no value ")},y=()=>{console.log(wl+": clickDownload"),s.value=!0},_=()=>{console.log(wl+": clickUpload"),i.value=!0},V=()=>{console.log(wl+": clickView"),d.value=!0};return(e,l)=>{const m=(0,a.up)("q-btn"),c=(0,a.up)("q-banner"),g=(0,a.up)("q-card-section"),N=(0,a.up)("q-card-actions"),q=(0,a.up)("q-card"),h=(0,a.up)("q-dialog"),x=(0,a.up)("q-file"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(h,{modelValue:p.value,"onUpdate:modelValue":l[9]||(l[9]=e=>p.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[W]])])),default:(0,a.w5)((()=>[tl])),_:1}),(0,a._)("div",al,[(0,a.Wm)(q,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(b.value)+" ",1),r.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",nl,sl))])),_:1}),(0,a.Wm)(N,{align:"evenly",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{color:"positive",disabled:!r.value,label:"View",onClick:l[0]||(l[0]=e=>V()),"no-caps":""},null,8,["disabled"]),(0,a.Wm)(m,{color:"positive",disabled:!r.value,label:"Download",onClick:l[1]||(l[1]=e=>y()),"no-caps":""},null,8,["disabled"]),(0,a.Wm)(m,{color:"positive",label:"Upload",onClick:l[2]||(l[2]=e=>_()),"no-caps":""})])),_:1})])),_:1})]),(0,a.Wm)(h,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[W]])])),default:(0,a.w5)((()=>[il])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(N,{align:"right",class:"text-primary"}),(0,a._)("p",null,(0,o.zw)(JSON.stringify((0,n.SU)(t).state.nodeDescriptors[(0,n.SU)(t).state.selected_node],null,"  ")),1)])),_:1}),(0,a.Wm)(N,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{color:"positive",label:"Close"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(h,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[W]])])),default:(0,a.w5)((()=>[(0,a._)("div",dl," Download "+(0,o.zw)(v.value),1)])),_:1}),(0,a.Wm)(N,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{color:"positive",label:"Download",onClick:l[4]||(l[4]=e=>f(v.value))},null,512),[[W,2]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(h,{modelValue:i.value,"onUpdate:modelValue":l[8]||(l[8]=e=>i.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{style:{"min-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[W]])])),default:(0,a.w5)((()=>[rl])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[ul,ml])),_:1}),(0,a.Wm)(x,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[cl,(0,a._)("div",pl,[(0,a.Uk)(" Module name: "+(0,o.zw)((0,n.SU)(t).state.nodes[(0,n.SU)(t).state.selected_node].moduleName),1),vl,(0,a.Uk)(" Module identifier: "+(0,o.zw)((0,n.SU)(t).state.nodes[(0,n.SU)(t).state.selected_node].moduleIdentifier),1),bl,(0,a.Uk)(" Module version: "+(0,o.zw)((0,n.SU)(t).state.nodes[(0,n.SU)(t).state.selected_node].moduleVersion),1),gl])])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[fl])),_:1}),(0,a.Wm)(N,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{color:"positive",label:"Upload",onClick:l[7]||(l[7]=e=>w())},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])}}};var _l=t(4974);const Vl=yl,Nl=Vl;q()(yl,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QCardActions:_.Z,QFile:_l.Z}),q()(yl,"directives",{ClosePopup:V.Z});const ql={class:"text-h6"},hl={key:0,class:"text-h6"},xl={class:"q-pa-xs row"},Wl={class:"q-pa-xs row"},Sl=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Variables descriptor"),(0,a._)("br")],-1),kl={class:"text-body2"},Ul={class:"q-pa-xs row"},Il=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Stored event"),(0,a._)("br")],-1),Cl={class:"text-body2"},Tl="EventVariablesdialog",Zl={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIndex:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.Z)(),i=(0,a.f3)("store"),d=(0,n.iH)(),r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)(!1),p=(0,n.iH)(!1),v=e,b=l,g=(0,a.Fl)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.YP)(g,(()=>{console.log(Tl+": WATCH model"),r.value=!1,c.value=!1})),(0,a.YP)(v.nodeNumber,(()=>{console.log(Tl+": - watch nodeNumber")})),(0,a.YP)(v.eventIndex,(()=>{console.log(Tl+": - watch eventIndex"),v.eventIndex&&(i.state.selected_event_index=v.eventIndex,console.log(Tl+": selected_event_index: "+JSON.stringify(i.state.selected_event_index)))})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(0,a.ic)((()=>{console.log(Tl+": onUpdated"),v.nodeNumber&&v.eventIndex&&(console.log(Tl+": onUpdated - nodeNumber "+v.nodeNumber),void 0!=i.state.nodeDescriptors[v.nodeNumber]?(d.value=i.state.nodeDescriptors[v.nodeNumber].eventVariables,u.value=!1):(d.value={},r.value=!0,u.value=!0),f(),i.state.selected_event_index=v.eventIndex)}));const f=()=>{console.log(Tl+": checkFileLoad"),1!=i.state.loadFile_notification_raised[v.nodeNumber]&&("Unknown"==i.state.nodes[v.nodeNumber].moduleName?(t.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[v.nodeNumber]=!0):void 0!=i.state.nodes[v.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[v.nodeNumber]&&(t.notify({message:"Failed to load module file "+i.state.nodes[v.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[v.nodeNumber]=!0),i.state.loadFile_notification_raised[v.nodeNumber]&&console.log(Tl+": checkLoadFile notification raised"))},w=()=>{console.log(Tl+": clickToggleVariablesDescriptor"),c.value?c.value=!1:c.value=!0},y=()=>{console.log(Tl+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},_=()=>{console.log(Tl+": clickToggleStoredEvent"),p.value=!p.value},V=()=>{console.log(Tl+": clickUpdateModuleDescriptor"),m.value=!0};return(l,t)=>{const s=(0,a.up)("q-btn"),b=(0,a.up)("q-banner"),f=(0,a.up)("q-card-section"),N=(0,a.up)("q-separator"),q=(0,a.up)("q-card"),h=(0,a.up)("q-card-actions"),x=(0,a.up)("q-dialog"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(x,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=e=>g.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.Wm)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[0]||(t[0]=e=>V())}),(0,a.wy)((0,a.Wm)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[W]])])),default:(0,a.w5)((()=>[(0,a._)("div",ql," Event Variables for event : "+(0,o.zw)((0,n.SU)(i).getters.event_name(v.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{action:(0,a.w5)((()=>[(0,a.Wm)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[1]||(t[1]=e=>V())})])),default:(0,a.w5)((()=>[u.value?((0,a.wg)(),(0,a.iD)("div",hl," *** Descriptor not loaded for this node *** ")):(0,a.kq)("",!0)])),_:1}),(0,a._)("div",xl,[(0,a.Wm)((0,n.SU)(Ge),{configuration:(0,n.SU)(i).state.nodeDescriptors[(0,n.SU)(i).state.selected_node].eventVariables,nodeNumber:e.nodeNumber,eventIndex:e.eventIndex,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIndex","eventIdentifier"])]),(0,a.Wm)(N),r.value?((0,a.wg)(),(0,a.j4)(f,{key:0,class:"q-pa-xs row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(i).state.nodes[v.nodeNumber].parameters[5],(e=>((0,a.wg)(),(0,a.j4)((0,n.SU)(ll),{eventVariableIndex:e,nodeNumber:v.nodeNumber,eventIndex:v.eventIndex,key:e},null,8,["eventVariableIndex","nodeNumber","eventIndex"])))),128)),(0,a.Wm)(N)])),_:1})):(0,a.kq)("",!0),c.value?((0,a.wg)(),(0,a.j4)(f,{key:1,class:"q-pa-xs"},{default:(0,a.w5)((()=>[(0,a._)("div",Wl,[Sl,(0,a._)("div",kl,[(0,a._)("pre",null,(0,o.zw)(d.value),1)])]),(0,a.Wm)(N)])),_:1})):(0,a.kq)("",!0),p.value?((0,a.wg)(),(0,a.j4)(f,{key:2,class:"q-pa-xs"},{default:(0,a.w5)((()=>[(0,a._)("div",Ul,[Il,(0,a._)("div",Cl,[(0,a._)("pre",null,(0,o.zw)((0,n.SU)(i).state.nodes[v.nodeNumber].storedEvents[v.eventIndex]),1)])]),(0,a.Wm)(N)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(h,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{flat:"",label:"Toggle stored event view",onClick:t[2]||(t[2]=e=>_())}),(0,a.Wm)(s,{flat:"",label:"Toggle variable descriptor view",onClick:t[3]||(t[3]=e=>w())}),(0,a.Wm)(s,{flat:"",label:"Toggle raw view",onClick:t[4]||(t[4]=e=>y())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)((0,n.SU)(Nl),{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value=e)},null,8,["modelValue"])],64)}}};var Ql=t(5869);const Dl=Zl,El=Dl;q()(Zl,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QSeparator:Ql.Z,QCardActions:_.Z}),q()(Zl,"directives",{ClosePopup:V.Z});const Bl={class:"text-h6"},Hl={class:"full-width"},zl="EventsListByNode",Fl={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const l=(0,a.f3)("store"),t=(0,n.iH)([]),s=(0,n.iH)(!1),i=(0,n.iH)(!1),d=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(),c=(0,n.iH)(""),p=(0,n.iH)(0),v=(0,n.iH)(0),b=(0,n.iH)(0);(0,n.iH)();const g=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventIndex",field:"eventIndex",required:!0,label:"Event index",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],f=(0,a.Fl)((()=>l.state.selected_node));(0,a.YP)(f,(()=>{console.log(zl+": WATCH selected_node"),V()}));const w=(0,a.Fl)((()=>Object.values(l.state.nodes[l.state.selected_node].storedEvents)));(0,a.YP)(w,(()=>{console.log(zl+": WATCH nodeEvents"),V()}));const y=(0,a.Fl)((()=>Object.values(l.state.busEvents)));(0,a.YP)(y,(()=>{console.log(zl+": WATCH busEvents"),V()}));const _=(0,a.Fl)((()=>l.state.layout.eventDetails));(0,a.YP)(_,(()=>{console.log(zl+": WATCH eventDetails"),V()}));const V=()=>{console.log(zl+": update_rows "+l.state.selected_node),t.value=[];var e=Object.values(l.state.nodes[l.state.selected_node].storedEvents);e.forEach((e=>{var a=parseInt(e.eventIdentifier.substr(0,4),16),n=parseInt(e.eventIdentifier.substr(4,4),16);let o={};o["eventIdentifier"]=e.eventIdentifier,o["eventName"]=l.getters.event_name(e.eventIdentifier),o["eventIndex"]=e.eventIndex,o["nodeNumber"]=a,o["eventNumber"]=n,o["eventType"]=0==a?"short":"long",o["storedEvent"]=!0,t.value.push(o)}));var a=Object.values(l.state.busEvents);a.forEach((a=>{if(a.nodeNumber==l.state.selected_node){var n=!1,o=a.eventIdentifier;if("short"==a.type&&(o="0000"+o.substr(4,4)),e.forEach((e=>{o==e.eventIdentifier&&(n=!0)})),0==n){let e={};e["eventIdentifier"]=o,e["eventName"]=l.getters.event_name(o),e["nodeNumber"]=a.nodeNumber,e["eventNumber"]=a.eventNumber,e["eventType"]=a.type,e["storedEvent"]=!1,t.value.push(e)}}})),t.value.sort((function(e,l){return e.eventIdentifier<l.eventIdentifier?-1:1}))},N=e=>{console.log(zl+": readEventVariables - eventIndex "+e),l.methods.request_all_event_variables(l.state.selected_node,e,100,l.state.nodes[l.state.selected_node].parameters[5])};(0,a.wF)((()=>{console.log(zl+": onBeforeMount"),V()})),(0,a.bv)((()=>{})),(0,a.ic)((()=>{}));const q=e=>{console.log(zl+": clickEventName "+e),c.value=e,m.value=l.getters.event_name(e),s.value=!0},h=e=>{console.log(zl+": clickDelete"),d.value=!0,c.value=e},W=()=>{console.log(zl+": clickRefresh"),l.methods.request_all_node_events(l.state.selected_node)},S=(e,l,t)=>{p.value=e,v.value=l,c.value=t,console.log(zl+": clickTest: event "+p.value+" "+v.value+" "+c.value),i.value=!0},k=(e,t)=>{N(e),b.value=e,c.value=t,console.log(zl+": clickVariables: node, index "+l.state.selected_node+" "+b.value),u.value=!0},U=e=>{console.log(zl+": clickTeach"),c.value=e,r.value=!0};return(e,m)=>{const p=(0,a.up)("q-btn"),f=(0,a.up)("q-banner"),w=(0,a.up)("q-td"),y=(0,a.up)("q-tr"),_=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(f,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",color:"white",size:"sm",label:"Refresh",onClick:m[0]||(m[0]=e=>W())})])),default:(0,a.w5)((()=>[(0,a._)("div",Bl," Events for node : "+(0,o.zw)((0,n.SU)(l).getters.node_name((0,n.SU)(l).state.selected_node)),1)])),_:1}),(0,a._)("div",Hl,[(0,a.Wm)(_,{class:"my-sticky-header-table",bordered:"",dense:"",rows:t.value,columns:g,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.w5)((e=>[(0,a.Wm)(y,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{key:"eventIdentifier",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventIdentifier),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventName),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"nodeNumber",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventNumber",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventNumber),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventIndex",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventIndex),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventType",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventType),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"actions",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Name",onClick:l=>q(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{disabled:!e.row.storedEvent,color:"primary",size:"md",flat:"",label:"Variables",onClick:l=>k(e.row.eventIndex,e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Teach",onClick:l=>U(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Test",onClick:l=>S(e.row.nodeNumber,e.row.eventNumber,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{flat:"",size:"md",color:"negative",label:"Delete",onClick:l=>h(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])]),(0,a.Wm)((0,n.SU)(E),{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=e=>s.value=e),eventIdentifier:c.value},null,8,["modelValue","eventIdentifier"]),(0,a.Wm)((0,n.SU)($),{modelValue:r.value,"onUpdate:modelValue":m[2]||(m[2]=e=>r.value=e),eventIdentifier:c.value},null,8,["modelValue","eventIdentifier"]),(0,a.Wm)((0,n.SU)(x),{modelValue:i.value,"onUpdate:modelValue":m[3]||(m[3]=e=>i.value=e),sendingNodeNumber:(0,n.SU)(l).state.selected_node,eventNumber:v.value,eventIdentifier:c.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.Wm)((0,n.SU)(I),{modelValue:d.value,"onUpdate:modelValue":m[4]||(m[4]=e=>d.value=e),nodeNumber:(0,n.SU)(l).state.selected_node,eventIdentifier:c.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.Wm)((0,n.SU)(El),{modelValue:u.value,"onUpdate:modelValue":m[5]||(m[5]=e=>u.value=e),nodeNumber:(0,n.SU)(l).state.selected_node,eventIndex:b.value,eventIdentifier:c.value},null,8,["modelValue","nodeNumber","eventIndex","eventIdentifier"])])}}};var jl=t(8186),Ol=t(3884);const Pl=Fl,Ml=Pl;q()(Fl,"components",{QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QTr:jl.Z,QTd:Ol.Z});const Al={class:"text-h6"},Ll={key:0,class:"text-h6"},Yl={key:0},$l={class:"q-gutter-sm"},Rl={key:0},Jl=(0,a._)("div",{class:"text-h4"},"Node Number",-1),Kl=(0,a._)("div",{class:"text-h6"},"Consumed events will need the number of the node that produces the event",-1),Gl=(0,a._)("div",{class:"text-h6"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),Xl=(0,a._)("div",{class:"text-h4"},"Event Number",-1),et={key:1},lt=(0,a._)("div",{class:"text-h4"},"Device Number",-1),tt={key:2},at=(0,a._)("div",{class:"text-h6"},"Once event is added, select edit for the event from the event list to modify event variables",-1),nt="AddEventDialog",ot={__name:"AddEventDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(),i=(0,n.iH)(),d=(0,n.iH)(!0);var r=(0,n.iH)();const u=e,m=l,c=(0,a.Fl)({get(){return u.modelValue},set(e){m("update:modelValue",e)}});(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(0,a.ic)((()=>{console.log(nt+" OnUpdated"),0==t.state.nodes[t.state.selected_node].parameters[4]&&d.value,s.value=null,i.value=null,r.value=null,0==t.state.nodes[t.state.selected_node].parameters[4]&&(d.value=!1,console.log(nt+" OnUpdated - addEvent disabled "))}));const p=()=>{var e=v();"short"==r.value&&(s.value=0);var l=parseInt(s.value).toString(16).toUpperCase().padStart(4,0)+parseInt(i.value).toString(16).toUpperCase().padStart(4,0);console.log("createEvent - index "+e+" eventIdentifier "+l),t.methods.teach_event(t.state.selected_node,l,e)},v=()=>{for(var e=t.state.nodes[t.state.selected_node].parameters[4],l=null,a=1;a<e;a++)if(console.log("i "+a),!t.state.nodes[t.state.selected_node].storedEvents[a]){l=a+1;break}return l};return(e,l)=>{const u=(0,a.up)("q-btn"),m=(0,a.up)("q-banner"),v=(0,a.up)("q-card-section"),b=(0,a.up)("q-radio"),g=(0,a.up)("q-input"),f=(0,a.up)("q-card-actions"),w=(0,a.up)("q-card"),y=(0,a.up)("q-dialog"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.w5)((()=>[(0,a._)("div",Al," Add event for node "+(0,o.zw)((0,n.SU)(t).getters.node_name((0,n.SU)(t).state.selected_node)),1)])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[0==d.value?((0,a.wg)(),(0,a.iD)("div",Ll," This module does not support any stored events ")):(0,a.kq)("",!0)])),_:1}),d.value?((0,a.wg)(),(0,a.iD)("div",Yl,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",$l,[(0,a.Wm)(b,{modelValue:(0,n.SU)(r),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.dq)(r)?r.value=e:r=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.Wm)(b,{modelValue:(0,n.SU)(r),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.dq)(r)?r.value=e:r=e),val:"short",label:"Short event"},null,8,["modelValue"])])])),_:1}),"long"==(0,n.SU)(r)?((0,a.wg)(),(0,a.iD)("div",Rl,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[Jl])),_:1}),(0,a.Wm)(v,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[Kl,Gl])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[Xl])),_:1}),(0,a.Wm)(v,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),"short"==(0,n.SU)(r)?((0,a.wg)(),(0,a.iD)("div",et,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[lt])),_:1}),(0,a.Wm)(v,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),null!=(0,n.SU)(r)?((0,a.wg)(),(0,a.iD)("div",tt,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[at])),_:1})])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a.Wm)(f,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[d.value?(0,a.wy)(((0,a.wg)(),(0,a.j4)(u,{key:0,flat:"",label:"Add Event",onClick:l[5]||(l[5]=e=>p())},null,512)),[[_]]):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var st=t(7991);const it=ot,dt=it;q()(ot,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QRadio:st.Z,QInput:Q.Z,QCardActions:_.Z}),q()(ot,"directives",{ClosePopup:V.Z});const rt={class:"text-h6"},ut=(0,a._)("div",{class:"text-h6"},"Are you sure you want to delete this node?",-1),mt="DeleteNodeDialog",ct={__name:"DeleteNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=e,i=l,d=(0,a.Fl)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log(mt+": deleting node "+s.nodeNumber),t.methods.remove_node(s.nodeNumber),t.eventBus.emit("NODE_DELETED_EVENT",s.nodeNumber)};return(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(e,l)=>{const s=(0,a.up)("q-btn"),i=(0,a.up)("q-banner"),u=(0,a.up)("q-card-section"),m=(0,a.up)("q-card-actions"),c=(0,a.up)("q-card"),p=(0,a.up)("q-dialog"),v=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(p,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.w5)((()=>[(0,a._)("div",rt," Delete for node "+(0,o.zw)((0,n.SU)(t).getters.node_name((0,n.SU)(t).state.selected_node)),1)])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[ut])),_:1}),(0,a.Wm)(m,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(s,{flat:"",colour:"positive",label:"Yes",onClick:l[0]||(l[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},pt=ct,vt=pt;q()(ct,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QCardActions:_.Z}),q()(ct,"directives",{ClosePopup:V.Z});const bt={class:"text-h6"},gt={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(),i=e,d=l,r=(0,a.Fl)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=()=>{console.log("new node name: "+s.value),t.setters.node_name(i.nodeNumber,s.value)};return(0,a.ic)((()=>{console.log("NameNodeDialog onUpdated"),t.state.layout.nodeDetails[i.nodeNumber]&&(s.value=t.state.layout.nodeDetails[i.nodeNumber].name)})),(l,t)=>{const n=(0,a.up)("q-btn"),i=(0,a.up)("q-banner"),d=(0,a.up)("q-input"),m=(0,a.up)("q-card-section"),c=(0,a.up)("q-card-actions"),p=(0,a.up)("q-card"),v=(0,a.up)("q-dialog"),b=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(v,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[b]])])),default:(0,a.w5)((()=>[(0,a._)("div",bt," Edit name for node : "+(0,o.zw)(e.nodeNumber),1)])),_:1}),(0,a.Wm)(m,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",label:"Accept",onClick:t[1]||(t[1]=e=>u())},null,512),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ft=gt,wt=ft;q()(gt,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QInput:Q.Z,QCardActions:_.Z}),q()(gt,"directives",{ClosePopup:V.Z});const yt={__name:"NodeParameter",props:{Name:String,Value:Number},setup(e){return(l,t)=>{const n=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(n,{class:"q-pa-xs",flat:""},{default:(0,a.w5)((()=>[(0,a._)("b",null,(0,o.zw)(e.Name),1),(0,a.Uk)(" : "+(0,o.zw)(e.Value),1)])),_:1})}}},_t=yt,Vt=_t;q()(yt,"components",{QCard:g.Z});const Nt={class:"text-h6"},qt={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(!1),i=e,d=l,r=(0,a.Fl)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,a.Fl)((()=>t.state.nodes[i.nodeNumber].moduleDescriptorFilename));(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const m=()=>{console.log(name+": clickUpdateModuleDescriptor"),s.value=!0};return(e,l)=>{const d=(0,a.up)("q-btn"),c=(0,a.up)("q-banner"),p=(0,a.up)("q-card-section"),v=(0,a.up)("q-card"),b=(0,a.up)("q-dialog"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(b,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{style:{"min-width":"700px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[0]||(l[0]=e=>m())}),(0,a.wy)((0,a.Wm)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.w5)((()=>[(0,a._)("div",Nt," Parameter Information for "+(0,o.zw)((0,n.SU)(t).getters.node_name(i.nodeNumber)),1)])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,n.SU)(Vt),{Name:"Node Number",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Events Currently Stored",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Manufacturer",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Module",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Module Identifier",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Producer",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Consumer",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Consume own Events",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"VLCB",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Node Variables",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Events Supported",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Event Variables",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"CPU Name",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Interface",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Firmware Version",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,n.SU)(t).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Beta Version",Value:(0,n.SU)(t).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,a.Wm)((0,n.SU)(Vt),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)((0,n.SU)(Nl),{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e)},null,8,["modelValue"])],64)}}},ht=qt,xt=ht;q()(qt,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z}),q()(qt,"directives",{ClosePopup:V.Z});const Wt={__name:"NodeVariableBit",props:{NodeNumber:{type:Number,required:!0},VariableIndex:{type:Number,required:!0},Bit:{type:Number,required:!0},Name:{type:String,required:!1},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e;console.log("Node Variable Bit : "+l.NodeNumber);l.Name?l.Name:l.VariableIndex;const t=(0,a.f3)("store"),o=(0,n.iH)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.Fl)({get(){return t.state.nodes[l.NodeNumber].nodeVariables[l.VariableIndex]},set(e){l.learn?t.methods.update_node_variable_in_learn_mode(l.NodeNumber,l.VariableIndex,e):t.methods.update_node_variable(l.NodeNumber,l.VariableIndex,e)}});(0,a.YP)(i,((e,a)=>{o.value=!!(t.state.nodes[l.NodeNumber].nodeVariables[l.VariableIndex]&s[l.Bit])}));const d=()=>{console.log("NodeVariableBit update_checked");let e=i.value;o.value?(e|=s[l.Bit],console.log(`bit ${s[l.Bit]} set, new byte value ${e}`)):(e&=~s[l.Bit],console.log(`bit ${s[l.Bit]} cleared, new byte value ${e}`)),l.learn?t.methods.update_node_variable_in_learn_mode(l.NodeNumber,l.VariableIndex,e):t.methods.update_node_variable(l.NodeNumber,l.VariableIndex,e)};return(0,a.bv)((()=>{const e=!!(t.state.nodes[l.NodeNumber].nodeVariables[l.VariableIndex]&s[l.Bit]);console.log("NodeVariableBit onMounted: Checked"+e),o.value=e})),(l,t)=>{const n=(0,a.up)("q-checkbox");return(0,a.wg)(),(0,a.j4)(n,{"min-width":"100",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),label:e.Name,onClick:d,"right-label":""},null,8,["modelValue","label"])}}},St=Wt,kt=St;q()(Wt,"components",{QCheckbox:J.Z});const Ut={class:"text-h6"},It={class:"text-subtitle2"},Ct={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},VariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""}},setup(e){const l=(0,a.f3)("store");(0,n.iH)();var t=(0,n.iH)();const s=e,i=(0,a.Fl)((()=>l.state.nodes[s.nodeNumber].nodeVariables));function d(){for(var e in t.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=Ne(s.bitCollection[e].overload,l);if(a){var n={bitPosition:s.bitCollection[e].bitPosition,label:a};t.value.push(n)}}else s.bitCollection[e].label&&t.value.push(s.bitCollection[e])}return(0,a.YP)(i,(()=>{d()})),(0,a.bv)((()=>{console.log("NodeVariableBitArray onMounted:"),console.log(`NodeVariableBitArray: props: ${JSON.stringify(s)}`),d()})),(s,i)=>{const d=(0,a.up)("q-card-section"),r=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(r,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",Ut,(0,o.zw)(e.displayTitle),1),(0,a._)("div",It,(0,o.zw)(e.displaySubTitle),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(t),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.Wm)((0,n.SU)(kt),{NodeNumber:(0,n.SU)(l).state.selected_node,VariableIndex:e.VariableIndex,Bit:t.bitPosition,Name:t.label},null,8,["NodeNumber","VariableIndex","Bit","Name"])])))),128))])),_:1})])),_:1})}}},Tt=Ct,Zt=Tt;q()(Ct,"components",{QCard:g.Z,QCardSection:y.Z});const Qt={class:"text-h6"},Dt={class:"text-subtitle2"},Et={__name:"NodeVariableBitSingle",props:{VariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},Bit:{type:Number,required:!0},Name:{type:String,required:!1},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=(0,a.f3)("store");return(0,a.bv)((()=>{console.log("NodeVariableBitSingle onMounted")})),(t,s)=>{const i=(0,a.up)("q-card-section"),d=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(d,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",Qt,(0,o.zw)(e.displayTitle),1),(0,a._)("div",Dt,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)((0,n.SU)(kt),{NodeNumber:(0,n.SU)(l).state.selected_node,VariableIndex:e.VariableIndex,Bit:e.Bit,learn:e.learn,Name:e.Name},null,8,["NodeNumber","VariableIndex","Bit","learn","Name"])])),_:1})])),_:1})}}},Bt=Et,Ht=Bt;q()(Et,"components",{QCard:g.Z,QCardSection:y.Z});const zt={class:"text-h6"},Ft={class:"text-subtitle2"},jt={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:65025},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,t=(l.name&&l.name,(0,a.f3)("store")),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,n.iH)(),r=(0,a.Fl)((()=>(t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]));(0,a.YP)(r,(()=>{d.value=r.value}));const u=e=>{e<l.min||e>l.max?(console.log(`Invalid Value : ${e}`),s.value=!0,i.value="Invalid Value"):(console.log(`Value Ok : ${e}`),s.value=!1,i.value="",t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexHigh,e>>8),t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexLow,255&e))};return(0,a.bv)((()=>{d.value=(t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow],console.log(`NodeVariableDual ${d.value}`)})),(l,t)=>{const n=(0,a.up)("q-input"),r=(0,a.up)("q-card-section"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",zt,(0,o.zw)(e.displayTitle),1),(0,a._)("div",Ft,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{mask:"#####",debounce:"1000",hint:e.hint,modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["hint","modelValue","error-message","error"])])),_:1})])),_:1})}}},Ot=jt,Pt=Ot;q()(jt,"components",{QCard:g.Z,QCardSection:y.Z,QInput:Q.Z});const Mt={class:"q-pa-xs row"},At={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},Lt={class:"GroupTitle q-py-none"},Yt="NodeVariableGroup",$t={__name:"NodeVariableGroup",props:{configuration:Object,level:{Number,default:-9}},setup(e){(0,a.f3)("store");const l=(0,n.iH)("nvGroup");return(0,a.bv)((()=>{console.log(Yt+": onMounted")})),(0,a.ic)((()=>{console.log(Yt+": onUpdated")})),(t,s)=>((0,a.wg)(),(0,a.iD)("div",Mt,[(0,a._)("div",At,[(0,a._)("div",Lt,(0,o.zw)(e.configuration.displayTitle),1),(0,a.Wm)((0,n.SU)(ha),{configuration:e.configuration.groupItems,source:l.value,level:e.level+1},null,8,["configuration","source","level"])])]))}},Rt=(0,ve.Z)($t,[["__scopeId","data-v-3bdeec26"]]),Jt=Rt,Kt={class:"text-h6"},Gt={class:"text-subtitle2"},Xt={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.f3)("store")),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,n.iH)(),r=(0,a.Fl)((()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.YP)(r,(()=>{d.value=r.value}));const u=e=>{e<l.min||e>l.max?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,e))};return(0,a.bv)((()=>{d.value=r.value})),(l,t)=>{const n=(0,a.up)("q-input"),r=(0,a.up)("q-card-section"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",Kt,(0,o.zw)(e.displayTitle),1),(0,a._)("div",Gt,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}},ea=Xt,la=ea;q()(Xt,"components",{QCard:g.Z,QCardSection:y.Z,QInput:Q.Z});const ta={class:"text-h6"},aa={class:"text-subtitle2"},na={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},learn:{type:Boolean,default:!1}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.f3)("store")),s=(0,n.iH)(),i=(0,a.Fl)((()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.YP)(i,(()=>{s.value=i.value&l.bitMask,console.log("NodeVariableSelect watch variableValue "+s.value+" bitMask "+l.bitMask)}));const d=e=>{console.log(`NodeVariableSelect update_variable ${e.value}`);let a=i.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,console.log(`NodeVariableSelect: byteValue ${a}`),t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,a)};return(0,a.bv)((()=>{console.log("NodeVariableSelect: onMounted"),s.value=i.value&l.bitMask,console.log(`NodeVariableSelect: props: ${JSON.stringify(l)}`)})),(l,t)=>{const n=(0,a.up)("q-select"),i=(0,a.up)("q-card-section"),r=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(r,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",ta,(0,o.zw)(e.displayTitle),1),(0,a._)("div",aa,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},oa=na,sa=oa;q()(na,"components",{QCard:g.Z,QCardSection:y.Z,QSelect:A.Z});const ia={class:"text-h6"},da={class:"text-subtitle2"},ra={key:0},ua="NodeVariableSlider",ma={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.f3)("store")),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,a.Fl)((()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e}));let r=t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex];console.log(`NodeVariableSlider: bitMask : ${d.value}`);const u=(0,a.Fl)((()=>m.value?{height:"150px"}:{height:"120px"})),m=(0,a.Fl)((()=>{var e=!1;return l&&(e=!!l.configuration.outputOnWrite),e}));console.log(ua+": computed outputOnWrite: "+m.value),(0,a.YP)(m,(()=>{console.log(ua+": WATCH outputOnWrite: "+m.value)}));const c=(0,a.Fl)({get(){return(t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]&d.value)>>l.startBit},set(e){if(console.log(`OldByteValue : ${r}`),e<=l.max&&e>=l.min){console.log(`update_variable : ${e}`);let a=e;a<<=l.startBit,r|=a&d.value,r&=a|~d.value,s.value=!1,i.value="",t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r),console.log(`NewByteValue : ${r}`)}else console.log(`Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),p=e=>{s.value?console.log(`Invalid Value : ${e}`):console.log(`update_variable : ${e}`)};(0,a.ic)((()=>{})),(0,a.bv)((()=>{}));const v=()=>{console.log(ua+": clickTest"),t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r)};return(l,t)=>{const n=(0,a.up)("q-badge"),s=(0,a.up)("q-slider"),i=(0,a.up)("q-btn"),d=(0,a.up)("q-card-section"),r=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(r,{class:"q-ma-xs no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:(0,o.j5)(u.value),class:"no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a._)("div",ia,(0,o.zw)(e.displayTitle),1),(0,a._)("div",da,(0,o.zw)(e.displaySubTitle),1),(0,a.Wm)(n,{color:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(c.value*e.displayScale+e.displayOffset)+" "+(0,o.zw)(e.displayUnits),1)])),_:1}),(0,a.Wm)(s,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),max:e.max,min:e.min,onChange:p},null,8,["modelValue","max","min"]),m.value?((0,a.wg)(),(0,a.iD)("div",ra,[(0,a.Wm)(i,{dense:"",label:"Test",onClick:t[1]||(t[1]=e=>v()),"no-caps":""})])):(0,a.kq)("",!0)])),_:1},8,["style"])])),_:1})}}},ca=ma,pa=ca;q()(ma,"components",{QCard:g.Z,QCardSection:y.Z,QBadge:Ze.Z,QSlider:Qe.Z,QBtn:w.Z});const va={class:"no-padding no-margin"},ba={class:"no-padding no-margin row",style:{border:"1px solid grey"}},ga="NodeVariableTabsA",fa={__name:"NodeVariableTabs",props:{configuration:Object,level:{Number,default:-8}},setup(e){const l=e,t=(0,n.iH)(),o=(0,n.iH)(),s=((0,a.f3)("store"),(0,n.iH)("nvTabs"));(0,n.iH)("92vw");return(0,a.bv)((()=>{t.value=l.configuration.tabPanels,o.value=t.value[0].displayTitle})),(0,a.YP)(o,(()=>{console.log(ga+": WATCH selectedTab "+JSON.stringify(o.value))})),(0,a.ic)((()=>{})),(l,i)=>{const d=(0,a.up)("q-tab"),r=(0,a.up)("q-tabs"),u=(0,a.up)("q-tab-panel"),m=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.iD)("div",va,[(0,a.Wm)(r,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(m,{"keep-alive":"",modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=e=>o.value=e),class:"no-padding no-margin"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,(l=>((0,a.wg)(),(0,a.j4)(u,{key:l.displayTitle,name:l.displayTitle,class:"no-padding no-margin"},{default:(0,a.w5)((()=>[(0,a._)("div",ba,[(0,a.Wm)((0,n.SU)(ha),{configuration:l.items,source:s.value,level:e.level+1},null,8,["configuration","source","level"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}},wa=fa,ya=wa;q()(fa,"components",{QTabs:Oe.Z,QTab:Pe.Z,QTabPanels:Me.Z,QTabPanel:Ae.Z});const _a={class:"q-pa-xs row"},Va="NodeVariables",Na={__name:"NodeVariables",props:{configuration:Object,level:{Number,default:0},source:{String,default:"unsourced"}},setup(e){const l=e,t=(0,a.f3)("store");function o(e){var l=!0;return e.visibilityLogic&&(l=qe(e.visibilityLogic,t)),console.log(Va+": isVisible: "+l+" "+e.type),l}const s=(0,a.Fl)((()=>l.level));return(0,a.YP)(s,(()=>{console.log(Va+": watch source "+l.source+" level "+s.value)})),(0,a.wF)((()=>{console.log(Va+": onBeforeMount source "+l.source+" level "+l.level)})),(0,a.bv)((()=>{})),(0,a.ic)((()=>{console.log(Va+": onUpdated")})),(l,i)=>((0,a.wg)(),(0,a.iD)("div",_a,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.configuration,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},["NodeVariableBitArray"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Zt),{key:0,nodeNumber:(0,n.SU)(t).state.selected_node,VariableIndex:e.nodeVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,learn:!1},null,8,["nodeNumber","VariableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.kq)("",!0),"NodeVariableBitSingle"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ht),{key:1,NodeNumber:(0,n.SU)(t).state.selected_node,VariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,Bit:e.bit},null,8,["NodeNumber","VariableIndex","displayTitle","displaySubTitle","Bit"])):(0,a.kq)("",!0),"NodeVariableDual"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Pt),{key:2,NodeVariableIndexLow:e.nodeVariableIndexLow,NodeVariableIndexHigh:e.nodeVariableIndexHigh,NodeNumber:(0,n.SU)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle"])):(0,a.kq)("",!0),"NodeVariableGroup"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(Jt),{key:3,configuration:e,level:s.value},null,8,["configuration","level"])):(0,a.kq)("",!0),"NodeVariableNumber"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(la),{key:4,"node-number":(0,n.SU)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,"node-variable-index":e.nodeVariableIndex},null,8,["node-number","displayTitle","displaySubTitle","node-variable-index"])):(0,a.kq)("",!0),"NodeVariableSelect"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(sa),{key:5,nodeVariableIndex:e.nodeVariableIndex,nodeNumber:(0,n.SU)(t).state.selected_node,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options"])):(0,a.kq)("",!0),"NodeVariableSlider"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(pa),{key:6,"node-number":(0,n.SU)(t).state.selected_node,nodeVariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.kq)("",!0),"NodeVariableTabs"==e.type&&o(e)?((0,a.wg)(),(0,a.j4)((0,n.SU)(ya),{key:7,configuration:e,level:s.value},null,8,["configuration","level"])):(0,a.kq)("",!0)])))),128))]))}},qa=Na,ha=qa,xa={__name:"NodeVariableRaw",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,t=l.name?l.name:"Variable"+l.nodeVariableIndex,o=(0,a.f3)("store"),s=(0,n.iH)(!1),i=(0,n.iH)(""),d=(0,n.iH)(),r=(0,a.Fl)((()=>o.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.YP)(r,(()=>{d.value=r.value}));const u=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",o.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,e))};return(0,a.bv)((()=>{d.value=r.value})),(e,l)=>{const o=(0,a.up)("q-input"),r=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(r,{class:"q-pa-xs",flat:"",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{mask:"###",class:"bg-white",filled:"",label:(0,n.SU)(t),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})}}},Wa=xa,Sa=Wa;q()(xa,"components",{QCard:g.Z,QInput:Q.Z});const ka={class:"text-h6"},Ua={key:0,class:"text-h6"},Ia={key:1,class:"text-h6"},Ca={key:0,class:"q-pa-none row"},Ta={class:"q-pa-xs row"},Za=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Variables descriptor"),(0,a._)("br")],-1),Qa={class:"text-body2"},Da="NodevariablesDialog",Ea={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.Z)(),i=(0,a.f3)("store"),d=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)(!1),p=(0,n.iH)("nvDialog"),v=e,b=l,g=(0,a.Fl)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.YP)(g,(()=>{console.log(Da+": WATCH model"),r.value=!1,c.value=!1}));const f=(0,a.Fl)((()=>{var e=void 0;return v.nodeNumber&&void 0!=i.state.nodeDescriptors[v.nodeNumber]&&(e=i.state.nodeDescriptors[v.nodeNumber].nodeVariables),e}));(0,a.YP)(f,(()=>{console.log(Da+": WATCH variablesDescriptor"),void 0==f.value?(r.value=!0,d.value=!0):d.value=!1})),(0,a.wF)((()=>{console.log(Da+": onBeforeMount")})),(0,a.bv)((()=>{console.log(Da+": onMounted")})),(0,a.ic)((()=>{console.log(Da+": onUpdated"),v.nodeNumber&&(console.log("NodeVariableDialog onUpdated - nodeNumber "+v.nodeNumber),w(),0==i.state.nodes[v.nodeNumber].parameters[6]?u.value=!0:u.value=!1)}));const w=()=>{console.log(Da+": checkFileLoad"),void 0==i.state.loadFile_notification_raised[v.nodeNumber]&&("Unknown"==i.state.nodes[v.nodeNumber].moduleName?(t.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[v.nodeNumber]=!0):void 0!=i.state.nodes[v.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[v.nodeNumber]&&(t.notify({message:"Failed to load module file "+i.state.nodes[v.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[v.nodeNumber]=!0),i.state.loadFile_notification_raised[v.nodeNumber]&&console.log(Da+": checkLoadFile notification raised"))},y=()=>{console.log(Da+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},_=()=>{console.log(Da+": clickToggleNodeDescriptor"),c.value?c.value=!1:c.value=!0},V=()=>{console.log(Da+": clickUpdateModuleDescriptor"),m.value=!0};return(e,l)=>{const t=(0,a.up)("q-btn"),s=(0,a.up)("q-banner"),b=(0,a.up)("q-card-section"),w=(0,a.up)("q-card"),N=(0,a.up)("q-card-actions"),q=(0,a.up)("q-dialog"),h=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(q,{modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=e=>g.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.w5)((()=>[(0,a.Wm)(t,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[0]||(l[0]=e=>V())}),(0,a.wy)((0,a.Wm)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])])),default:(0,a.w5)((()=>[(0,a._)("div",ka," Node Variables for node : "+(0,o.zw)((0,n.SU)(i).getters.node_name((0,n.SU)(i).state.selected_node)),1)])),_:1})])),_:1}),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[d.value?((0,a.wg)(),(0,a.iD)("div",Ua," *** Descriptor not loaded for this node *** ")):(0,a.kq)("",!0),u.value?((0,a.wg)(),(0,a.iD)("div",Ia," this node has no variables to display ")):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)((0,n.SU)(ha),{configuration:(0,n.SU)(i).state.nodeDescriptors[(0,n.SU)(i).state.selected_node].nodeVariables,level:1,source:p.value},null,8,["configuration","source"]),r.value?((0,a.wg)(),(0,a.iD)("div",Ca,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(i).state.nodes[v.nodeNumber].parameters[6],(e=>((0,a.wg)(),(0,a.j4)((0,n.SU)(Sa),{"node-variable-index":e,"node-number":v.nodeNumber,key:e},null,8,["node-variable-index","node-number"])))),128))])):(0,a.kq)("",!0),c.value?((0,a.wg)(),(0,a.j4)(b,{key:1,class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",Ta,[Za,(0,a._)("div",Qa,[(0,a._)("pre",null,(0,o.zw)(f.value),1)])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(N,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{flat:"",label:"Toggle variables descriptor view",onClick:l[1]||(l[1]=e=>_())}),(0,a.Wm)(t,{flat:"",label:"Toggle raw view",onClick:l[2]||(l[2]=e=>y())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)((0,n.SU)(Nl),{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value=e)},null,8,["modelValue"])],64)}}},Ba=Ea,Ha=Ba;q()(Ea,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QCardActions:_.Z}),q()(Ea,"directives",{ClosePopup:V.Z});const za=(0,a._)("div",{class:"text-h6"},"Node parameters are still loading",-1),Fa=(0,a._)("div",{class:"text-h6"},"Please close this dialog and try again",-1),ja={__name:"parametersLoadingDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.f3)("store");const t=e,n=l,o=(0,a.Fl)({get(){return t.modelValue},set(e){n("update:modelValue",e)}});return(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(e,l)=>{const t=(0,a.up)("q-card-section"),n=(0,a.up)("q-btn"),s=(0,a.up)("q-card-actions"),i=(0,a.up)("q-card"),d=(0,a.up)("q-dialog"),r=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(d,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[za,Fa])),_:1}),(0,a.Wm)(s,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Oa=ja,Pa=Oa;q()(ja,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QCardActions:_.Z,QBtn:w.Z}),q()(ja,"directives",{ClosePopup:V.Z});const Ma=(0,a._)("div",{class:"text-h6"}," VLCB Diagnostics ",-1),Aa={key:0,class:"q-pa-xs row"},La=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Diagnostics"),(0,a._)("br")],-1),Ya={class:"text-body2"},$a="VLCBDiagnosticsDialog",Ra={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(!1),i=(0,n.iH)([]),d=e,r=l,u=(0,a.Fl)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.YP)(u,(()=>{console.log($a+": WATCH model")}));const m=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],c=(0,a.Fl)((()=>{var e=void 0;return t.state.selected_node&&t.state.nodes[t.state.selected_node].services[t.state.selected_service_index]&&(e=Object.values(t.state.nodes[t.state.selected_node].services[t.state.selected_service_index].diagnostics)),e}));(0,a.YP)(c,(()=>{c.value&&p()}));const p=()=>{i.value=[],c.value.forEach((e=>{let l={};l["diagnosticCode"]=e.DiagnosticCode,l["diagnosticValue"]=e.DiagnosticValue,l["diagnosticName"]=e.DiagnosticName,i.value.push(l)}))};(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const v=()=>{console.log($a+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(e,l)=>{const d=(0,a.up)("q-btn"),r=(0,a.up)("q-banner"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-td"),b=(0,a.up)("q-tr"),g=(0,a.up)("q-table"),f=(0,a.up)("q-card"),w=(0,a.up)("q-card-actions"),y=(0,a.up)("q-dialog"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.w5)((()=>[Ma])),_:1})])),_:1}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"no-margin q-pa-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:m,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.w5)((e=>[(0,a.Wm)(b,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{key:"diagnosticCode",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.diagnosticCode),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"diagnosticValue",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.diagnosticValue),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"diagnosticName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.diagnosticName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,a.wg)(),(0,a.iD)("div",Aa,[La,(0,a._)("div",Ya,[(0,a._)("pre",null,(0,o.zw)((0,n.SU)(t).state.nodes[(0,n.SU)(t).state.selected_node].services[(0,n.SU)(t).state.selected_service_index].diagnostics),1)])])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(w,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{flat:"",label:"Toggle diagnostics json",onClick:l[0]||(l[0]=e=>v())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ja=Ra,Ka=Ja;q()(Ra,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QTr:jl.Z,QTd:Ol.Z,QCardActions:_.Z}),q()(Ra,"directives",{ClosePopup:V.Z});const Ga=(0,a._)("div",{class:"text-h6"}," VLCB Services ",-1),Xa={key:0,class:"q-pa-xs row"},en=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Services"),(0,a._)("br")],-1),ln={class:"text-body2"},tn="VLCBServicesDialog",an={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(!1),i=(0,n.iH)(!1),d=(0,n.iH)([]),r=e,u=l,m=(0,a.Fl)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.YP)(m,(()=>{}));const c=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"diagnostics",field:"diagnostics",required:!0,label:"",align:"left"}],p=(0,a.Fl)((()=>{var e={};return t.state.selected_node&&(e=Object.values(t.state.nodes[t.state.selected_node].services)),e}));(0,a.YP)(p,(()=>{v()}));const v=()=>{d.value=[],p.value.forEach((e=>{let l={};l["serviceIndex"]=e.ServiceIndex,l["serviceType"]=e.ServiceType,l["serviceName"]=e.ServiceName,d.value.push(l)}))};(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const b=()=>{console.log(tn+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},g=e=>{console.log(`clickiagnostics: index ${e}`),t.methods.request_diagnostics(t.state.selected_node,e),t.state.selected_service_index=e,i.value=!0};return(e,l)=>{const r=(0,a.up)("q-btn"),u=(0,a.up)("q-banner"),p=(0,a.up)("q-card-section"),v=(0,a.up)("q-td"),f=(0,a.up)("q-tr"),w=(0,a.up)("q-table"),y=(0,a.up)("q-card"),_=(0,a.up)("q-card-actions"),V=(0,a.up)("q-dialog"),N=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(V,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.w5)((()=>[Ga])),_:1})])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"no-margin q-pa-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"vlcb-services-table",dense:"",rows:d.value,columns:c,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{key:"serviceIndex",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.serviceIndex),1)])),_:2},1032,["props"]),(0,a.Wm)(v,{key:"serviceType",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.serviceType),1)])),_:2},1032,["props"]),(0,a.Wm)(v,{key:"serviceName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.serviceName),1)])),_:2},1032,["props"]),(0,a.Wm)(v,{key:"diagnostics",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{color:"primary",flat:"",rounded:"",label:"diagnostics",onClick:l=>g(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,a.wg)(),(0,a.iD)("div",Xa,[en,(0,a._)("div",ln,[(0,a._)("pre",null,(0,o.zw)((0,n.SU)(t).state.nodes[(0,n.SU)(t).state.selected_node].services),1)])])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(_,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{flat:"",label:"Toggle services json",onClick:l[0]||(l[0]=e=>b())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)((0,n.SU)(Ka),{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e)},null,8,["modelValue"])],64)}}},nn=an,on=nn;q()(an,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QTr:jl.Z,QTd:Ol.Z,QCardActions:_.Z}),q()(an,"directives",{ClosePopup:V.Z});const sn=(0,a._)("div",{class:"text-h6"},"Nodes list",-1),dn={key:1},rn="NodesList",un={__name:"NodesList",setup(e){const l=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"left",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],t=(0,a.f3)("store"),s=(0,n.iH)(""),i=(0,n.iH)([]),d=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)(!1),p=(0,n.iH)(!1),v=(0,n.iH)(),b=(0,n.iH)(!1),g=(0,n.iH)(!1),f=(0,a.Fl)((()=>Object.values(t.state.nodes)));(0,a.YP)(f,(()=>{y()}));const w=(0,a.Fl)((()=>t.state.layout.nodeDetails));(0,a.YP)(w,(()=>{y()}));const y=()=>{console.log(rn+": update_rows"),i.value=[],f.value.forEach((e=>{let l={};l["nodeNumber"]=e.nodeNumber,l["nodeName"]=_(e.nodeNumber),l["moduleName"]=e.moduleName,l["component"]=e.component,l["status"]=e.status,l["mode"]=e.flim,l["events"]=e.eventCount,l["vlcb"]=e.VLCB,i.value.push(l)}))},_=e=>e in t.state.layout.nodeDetails?t.state.layout.nodeDetails[e].name:e.toString()+" - "+t.state.nodes[e].moduleName,V=e=>e in t.state.layout.nodeDetails?t.state.layout.nodeDetails[e].colour:"blue";(0,a.wF)((()=>{t.methods.query_all_nodes()}));const N=e=>{t.state.nodes[e].parameters[9]?console.log(rn+": parameters exist"):(console.log(rn+": need to read parameters"),t.methods.request_all_node_parameters(e,20,100))},q=e=>{t.state.selected_node!=e&&(console.log(rn+": request_all_node_events"),t.state.selected_node=e,t.methods.request_all_node_events(t.state.selected_node),v.value=e,d.value=!0,t.methods.request_service_discovery(t.state.selected_node),console.log(rn+": node row ",t.state.selected_node+" selected"))};t.eventBus.on("NODE_DELETED_EVENT",(e=>{console.log(rn+": NODE_DELETED_EVENT - node number "+e),t.state.selected_node==e&&(d.value=!1)}));const h=e=>{console.log(rn+": clickAddEvent: node",t.state.selected_node),N(e),q(e),console.log("add event",e),t.state.nodes[e].parameters[9]?r.value=!0:b.value=!0},x=e=>{N(e),q(e),u.value=!0,console.log(rn+": clickDeleteNode: node"+t.state.selected_node)},W=e=>{N(e),q(e),console.log(rn+": clickEvents: node",e)},S=e=>{N(e),q(e),console.log(rn+": clickNameNode: node "+e),m.value=!0},k=e=>{N(e),q(e),console.log(rn+": clickParameters: node "+e),c.value=!0},U=()=>{console.log(rn+": clickRefresh"),t.methods.query_all_nodes()},I=e=>{N(e),q(e),console.log(rn+": clickVariables: node "+e),t.state.nodes[e].parameters[9]?(t.methods.request_all_node_variables(e,t.state.nodes[e].parameters[6],100,1),p.value=!0):b.value=!0},C=e=>{console.log(rn+": clickVLCB"),q(e),t.methods.request_diagnostics(e),g.value=!0};return(e,f)=>{const w=(0,a.up)("q-btn"),y=(0,a.up)("q-banner"),_=(0,a.up)("q-td"),N=(0,a.up)("q-chip"),q=(0,a.up)("q-tr"),T=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(y,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin no-padding"},{action:(0,a.w5)((()=>[(0,a.Wm)(w,{flat:"",color:"white",size:"sm",label:"Refresh",onClick:f[0]||(f[0]=e=>U())})])),default:(0,a.w5)((()=>[sn])),_:1}),(0,a._)("div",null,[(0,a.Wm)(T,{class:"my-sticky-header-table",rows:i.value,bordered:"",dense:"",columns:l,filter:s.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.w5)((e=>[(0,a.Wm)(q,{props:e,class:(0,o.C_)(v.value==e.row.nodeNumber?"bg-blue-1":"bg-white")},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{key:"nodeNumber",class:(0,o.C_)("text-"+V(e.row.nodeNumber)),props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.nodeNumber),1)])),_:2},1032,["class","props"]),(0,a.Wm)(_,{key:"nodeName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.nodeName),1)])),_:2},1032,["props"]),(0,a.Wm)(_,{key:"moduleName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.moduleName),1)])),_:2},1032,["props"]),(0,a.Wm)(_,{key:"mode",props:e},{default:(0,a.w5)((()=>[e.row.mode?((0,a.wg)(),(0,a.j4)(N,{key:0,color:"white","text-color":"blue"},{default:(0,a.w5)((()=>[(0,a.Uk)("Flim")])),_:1})):((0,a.wg)(),(0,a.j4)(N,{key:1,color:"white","text-color":"red"},{default:(0,a.w5)((()=>[(0,a.Uk)("Slim")])),_:1}))])),_:2},1032,["props"]),(0,a.Wm)(_,{key:"status",props:e},{default:(0,a.w5)((()=>[e.row.status?((0,a.wg)(),(0,a.j4)(N,{key:0,color:"white","text-color":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("OK")])),_:1})):((0,a.wg)(),(0,a.j4)(N,{key:1,color:"white","text-color":"red"},{default:(0,a.w5)((()=>[(0,a.Uk)("Error")])),_:1}))])),_:2},1032,["props"]),(0,a.Wm)(_,{key:"events",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.events),1)])),_:2},1032,["props"]),(0,a.Wm)(_,{key:"actions"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{color:"cyan-1","text-color":"black",size:"md",label:"Events",onClick:l=>W(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(w,{color:"primary",size:"md",flat:"",label:"Name",onClick:l=>S(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(w,{color:"primary",size:"md",flat:"",label:"Parameters",onClick:l=>k(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(w,{color:"primary",size:"md",flat:"",label:"Variables",onClick:l=>I(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),e.row.vlcb?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(w,{key:0,disabled:"",color:"primary",size:"md",flat:"",label:"CBUS",onClick:l=>C(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.wg)(),(0,a.j4)(w,{key:1,color:"primary",size:"md",flat:"",label:"VLCB",onClick:l=>C(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(w,{color:"primary",size:"md",flat:"",label:"Add Event",onClick:l=>h(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(w,{color:"negative",size:"md",flat:"",label:"Delete",onClick:l=>x(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"]),1==d.value?((0,a.wg)(),(0,a.j4)((0,n.SU)(Ml),{key:0,nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["nodeNumber"])):(0,a.kq)("",!0),(0,a.Wm)((0,n.SU)(dt),{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=e=>r.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(vt),{modelValue:u.value,"onUpdate:modelValue":f[2]||(f[2]=e=>u.value=e),nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.Wm)((0,n.SU)(wt),{modelValue:m.value,"onUpdate:modelValue":f[3]||(f[3]=e=>m.value=e),nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.Wm)((0,n.SU)(xt),{modelValue:c.value,"onUpdate:modelValue":f[4]||(f[4]=e=>c.value=e),nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.Wm)((0,n.SU)(Ha),{modelValue:p.value,"onUpdate:modelValue":f[5]||(f[5]=e=>p.value=e),nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.Wm)((0,n.SU)(Pa),{modelValue:b.value,"onUpdate:modelValue":f[6]||(f[6]=e=>b.value=e),nodeNumber:(0,n.SU)(t).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.Wm)((0,n.SU)(on),{modelValue:g.value,"onUpdate:modelValue":f[7]||(f[7]=e=>g.value=e)},null,8,["modelValue"]),(0,n.SU)(t).state.debug?((0,a.wg)(),(0,a.iD)("p",dn,(0,o.zw)(Object.values((0,n.SU)(t).state.nodes)),1)):(0,a.kq)("",!0)])])}}};var mn=t(7030);const cn=un,pn=cn;q()(un,"components",{QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QTr:jl.Z,QTd:Ol.Z,QChip:mn.Z});const vn={class:"q-pa-md row items-start q-gutter-md"},bn=(0,a._)("div",{class:"text-h6"},"Event Details",-1),gn=(0,a._)("div",{class:"text-subtitle2"},"Details to help identify the Event",-1),fn=(0,a._)("div",{class:"text-h6"},"Teach Event",-1),wn=(0,a._)("div",{class:"text-subtitle2"},"To consumer nodes only",-1),yn={class:"q-pa-xs q-gutter-sm"},_n=(0,a._)("div",{class:"text-h6"},"Taught Events",-1),Vn=(0,a._)("div",{class:"text-subtitle2"},"Nodes using this event",-1),Nn=(0,a._)("div",{class:"text-h6"},"Generate event",-1),qn=(0,a._)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1),hn={class:"q-pa-md q-gutter-sm"},xn={__name:"EventDetails",props:{eventIdentifier:{type:String,required:!0},nodeNumber:{type:Number,required:!0},eventNumber:{type:Number,required:!0},type:{type:String,required:!0}},setup(e){const l=e,t=(0,n.iH)(""),o=(0,n.iH)(""),s=(0,n.iH)(""),i=(0,n.iH)(),d=(0,n.iH)([]),r=(0,n.iH)([]),u=(0,n.iH)([]),m=(0,n.iH)([]),c=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0}],p=(0,a.f3)("store"),v=(0,a.Fl)((()=>Object.values(p.state.layout.eventDetails)));(0,a.YP)(v,(()=>{console.log("WATCH Node Details"),f(),b()}));const b=()=>{u.value=[],v.value.forEach((e=>{u.value.includes(e.group)||u.value.push(e.group)}))},g=(0,a.Fl)((()=>Object.values(p.state.nodes)));(0,a.YP)(g,(()=>{f(),b()}));const f=()=>{m.value=[],r.value=[],g.value.forEach((e=>{if(Object.values(e.storedEvents).length>0){let t=Object.values(e.storedEvents);t.forEach((t=>{if(t.eventIdentifier==l.eventIdentifier){r.value.push(t.node);var a=p.state.layout.nodeDetails[e.nodeNumber].name;m.value.push({number:e.nodeNumber,name:a})}}))}})),w()},w=()=>{d.value=[];var e=p.state.nodes;for(var l in e){var t=!0;for(var a in r.value)r.value[a]==l&&(t=!1);if(t&&e[l].consumer){var n=l+": ";p.state.layout.nodeDetails[l]&&(n+=p.state.layout.nodeDetails[l].name),d.value.push(n)}}};(0,a.bv)((()=>{l.eventIdentifier in p.state.layout.eventDetails?(t.value=p.state.layout.eventDetails[l.eventIdentifier].name,o.value=p.state.layout.eventDetails[l.eventIdentifier].colour,s.value=p.state.layout.eventDetails[l.eventIdentifier].group):(t.value=l.eventIdentifier,o.value="black",s.value=""),f(),b()}));const y=()=>{if(console.log(`teach_event : ${i.value} : ${l.eventIdentifier}`),""!=i.value){var e=i.value.split(":");console.log(`teach_event : ${e[0]} : ${l.eventIdentifier}`),p.methods.teach_event(e[0],l.eventIdentifier,l.eventIndex),i.value=void 0}},_=()=>{l.eventIdentifier in p.state.layout.eventDetails===!1&&(p.state.layout.eventDetails[l.eventIdentifier]={}),p.state.layout.eventDetails[l.eventIdentifier].name=t.value,p.state.layout.eventDetails[l.eventIdentifier].colour=o.value,p.state.layout.eventDetails[l.eventIdentifier].group=s.value,p.methods.update_layout()},V=()=>{"long"==l.type?p.methods.long_on_event(l.nodeNumber,l.eventNumber):p.methods.short_on_event(l.nodeNumber,l.eventNumber)},N=()=>{"long"==l.type?p.methods.long_off_event(l.nodeNumber,l.eventNumber):p.methods.short_off_event(l.nodeNumber,l.eventNumber)};return(e,l)=>{const n=(0,a.up)("q-input"),o=(0,a.up)("q-card-section"),s=(0,a.up)("q-card"),r=(0,a.up)("q-select"),u=(0,a.up)("q-btn"),p=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",vn,[(0,a.Wm)(s,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[bn,gn,(0,a.Wm)(n,{class:"q-pa-sm",outlined:"",modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),label:"Event Name",maxlength:"30",onChange:_},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(s,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[fn,wn,(0,a.Wm)(r,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),options:d.value},null,8,["modelValue","options"]),(0,a._)("div",yn,[(0,a.Wm)(u,{color:"negative",label:"Teach",onClick:l[2]||(l[2]=e=>y()),"no-caps":""})])])),_:1})])),_:1}),(0,a.Wm)(s,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[_n,Vn,(0,a.Wm)(p,{flat:"",bordered:"",dense:"",rows:m.value,columns:c,"row-key":"number","hide-header":"",pagination:{rowsPerPage:10}},null,8,["rows"])])),_:1})])),_:1}),(0,a.Wm)(s,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[Nn,qn,(0,a._)("div",hn,[(0,a.Wm)(u,{color:"green",label:"ON",onClick:l[3]||(l[3]=e=>V())}),(0,a.Wm)(u,{color:"negative",label:"OFF",onClick:l[4]||(l[4]=e=>N())})])])),_:1})])),_:1})])}}};q()(xn,"components",{QCard:g.Z,QCardSection:y.Z,QInput:Q.Z,QSelect:A.Z,QBtn:w.Z,QTable:L.Z});const Wn=(0,a._)("div",{class:"text-h6"}," Bus Events Dialog ",-1),Sn=(0,a._)("div",{class:"col-2 q-table__title text-h4"},"Bus Events",-1),kn={class:"q-pa-xs row"},Un=(0,a._)("div",{class:"text-body1"},[(0,a.Uk)("Bus events"),(0,a._)("br")],-1),In={class:"text-body2"},Cn="BusEventsDialog",Tn={__name:"BusEventsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=((0,n.iH)("nodes"),(0,n.iH)("")),i={rowsPerPage:0};let d=(0,n.iH)();const r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)(""),p=(0,n.iH)(),v=(0,n.iH)(0),b=(0,n.iH)(0),g=(0,n.iH)(!1),f=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!1},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!1},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node Number",align:"left",sortable:!1},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!1},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!1},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!1},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],w=e,y=l,_=(0,a.Fl)({get(){return w.modelValue},set(e){y("update:modelValue",e)}});(0,a.YP)(_,(()=>{console.log(Cn+": WATCH model")}));const V=(0,a.Fl)((()=>Object.values(t.state.busEvents))),N=(0,a.Fl)((()=>t.state.layout));(0,a.YP)(V,(()=>{q()})),(0,a.YP)(N,(()=>{q()}));const q=()=>{console.log(Cn+":Update busEvents");let e=[],l=t.state.busEvents;for(let t of Object.keys(l).sort()){let a={};a["eventIdentifier"]=l[t].eventIdentifier,a["nodeNumber"]=l[t].nodeNumber,a["eventNumber"]=l[t].eventNumber,a["status"]=l[t].status,a["type"]=l[t].type,a["count"]=l[t].count,a["name"]=h(l[t].eventIdentifier),a["colour"]=W(l[t].eventIdentifier),a["group"]=S(l[t].eventIdentifier),e.push(a)}d.value=e},h=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].name:JSON.stringify(e),W=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].colour:"blue",S=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].group:"";(0,a.wF)((()=>{t.methods.query_all_nodes()})),(0,a.bv)((()=>{t.methods.refresh_bus_events()}));const k=e=>{console.log(Cn+": clickEventName "+e),c.value=e,p.value=t.getters.event_name(e),r.value=!0},U=(e,l,t)=>{v.value=e,b.value=l,c.value=t,console.log(Cn+": clickTest: event "+v.value+" "+b.value+" "+c.value),u.value=!0},I=e=>{console.log(Cn+": clickTeach"),c.value=e,m.value=!0},C=()=>{console.log(Cn+": clickToggleShowBusEventsJSON"),g.value?g.value=!1:g.value=!0};return(e,l)=>{const p=(0,a.up)("q-btn"),w=(0,a.up)("q-banner"),y=(0,a.up)("q-card-section"),V=(0,a.up)("q-space"),N=(0,a.up)("q-icon"),q=(0,a.up)("q-input"),h=(0,a.up)("q-td"),S=(0,a.up)("q-chip"),T=(0,a.up)("q-tr"),Z=(0,a.up)("q-table"),Q=(0,a.up)("q-card"),D=(0,a.up)("q-card-actions"),B=(0,a.up)("q-dialog"),H=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(B,{modelValue:_.value,"onUpdate:modelValue":l[5]||(l[5]=e=>_.value=e),persistent:"","full-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[H]])])),default:(0,a.w5)((()=>[Wn])),_:1})])),_:1}),(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"no-margin no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{title:"Bus Events",class:"bus-events-table",dense:"",rows:(0,n.SU)(d),columns:f,filter:s.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:i,"onUpdate:pagnation":l[3]||(l[3]=e=>i=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{top:(0,a.w5)((()=>[Sn,(0,a.Wm)(V),(0,a.Wm)(q,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(N,{name:"search"})])),_:1},8,["modelValue"]),(0,a.Wm)(V),(0,a.Wm)(p,{color:"negative",label:"Refresh Events",onClick:l[1]||(l[1]=e=>(0,n.SU)(t).methods.refresh_bus_events()),"no-caps":""}),(0,a.Wm)(V),(0,a.Wm)(p,{color:"negative",label:"Clear Events",onClick:l[2]||(l[2]=e=>(0,n.SU)(t).methods.clear_bus_events()),"no-caps":""})])),body:(0,a.w5)((e=>[(0,a.Wm)(T,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{key:"eventName",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"eventIdentifier",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"nodeNumber",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"eventNumber",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"status",props:e},{default:(0,a.w5)((()=>["on"==e.row.status?((0,a.wg)(),(0,a.j4)(S,{key:0,color:"white","text-color":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("ON")])),_:1})):((0,a.wg)(),(0,a.j4)(S,{key:1,color:"white","text-color":"red"},{default:(0,a.w5)((()=>[(0,a.Uk)("OFF")])),_:1}))])),_:2},1032,["props"]),(0,a.Wm)(h,{key:"type",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"count",props:e,class:(0,o.C_)("text-"+W(e.row.eventIdentifier))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.count),1)])),_:2},1032,["props","class"]),(0,a.Wm)(h,{key:"actions",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Name",onClick:l=>k(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Teach",onClick:l=>I(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.Wm)(p,{flat:"",size:"md",color:"primary",label:"Test",onClick:l=>U(e.row.nodeNumber,e.row.eventNumber,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),g.value?((0,a.wg)(),(0,a.j4)(y,{key:0,class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",kn,[Un,(0,a._)("div",In,[(0,a._)("pre",null,(0,o.zw)((0,n.SU)(t).state.busEvents),1)])])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(D,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",label:"Toggle bus events json",onClick:l[4]||(l[4]=e=>C())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)((0,n.SU)(E),{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value=e),eventIdentifier:c.value},null,8,["modelValue","eventIdentifier"]),(0,a.Wm)((0,n.SU)($),{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=e=>m.value=e),eventIdentifier:c.value},null,8,["modelValue","eventIdentifier"]),(0,a.Wm)((0,n.SU)(x),{modelValue:u.value,"onUpdate:modelValue":l[8]||(l[8]=e=>u.value=e),sendingNodeNumber:v.value,eventNumber:b.value,eventIdentifier:c.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"])],64)}}};var Zn=t(2025),Qn=t(4554);const Dn=Tn,En=Dn;q()(Tn,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QSpace:Zn.Z,QInput:Q.Z,QIcon:Qn.Z,QTr:jl.Z,QTd:Ol.Z,QChip:mn.Z,QCardActions:_.Z}),q()(Tn,"directives",{ClosePopup:V.Z});const Bn=(0,a._)("div",{class:"text-h6"}," Cbus Error Dialog ",-1),Hn=(0,a._)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1),zn="CbusErrorsDialog",Fn={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=l,u=(0,a.Fl)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.YP)(u,(()=>{console.log(zn+": WATCH model")})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const m=()=>{t.methods.clear_cbus_errors()};return(e,l)=>{const d=(0,a.up)("q-btn"),r=(0,a.up)("q-banner"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-space"),v=(0,a.up)("q-icon"),b=(0,a.up)("q-input"),g=(0,a.up)("q-td"),f=(0,a.up)("q-tr"),w=(0,a.up)("q-table"),y=(0,a.up)("q-card"),_=(0,a.up)("q-dialog"),V=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,a.w5)((()=>[Bn])),_:1})])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{title:"Nodes",rows:Object.values((0,n.SU)(t).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{top:(0,a.w5)((()=>[Hn,(0,a.Wm)(p),(0,a.Wm)(b,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(v,{name:"search"})])),_:1},8,["modelValue"]),(0,a.Wm)(p),(0,a.Wm)(d,{color:"negative",label:"Clear Errors",onClick:m,"no-caps":""})])),body:(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{key:"id",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.id),1)])),_:2},1032,["props"]),(0,a.Wm)(g,{key:"type",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.type),1)])),_:2},1032,["props"]),(0,a.Wm)(g,{key:"Error",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Error),1)])),_:2},1032,["props"]),(0,a.Wm)(g,{key:"Message",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.Message),1)])),_:2},1032,["props"]),(0,a.Wm)(g,{key:"node",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.node),1)])),_:2},1032,["props"]),(0,a.Wm)(g,{key:"count",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.row.count),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},jn=Fn,On=jn;q()(Fn,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QTable:L.Z,QSpace:Zn.Z,QInput:Q.Z,QIcon:Qn.Z,QTr:jl.Z,QTd:Ol.Z}),q()(Fn,"directives",{ClosePopup:V.Z});const Pn=(0,a._)("div",{class:"text-h6"}," JSON Dialog ",-1),Mn=(0,a._)("div",{class:"text-h6"},"Nodes",-1),An=(0,a._)("div",{class:"text-h6"},"Node Descriptors",-1),Ln=(0,a._)("div",{class:"text-h6"},"Node Descriptor List",-1),Yn=(0,a._)("div",{class:"text-h6"},"Events",-1),$n=(0,a._)("div",{class:"text-h6"},"Layout",-1),Rn=(0,a._)("div",{class:"text-h6"},"List of Layouts",-1),Jn=(0,a._)("div",{class:"text-h6"},"Node Traffic",-1),Kn=(0,a._)("div",{class:"text-h6"},"Cbus Errors",-1),Gn="JsonDialog",Xn={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)("nodes"),i=e,d=l,r=(0,a.Fl)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,a.YP)(r,(()=>{console.log(Gn+": WATCH model")})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(e,l)=>{const i=(0,a.up)("q-btn"),d=(0,a.up)("q-banner"),u=(0,a.up)("q-card-section"),m=(0,a.up)("q-tab"),c=(0,a.up)("q-tabs"),p=(0,a.up)("q-tab-panel"),v=(0,a.up)("q-tab-panels"),b=(0,a.up)("q-card"),g=(0,a.up)("q-dialog"),f=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.w5)((()=>[Pn])),_:1})])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.Wm)(m,{name:"busEvents",label:"Bus Events"}),(0,a.Wm)(m,{name:"layout",label:"Layout"}),(0,a.Wm)(m,{name:"layouts",label:"Layouts"}),(0,a.Wm)(m,{name:"nodes",label:"Nodes"}),(0,a.Wm)(m,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.Wm)(m,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,a.Wm)(m,{name:"traffic",label:"Traffic"})])),_:1},8,["modelValue"]),(0,a.Wm)(v,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"nodes"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Mn,(0,a._)("pre",null,"                "+(0,o.zw)((0,n.SU)(t).state.nodes)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"nodeDescriptors"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[An,(0,a._)("pre",null,"                "+(0,o.zw)((0,n.SU)(t).state.nodeDescriptors)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"nodeDescriptorList"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Ln,(0,a._)("pre",null,"                "+(0,o.zw)((0,n.SU)(t).state.nodeDescriptorList)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"busEvents"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Yn,(0,a._)("pre",null,"                "+(0,o.zw)((0,n.SU)(t).state.busEvents)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"layout"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[$n,(0,a._)("pre",null,"              "+(0,o.zw)((0,n.SU)(t).state.layout)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"layouts"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Rn,(0,a._)("pre",null,"              "+(0,o.zw)((0,n.SU)(t).state.layouts_list)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"traffic"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Jn,(0,a._)("pre",null,"              "+(0,o.zw)((0,n.SU)(t).state.nodeTraffic)+"\n              ",1)])),_:1})])),_:1}),(0,a.Wm)(p,{name:"cbusErrors"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.w5)((()=>[Kn,(0,a._)("pre",null,"              "+(0,o.zw)((0,n.SU)(t).state.cbus_errors)+"\n              ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},eo=Xn,lo=eo;q()(Xn,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QTabs:Oe.Z,QTab:Pe.Z,QTabPanels:Me.Z,QTabPanel:Ae.Z}),q()(Xn,"directives",{ClosePopup:V.Z});const to=(0,a._)("div",{class:"text-h6"}," Manage Layout ",-1),ao={class:"q-pa-md q-mr-sm rounded-borders"},no={class:"text-h5 text-black"},oo={class:"text-h6 text-black"},so={class:"q-pa-md row"},io=(0,a._)("div",{class:"text-h6"},"Change layout",-1),ro=(0,a._)("p",null,"Click on the list of layouts to select an existing layout, or enter a name for a new layout, then click change",-1),uo=(0,a._)("div",{class:"text-h6"},"List of Layouts",-1),mo=(0,a._)("div",{class:"text-h6 text-black"},"Edit layout details",-1),co="LayoutDialog",po={__name:"LayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(""),i=(0,n.iH)([]),d=[{name:"layout",field:"layout",required:!0,label:"Layout",align:"left",sortable:!0}],r=e,u=l,m=(0,a.Fl)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.YP)(m,(()=>{console.log(co+": WATCH model"),p()}));const c=(0,a.Fl)((()=>Object.values(t.state.layouts_list)));(0,a.YP)(c,(()=>{console.log(co+": WATCH layoutList"),p()}));const p=()=>{i.value=[],c.value.forEach((e=>{console.log(co+": update "+e),i.value.push({layout:e})}))},v=()=>{console.log(co+": Change layout"),t.methods.change_layout(s.value),t.methods.request_layout_list(),s.value=""},b=e=>{console.log(co+": clickLayouts on ",e),s.value=e};return(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(e,l)=>{const r=(0,a.up)("q-btn"),u=(0,a.up)("q-banner"),c=(0,a.up)("q-input"),p=(0,a.up)("q-card-section"),g=(0,a.up)("q-card"),f=(0,a.up)("q-td"),w=(0,a.up)("q-table"),y=(0,a.up)("q-dialog"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{"min-width":"900px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.w5)((()=>[to])),_:1}),(0,a._)("div",ao,[(0,a._)("div",no,(0,o.zw)((0,n.SU)(t).state.layout.layoutDetails.title),1),(0,a._)("div",oo,(0,o.zw)((0,n.SU)(t).state.layout.layoutDetails.subTitle),1)]),(0,a._)("div",so,[(0,a.Wm)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[io,(0,a.Wm)(c,{class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),ro,(0,a.Wm)(r,{color:"negative",label:"change",onClick:l[1]||(l[1]=e=>v()),"no-caps":""})])),_:1})])),_:1}),(0,a.Wm)(g,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-pa-xs"},{default:(0,a.w5)((()=>[uo,(0,a.Wm)(w,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,a.w5)((e=>[(0,a.Wm)(f,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{flat:"",color:"primary",label:e.value,onClick:l=>b(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.Wm)(g,{inline:"",class:"q-pa-md",flat:"",style:{"max-width":"500px"}},{default:(0,a.w5)((()=>[mo,(0,a.Wm)(c,{label:"Sub Title",outlined:"",modelValue:(0,n.SU)(t).state.layout.layoutDetails.subTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.SU)(t).state.layout.layoutDetails.subTitle=e),onChange:l[3]||(l[3]=e=>(0,n.SU)(t).methods.update_layout())},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},vo=po,bo=vo;q()(po,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QInput:Q.Z,QTable:L.Z,QTd:Ol.Z}),q()(po,"directives",{ClosePopup:V.Z});const go=(0,a._)("div",{class:"text-h6"}," Bus message ",-1),fo={class:"text-h6"},wo={class:"text-h6"},yo={class:"text-h6"},_o="ModifiedGridConnectDialog",Vo={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.f3)("store");const t=e,n=l,s=(0,a.Fl)({get(){return t.modelValue},set(e){n("update:modelValue",e)}});return(0,a.YP)(s,(()=>{console.log(_o+": WATCH model")})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{})),(l,t)=>{const n=(0,a.up)("q-btn"),i=(0,a.up)("q-banner"),d=(0,a.up)("q-card-section"),r=(0,a.up)("q-card"),u=(0,a.up)("q-dialog"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(u,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.w5)((()=>[go])),_:1}),(0,a.Wm)(d,{class:"fit"},{default:(0,a.w5)((()=>[(0,a._)("div",fo,"direction: "+(0,o.zw)(e.busMessage.direction),1),(0,a._)("div",wo," message: "+(0,o.zw)(e.busMessage.json.text),1),(0,a._)("div",yo," encoded: "+(0,o.zw)(e.busMessage.json.encoded),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},No=Vo,qo=No;q()(Vo,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z}),q()(Vo,"directives",{ClosePopup:V.Z});const ho=(0,a._)("div",{class:"text-h6"}," New node detected ",-1),xo=(0,a._)("div",{class:"text-h6"},[(0,a.Uk)(" Accept the first free node number below "),(0,a._)("br"),(0,a.Uk)(" or enter a new one ")],-1),Wo={class:"text-h6"},So=(0,a._)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1),ko="NewNodeDialog",Uo={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=(0,n.iH)(""),i=(0,n.iH)(0),d=e,r=l,u=(0,a.Fl)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.YP)(u,(()=>{console.log(ko+": WATCH model"),console.log(ko+": WATCH model: previousNodeNumber "+d.previousNodeNumber),i.value=m()}));const m=()=>{var e=0,l=256;t.state.layout.layoutDetails.baseNodeNumber&&(l=t.state.layout.layoutDetails.baseNodeNumber);for(var a=Object.keys(t.state.nodes),n=l;n<65535;n++)if(!a.includes(n.toString())){console.log(ko+" first free node number: "+n),e=n;break}return e};(0,a.ic)((()=>{}));const c=()=>{console.log(ko+" new node number: "+i.value),console.log(ko+" new node name: "+s.value),t.methods.set_node_number(i.value),t.setters.node_name(i.value,s.value)};return(e,l)=>{const t=(0,a.up)("q-btn"),n=(0,a.up)("q-banner"),r=(0,a.up)("q-input"),m=(0,a.up)("q-card-section"),p=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card"),b=(0,a.up)("q-dialog"),g=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(b,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.w5)((()=>[ho])),_:1}),(0,a.Wm)(m,{class:"q-pa-md",color:"orange-1"},{default:(0,a.w5)((()=>[xo,(0,a.Wm)(r,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),autofocus:""},null,8,["modelValue"]),(0,a._)("div",Wo," This node was previously "+(0,o.zw)(d.previousNodeNumber),1)])),_:1}),(0,a.Wm)(m,{class:"q-pa-md"},{default:(0,a.w5)((()=>[So,(0,a.Wm)(r,{"input-style":{fontSize:"25px"},dense:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(t,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Io=Uo,Co=Io;q()(Uo,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QCardSection:y.Z,QInput:Q.Z,QCardActions:_.Z}),q()(Uo,"directives",{ClosePopup:V.Z});var To=t(8880);const Zo=JSON.parse('{"name":"MMC-CLIENT","version":"0.3.8","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"No test specified\\" && exit 0"},"dependencies":{"@quasar/extras":"^1.0.0","core-js":"^3.6.5","quasar":"^2.0.0","sass":"^1.69.5","socket.io-client":"^4.4.1","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app":"^3.0.0","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}'),Qo=(0,a._)("div",{class:"text-h6"}," Manage Layout ",-1),Do=(0,a._)("div",{class:"text-h6"},"Backend",-1),Eo=(0,a._)("div",{class:"text-h6"},"Frontend",-1),Bo="SystemDialog",Ho={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.f3)("store"),s=e,i=l,d=(0,a.Fl)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.YP)(d,(()=>{console.log(Bo+": WATCH model")})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const r=()=>{console.log(Bo+": clickStop"),t.methods.STOP_SERVER()};return(e,l)=>{const s=(0,a.up)("q-btn"),i=(0,a.up)("q-banner"),u=(0,a.up)("q-card"),m=(0,a.up)("q-input"),c=(0,a.up)("q-checkbox"),p=(0,a.up)("q-card-actions"),v=(0,a.up)("q-dialog"),b=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(v,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"min-width":"900px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[b]])])),default:(0,a.w5)((()=>[Qo])),_:1}),(0,a.Wm)(u,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.w5)((()=>[Do,(0,a._)("div",null,"Backend App version "+(0,o.zw)(JSON.stringify((0,n.SU)(t).state.version.App)),1),(0,a._)("div",null,"API version "+(0,o.zw)(JSON.stringify((0,n.SU)(t).state.version.API)),1),(0,a._)("div",null,"node version "+(0,o.zw)(JSON.stringify((0,n.SU)(t).state.version.node)),1)])),_:1}),(0,a.Wm)(u,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.w5)((()=>[Eo,(0,a._)("div",null,"Frontend App version "+(0,o.zw)((0,n.SU)(Zo).version),1),(0,a._)("div",null,"Quasar framework "+(0,o.zw)(e.$q.version),1),(0,a._)("div",null,"Vue version "+(0,o.zw)(a.i8))])),_:1}),(0,a.Wm)(u,{class:"q-pa-md",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{color:"negative",label:"stop Server",onClick:l[0]||(l[0]=e=>r()),"no-caps":""}),(0,a.Uk)(" This will signal the server to stop and close the page ")])),_:1}),(0,a.wy)((0,a.Wm)(u,{class:"q-pa-md",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:"Base Node Number",outlined:"",modelValue:(0,n.SU)(t).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.SU)(t).state.layout.layoutDetails.baseNodeNumber=e),onChange:l[2]||(l[2]=e=>(0,n.SU)(t).methods.update_layout())},null,8,["modelValue"])])),_:1},512),[[To.F8,(0,n.SU)(t).state.advanced]]),(0,a.Wm)(u,{class:"q-pa-md",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:(0,n.SU)(t).state.debug,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.SU)(t).state.debug=e),label:"Debug"},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:(0,n.SU)(t).state.advanced,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,n.SU)(t).state.advanced=e),label:"Advanced"},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:(0,n.SU)(t).state.develop,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,n.SU)(t).state.develop=e),label:"Develop"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},zo=Ho,Fo=zo;q()(Ho,"components",{QDialog:b.Z,QCard:g.Z,QBanner:f.Z,QBtn:w.Z,QInput:Q.Z,QCheckbox:J.Z,QCardActions:_.Z}),q()(Ho,"directives",{ClosePopup:V.Z});const jo=(0,a._)("div",{class:"text-h6"}," Example banner ",-1),Oo={key:0,class:"text-red"},Po=(0,a._)("div",{class:"text-h6"}," Example q-card ",-1),Mo="DialogExampleCompositionAPI",Ao={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.f3)("store");const t=(0,n.iH)(!1),o=e,s=l,i=(0,a.Fl)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.YP)(i,(()=>{console.log(Mo+": WATCH model")})),(0,a.wF)((()=>{})),(0,a.bv)((()=>{}));const d=()=>{t.value=!t.value};return(e,l)=>{const n=(0,a.up)("q-btn"),o=(0,a.up)("q-banner"),s=(0,a.up)("q-card-section"),r=(0,a.up)("q-card"),u=(0,a.up)("q-card-actions"),m=(0,a.up)("q-dialog"),c=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(m,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])])),default:(0,a.w5)((()=>[jo])),_:1})])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{flat:"",color:"positive",label:"example button"}),(0,a.Wm)(n,{flat:"",color:"negative",label:"example button"})])),_:1}),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(5,(e=>(0,a._)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64)),t.value?((0,a.wg)(),(0,a.iD)("div",Oo,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(5,(e=>(0,a._)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64))])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(s,{class:"q-py-none no-margin"},{default:(0,a.w5)((()=>[Po])),_:1})])),_:1}),(0,a.Wm)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{flat:"",label:"toggle show more",onClick:l[0]||(l[0]=e=>d())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Lo=Ao,Yo=Lo;q()(Ao,"components",{QDialog:b.Z,QCard:g.Z,QCardSection:y.Z,QBanner:f.Z,QBtn:w.Z,QCardActions:_.Z}),q()(Ao,"directives",{ClosePopup:V.Z});const $o=e=>((0,a.dD)("data-v-cbed7404"),e=e(),(0,a.Cn)(),e),Ro=$o((()=>(0,a._)("span",{style:{"min-height":"0"},class:"text-h6"}," Module Management Console ",-1))),Jo={class:"text-h6"},Ko={class:"text-h6 float-right"},Go=$o((()=>(0,a._)("div",{class:"text-h6"}," Bus traffic ",-1))),Xo={key:0},es=$o((()=>(0,a._)("br",null,null,-1))),ls=$o((()=>(0,a._)("br",null,null,-1))),ts=$o((()=>(0,a._)("br",null,null,-1))),as=$o((()=>(0,a._)("br",null,null,-1))),ns=$o((()=>(0,a._)("br",null,null,-1))),os=$o((()=>(0,a._)("br",null,null,-1))),ss="MainLayout",is={__name:"MainLayout",setup(e){const l=(0,s.Z)(),t=(0,a.f3)("store"),i=(0,n.iH)(!1),d=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)(!1),p=(0,n.iH)(!1),v=(0,n.iH)(!1),b=(0,n.iH)({}),g=(0,n.iH)(0),f=(0,n.iH)(!1);(0,a.bv)((()=>{t.methods.request_bus_connection(),setInterval(w,5e3)}));const w=e=>{t.methods.request_bus_connection()};t.eventBus.on("REQUEST_NODE_NUMBER_EVENT",(e=>{console.log(ss+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e),g.value=e,p.value=!0})),t.eventBus.on("BUS_CONNECTION_EVENT",(e=>{0==e.state&&l.notify({message:"Server has no connection to the CAN BUS",caption:"please check & restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})})),t.eventBus.on("SERVER_DISCONNECT",(()=>{l.notify({message:"MMC-server has disconnected",caption:"please restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}));const y=()=>{console.log(ss+": clickBusEvents"),d.value=!0},_=()=>{console.log(ss+": clickCbusErrors"),r.value=!0},V=()=>{console.log(ss+": clickExample"),f.value=!0},N=()=>{console.log(ss+": clickStop"),t.methods.STOP_SERVER()},q=()=>{console.log(ss+": clickJson"),u.value=!0},h=()=>{console.log(ss+": clickLayout"),m.value=!0},x=e=>{console.log(ss+": clickSingleBusEvent"),b.value=e,c.value=!0},W=()=>{console.log(ss+": clickSystem"),v.value=!0};return(e,l)=>{const s=(0,a.up)("q-item-section"),w=(0,a.up)("q-item"),S=(0,a.up)("q-list"),k=(0,a.up)("q-menu"),U=(0,a.up)("q-btn"),I=(0,a.up)("q-toolbar-title"),C=(0,a.up)("q-toolbar"),T=(0,a.up)("q-space"),Z=(0,a.up)("q-header"),Q=(0,a.up)("q-banner"),D=(0,a.up)("q-item-label"),E=(0,a.up)("q-card"),B=(0,a.up)("q-drawer"),H=(0,a.up)("q-page"),z=(0,a.up)("q-page-container"),F=(0,a.up)("q-layout"),j=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(F,{view:"hHh lpR fFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{style:{"min-height":"0"},class:"row bg-primary text-white no-margin no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"col"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{flat:"",dense:"",icon:"menu"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{clickable:"",onClick:l[0]||(l[0]=e=>h())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Layout")])),_:1})])),_:1}),(0,a.Wm)(w,{clickable:"",onClick:l[1]||(l[1]=e=>y())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Bus events")])),_:1})])),_:1}),(0,a.Wm)(w,{clickable:"",onClick:l[2]||(l[2]=e=>q())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("JSON")])),_:1})])),_:1}),(0,a.Wm)(w,{clickable:"",onClick:l[3]||(l[3]=e=>_())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("CBUS errors")])),_:1})])),_:1}),(0,a.Wm)(w,{clickable:"",onClick:l[4]||(l[4]=e=>W())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("System")])),_:1})])),_:1}),(0,n.SU)(t).state.develop?((0,a.wg)(),(0,a.j4)(w,{key:0,clickable:"",onClick:l[5]||(l[5]=e=>V())},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Example")])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(I,{style:{"min-height":"0"}},{default:(0,a.w5)((()=>[Ro])),_:1})])),_:1}),(0,a.Wm)(C,{class:"col"},{default:(0,a.w5)((()=>[(0,a._)("div",Jo,(0,o.zw)((0,n.SU)(t).state.layout.layoutDetails.title),1)])),_:1}),(0,a.Wm)(C,{class:"col"},{default:(0,a.w5)((()=>[(0,a.Wm)(T),(0,a._)("div",Ko,[(0,a.Wm)(U,{color:"negative",label:"Exit",onClick:l[6]||(l[6]=e=>N()),"no-caps":""})])])),_:1})])),_:1}),(0,a.Wm)(B,{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=e=>i.value=e),"show-if-above":"",side:"left",width:120,bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{default:(0,a.w5)((()=>[Go])),_:1}),(0,a.Wm)(S,{bordered:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(t).state.nodeTraffic,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(w,{key:e,clickable:"",onClick:l=>x(e)},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{class:"q-pa-none q-ma-xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.direction+"   "+e.json.mnemonic),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[j]]))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(z,{class:"main-page no-shadow"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,n.SU)(t).state.debug?((0,a.wg)(),(0,a.iD)("div",Xo,[(0,a.Uk)(" display_component : "+(0,o.zw)((0,n.SU)(t).state.display_component),1),es,(0,a.Uk)(" events_component : "+(0,o.zw)((0,n.SU)(t).state.events_component),1),ls,(0,a.Uk)(" services_component : "+(0,o.zw)((0,n.SU)(t).state.services_component),1),ts,(0,a.Uk)(" selected_node : "+(0,o.zw)((0,n.SU)(t).state.selected_node),1),as,(0,a.Uk)(" selected_events_index : "+(0,o.zw)((0,n.SU)(t).state.selected_event_index),1),ns,(0,a.Uk)(" selected_service_index : "+(0,o.zw)((0,n.SU)(t).state.selected_service_index),1),os])):(0,a.kq)("",!0),(0,a.Wm)((0,n.SU)(pn))])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,n.SU)(En),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=e=>d.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(On),{modelValue:r.value,"onUpdate:modelValue":l[9]||(l[9]=e=>r.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(lo),{modelValue:u.value,"onUpdate:modelValue":l[10]||(l[10]=e=>u.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(bo),{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(qo),{modelValue:c.value,"onUpdate:modelValue":l[12]||(l[12]=e=>c.value=e),busMessage:b.value},null,8,["modelValue","busMessage"]),(0,a.Wm)((0,n.SU)(Co),{modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=e=>p.value=e),previousNodeNumber:g.value},null,8,["modelValue","previousNodeNumber"]),(0,a.Wm)((0,n.SU)(Fo),{modelValue:v.value,"onUpdate:modelValue":l[14]||(l[14]=e=>v.value=e)},null,8,["modelValue"]),(0,a.Wm)((0,n.SU)(Yo),{modelValue:f.value,"onUpdate:modelValue":l[15]||(l[15]=e=>f.value=e)},null,8,["modelValue"])],64)}}};var ds=t(4267),rs=t(3812),us=t(9570),ms=t(6335),cs=t(7011),ps=t(3414),vs=t(2035),bs=t(3747),gs=t(2901),fs=t(2350),ws=t(2652),ys=t(4379),_s=t(6489);const Vs=(0,ve.Z)(is,[["__scopeId","data-v-cbed7404"]]),Ns=Vs;q()(is,"components",{QLayout:ds.Z,QHeader:rs.Z,QToolbar:us.Z,QBtn:w.Z,QMenu:ms.Z,QList:cs.Z,QItem:ps.Z,QItemSection:vs.Z,QToolbarTitle:bs.Z,QSpace:Zn.Z,QDrawer:gs.Z,QCard:g.Z,QBanner:f.Z,QItemLabel:fs.Z,QPageContainer:ws.Z,QPage:ys.Z}),q()(is,"directives",{Ripple:_s.Z})}}]);