"use strict";(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[625],{3625:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Au});var a=t(1758),o=t(8734),n=t(8790),s=(t(9862),t(4907)),i=t(8336);t(239);function d(e){return new Promise((function(l,t){setTimeout((()=>{l()}),e)}))}const r="EventFunctions";function u(e,l,t){console.log(r+`: createNewEvent: ${l} : ${t}`);var a=!1,o=e.state.nodes[l];if(void 0==o.storedEventsNI[t]){o.storedEventsNI[t]={eventIdentifier:t,eventIndex:1,node:l,variables:{}},o.storedEventsNI[t].variables[0]=o.parameters[5];for(var n=1;n<=o.parameters[5];n++)o.storedEventsNI[t].variables[n]=0;a=!0}else console.log(r+`: createNewEvent: event already exists ${l} : ${t}`);return a}const c={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.WQ)("store")),n={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,o.KR)(!1),i=(0,a.EW)((()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,a.wB)(i,(()=>{s.value=!!(i.value&n[l.bit])}));const d=()=>{let e=i.value;console.log(`EventVariableBit update_checked ${s.value} ${e}`),s.value?e|=n[l.bit]:e&=~n[l.bit],console.log(`EventVariableBit update_checked-2 ${s.value} ${e}`),t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,e)};return(0,a.sV)((()=>{var e=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);s.value=!!(e&n[l.bit])})),(l,t)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:e.name,onClick:d,"left-label":""},null,8,["modelValue","label"])}}};var m=t(7022),b=t(8582),p=t.n(b);const v=c,g=v;p()(c,"components",{QCheckbox:m.A});const f={class:"text-h6"},y={class:"text-subtitle2"},k={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",y,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.bitCollection,(l=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.bF)((0,o.R1)(g),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,bit:l.bitPosition,name:l.label},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","bit","name"])])))),128))])),_:1})])),_:1})}}};var h=t(3316),_=t(4189);const q=k,N=q;p()(k,"components",{QCard:h.A,QCardSection:_.A});const V={class:"text-h6"},F={class:"text-subtitle2"},x={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",V,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",F,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(g),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit"])])),_:1})])),_:1})}}},w=x,C=w;p()(x,"components",{QCard:h.A,QCardSection:_.A});const A={class:"q-pa-xs row"},I={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},R={class:"GroupTitle q-py-none"},Q={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(l,t)=>((0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("div",I,[(0,a.Lk)("div",R,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)((0,o.R1)(Ce),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])]))}};var E=t(2807);const L=(0,E.A)(Q,[["__scopeId","data-v-f64addbe"]]),W=L,S="CommonFunctions";function T(e,l){for(var t=0,a=e;a<=l;a++)t+=1<<a;return t}function B(e,l,t,a,o){if(void 0!=a&&void 0!=o)var n=T(a,o);else a=0,n=255;console.log(S+": getDisplayValue: bitMask: "+n),void 0==l&&(l=1),void 0==t&&(t=0);let s=e;return s&=n,s>>=a,s*=l,s+=t,s}function D(e,l,t,a,o,n){if(void 0!=o&&void 0!=n)var s=T(o,n);else s=255,o=0;void 0==t&&(t=1),void 0==a&&(a=0);let i=e,d=l-a;return d=d/t&255,d<<=o,i|=d&s,i&=d|~s,i}const K={class:"text-h6"},U={class:"text-subtitle2"},X={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>{let e=255*l.displayScale+l.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":"###"})),u=(0,a.EW)((()=>l.min*l.displayScale+l.displayOffset)),c=(0,a.EW)((()=>l.max*l.displayScale+l.displayOffset)),m=(0,a.EW)((()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,a.wB)(m,(()=>{d.value=B(m.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)}));const b=e=>{let a=m.value,o=Number(e);o<u.value?(s.value=!0,i.value="Value less than "+u.value):o>c.value?(s.value=!0,i.value="Value more than "+c.value):(a=D(a,o,l.displayScale,l.displayOffset,l.startBit,l.endBit),i.value="",s.value=!1,t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a))};return(0,a.sV)((()=>{t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);d.value=B(m.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)})),(l,t)=>{const o=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",K,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",U,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)(" range "+(0,n.v_)(u.value)+" to "+(0,n.v_)(c.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(m,{mask:r.value,debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:b},null,8,["mask","modelValue","error-message","error"])])),_:1})])),_:1})}}};var P=t(3954),O=t(7837);const z=X,M=z;p()(X,"components",{QCard:h.A,QCardSection:_.A,QBadge:P.A,QInput:O.A});var j=t(8433),H=t.n(j);class G{constructor(){this.node=void 0,this.eventIdentifier=void 0;var e=function(e){return this.node.storedEventsNI[this.eventIdentifier].variables[e]}.bind(this);H().add_operation("EV",e);var l=function(e,l){let t=!1,a=this.node.storedEventsNI[this.eventIdentifier].variables[e];return(a&2**l)>0&&(t=!0),t}.bind(this);H().add_operation("EVbit",l);var t=function(e){return this.node.parameters[e]}.bind(this);H().add_operation("NP",t);var a=function(e,l){let t=!1;return(this.node.parameters[e]&2**l)>0&&(t=!0),t}.bind(this);H().add_operation("NPbit",a);var o=function(e){return this.node.nodeVariables[e]}.bind(this);H().add_operation("NV",o);var n=function(e,l){let t=!1;return(this.node.nodeVariables[e]&2**l)>0&&(t=!0),t}.bind(this);H().add_operation("NVbit",n)}evaluate(e,l,t){this.node=e,this.eventIdentifier=t;try{let e=H().apply(l);return console.log("mdfLogic.parse: logic: "+JSON.stringify(l)+" result: "+e),e}catch(a){return console.log("mdfLogic.parse "+a),!1}}}function $(e,l,t){var a=null;if(l.nv){var o=t.state.nodes[e].nodeVariables[l.nv];for(var n in l.labels)o==l.labels[n].value&&(a=l.labels[n].label)}return a}function J(e,l,t,a){var o=!0;if(void 0!=l.evBit)if(void 0!=a){var n=t.state.nodes[e].storedEventsNI[a];if(n){var s=n.variables[l.evBit.index];s=(s&2**l.evBit.bit)>>l.evBit.bit,o=Y(s,l)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=l.ev)if(void 0!=a){n=t.state.nodes[e].storedEventsNI[a];if(n){s=n.variables[l.ev];o=Y(s,l)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}else console.log("parseLogicElement: ERROR: ev - event index (argument3) not defined ");if(void 0!=l.nvBit){s=t.state.nodes[e].nodeVariables[l.nvBit.index];s=(s&2**l.nvBit.bit)>>l.nvBit.bit,o=Y(s,l)}if(void 0!=l.nv){s=t.state.nodes[e].nodeVariables[l.nv];o=Y(s,l)}if(void 0!=l.JLL){let n=new G;o=n.evaluate(t.state.nodes[e],l.JLL,a)}return o}function Y(e,l){var t=!0;return void 0!=l.equals&&l.equals!=e&&(t=!1),void 0!=l.greaterThan&&e<=l.greaterThan&&(t=!1),void 0!=l.in&&(t=!1,l.in.forEach((function(l){e==l&&(t=!0)}))),void 0!=l.lessThan&&e>=l.lessThan&&(t=!1),void 0!=l.notEqual&&l.notEqual==e&&(t=!1),t}const Z={class:"text-h6"},ee={class:"text-subtitle2"},le={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)();var i=(0,o.KR)();const d=(0,a.EW)((()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,a.wB)(d,(()=>{s.value=d.value&l.bitMask}));const r=e=>{let a=d.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,console.log(`EventVariableSelect: byteValue ${a}`),t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a)};return(0,a.sV)((()=>{let e=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);for(var a in s.value=e&l.bitMask,i.value=[],l.options)if(void 0!=l.options[a].overload){var o=$(l.nodeNumber,l.options[a].overload,t);if(o){var n={value:l.options[a].value,label:o};i.value.push(n)}}else void 0!=l.options[a].label&&i.value.push(l.options[a])})),(l,t)=>{const d=(0,a.g2)("q-select"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Z,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",ee,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(d,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),r],options:(0,o.R1)(i),"popup-content-class":"q-pm-none","map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}};var te=t(4940);const ae=le,oe=ae;p()(le,"components",{QCard:h.A,QCardSection:_.A,QSelect:te.A});const ne={class:"text-h6"},se={class:"text-subtitle2"},ie={key:0},de="EventVariableSlider",re={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)((()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e})),r=(0,a.EW)((()=>{var e=u.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),u=(0,a.EW)({get(){return(t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)&d.value)>>l.startBit},set(e){let a=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);if(e<=l.max&&e>=l.min){let o=e;o<<=l.startBit,a|=o&d.value,a&=o|~d.value,s.value=!1,i.value="",t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a)}else console.log(de+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.sV)((()=>{}));const c=()=>{console.log(de+": clickNegative"),u.value>l.min&&u.value--},m=()=>{console.log(de+": clickNegative"),u.value>l.min+5?u.value-=5:u.value=l.min},b=()=>{console.log(de+": clickPositive"),u.value<l.max&&u.value++},p=()=>{console.log(de+": clickPositive"),u.value<l.max-5?u.value+=5:u.value=l.max},v=()=>{console.log(de+": clickTest")};return(l,t)=>{const o=(0,a.g2)("q-badge"),s=(0,a.g2)("q-slider"),i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-space"),f=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(f,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ne,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",se,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(s,{"model-value":u.value,max:e.max,min:e.min,onChange:t[0]||(t[0]=e=>{u.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(f,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})])),_:1}),(0,a.bF)(g),(0,a.bF)(d,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:t[2]||(t[2]=e=>m()),"no-caps":""})])),_:1}),(0,a.bF)(g),(0,a.bF)(g),(0,a.bF)(g),(0,a.bF)(d,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[l.outputOnWrite?((0,a.uX)(),(0,a.CE)("div",ie,[(0,a.bF)(i,{dense:"",size:"sm",label:"Test",onClick:t[3]||(t[3]=e=>v()),"no-caps":""})])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(g),(0,a.bF)(g),(0,a.bF)(g),(0,a.bF)(d,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:t[4]||(t[4]=e=>p()),"no-caps":""})])),_:1}),(0,a.bF)(g),(0,a.bF)(d,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:t[5]||(t[5]=e=>b()),"no-caps":""})])),_:1})])),_:1})])),_:1})])),_:1})}}};var ue=t(1444),ce=t(1693),me=t(3676);const be=re,pe=be;p()(re,"components",{QCard:h.A,QCardSection:_.A,QBadge:P.A,QSlider:ue.A,QBtn:ce.A,QSpace:me.A});const ve={class:"no-padding no-margin"},ge={class:"no-padding no-margin"},fe={class:"no-padding no-margin row",style:{border:"1px solid grey"}},ye={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,o.KR)(),n=(0,o.KR)();(0,a.WQ)("store");return(0,a.sV)((()=>{t.value=l.configuration.tabPanels,n.value=t.value[0].displayTitle})),(e,s)=>{const i=(0,a.g2)("q-tab"),d=(0,a.g2)("q-tabs"),r=(0,a.g2)("q-tab-panel"),u=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",ve,[(0,a.bF)(d,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,(e=>((0,a.uX)(),(0,a.Wv)(i,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.Lk)("div",ge,[(0,a.bF)(u,{"keep-alive":"",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,(e=>((0,a.uX)(),(0,a.Wv)(r,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.k6)((()=>[(0,a.Lk)("div",fe,[(0,a.bF)((0,o.R1)(Ce),{configuration:e.items,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])}}};var ke=t(2980),he=t(327),_e=t(9041),qe=t(1746);const Ne=ye,Ve=Ne;p()(ye,"components",{QTabs:ke.A,QTab:he.A,QTabPanels:_e.A,QTabPanel:qe.A});const Fe={class:"q-pa-xs row"},xe={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),n=e=>{var a=!0;return e.visibilityLogic&&(a=J(l.nodeNumber,e.visibilityLogic,t,l.eventIdentifier)),a};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(t,s)=>((0,a.uX)(),(0,a.CE)("div",Fe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["EventVariableBitArray"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(N),{key:0,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"EventVariableBitSingle"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(C),{key:1,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"EventVariableGroup"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(W),{key:2,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0),"EventVariableNumber"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(M),{key:3,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,startBit:e.startBit,endBit:e.endBit,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","startBit","endBit","min","max","configuration"])):(0,a.Q3)("",!0),"EventVariableSelect"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(oe),{key:4,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options"])):(0,a.Q3)("",!0),"EventVariableSlider"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(pe),{key:5,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit"])):(0,a.Q3)("",!0),"EventVariableTabs"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ve),{key:6,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0)])))),128))]))}},we=xe,Ce=we,Ae="EventVariableRaw",Ie={__name:"EventVariableRaw",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,t=l.name?l.name:"Event Variable "+l.eventVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>n.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{try{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,n.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,e))}catch(t){console.log(Ae+": update_event : "+t)}};return(0,a.sV)((()=>{d.value=n.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)})),(e,l)=>{const n=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-pa-none",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",label:(0,o.R1)(t),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})])),_:1})}}},Re=Ie,Qe=Re;p()(Ie,"components",{QCard:h.A,QCardSection:_.A,QInput:O.A});const Ee={class:"text-h6"},Le="MDFDownloadDialog",We={__name:"MDFDownloadDialog",props:{modelValue:{type:Boolean,required:!0},moduleDescriptorFilename:{type:String}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),o=e,s=l,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(()=>{console.log(Le+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const r=async e=>{console.log(Le+": actionDownload"),await d(500);let l=JSON.stringify(t.state.exported_MDF,null,"  "),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(l,t)=>{const o=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ee," Download "+(0,n.v_)(e.moduleDescriptorFilename),1)])),_:1}),(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{color:"positive",label:"Download",onClick:t[0]||(t[0]=l=>r(e.moduleDescriptorFilename))},null,512),[[m,2]])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var Se=t(2156),Te=t(6868),Be=t(2669),De=t(8672);const Ke=We,Ue=Ke;p()(We,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A}),p()(We,"directives",{ClosePopup:De.A});const Xe=(0,a.Lk)("div",{class:"text-h6"}," MDF upload ",-1),Pe=(0,a.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),Oe=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file will be stored with it's original filename"),(0,a.Lk)("br"),(0,a.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a.Lk)("br"),(0,a.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1),ze=(0,a.Lk)("div",{class:"text-subtitle2"},"Current node:",-1),Me={class:"text-subtitle2"},je=(0,a.Lk)("br",null,null,-1),He=(0,a.Lk)("br",null,null,-1),Ge=(0,a.Lk)("br",null,null,-1),$e=(0,a.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1),Je="MDFUploadDialog",Ye={__name:"MDFUploadDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Je+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{if(s.value){var e=s.value.name;console.log(Je+": selected filename "+e);let l=new FileReader;l.readAsText(s.value),l.onload=function(){try{var a=JSON.parse(l.result);a["moduleDescriptorFilename"]=e,console.log(Je+": actionUpload: "+a.moduleDescriptorFilename),console.log(Je+": actionUpload: result: "+JSON.stringify(a)),t.methods.import_module_descriptor(i.nodeNumber,a)}catch(o){console.log(Je+": actionUpload: failed JSON parse")}},s.value=null}else console.log(Je+": actionUpload: uploadFile no value ")};return(e,l)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-file"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[Xe])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Pe,Oe])),_:1}),(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[ze,(0,a.Lk)("div",Me,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(t).state.nodes[(0,o.R1)(t).state.selected_node].moduleName),1),je,(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(t).state.nodes[(0,o.R1)(t).state.selected_node].moduleIdentifier),1),He,(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(t).state.nodes[(0,o.R1)(t).state.selected_node].moduleVersion),1),Ge])])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[$e])),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{color:"positive",label:"Upload",onClick:l[1]||(l[1]=e=>u())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var Ze=t(9980);const el=Ye,ll=el;p()(Ye,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QFile:Ze.A,QCardActions:Be.A}),p()(Ye,"directives",{ClosePopup:De.A});const tl=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor File Management ",-1),al=(0,a.Lk)("div",{class:"text-h6"},"Current node:",-1),ol={class:"text-subtitle2"},nl=(0,a.Lk)("br",null,null,-1),sl=(0,a.Lk)("br",null,null,-1),il=(0,a.Lk)("br",null,null,-1),dl=(0,a.Lk)("br",null,null,-1),rl=(0,a.Lk)("br",null,null,-1),ul=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file is matched using the module identifier, version number and processor code, the name portion is not used"),(0,a.Lk)("br"),(0,a.eW)(" If no match is found, then it will fall back to using just the module identifier and the version number"),(0,a.Lk)("br"),(0,a.eW)(" Modules that need files using the processor code are the exception, most won't use it"),(0,a.Lk)("br")],-1),cl=(0,a.Lk)("div",{class:"text-h6"},"System files for this module type",-1),ml=(0,a.Lk)("div",{class:"text-h6"},"User files for this module type",-1),bl="MDFDialog",pl={__name:"MDFDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(),m=(0,o.KR)(),b=e,p=l,v=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(v,(()=>{N(),V(),y()}));const g=(0,a.EW)((()=>i.state.MDFChanged));(0,a.wB)(g,(()=>{console.log(bl+": WATCH: MDFChanged"),N(),V(),y()}));const f=(0,a.EW)((()=>i.state.server.nodes[b.nodeNumber]));(0,a.wB)(f,(()=>{console.log(bl+": WATCH: server_node"),N(),V()}));const y=()=>{m.value="";try{m.value=i.state.nodeDescriptors[b.nodeNumber].moduleDescriptorFilename}catch(e){console.log(bl+": getModuleDescriptorFilename: "+e)}console.log(bl+": getModuleDescriptorFilename: "+m.value)},k=(0,o.KR)([]),h=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],_=(0,o.KR)([]),q=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],N=async()=>{console.log(bl+": update_SYSTEM_rows"),void 0!=f.value&&(k.value=[],void 0!=f.value.SYSTEM_MDF_List&&f.value.SYSTEM_MDF_List.forEach((e=>{k.value.push({file:e[0],timestamp:e[1]})})),k.value.sort((function(e,l){return e.file<l.file?-1:1})))},V=async()=>{console.log(bl+": update_USER_rows"),void 0!=f.value&&(_.value=[],void 0!=f.value.USER_MDF_List&&f.value.USER_MDF_List.forEach((e=>{_.value.push({file:e[0],timestamp:e[1]})})),_.value.sort((function(e,l){return e.file<l.file?-1:1})))},F=async()=>{await d(500),i.methods.request_matching_mdf_list(b.nodeNumber,"USER")};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{}));const x=e=>{console.log(bl+": clickDelete");t.notify({message:"Are you sure you want to delete file "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.request_MDF_delete(e),F()}},{label:"NO",color:"white",handler:()=>{}}]})},w=e=>{console.log(bl+": clickSystemDownload"),i.methods.request_MDF_export("SYSTEM",e),c.value=e,r.value=!0},C=e=>{console.log(bl+": clickUserDownload"),i.methods.request_MDF_export("USER",e),c.value=e,r.value=!0},A=()=>{console.log(bl+": clickUpload"),u.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-td"),y=(0,a.g2)("q-tr"),N=(0,a.g2)("q-table"),V=(0,a.g2)("q-dialog"),F=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(V,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"q-pa-none q-ma-none",style:{"min-width":"950px","min-height":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[F,3]])])),default:(0,a.k6)((()=>[tl])),_:1})])),_:1}),(0,a.bF)(b,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{width:"500px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[al,(0,a.Lk)("div",ol,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleName),1),nl,(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleIdentifier),1),sl,(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleVersion),1),il,(0,a.eW)(" Processor type: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].cpuName),1),dl,(0,a.eW)(" Processor code: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].parameters[9]),1),rl,(0,a.eW)(" Current module descriptor: "+(0,n.v_)(m.value),1)])])),_:1}),(0,a.bF)(b,{style:{width:"400px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[ul,(0,a.bF)(p,{class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{color:"positive",size:"sm",label:"Upload new file",onClick:t[0]||(t[0]=e=>A())})])),_:1})])),_:1})])),_:1}),(0,a.bF)(g,{flat:"",style:{"max-height":"70vh"},class:"no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{flat:"",class:"no-margin q-pa-none row"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"no-margin q-pa-xs",style:{"min-width":"380px"}},{default:(0,a.k6)((()=>[cl,(0,a.bF)(N,{flat:"",bordered:"",dense:"",rows:k.value,columns:h,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(y,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{key:"file",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.file),1)])),_:2},1032,["props"]),(0,a.bF)(f,{key:"timestamp",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)])),_:2},1032,["props"]),(0,a.bF)(f,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:l=>w(e.row.file),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)(g,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"no-margin q-py-xs",style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[ml,(0,a.bF)(N,{flat:"",bordered:"",dense:"",rows:_.value,columns:q,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(y,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{key:"file",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.file),1)])),_:2},1032,["props"]),(0,a.bF)(f,{key:"timestamp",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)])),_:2},1032,["props"]),(0,a.bF)(f,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:l=>C(e.row.file),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Delete",onClick:l=>x(e.row.file),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ue),{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),moduleDescriptorFilename:c.value},null,8,["modelValue","moduleDescriptorFilename"]),(0,a.bF)((0,o.R1)(ll),{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var vl=t(528),gl=t(4488),fl=t(5262);const yl=pl,kl=yl;p()(pl,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A,QTable:vl.A,QTr:gl.A,QTd:fl.A}),p()(pl,"directives",{ClosePopup:De.A});const hl={class:"text-h6"},_l={key:0,class:"text-h6"},ql={class:"q-pa-xs row"},Nl={class:"q-pa-xs row"},Vl=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1),Fl={class:"text-body2"},xl={class:"q-pa-xs row"},wl=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Stored events"),(0,a.Lk)("br")],-1),Cl={class:"text-body2"},Al="EventVariablesDialog",Il={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},eventIdentifier:{type:String,required:!0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=e,f=l,y=(0,a.EW)({get(){return g.modelValue},set(e){f("update:modelValue",e)}});(0,a.wB)(y,(()=>{c.value=!1,p.value=!1})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((async()=>{try{g.nodeNumber?(void 0!=i.state.nodeDescriptors[g.nodeNumber]?(r.value=i.state.nodeDescriptors[g.nodeNumber].eventVariables,m.value=!1):(r.value={},c.value=!0,m.value=!0),k()):c.value=!0}catch(e){console.log(Al+": onUpdated: error: "+e)}}));const k=()=>{1!=i.state.loadFile_notification_raised[g.nodeNumber]&&("Unknown"==i.state.nodes[g.nodeNumber].moduleName?(t.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[g.nodeNumber]=!0):void 0!=i.state.nodes[g.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[g.nodeNumber]&&(t.notify({message:"Failed to load module file "+i.state.nodes[g.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[g.nodeNumber]=!0),i.state.loadFile_notification_raised[g.nodeNumber])},h=async()=>{if(console.log(Al+": clickClose: node "+g.nodeNumber+" eventIdentifier "+g.eventIdentifier),g.newEvent){console.log(Al+": clickClose: new event");try{var e=i.state.nodes[g.nodeNumber];try{var l=e.storedEventsNI[g.eventIdentifier].variables[1];void 0==l&&(l=0)}catch(t){u(i,g.nodeNumber,g.eventIdentifier),l=0}i.methods.event_teach_by_identifier(g.nodeNumber,g.eventIdentifier,1,l),await d(250),i.methods.request_all_node_events(g.nodeNumber)}catch(t){console.log(Al+": clickClose "+t)}}},_=()=>{console.log(Al+": clickToggleVariablesDescriptor"),p.value=!p.value},q=()=>{console.log(Al+": clickToggleRaw"),c.value=!c.value},N=()=>{console.log(Al+": clickToggleStoredEvents:"),v.value=!v.value},V=()=>{console.log(Al+": clickUpdateModuleDescriptor"),i.methods.request_matching_mdf_list(g.nodeNumber,"USER"),i.methods.request_matching_mdf_list(g.nodeNumber,"SYSTEM"),b.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-separator"),k=(0,a.g2)("q-card"),F=(0,a.g2)("q-card-actions"),x=(0,a.g2)("q-dialog"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[0]||(t[0]=e=>V())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:h},null,512),[[w]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",hl," Node: "+(0,n.v_)((0,o.R1)(i).getters.node_name(g.nodeNumber))+"       Event: "+(0,n.v_)((0,o.R1)(i).getters.event_name(g.eventIdentifier))+"       ",1)])),_:1})])),_:1}),(0,a.bF)(k,{class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"scroll no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[1]||(t[1]=e=>V())})])),default:(0,a.k6)((()=>[m.value?((0,a.uX)(),(0,a.CE)("div",_l," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0)])),_:1}),(0,o.R1)(i).state.nodeDescriptors[g.nodeNumber].eventVariableInformation?((0,a.uX)(),(0,a.Wv)(u,{key:0,class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)((0,o.R1)(i).state.nodeDescriptors[g.nodeNumber].eventVariableInformation),1)])),_:1})):(0,a.Q3)("",!0),(0,a.Lk)("div",ql,[(0,o.R1)(i).state.nodeDescriptors[g.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ce),{key:0,configuration:(0,o.R1)(i).state.nodeDescriptors[g.nodeNumber].eventVariables,nodeNumber:g.nodeNumber,eventIdentifier:g.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])):(0,a.Q3)("",!0)]),(0,a.bF)(f),c.value?((0,a.uX)(),(0,a.Wv)(u,{key:1,class:"q-pa-xs row"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(i).state.nodes[g.nodeNumber].parameters[5],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Qe),{eventVariableIndex:e,nodeNumber:g.nodeNumber,eventIdentifier:g.eventIdentifier,key:e},null,8,["eventVariableIndex","nodeNumber","eventIdentifier"])))),128)),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0),p.value?((0,a.uX)(),(0,a.Wv)(u,{key:2,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Nl,[Vl,(0,a.Lk)("div",Fl,[(0,a.Lk)("pre",null,(0,n.v_)(r.value),1)])]),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0),v.value?((0,a.uX)(),(0,a.Wv)(u,{key:3,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",xl,[wl,(0,a.Lk)("div",Cl,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(i).state.nodes[g.nodeNumber].storedEventsNI),1)])]),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(F,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle stored events view",onClick:t[2]||(t[2]=e=>N())}),(0,a.bF)(s,{flat:"",label:"Toggle variable descriptor view",onClick:t[3]||(t[3]=e=>_())}),(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:t[4]||(t[4]=e=>q())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(kl),{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var Rl=t(386);const Ql=Il,El=Ql;p()(Il,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QSeparator:Rl.A,QCardActions:Be.A}),p()(Il,"directives",{ClosePopup:De.A});const Ll={class:"text-h6"},Wl={key:0,class:"text-h6"},Sl={key:0},Tl=(0,a.Lk)("div",{class:"text-body"},"Consumed events will need the number of the node that produces the event",-1),Bl=(0,a.Lk)("div",{class:"text-body"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),Dl=(0,a.Lk)("div",{class:"text-h6"},"Node Number",-1),Kl=(0,a.Lk)("div",{class:"text-h6"},"Event Number",-1),Ul=(0,a.Lk)("div",{class:"text-h6"},"Device Number",-1),Xl=(0,a.Lk)("div",{class:"text-body"},"Event Name and Event Group are optional values",-1),Pl=(0,a.Lk)("div",{class:"text-body"},"Input will be disabled if previously entered",-1),Ol=(0,a.Lk)("div",{class:"text-h6"},"Event Name",-1),zl=(0,a.Lk)("div",{class:"text-h6"},"Event Group",-1),Ml="AddEventDialog",jl={__name:"AddEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:void 0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),i=(0,s.A)(),d=(0,o.KR)(),r=(0,o.KR)(),c=(0,o.KR)(),m=(0,o.KR)(),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!0),g=(0,o.KR)(!1);var f=(0,o.KR)();const y=(0,o.KR)(!1),k=(0,o.KR)("");var h=null;const _=e,q=l,N=(0,a.EW)({get(){return _.modelValue},set(e){q("update:modelValue",e)}});(0,a.wB)(r,(()=>{void 0==d.value&&"short"!=f.value||(p.value=!0)})),(0,a.wB)(d,(()=>{void 0!=r.value&&(p.value=!0)}));const V=e=>{e&&e in t.state.layout.eventDetails&&(g.value=!0,c.value=t.getters.event_name(e),m.value=t.getters.event_group(e))};(0,a.$u)((()=>{void 0!=_.nodeNumber&&0==t.state.nodes[_.nodeNumber].parameters[4]&&v.value,d.value=null,r.value=null,c.value=null,f.value=null,b.value=!1,p.value=!1,g.value=!1}));const F=()=>{console.log(Ml+": clickAddEvent "+d.value+" "+r.value),k.value=h,void 0!=_.nodeNumber&&u(t,_.nodeNumber,k.value)&&(y.value=!0),g.value||(t.setters.event_name(k.value,c.value),t.setters.event_group(k.value,m.value)),N.value=!1},x=()=>{console.log(Ml+": clickNext "),"short"==f.value&&(d.value=0),h=parseInt(d.value).toString(16).toUpperCase().padStart(4,0),h+=parseInt(r.value).toString(16).toUpperCase().padStart(4,0),console.log(Ml+": entered_event_identifier: "+h),V(h),console.log(Ml+": eventAlreadyExistsInLayoutData: "+g.value);var e=!1;if(_.nodeNumber?void 0!=t.state.nodes[_.nodeNumber].storedEventsNI[h]&&(e=!0):g.value&&(e=!0),e){i.notify({message:"This event already exists",timeout:0,position:"center",color:"primary",actions:[{label:"continue",color:"white",handler:async()=>{}}]})}else b.value=!0};return(e,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),h=(0,a.g2)("q-radio"),q=(0,a.g2)("q-space"),V=(0,a.g2)("q-input"),w=(0,a.g2)("q-card-actions"),C=(0,a.g2)("q-card"),A=(0,a.g2)("q-dialog"),I=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(A,{modelValue:N.value,"onUpdate:modelValue":l[9]||(l[9]=e=>N.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(C,{style:{"min-width":"350px","min-height":"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[I]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ll," Add event for node "+(0,n.v_)((0,o.R1)(t).getters.node_name(_.nodeNumber)),1)])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[0==v.value?((0,a.uX)(),(0,a.CE)("div",Wl," This module does not support any stored events ")):(0,a.Q3)("",!0)])),_:1}),v.value?((0,a.uX)(),(0,a.CE)("div",Sl,[(0,a.bF)(u,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{dense:"",modelValue:(0,o.R1)(f),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,o.i9)(f)?f.value=e:f=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(q),(0,a.bF)(h,{dense:"",modelValue:(0,o.R1)(f),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.i9)(f)?f.value=e:f=e),val:"short",label:"Short event"},null,8,["modelValue"]),(0,a.bF)(q),(0,a.bF)(q)])),_:1}),"long"==(0,o.R1)(f)?((0,a.uX)(),(0,a.Wv)(u,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[Tl,Bl])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[Dl])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{dense:"",modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[Kl])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{dense:"",modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.Q3)("",!0),"short"==(0,o.R1)(f)?((0,a.uX)(),(0,a.Wv)(u,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[Ul])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{dense:"",modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.Q3)("",!0),b.value||null==(0,o.R1)(f)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(u,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)(w,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{disable:!p.value,color:"blue",label:"Next",onClick:l[5]||(l[5]=e=>x())},null,8,["disable"]),[[I]])])),_:1})])),_:1})),b.value?((0,a.uX)(),(0,a.Wv)(u,{key:3},{default:(0,a.k6)((()=>[Xl,Pl,(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[Ol])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{disable:g.value,dense:"",modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e)},null,8,["disable","modelValue"])])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[zl])),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{disable:g.value,dense:"",modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=e=>m.value=e)},null,8,["disable","modelValue"])])),_:1})])),_:1})):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.Wv)(u,{key:4},{default:(0,a.k6)((()=>[(0,a.bF)(w,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{disable:!b.value,color:"blue",label:"Add Event",onClick:l[8]||(l[8]=e=>F())},null,8,["disable"]),[[I]])])),_:1})])),_:1})):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(El),{modelValue:y.value,"onUpdate:modelValue":l[10]||(l[10]=e=>y.value=e),nodeNumber:(0,o.R1)(t).state.selected_node,eventIdentifier:k.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}};var Hl=t(7878);const Gl=jl,$l=Gl;p()(jl,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QRadio:Hl.A,QSpace:me.A,QInput:O.A,QCardActions:Be.A}),p()(jl,"directives",{ClosePopup:De.A});const Jl={class:"text-h6"},Yl=(0,a.Lk)("div",{class:"text-h6"},"Are you sure you want to delete all events for this node?",-1),Zl="DeleteAllEventsDialog",et={__name:"DeleteAllEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log(Zl+": deleteAllEvents "+s.nodeNumber),t.methods.delete_all_events(s.nodeNumber)};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(l,s)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Jl," Delete all events for node "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Yl])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},lt=et,tt=lt;p()(et,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QCardActions:Be.A}),p()(et,"directives",{ClosePopup:De.A});const at={class:"text-h6"},ot="AdvancedEventsDialog",nt={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=()=>{console.log(ot+": deleteAllEvents "+i.nodeNumber),s.value=!0};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(l,i)=>{const d=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(p,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",at," Advanced events functions for node "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(m,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"positive",label:"Delete all events",onClick:i[0]||(i[0]=e=>u())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(tt),{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},st=nt,it=st;p()(nt,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A}),p()(nt,"directives",{ClosePopup:De.A});const dt={class:"text-h6"},rt={class:"text-h6"},ut={class:"text-h6"},ct=(0,a.Lk)("div",{class:"text-h6"},"Generate event",-1),mt=(0,a.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1),bt={class:"q-pa-md q-gutter-sm"},pt="SendEventDialog",vt={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(pt+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?t.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):t.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?t.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):t.methods.long_off_event(e,i.eventNumber)};return(e,l)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",dt," Test event : "+(0,n.v_)((0,o.R1)(t).getters.event_name(i.eventIdentifier)),1)])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",rt,"Sending Node "+(0,n.v_)(i.sendingNodeNumber),1),(0,a.Lk)("div",ut,"Event "+(0,n.v_)(s.value)+":"+(0,n.v_)(i.eventNumber),1)])),_:1}),(0,a.bF)(b,{class:"q-pa-md"},{default:(0,a.k6)((()=>[ct,mt,(0,a.Lk)("div",bt,[(0,a.bo)((0,a.bF)(d,{color:"green",label:"ON",onClick:l[0]||(l[0]=e=>u())},null,512),[[f]]),(0,a.bo)((0,a.bF)(d,{color:"negative",label:"OFF",onClick:l[1]||(l[1]=e=>c())},null,512),[[f]])])])),_:1}),(0,a.bF)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},gt=vt,ft=gt;p()(vt,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QCardActions:Be.A}),p()(vt,"directives",{ClosePopup:De.A});const yt={class:"text-h6"},kt=(0,a.Lk)("div",{class:"text-h6"},"Event name",-1),ht=(0,a.Lk)("div",{class:"text-h6"},"Event group",-1),_t="NameEventDialog",qt={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(""),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{t.state.layout.eventDetails[d.eventIdentifier]&&(s.value=t.state.layout.eventDetails[d.eventIdentifier].name,i.value=t.state.layout.eventDetails[d.eventIdentifier].group)}));const c=()=>{console.log(_t+": clickAccept: name: "+d.eventIdentifier+" "+s.value),t.setters.event_name(d.eventIdentifier,s.value),t.setters.event_group(d.eventIdentifier,i.value),s.value="",i.value=""};return(e,l)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",yt," Edit name for event : "+(0,n.v_)((0,o.R1)(t).getters.event_name(d.eventIdentifier)),1)])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[kt,(0,a.bF)(b,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[ht,(0,a.bF)(b,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Nt=qt,Vt=Nt;p()(qt,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A,QCardActions:Be.A}),p()(qt,"directives",{ClosePopup:De.A});const Ft=(0,a.Lk)("div",{class:"text-h6"},"Node parameters are still loading",-1),xt=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1),wt="NodeParametersLoadingDialog",Ct={__name:"NodeParametersLoadingDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue","NodeParametersLoadingDialog"],setup(e,{emit:l}){const t=(0,a.WQ)("store");let o=Date.now();const n=e,s=l,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(async()=>{1==i.value&&await r(n.nodeNumber)}));const r=async e=>{if(t.state.nodes[e].parameters[9])i.value=!1;else{t.methods.request_all_node_parameters(e,20,100);let a=Date.now();try{while(void 0==t.state.nodes[e].parameters[9]){if(await d(100),Date.now()>a+2e4)throw"********** failed to read Node Parameters: Max time elapsed";if(Date.now()>o+2e3)throw"********** failed to read Node Parameters: lastBusTraffic timeout "}i.value=!1}catch(l){console.log(wt+": checkNodeParameters: "+l),i.value=!1}}s("NodeParametersLoadingDialog","finished normally")};return t.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{o=Date.now()})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-card-actions"),s=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[Ft,xt])),_:1}),(0,a.bF)(n,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},At=Ct,It=At;p()(Ct,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QCardActions:Be.A,QBtn:ce.A}),p()(Ct,"directives",{ClosePopup:De.A});const Rt=(0,a.Lk)("div",{class:"text-h6"},"Node Variables are still loading",-1),Qt=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1),Et="NodeVariablesLoadingDialog",Lt={__name:"NodeVariablesLoadingDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue","NodeVariablesLoadingDialog"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(0),i=e,r=l,u=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(async()=>{1==u.value&&await c(i.nodeNumber)}));const c=async e=>{var l=t.state.nodes[e].parameters[6];if(void 0!=t.state.nodes[e].nodeVariables[l]);else{t.methods.request_all_node_variables(e,t.state.nodes[e].parameters[6],100,1);var a=20*l+20;try{while(void 0==t.state.nodes[e].nodeVariables[l])if(s.value=Object.keys(t.state.nodes[e].nodeVariables).length,await d(1),a--,a<0)throw"********** failed to read Node Variables";u.value=!1}catch(o){console.log(Et+": checkNodeParameters: "+o),u.value=!1}}r("NodeVariablesLoadingDialog","finished normally")};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-btn"),i=(0,a.g2)("q-card-actions"),d=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[Rt,Qt])),_:1}),(0,a.bF)(t,{class:"text-h6",align:"center"},{default:(0,a.k6)((()=>[(0,a.eW)(" Variable count: "+(0,n.v_)(s.value),1)])),_:1}),(0,a.bF)(i,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Close"},null,512),[[c]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Wt=Lt,St=Wt;p()(Lt,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QCardActions:Be.A,QBtn:ce.A}),p()(Lt,"directives",{ClosePopup:De.A});const Tt={class:"text-h6"},Bt=(0,a.Lk)("div",{class:"text-h6"},"Teach Event",-1),Dt=(0,a.Lk)("div",{class:"text-subtitle2"},"Select node",-1),Kt={class:"q-pa-xs q-gutter-sm"},Ut=(0,a.Lk)("div",{class:"text-h6"},"Taught Events",-1),Xt=(0,a.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1),Pt="EventTeachDialog",Ot={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(),r=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(""),v=(0,o.KR)(""),g=e,f=l,y=(0,a.EW)({get(){return g.modelValue},set(e){f("update:modelValue",e)}});(0,a.wB)(y,(()=>{k.value=""}));const k=(0,o.KR)(),h=(0,o.KR)([]),_=(0,o.KR)([]),q=(0,o.KR)([]),N=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=(0,a.EW)((()=>t.state.nodes.updateTimestamp));(0,a.wB)(V,(()=>{g.eventIdentifier&&F()}));const F=async()=>{try{q.value=[],_.value=[];var e=Object.values(t.state.nodes);e.forEach((e=>{if(e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let l=Object.values(e.storedEventsNI);l.forEach((async l=>{if(l.eventIdentifier==g.eventIdentifier){_.value.push(e.nodeNumber);var a=t.state.layout.nodeDetails[e.nodeNumber].name;q.value.push({number:e.nodeNumber,name:a,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier})}}))}})),x()}catch(l){console.log(Pt+": update_taught_nodes "+l)}},x=()=>{try{h.value=[];var e=t.state.nodes;for(var l in e){var a=!0;for(var o in _.value)_.value[o]==l&&(a=!1);if(a&&e[l].consumer){var n=l+": ";t.state.layout&&(t.state.layout.nodeDetails[l]&&(n+=t.state.layout.nodeDetails[l].name),h.value.push(n))}}}catch(s){console.log(Pt+": update_available_nodes: "+s)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{g.eventIdentifier&&F()}));const w=async e=>{p.value="",m.value=!0;for(let l=0;l<1e3;l++){if(p.value.length>0)break;await d(10)}m.value=!1},C=async e=>{v.value="",c.value=!0;for(let l=0;l<1e4;l++){if(v.value.length>0)break;await d(10)}await d(500),c.value=!1},A=async()=>{if(console.log(Pt+`: clickTeachEvent: ${k.value} : ${g.eventIdentifier}`),""!=k.value){var e=k.value.split(":"),l=parseInt(e[0]);i.value=l,await w(l),await C(l),u(t,l,g.eventIdentifier),s.value=g.eventIdentifier,b.value=!0,r.value=!0,k.value=void 0}},I=async(e,l)=>{console.log(Pt+": clickVariables "+e+" "+l),i.value=e,s.value=l,b.value=!1,await w(e),await C(e),await t.methods.request_event_variables_by_identifier(e,l),r.value=!0};return(e,l)=>{const d=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-select"),V=(0,a.g2)("q-card"),F=(0,a.g2)("q-td"),x=(0,a.g2)("q-tr"),w=(0,a.g2)("q-table"),C=(0,a.g2)("q-dialog"),R=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=e=>y.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[R]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Tt," Teach event : "+(0,n.v_)((0,o.R1)(t).getters.event_name(g.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(V,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Bt,Dt,(0,a.bF)(_,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),options:h.value},null,8,["modelValue","options"]),(0,a.Lk)("div",Kt,[(0,a.bF)(d,{color:"negative",label:"Teach",onClick:l[1]||(l[1]=e=>A()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(V,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)((()=>[Ut,Xt,(0,a.bF)(w,{flat:"",bordered:"",dense:"",rows:q.value,columns:N,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(x,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{key:"number",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.number),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>I(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(El),{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),nodeNumber:i.value,eventIdentifier:s.value,newEvent:b.value},null,8,["modelValue","nodeNumber","eventIdentifier","newEvent"]),(0,a.bF)((0,o.R1)(It),{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value=e),nodeNumber:i.value,onNodeParametersLoadingDialog:l[5]||(l[5]=e=>p.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(St),{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e),nodeNumber:i.value,onNodeVariablesLoadingDialog:l[7]||(l[7]=e=>v.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},zt=Ot,Mt=zt;p()(Ot,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QSelect:te.A,QTable:vl.A,QTr:gl.A,QTd:fl.A}),p()(Ot,"directives",{ClosePopup:De.A});const jt=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events By Node View ",-1),Ht=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of the events for a specific node ",-1),Gt=(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),$t=(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1),Jt=(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1),Yt=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),Zt=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),ea=(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1),la=(0,a.Lk)("div",{class:"text_body1"}," The event source shows if the event has been read from the module (stored event) or if the event hasn't been read from the module, but has been seen on the CAN bus (Bus event), which is the case for default events on some modules that can't be read from the module ",-1),ta={__name:"EventsByNodeViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[jt])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Ht])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Gt,$t])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Jt])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Yt,Zt])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ea])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[la])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},aa=ta,oa=aa;p()(ta,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A}),p()(ta,"directives",{ClosePopup:De.A});const na={style:{height:"45vh"}},sa={class:"text-h6"},ia={class:"full-width"},da="EventsListByNode",ra={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)([]),d=(0,o.KR)(""),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(),f=(0,o.KR)(""),y=((0,o.KR)(0),(0,o.KR)(0));(0,o.KR)();const k=e,h=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",required:!1,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],_=(0,a.EW)((()=>k.nodeNumber));(0,a.wB)(_,(()=>{k.nodeNumber&&F()}));const q=(0,a.EW)((()=>t.state.nodes.updateTimestamp));(0,a.wB)(q,(()=>{console.log(da+": WATCH: nodesUpdated "+q.value),k.nodeNumber&&F()}));const N=(0,a.EW)((()=>Object.values(t.state.busEvents)));(0,a.wB)(N,(()=>{k.nodeNumber&&F()}));const V=(0,a.EW)((()=>t.state.layout.eventDetails));(0,a.wB)(V,(()=>{k.nodeNumber&&F()}));const F=()=>{i.value=[];try{var e=Object.values(t.state.nodes[k.nodeNumber].storedEventsNI);e.forEach((e=>{var l=parseInt(e.eventIdentifier.substr(0,4),16),a=parseInt(e.eventIdentifier.substr(4,4),16);let o={};o["eventIdentifier"]=e.eventIdentifier,o["eventName"]=t.getters.event_name(e.eventIdentifier),o["eventGroup"]=t.getters.event_group(e.eventIdentifier),o["nodeNumber"]=l,o["eventNumber"]=a,o["eventType"]=0==l?"short":"long",o["storedEvent"]=!0,o["source"]="stored event",i.value.push(o)}));var l=Object.values(t.state.busEvents);l.forEach((l=>{if(l.nodeNumber==k.nodeNumber){var a=!1,o=l.eventIdentifier;if("short"==l.type&&(o="0000"+o.substr(4,4)),e.forEach((e=>{o==e.eventIdentifier&&(a=!0)})),0==a){let e={};e["eventIdentifier"]=o,e["eventName"]=t.getters.event_name(o),e["eventGroup"]=t.getters.event_group(o),e["nodeNumber"]=l.nodeNumber,e["eventNumber"]=l.eventNumber,e["eventType"]=l.type,e["storedEvent"]=!1,e["source"]="bus event",i.value.push(e)}}})),i.value.sort((function(e,l){return e.eventIdentifier<l.eventIdentifier?-1:1}))}catch{}};(0,a.KC)((()=>{F()})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{}));const x=()=>{console.log(da+": clickAddEvent"),r.value=!0},w=()=>{console.log(da+": clickAdvanced"),u.value=!0},C=e=>{console.log(da+": clickDelete");l.notify({message:"Are you sure you want to delete this event?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{console.log("removeEvent "+k.nodeNumber+" "+e),t.methods.remove_event(k.nodeNumber,e)}},{label:"NO",color:"white",handler:()=>{}}]})},A=e=>{console.log(da+": clickEventName "+e),f.value=e,g.value=t.getters.event_name(e),p.value=!0},I=()=>{console.log(da+": clickInfo"),b.value=!0},R=()=>{console.log(da+": clickRefresh"),t.methods.request_all_node_events(k.nodeNumber),F()},Q=e=>{console.log(da+": send OFF "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_off_event(k.nodeNumber,a):t.methods.long_off_event(l,a)},E=e=>{console.log(da+": send ON "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_on_event(k.nodeNumber,a):t.methods.long_on_event(l,a)},L=e=>{console.log(da+": clickTeach"),f.value=e,c.value=!0},W=async e=>{await t.methods.request_event_variables_by_identifier(k.nodeNumber,e),f.value=e,console.log(da+": clickVariables: node "+k.nodeNumber),m.value=!0};return(l,s)=>{const g=(0,a.g2)("q-btn"),_=(0,a.g2)("q-space"),q=(0,a.g2)("q-icon"),N=(0,a.g2)("q-input"),V=(0,a.g2)("q-banner"),F=(0,a.g2)("q-td"),S=(0,a.g2)("q-tr"),T=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",na,[(0,a.bF)(V,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(g,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:s[0]||(s[0]=e=>I())}),(0,a.bF)(_),(0,a.eW)("      "),(0,a.bF)(N,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("    "),(0,a.bF)(g,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:s[2]||(s[2]=e=>x())}),(0,a.bF)(g,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:s[3]||(s[3]=e=>w())}),(0,a.bF)(g,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:s[4]||(s[4]=e=>R())})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",sa," Events for node : "+(0,n.v_)((0,o.R1)(t).getters.node_name(k.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",ia,[(0,a.bF)(T,{class:"my-sticky-header-table",bordered:"",dense:"",rows:i.value,columns:h,filter:d.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(S,{props:e,class:(0,n.C4)([f.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(F,{key:"eventIdentifier",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"eventName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventName),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"eventGroup",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventGroup),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"nodeNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"eventNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"eventType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventType),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"source",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.source),1)])),_:2},1032,["props"]),(0,a.bF)(F,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>A(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:l=>W(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>L(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>E(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>Q(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"]),(0,a.bF)(g,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>C(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"])]),(0,a.bF)((0,o.R1)($l),{modelValue:r.value,"onUpdate:modelValue":s[5]||(s[5]=e=>r.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(it),{modelValue:u.value,"onUpdate:modelValue":s[6]||(s[6]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Vt),{modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=e=>p.value=e),eventIdentifier:f.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:c.value,"onUpdate:modelValue":s[8]||(s[8]=e=>c.value=e),eventIdentifier:f.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ft),{modelValue:v.value,"onUpdate:modelValue":s[9]||(s[9]=e=>v.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:y.value,eventIdentifier:f.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(El),{modelValue:m.value,"onUpdate:modelValue":s[10]||(s[10]=e=>m.value=e),nodeNumber:e.nodeNumber,eventIdentifier:f.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(oa),{modelValue:b.value,"onUpdate:modelValue":s[11]||(s[11]=e=>b.value=e)},null,8,["modelValue"])])}}};var ua=t(492),ca=t(7156);const ma=(0,E.A)(ra,[["__scopeId","data-v-32be5ad9"]]),ba=ma;p()(ra,"components",{QBanner:Te.A,QBtn:ce.A,QSpace:me.A,QInput:O.A,QIcon:ua.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QField:ca.A});const pa={class:"text-h6"},va=(0,a.Lk)("div",{class:"text-h6"},"Are you sure you want to delete this node?",-1),ga="DeleteNodeDialog",fa={__name:"DeleteNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const r=()=>{console.log(ga+": deleting node "+s.nodeNumber),t.methods.remove_node(s.nodeNumber),t.eventBus.emit("NODE_DELETED_EVENT",s.nodeNumber)};return(l,s)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",pa," Delete node "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[va])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",colour:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]]),(0,a.bo)((0,a.bF)(i,{flat:"",colour:"positive",label:"No"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ya=fa,ka=ya;p()(fa,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QCardActions:Be.A}),p()(fa,"directives",{ClosePopup:De.A});const ha={class:"text-h6"},_a={class:"q-pa-xs row"},qa=(0,a.Lk)("div",{class:"text-h6"},"Select a file to upload",-1),Na={class:"text-h6"},Va=(0,a.Lk)("br",null,null,-1),Fa=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Warnings: "),(0,a.Lk)("br")],-1),xa=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Disconnect all SLiM nodes to prevent corruption. "),(0,a.Lk)("br")],-1),wa=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Ensure there is mimimal or no traffic on the CAN bus before programming to avoid failure (issue with older bootloader firmware). "),(0,a.Lk)("br")],-1),Ca=(0,a.Lk)("div",{class:"text-body1"}," In the event of a failure, and if the node is left in bootmode (both leds lit), then retry with the 'Program in Boot Mode' option checked. ",-1),Aa="ProgramNodeDialog",Ia={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(null),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(),m=(0,o.KR)("");var b=0,p=void 0;const v=e,g=l,f=(0,a.EW)({get(){return v.modelValue},set(e){g("update:modelValue",e)}});(0,a.wB)(f,(()=>{s.value=null})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const y=async()=>{if(s.value){var e=s.value.name;console.log(Aa+": selected filename "+e);let l=new FileReader;l.readAsText(s.value),l.onload=function(){try{console.log(Aa+": actionUpload: result: "+l.result)}catch(e){console.log(Aa+": actionUpload: "+e)}t.methods.program_node(v.nodeNumber,p,b,s.value)}}else console.log(Aa+": actionUpload: uploadFile no value ")};t.eventBus.on("PROGRAM_NODE_PROGRESS",(e=>{if(m.value=e,e.includes("FIRMWARE:")){const l=e.split("FIRMWARE:");c.value=l[1]}}));const k=async()=>{b=i.value?1|b:-2&b,b=d.value?2|b:-3&b,b=r.value?4|b:-5&b,b=u.value?8|b:-9&b,p=t.state.nodes[v.nodeNumber].parameters[9],console.log(Aa+": clickProgram: node: "+v.nodeNumber+" cpuType: "+p+" flags: "+b),c.value="",await y()},h=async()=>{t.methods.request_all_node_parameters(v.nodeNumber,20,100),f.value=!1};return(l,b)=>{const p=(0,a.g2)("q-btn"),v=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-file"),_=(0,a.g2)("q-checkbox"),q=(0,a.g2)("q-card"),N=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.Wv)(V,{modelValue:f.value,"onUpdate:modelValue":b[7]||(b[7]=e=>f.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"750px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close",onClick:b[0]||(b[0]=e=>h())})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",ha,"   program Node "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",_a,[(0,a.bF)(q,{flat:"",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[qa])),_:1}),(0,a.bF)(y,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(g,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.eW)(" FLASH memory is always programmed ")])),_:1}),(0,a.bF)(g,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:i.value,"onUpdate:modelValue":b[2]||(b[2]=e=>i.value=e),label:"Program configuration"},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:d.value,"onUpdate:modelValue":b[3]||(b[3]=e=>d.value=e),label:"Program EEPROM"},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:r.value,"onUpdate:modelValue":b[4]||(b[4]=e=>r.value=e),label:"Ignore CPU type"},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{modelValue:u.value,"onUpdate:modelValue":b[5]||(b[5]=e=>u.value=e),label:"Program in Boot Mode"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(q,{flat:"",class:"q-pa-sm",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",Na," Node CPU type: "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].cpuName)+" ("+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].parameters[9])+") ",1),Va])),_:1}),Fa,xa,wa,Ca])),_:1})]),(0,a.bF)(g,{class:"row"},{default:(0,a.k6)((()=>[(0,a.bF)(N,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{color:"primary",label:"Program",onClick:b[6]||(b[6]=e=>k())})])),_:1}),(0,a.bF)(q,{align:"center",flat:"",class:"text-h6",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(c.value),1)])),_:1})])),_:1}),(0,a.bF)(g,{class:"bg-info text-h6 text-white"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Status: "+(0,n.v_)(m.value),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ra=Ia,Qa=Ra;p()(Ia,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QFile:Ze.A,QCheckbox:m.A,QCardActions:Be.A});const Ea={class:"text-h6"},La={class:"q-pa-md"},Wa="SetCanIdDialog",Sa={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,r=l,u=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{}));const c=async()=>{s.value&&(console.log(Wa+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),t.methods.set_can_id(i.nodeNumber,s.value),await d(100),t.methods.query_all_nodes()),s.value=void 0};return(l,i)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ea," Set CAN ID for node : "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Current CAN ID: "+(0,n.v_)((0,o.R1)(t).getters.node_can_id(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",La,[(0,a.eW)(" Enter new CAN ID, 1 to 99 "),(0,a.bF)(b,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ta=Sa,Ba=Ta;p()(Sa,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A,QCardActions:Be.A}),p()(Sa,"directives",{ClosePopup:De.A});const Da={class:"text-h6"},Ka="AdvancedNodeDialog",Ua={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=e,c=l,m=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const b=()=>{console.log(Ka+": clickCanIdEnumeration "+u.nodeNumber),t.methods.node_can_id_enum(u.nodeNumber)},p=()=>{console.log(Ka+": clickDeleteNode "+u.nodeNumber),s.value=!0},v=()=>{console.log(Ka+": clickMDF"),t.methods.request_matching_mdf_list(u.nodeNumber,"USER"),t.methods.request_matching_mdf_list(u.nodeNumber,"SYSTEM"),i.value=!0},g=()=>{console.log(Ka+": clickProgramNode "+u.nodeNumber),d.value=!0},f=()=>{console.log(Ka+": clickResetNode "+u.nodeNumber),t.methods.reset_node(u.nodeNumber)},y=()=>{console.log(Ka+": clickSetCAN_ID "+u.nodeNumber),r.value=!0};return(l,u)=>{const c=(0,a.g2)("q-btn"),k=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-card"),q=(0,a.g2)("q-dialog"),N=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:m.value,"onUpdate:modelValue":u[6]||(u[6]=e=>m.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Da," Advanced functions for node "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(h,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete node",onClick:u[0]||(u[0]=e=>p())},null,512),[[N]])])),_:1}),0==(0,o.R1)(t).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(h,{key:0,align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:u[1]||(u[1]=e=>b())})])),_:1})):(0,a.Q3)("",!0),0==(0,o.R1)(t).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(h,{key:1,align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:u[2]||(u[2]=e=>y())})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(h,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:u[3]||(u[3]=e=>f())})])),_:1}),(0,a.bF)(h,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:u[4]||(u[4]=e=>g())})])),_:1}),(0,a.bF)(h,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Module Descriptor File",onClick:u[5]||(u[5]=e=>v())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ka),{modelValue:s.value,"onUpdate:modelValue":u[7]||(u[7]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(kl),{modelValue:i.value,"onUpdate:modelValue":u[8]||(u[8]=e=>i.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Qa),{modelValue:d.value,"onUpdate:modelValue":u[9]||(u[9]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ba),{modelValue:r.value,"onUpdate:modelValue":u[10]||(u[10]=e=>r.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Xa=Ua,Pa=Xa;p()(Ua,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A}),p()(Ua,"directives",{ClosePopup:De.A});const Oa={class:"text-h6"},za=(0,a.Lk)("div",{class:"text-h6"},"Name",-1),Ma=(0,a.Lk)("div",{class:"text-h6"},"Group",-1),ja={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{t.state.layout.nodeDetails[d.nodeNumber]&&(s.value=t.state.layout.nodeDetails[d.nodeNumber].name,i.value=t.getters.node_group(d.nodeNumber))}));const c=()=>{console.log("new node name: "+s.value),t.setters.node_name(d.nodeNumber,s.value),t.setters.node_group(d.nodeNumber,i.value)};return(l,t)=>{const o=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-input"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Oa," Edit name for node : "+(0,n.v_)(e.nodeNumber),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[za,(0,a.bF)(r,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[Ma,(0,a.bF)(r,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>c())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ha=ja,Ga=Ha;p()(ja,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A,QCardActions:Be.A}),p()(ja,"directives",{ClosePopup:De.A});const $a={__name:"NodeParameter",props:["Name","Value"],setup(e){return(l,t)=>{const o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:""},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.Name),1),(0,a.eW)(" : "+(0,n.v_)(e.Value),1)])),_:1})}}},Ja=$a,Ya=Ja;p()($a,"components",{QCard:h.A});const Za={__name:"NodeParameterRaw",props:["nodeNumber","parameterIndex"],setup(e){const l=(0,a.WQ)("store"),t=e,o=(0,a.EW)((()=>l.getters.node_parameter_name(t.nodeNumber,t.parameterIndex))),n=(0,a.EW)((()=>l.getters.node_parameter_value(t.nodeNumber,t.parameterIndex)));return(e,l)=>{const t=(0,a.g2)("q-input"),s=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(s,{class:"q-pa-xs",flat:"",style:{"min-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(t,{filled:"",label:o.value,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),outlined:"",disable:"",readonly:""},null,8,["label","modelValue"])])),_:1})}}},eo=Za,lo=eo;p()(Za,"components",{QCard:h.A,QInput:O.A});const to={class:"text-h6"},ao=(0,a.Lk)("div",{class:"text-body1"}," Raw node parameter values ",-1),oo={class:"q-pa-none row"},no="NodeParametersDialog",so={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,a.EW)((()=>t.state.nodes[i.nodeNumber].moduleDescriptorFilename));(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{console.log(no+": clickUpdateModuleDescriptor"),t.methods.request_matching_mdf_list(i.nodeNumber,"USER"),t.methods.request_matching_mdf_list(i.nodeNumber,"SYSTEM"),s.value=!0};return(l,d)=>{const m=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-separator"),g=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"700px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(m,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:d[0]||(d[0]=e=>c())}),(0,a.bo)((0,a.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",to," Parameter Information for "+(0,n.v_)((0,o.R1)(t).getters.node_name(i.nodeNumber)),1)])),_:1}),(0,a.bF)(g,{style:{"max-height":"80vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Ya),{Name:"Node Number",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Events Currently Stored",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Manufacturer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Module",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Module Identifier",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Producer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Consumer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Consume own Events",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"VLCB",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Node Variables",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Events Supported",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Event Variables",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"CPU Name",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Interface",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Firmware Version",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,o.R1)(t).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Beta Version",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Ya),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"]),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),(0,a.bF)(v),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),ao,(0,a.Lk)("div",oo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t).state.nodes[i.nodeNumber].parameters[0]+1,((l,t)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(lo),{nodeNumber:e.nodeNumber,parameterIndex:t,key:t},null,8,["nodeNumber","parameterIndex"])))),128))])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(kl),{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},io=so,ro=io;p()(so,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QSeparator:Rl.A}),p()(so,"directives",{ClosePopup:De.A});const uo={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1}},setup(e){const l=e,t=(0,a.WQ)("store"),n=(0,o.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.EW)({get(){return t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]},set(e){l.learn?t.methods.update_node_variable_in_learn_mode(l.nodeNumber,l.variableIndex,e):t.methods.update_node_variable(l.nodeNumber,l.variableIndex,e)}});(0,a.wB)(i,((e,a)=>{n.value=!!(t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit])}));const d=()=>{let e=i.value;n.value?e|=s[l.bit]:e&=~s[l.bit],l.learn?t.methods.update_node_variable_in_learn_mode(l.nodeNumber,l.variableIndex,e):t.methods.update_node_variable(l.nodeNumber,l.variableIndex,e)};return(0,a.sV)((()=>{const e=!!(t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit]);n.value=e})),(l,t)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),label:e.label,onClick:d,"right-label":""},null,8,["modelValue","label"])}}},co=uo,mo=co;p()(uo,"components",{QCheckbox:m.A});const bo={class:"text-h6"},po={class:"text-subtitle2"},vo={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""}},setup(e){const l=(0,a.WQ)("store");(0,o.KR)();var t=(0,o.KR)();const s=e,i=(0,a.EW)((()=>l.state.nodes[s.nodeNumber].nodeVariables));function d(){for(var e in t.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=$(s.nodeNumber,s.bitCollection[e].overload,l);if(a){var o={bitPosition:s.bitCollection[e].bitPosition,label:a};t.value.push(o)}}else s.bitCollection[e].label&&t.value.push(s.bitCollection[e])}return(0,a.wB)(i,(()=>{d()})),(0,a.sV)((()=>{d()})),(l,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",bo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",po,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t),(l=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.bF)((0,o.R1)(mo),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:l.bitPosition,label:l.label},null,8,["nodeNumber","variableIndex","bit","label"])])))),128))])),_:1})])),_:1})}}},go=vo,fo=go;p()(vo,"components",{QCard:h.A,QCardSection:_.A});const yo={class:"text-h6"},ko={class:"text-subtitle2"},ho={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",yo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",ko,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(mo),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit},null,8,["nodeNumber","variableIndex","bit"])])),_:1})])),_:1})}}},_o=ho,qo=_o;p()(ho,"components",{QCard:h.A,QCardSection:_.A});const No={class:"text-h6"},Vo={class:"text-subtitle2"},Fo={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:65025},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,t=(l.name&&l.name,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>(t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<l.min||e>l.max?(console.log(`Invalid Value : ${e}`),s.value=!0,i.value="Invalid Value"):(console.log(`Value Ok : ${e}`),s.value=!1,i.value="",t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexHigh,e>>8),t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexLow,255&e))};return(0,a.sV)((()=>{d.value=(t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]})),(l,t)=>{const o=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",No,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",Vo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{mask:"#####",debounce:"1000",hint:e.hint,modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["hint","modelValue","error-message","error"])])),_:1})])),_:1})}}},xo=Fo,wo=xo;p()(Fo,"components",{QCard:h.A,QCardSection:_.A,QInput:O.A});const Co={class:"q-pa-xs row"},Ao={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},Io={class:"GroupTitle q-py-none"},Ro={__name:"NodeVariableGroup",props:{configuration:Object},setup(e){(0,a.WQ)("store"),(0,o.KR)("nvGroup");return(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(l,t)=>((0,a.uX)(),(0,a.CE)("div",Co,[(0,a.Lk)("div",Ao,[(0,a.Lk)("div",Io,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)((0,o.R1)(nn),{configuration:e.configuration.groupItems},null,8,["configuration"])])]))}},Qo=(0,E.A)(Ro,[["__scopeId","data-v-88ba305a"]]),Eo=Qo,Lo={class:"text-h6"},Wo={class:"text-subtitle2"},So={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>{let e=255*l.displayScale+l.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":"###"})),u=(0,a.EW)((()=>l.min*l.displayScale+l.displayOffset)),c=(0,a.EW)((()=>l.max*l.displayScale+l.displayOffset)),m=(0,a.EW)((()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.wB)(m,(()=>{d.value=d.value=B(m.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)}));const b=e=>{let a=m.value,o=Number(e);o<u.value?(s.value=!0,i.value="Value less than "+u.value):o>c.value?(s.value=!0,i.value="Value more than "+c.value):(a=D(a,o,l.displayScale,l.displayOffset,l.startBit,l.endBit),s.value=!1,i.value="",t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,a))};return(0,a.sV)((()=>{d.value=B(m.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)})),(l,t)=>{const o=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Lo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",Wo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)(" range "+(0,n.v_)(u.value)+" to "+(0,n.v_)(c.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(m,{mask:r.value,debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:b},null,8,["mask","modelValue","error-message","error"])])),_:1})])),_:1})}}},To=So,Bo=To;p()(So,"components",{QCard:h.A,QCardSection:_.A,QBadge:P.A,QInput:O.A});const Do={class:"text-h6"},Ko={class:"text-subtitle2"},Uo={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},learn:{type:Boolean,default:!1}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(),i=(0,a.EW)((()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.wB)(i,(()=>{s.value=i.value&l.bitMask}));const d=e=>{console.log(`NodeVariableSelect update_variable ${e.value}`);let a=i.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,a)};return(0,a.sV)((()=>{s.value=i.value&l.bitMask})),(l,t)=>{const o=(0,a.g2)("q-select"),i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Do,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",Ko,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},Xo=Uo,Po=Xo;p()(Uo,"components",{QCard:h.A,QCardSection:_.A,QSelect:te.A});const Oo={class:"text-h6"},zo={class:"text-subtitle2"},Mo={key:0},jo="NodeVariableSlider",Ho={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)((()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e}));let r=t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex];const u=(0,a.EW)((()=>(c.value,{height:"150px"}))),c=(0,a.EW)((()=>{var e=!1;return l&&(e=!!l.configuration.outputOnWrite),e}));(0,a.wB)(c,(()=>{}));const m=(0,a.EW)((()=>{var e=b.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),b=(0,a.EW)({get(){return(t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]&d.value)>>l.startBit},set(e){if(e<=l.max&&e>=l.min){let a=e;a<<=l.startBit,r|=a&d.value,r&=a|~d.value,s.value=!1,i.value="",t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r)}else console.log(jo+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.$u)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(jo+": clickNegative"),b.value>l.min&&b.value--},v=()=>{console.log(jo+": clickNegative"),b.value>l.min+5?b.value-=5:b.value=l.min},g=()=>{console.log(jo+": clickPositive"),b.value<l.max&&b.value++},f=()=>{console.log(jo+": clickPositive"),b.value<l.max-5?b.value+=5:b.value=l.max},y=()=>{console.log(jo+": clickTest"),t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r)};return(l,t)=>{const o=(0,a.g2)("q-badge"),s=(0,a.g2)("q-slider"),i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-space"),k=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(k,{class:"q-ma-xs no-padding",style:{"min-width":"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:(0,n.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Oo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",zo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(m.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(s,{"model-value":b.value,max:e.max,min:e.min,onChange:t[0]||(t[0]=e=>{b.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(k,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:t[1]||(t[1]=e=>p()),"no-caps":""})])),_:1}),(0,a.bF)(r),(0,a.bF)(d,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:t[2]||(t[2]=e=>v()),"no-caps":""})])),_:1}),(0,a.bF)(r),(0,a.bF)(r),(0,a.bF)(r),(0,a.bF)(d,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[c.value?((0,a.uX)(),(0,a.CE)("div",Mo,[(0,a.bF)(i,{dense:"",size:"sm",label:"Test",onClick:t[3]||(t[3]=e=>y()),"no-caps":""})])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(r),(0,a.bF)(r),(0,a.bF)(r),(0,a.bF)(d,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:t[4]||(t[4]=e=>f()),"no-caps":""})])),_:1}),(0,a.bF)(r),(0,a.bF)(d,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:t[5]||(t[5]=e=>g()),"no-caps":""})])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})}}},Go=Ho,$o=Go;p()(Ho,"components",{QCard:h.A,QCardSection:_.A,QBadge:P.A,QSlider:ue.A,QBtn:ce.A,QSpace:me.A});const Jo={class:"no-padding no-margin"},Yo={class:"no-padding no-margin row",style:{border:"1px solid grey"}},Zo={__name:"NodeVariableTabs",props:{configuration:Object},setup(e){const l=e,t=(0,o.KR)(),n=(0,o.KR)();(0,a.WQ)("store"),(0,o.KR)("nvTabs"),(0,o.KR)("92vw");return(0,a.sV)((()=>{t.value=l.configuration.tabPanels,n.value=t.value[0].displayTitle})),(0,a.wB)(n,(()=>{})),(0,a.$u)((()=>{})),(e,l)=>{const s=(0,a.g2)("q-tab"),i=(0,a.g2)("q-tabs"),d=(0,a.g2)("q-tab-panel"),r=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",Jo,[(0,a.bF)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(r,{"keep-alive":"",modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),class:"no-padding no-margin"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,name:e.displayTitle,class:"no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Yo,[(0,a.bF)((0,o.R1)(nn),{configuration:e.items},null,8,["configuration"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}},en=Zo,ln=en;p()(Zo,"components",{QTabs:ke.A,QTab:he.A,QTabPanels:_e.A,QTabPanel:qe.A});const tn={class:"q-pa-xs row"},an={__name:"NodeVariables",props:{configuration:Object},setup(e){const l=(0,a.WQ)("store");function t(e){var t=!0;return e.visibilityLogic&&(t=J(l.state.selected_node,e.visibilityLogic,l)),t}return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(n,s)=>((0,a.uX)(),(0,a.CE)("div",tn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["NodeVariableBitArray"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(fo),{key:0,nodeNumber:(0,o.R1)(l).state.selected_node,variableIndex:e.nodeVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,learn:!1},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"NodeVariableBitSingle"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(qo),{key:1,nodeNumber:(0,o.R1)(l).state.selected_node,variableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,bit:e.bit},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit"])):(0,a.Q3)("",!0),"NodeVariableDual"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(wo),{key:2,NodeVariableIndexLow:e.nodeVariableIndexLow,NodeVariableIndexHigh:e.nodeVariableIndexHigh,NodeNumber:(0,o.R1)(l).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"NodeVariableGroup"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Eo),{key:3,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0),"NodeVariableNumber"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Bo),{key:4,"node-number":(0,o.R1)(l).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,"node-variable-index":e.nodeVariableIndex,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit},null,8,["node-number","displayTitle","displaySubTitle","node-variable-index","displayScale","displayOffset","displayUnits","min","max","startBit","endBit"])):(0,a.Q3)("",!0),"NodeVariableSelect"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Po),{key:5,nodeVariableIndex:e.nodeVariableIndex,nodeNumber:(0,o.R1)(l).state.selected_node,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options"])):(0,a.Q3)("",!0),"NodeVariableSlider"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)($o),{key:6,"node-number":(0,o.R1)(l).state.selected_node,nodeVariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableTabs"==e.type&&t(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(ln),{key:7,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0)])))),128))]))}},on=an,nn=on,sn={__name:"NodeVariableRaw",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,t=l.name?l.name:"Variable"+l.nodeVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>n.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",n.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,e))};return(0,a.sV)((()=>{d.value=r.value})),(e,l)=>{const n=(0,a.g2)("q-input"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-pa-xs",flat:"",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",class:"bg-white",filled:"",label:(0,o.R1)(t),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})}}},dn=sn,rn=dn;p()(sn,"components",{QCard:h.A,QInput:O.A});const un={class:"text-h6"},cn={key:0,class:"text-h6"},mn={key:1,class:"text-h6"},bn={key:2,class:"q-pa-none row"},pn={class:"q-pa-xs row"},vn=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1),gn={class:"text-body2"},fn="NodevariablesDialog",yn={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=e,p=l,v=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(v,(()=>{r.value=!1,m.value=!1}));const g=(0,a.EW)((()=>{var e=void 0;return b.nodeNumber&&void 0!=i.state.nodeDescriptors[b.nodeNumber]&&(e=i.state.nodeDescriptors[b.nodeNumber].nodeVariables),e}));(0,a.wB)(g,(()=>{void 0==g.value?(r.value=!0,d.value=!0):d.value=!1})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{b.nodeNumber&&(f(),0==i.state.nodes[b.nodeNumber].parameters[6]?u.value=!0:u.value=!1)}));const f=()=>{void 0==i.state.loadFile_notification_raised[b.nodeNumber]&&("Unknown"==i.state.nodes[b.nodeNumber].moduleName?(t.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0):void 0!=i.state.nodes[b.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[b.nodeNumber]&&(t.notify({message:"Failed to load module file "+i.state.nodes[b.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0),i.state.loadFile_notification_raised[b.nodeNumber]),void 0==g.value?(r.value=!0,d.value=!0):d.value=!1},y=()=>{console.log(fn+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},k=()=>{console.log(fn+": clickToggleNodeDescriptor"),m.value?m.value=!1:m.value=!0},h=()=>{console.log(fn+": clickUpdateModuleDescriptor"),i.methods.request_matching_mdf_list(b.nodeNumber,"USER"),i.methods.request_matching_mdf_list(b.nodeNumber,"SYSTEM"),c.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),p=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-card"),q=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(N,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[0]||(t[0]=e=>h())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",un," Node Variables for node : "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1})])),_:1}),(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[d.value?((0,a.uX)(),(0,a.CE)("div",cn," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0),u.value?((0,a.uX)(),(0,a.CE)("div",mn," this node has no variables to display ")):(0,a.Q3)("",!0)])),_:1}),(0,o.R1)(i).state.nodeDescriptors[b.nodeNumber].nodeVariableInformation?((0,a.uX)(),(0,a.Wv)(f,{key:0,class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)((0,o.R1)(i).state.nodeDescriptors[b.nodeNumber].nodeVariableInformation),1)])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(i).state.nodeDescriptors[b.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(nn),{key:1,configuration:(0,o.R1)(i).state.nodeDescriptors[b.nodeNumber].nodeVariables},null,8,["configuration"])):(0,a.Q3)("",!0),r.value?((0,a.uX)(),(0,a.CE)("div",bn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(i).state.nodes[b.nodeNumber].parameters[6],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(rn),{"node-variable-index":e,"node-number":b.nodeNumber,key:e},null,8,["node-variable-index","node-number"])))),128))])):(0,a.Q3)("",!0),m.value?((0,a.uX)(),(0,a.Wv)(f,{key:3,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",pn,[vn,(0,a.Lk)("div",gn,[(0,a.Lk)("pre",null,(0,n.v_)(g.value),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(q,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:t[1]||(t[1]=e=>k())}),(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:t[2]||(t[2]=e=>y())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(kl),{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},kn=yn,hn=kn;p()(yn,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A}),p()(yn,"directives",{ClosePopup:De.A});const _n=(0,a.Lk)("div",{class:"text-h6"}," Information about the Nodes View ",-1),qn=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of all the nodes on the layout ",-1),Nn=(0,a.Lk)("div",{class:"text_body1"}," When first connected, a QNN is issued to find all the nodes on the network, and the list created from the responses ",-1),Vn=(0,a.Lk)("div",{class:"text_body1"}," The REFRESH button can be used at any point to resend a QNN to update the display, when a new node is added for instance ",-1),Fn=(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),xn=(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1),wn=(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1),Cn=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),An=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),In=(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1),Rn={__name:"NodesViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[_n])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[qn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Nn,Vn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Fn,xn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[wn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Cn,An])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[In])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Qn=Rn,En=Qn;p()(Rn,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A}),p()(Rn,"directives",{ClosePopup:De.A});const Ln={class:"text-h6"},Wn="VLCBDiagnosticsDialog",Sn={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)([]),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(Wn+": WATCH model")}));const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,a.EW)((()=>{var e=void 0;try{d.nodeNumber&&t.state.nodes[d.nodeNumber].services[d.serviceIndex]&&(e=Object.values(t.state.nodes[d.nodeNumber].services[d.serviceIndex].diagnostics))}catch(l){console.log(Wn+": nodeServiceDiagnostics: "+l)}return e}));(0,a.wB)(m,(()=>{m.value&&b()}));const b=()=>{try{i.value=[],m.value.forEach((e=>{if(0!=e.DiagnosticCode){let l={};l["diagnosticCode"]=e.DiagnosticCode,l["diagnosticValue"]=e.DiagnosticValue,l["diagnosticName"]=e.DiagnosticName,i.value.push(l)}}))}catch(e){console.log(Wn+": update_rows: "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(Wn+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(l,d)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-actions"),k=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ln," VLCB Diagnostics for "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(v,{key:"diagnosticCode",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticCode),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticValue",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticValue),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",label:"Toggle diagnostics json",onClick:d[0]||(d[0]=e=>p())})])),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.eW)(" Diagnostics "),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Tn=Sn,Bn=Tn;p()(Sn,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QCardActions:Be.A}),p()(Sn,"directives",{ClosePopup:De.A});const Dn={class:"text-h6"},Kn="VLCBExtendedServicesDialog",Un={__name:"VLCBExtendedServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)([]),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Kn+": WATCH model"),c()}));const u=[{name:"esdIndex",field:"esdIndex",required:!0,label:"Byte",align:"left",sortable:!0},{name:"esdValue",field:"esdValue",required:!1,label:"Value",align:"left",sortable:!0},{name:"esdName",field:"esdName",required:!0,label:"Name",align:"left",sortable:!0}],c=()=>{try{const e=t.state.nodes[i.nodeNumber].services[i.serviceIndex].ESD;s.value=[];for(let l of Object.keys(e).sort()){console.log(Kn+": update_rows: "+l);let t={};t["esdIndex"]=l,t["esdValue"]=e[l].value,t["esdName"]=e[l].name,s.value.push(t)}}catch(e){console.log(Kn+": update_rows: "+e)}};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(l,i)=>{const d=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-td"),p=(0,a.g2)("q-tr"),v=(0,a.g2)("q-table"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Dn," Extended service data for "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"no-margin q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"vlcb-diagnostics-table",dense:"",rows:s.value,columns:u,"row-key":"esdIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(p,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(b,{key:"esdIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdIndex),1)])),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdValue",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdValue),1)])),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Xn=Un,Pn=Xn;p()(Un,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTable:vl.A,QTr:gl.A,QTd:fl.A}),p()(Un,"directives",{ClosePopup:De.A});const On={class:"text-h6"},zn="VLCBServicesDialog",Mn={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)([]),u=(0,o.KR)(null),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{g()}));const p=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"",align:"left"}],v=(0,a.EW)((()=>{var e={};try{c.nodeNumber&&(e=Object.values(t.state.nodes[c.nodeNumber].services))}catch(l){console.log(zn+": nodeServices "+l)}return e}));(0,a.wB)(v,(()=>{g()}));const g=()=>{r.value=[];try{v.value.forEach((e=>{let l={};l["serviceIndex"]=e.ServiceIndex,l["serviceType"]=e.ServiceType,l["serviceName"]=e.ServiceName,l["serviceVersion"]=e.ServiceVersion,r.value.push(l)}))}catch(e){console.log(zn+": update_rows "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const f=()=>{console.log(zn+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},y=e=>{console.log(`clickiagnostics: index ${e}`),t.methods.request_diagnostics(c.nodeNumber,e),u.value=e,i.value=!0},k=e=>{console.log(`clickESD: index ${e}`),u.value=e,d.value=!0};return(l,m)=>{const v=(0,a.g2)("q-btn"),g=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-td"),q=(0,a.g2)("q-tr"),N=(0,a.g2)("q-table"),V=(0,a.g2)("q-card-actions"),F=(0,a.g2)("q-card"),x=(0,a.g2)("q-dialog"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:b.value,"onUpdate:modelValue":m[1]||(m[1]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(v,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[w]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",On," VLCB Services for "+(0,n.v_)((0,o.R1)(t).getters.node_name(c.nodeNumber)),1)])),_:1})])),_:1}),(0,a.bF)(F,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(N,{class:"vlcb-services-table",dense:"",rows:r.value,columns:p,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(q,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(_,{key:"serviceIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceIndex),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceType),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceName),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceVersion",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceVersion),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Data",onClick:l=>k(e.row.serviceIndex),"no-caps":""},null,8,["onClick"]),(0,a.bF)(v,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Diagnostics",onClick:l=>y(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{flat:"",label:"Toggle services json",onClick:m[0]||(m[0]=e=>f())})])),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.eW)(" Service count: "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].serviceCount)+" ",1),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Bn),{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"]),(0,a.bF)((0,o.R1)(Pn),{modelValue:d.value,"onUpdate:modelValue":m[3]||(m[3]=e=>d.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},jn=Mn,Hn=jn;p()(Mn,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QCardActions:Be.A}),p()(Mn,"directives",{ClosePopup:De.A});const Gn=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1),$n=["src"],Jn="DialogExampleCompositionAPI",Yn={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store"),(0,o.KR)(!1);const t=e,n=l,s=(0,a.EW)({get(){return t.modelValue},set(e){n("update:modelValue",e)}});(0,a.wB)(s,(()=>{console.log(Jn+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(l,t)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])])),default:(0,a.k6)((()=>[Gn])),_:1})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,$n)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Zn=Yn,es=Zn;p()(Yn,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A}),p()(Yn,"directives",{ClosePopup:De.A});const ls=e=>((0,a.Qi)("data-v-79427795"),e=e(),(0,a.jt)(),e),ts={style:{height:"45vh"}},as=ls((()=>(0,a.Lk)("div",{class:"text-h6"},"Nodes View",-1))),os="NodesList",ns={__name:"NodesView",setup(e){const l=(0,s.A)(),t=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"left",sortable:!0},{name:"CANID",field:"CANID",required:!0,label:"CAN ID",align:"left",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],i=(0,a.WQ)("store"),r=(0,o.KR)(""),u=(0,o.KR)([]),c=(0,o.KR)(),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),y=(0,o.KR)(!1),k=(0,o.KR)(),h=(0,o.KR)(!1),_=(0,o.KR)(!1),q=(0,o.KR)(!1),N=(0,o.KR)("dummyModule/index.html"),V=(0,o.KR)(""),F=(0,o.KR)(""),x=(0,a.EW)((()=>i.state.nodes.updateTimestamp));(0,a.wB)(x,(()=>{console.log(os+": WATCH: nodesUpdated "+x.value),w()}));const w=()=>{u.value=[];let e=Object.values(i.state.nodes);e.forEach((e=>{if(e.nodeNumber){let l={};l["nodeNumber"]=e.nodeNumber,l["CANID"]=e.CANID,l["nodeName"]=i.getters.node_name(e.nodeNumber),l["group"]=i.getters.node_group(e.nodeNumber),l["moduleName"]=e.moduleName,l["component"]=e.component,l["status"]=e.status,e.flim?l["mode"]="FLiM":e.VLCB?l["mode"]="unInit":l["mode"]="SLiM",l["events"]=e.eventCount,l["vlcb"]=e.VLCB,u.value.push(l)}}))},C=e=>e in i.state.layout.nodeDetails?i.state.layout.nodeDetails[e].colour:"blue";(0,a.KC)((()=>{w()}));const A=async e=>{console.log(os+": select_node_row: node "+e),i.state.selected_node=e,k.value=e,m.value=!0,await d(300)};i.eventBus.on("NODE_DELETED_EVENT",(e=>{i.state.selected_node==e&&(m.value=!1)}));const I=async e=>{console.log(os+": checkNodeParameters: node "+e),V.value="",g.value=!0;for(let l=0;l<1e3;l++){if(V.value.length>0)break;await d(10)}g.value=!1;var t=void 0!=i.state.nodes[e].parameters[9];return 0==t&&l.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),console.log(os+": checkNodeParameters - result "+t),t},R=async e=>{console.log(os+": checkNodeVariables: node "+e),F.value="",h.value=!0;for(let l=0;l<1e4;l++){if(F.value.length>0)break;await d(10)}h.value=!1},Q=async e=>{console.log(os+": clickEvents: node "+e),k.value=e,await I(e),await R(e),i.methods.request_all_node_events(e),await A(e)},E=()=>{console.log(os+": clickInfo"),f.value=!0},L=async e=>{console.log(os+": clickNameNode: node "+e),k.value=e,await I(e),await A(e),p.value=!0},W=async e=>{console.log(os+": clickNodeAdvanced"),k.value=e,await I(e),await A(e),c.value=e,b.value=!0,console.log(os+": clickAdvanced: node"+i.state.selected_node)},S=async e=>{console.log(os+": clickParameters"),k.value=e,i.state.nodes[e].parameters={},await I(e)&&(console.log(os+": clickParameters: checkNodeParameters true"),await A(e),console.log(os+": clickParameters: node "+e),v.value=!0)},T=()=>{console.log(os+": clickRefresh"),i.methods.query_all_nodes()},B=async e=>{console.log(os+": clickVariables: node "+e),k.value=e,await I(e),await A(e),1e3==e&&i.state.develop?q.value=!0:(await R(e),y.value=!0)},D=async e=>{console.log(os+": clickVLCB"),k.value=e,await I(e),await A(e),await i.methods.request_service_discovery(i.state.selected_node),await d(200),_.value=!0};return(e,l)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-space"),x=(0,a.g2)("q-icon"),w=(0,a.g2)("q-input"),A=(0,a.g2)("q-banner"),I=(0,a.g2)("q-td"),R=(0,a.g2)("q-chip"),K=(0,a.g2)("q-tr"),U=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",ts,[(0,a.bF)(A,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[0]||(l[0]=e=>E())}),(0,a.bF)(d),(0,a.eW)("      "),(0,a.bF)(w,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("    "),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:l[2]||(l[2]=e=>T())})])),default:(0,a.k6)((()=>[as])),_:1}),(0,a.Lk)("div",null,[(0,a.bF)(U,{class:"my-sticky-header-table",bordered:"",dense:"",rows:u.value,columns:t,filter:r.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(K,{props:e,class:(0,n.C4)([k.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(I,{key:"nodeNumber",class:(0,n.C4)("text-"+C(e.row.nodeNumber)),props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["class","props"]),(0,a.bF)(I,{key:"CANID",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.CANID),1)])),_:2},1032,["props"]),(0,a.bF)(I,{key:"nodeName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeName),1)])),_:2},1032,["props"]),(0,a.bF)(I,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(I,{key:"moduleName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.moduleName),1)])),_:2},1032,["props"]),(0,a.bF)(I,{key:"mode",props:e},{default:(0,a.k6)((()=>["FLiM"==e.row.mode?((0,a.uX)(),(0,a.Wv)(R,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024)):((0,a.uX)(),(0,a.Wv)(R,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024))])),_:2},1032,["props"]),(0,a.bF)(I,{key:"status",props:e},{default:(0,a.k6)((()=>[e.row.status?((0,a.uX)(),(0,a.Wv)(R,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("OK")])),_:1})):((0,a.uX)(),(0,a.Wv)(R,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("Error")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(I,{key:"events",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.events),1)])),_:2},1032,["props"]),(0,a.bF)(I,{key:"actions"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",disabled:!e.row.status,onClick:l=>Q(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",disabled:!e.row.status,onClick:l=>L(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:l=>S(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",disabled:!e.row.status,onClick:l=>B(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),e.row.vlcb?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(s,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:l=>D(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.uX)(),(0,a.Wv)(s,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",disabled:!e.row.status,onClick:l=>D(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"])):(0,a.Q3)("",!0),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",disabled:!e.row.status,onClick:l=>W(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"]),1==m.value?((0,a.uX)(),(0,a.Wv)((0,o.R1)(ba),{key:0,nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["nodeNumber"])):(0,a.Q3)("",!0),(0,a.bF)((0,o.R1)(Pa),{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value=e),nodeNumber:c.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ga),{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=e=>p.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(ro),{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=e=>v.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(hn),{modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=e=>y.value=e),nodeNumber:k.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(It),{modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=e=>g.value=e),nodeNumber:k.value,onNodeParametersLoadingDialog:l[8]||(l[8]=e=>V.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(En),{modelValue:f.value,"onUpdate:modelValue":l[9]||(l[9]=e=>f.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(St),{modelValue:h.value,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value=e),nodeNumber:k.value,onNodeVariablesLoadingDialog:l[11]||(l[11]=e=>F.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Hn),{modelValue:_.value,"onUpdate:modelValue":l[12]||(l[12]=e=>_.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(es),{modelValue:q.value,"onUpdate:modelValue":l[13]||(l[13]=e=>q.value=e),URL:N.value},null,8,["modelValue","URL"])])])}}};var ss=t(6760);const is=(0,E.A)(ns,[["__scopeId","data-v-79427795"]]),ds=is;p()(ns,"components",{QBanner:Te.A,QBtn:ce.A,QSpace:me.A,QInput:O.A,QIcon:ua.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QChip:ss.A,QField:ca.A});const rs={class:"q-pa-md q-gutter-sm"},us=(0,a.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1),cs={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=((0,o.KR)(!1),e),i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,(()=>{})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(e,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-item-label"),c=(0,a.g2)("q-item"),m=(0,a.g2)("q-list"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup"),g=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)("div",rs,[(0,a.bF)(p,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),position:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{width:"300px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[us])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{bordered:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t).state.nodeTraffic,(e=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:e,clickable:"",dense:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.direction+"   "+e.json.mnemonic),1)])),_:2},1024)])),_:2},1024)),[[g]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}};var ms=t(3999),bs=t(124),ps=t(3796),vs=t(9626);const gs=cs,fs=gs;p()(cs,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QList:ms.A,QItem:bs.A,QItemLabel:ps.A}),p()(cs,"directives",{ClosePopup:De.A,Ripple:vs.A});const ys=(0,a.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1),ks=(0,a.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1),hs="CbusErrorsDialog",_s={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(hs+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{t.methods.clear_cbus_errors()};return(e,l)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-space"),p=(0,a.g2)("q-icon"),v=(0,a.g2)("q-input"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-tr"),y=(0,a.g2)("q-table"),k=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[ys])),_:1})])),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{title:"Nodes",rows:Object.values((0,o.R1)(t).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{top:(0,a.k6)((()=>[ks,(0,a.bF)(b),(0,a.bF)(v,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)((()=>[(0,a.bF)(p,{name:"search"})])),_:1},8,["modelValue"]),(0,a.bF)(b),(0,a.bF)(d,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})])),body:(0,a.k6)((e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(g,{key:"id",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.id),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"type",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Error",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Error),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Message",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Message),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"node",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.node),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"count",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},qs=_s,Ns=qs;p()(_s,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTable:vl.A,QSpace:me.A,QInput:O.A,QIcon:ua.A,QTr:gl.A,QTd:fl.A}),p()(_s,"directives",{ClosePopup:De.A});const Vs=(0,a.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1),Fs=(0,a.Lk)("div",{class:"text-h6"},"Events",-1),xs=(0,a.Lk)("div",{class:"text-h6"},"Cbus Errors",-1),ws=(0,a.Lk)("div",{class:"text-h6"},"Layout",-1),Cs=(0,a.Lk)("div",{class:"text-h6"},"Layouts",-1),As=(0,a.Lk)("div",{class:"text-h6"},"Descriptor List",-1),Is=(0,a.Lk)("div",{class:"text-h6"},"Node Descriptors",-1),Rs=(0,a.Lk)("div",{class:"text-h6"},"Nodes",-1),Qs=(0,a.Lk)("div",{class:"text-h6"},"Server",-1),Es=(0,a.Lk)("div",{class:"text-h6"},"Server Status",-1),Ls=(0,a.Lk)("div",{class:"text-h6"},"Node Traffic",-1),Ws="JsonDialog",Ss={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)("nodes"),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,a.wB)(r,(()=>{console.log(Ws+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab"),m=(0,a.g2)("q-tabs"),b=(0,a.g2)("q-tab-panel"),p=(0,a.g2)("q-tab-panels"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[Vs])),_:1})])),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,a.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.bF)(c,{name:"layout",label:"Layout"}),(0,a.bF)(c,{name:"layouts",label:"Layouts"}),(0,a.bF)(c,{name:"nodes",label:"Nodes"}),(0,a.bF)(c,{name:"server",label:"Server"}),(0,a.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.bF)(c,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,a.bF)(c,{name:"serverStatus",label:"server Status"}),(0,a.bF)(c,{name:"traffic",label:"Traffic"})])),_:1},8,["modelValue"]),(0,a.bF)(p,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),animated:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{name:"busEvents"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Fs,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.busEvents)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"cbusErrors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[xs,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.cbus_errors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layout"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[ws,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.layout)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layouts"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Cs,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.layouts_list)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptorList"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[As,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodeDescriptorList)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Is,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodeDescriptors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodes"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Rs,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodes)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"server"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Qs,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.server)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"serverStatus"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Es,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.serverStatus)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"traffic"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ls,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.nodeTraffic)+"\n              ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ts=Ss,Bs=Ts;p()(Ss,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTabs:ke.A,QTab:he.A,QTabPanels:_e.A,QTabPanel:qe.A}),p()(Ss,"directives",{ClosePopup:De.A});const Ds=(0,a.Lk)("div",{class:"text-h6"}," Manage Layout ",-1),Ks={class:"q-pa-md q-mr-sm rounded-borders"},Us={class:"text-h5 text-black"},Xs={class:"text-h6 text-black"},Ps={class:"q-pa-md row"},Os=(0,a.Lk)("div",{class:"text-h6"},"Change layout",-1),zs=(0,a.Lk)("p",null,"Click on the list of layouts to select an existing layout, or enter a name for a new layout, then click change",-1),Ms=(0,a.Lk)("div",{class:"text-h6"},"List of Layouts",-1),js=(0,a.Lk)("div",{class:"text-h6 text-black"},"Edit layout details",-1),Hs="LayoutDialog",Gs={__name:"LayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)([]),d=[{name:"layout",field:"layout",required:!0,label:"Layout",align:"left",sortable:!0}],r=e,u=l,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,(()=>{b()}));const m=(0,a.EW)((()=>Object.values(t.state.layouts_list)));(0,a.wB)(m,(()=>{b()}));const b=()=>{i.value=[],m.value.forEach((e=>{i.value.push({layout:e})}))},p=()=>{console.log(Hs+": Change layout"),t.methods.change_layout(s.value),t.methods.request_layout_list(),s.value=""},v=e=>{console.log(Hs+": clickLayouts on ",e),s.value=e};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const r=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),m=(0,a.g2)("q-input"),b=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-td"),y=(0,a.g2)("q-table"),k=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(k,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"900px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])])),default:(0,a.k6)((()=>[Ds])),_:1}),(0,a.Lk)("div",Ks,[(0,a.Lk)("div",Us,(0,n.v_)((0,o.R1)(t).state.layout.layoutDetails.title),1),(0,a.Lk)("div",Xs,(0,n.v_)((0,o.R1)(t).state.layout.layoutDetails.subTitle),1)]),(0,a.Lk)("div",Ps,[(0,a.bF)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Os,(0,a.bF)(m,{class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),zs,(0,a.bF)(r,{color:"negative",label:"change",onClick:l[1]||(l[1]=e=>p()),"no-caps":""})])),_:1})])),_:1}),(0,a.bF)(g,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Ms,(0,a.bF)(y,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",color:"primary",label:e.value,onClick:l=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)(g,{inline:"",class:"q-pa-md",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[js,(0,a.bF)(m,{label:"Sub Title",outlined:"",modelValue:(0,o.R1)(t).state.layout.layoutDetails.subTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.R1)(t).state.layout.layoutDetails.subTitle=e),onChange:l[3]||(l[3]=e=>(0,o.R1)(t).methods.update_layout())},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},$s=Gs,Js=$s;p()(Gs,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A,QTable:vl.A,QTd:fl.A}),p()(Gs,"directives",{ClosePopup:De.A});const Ys=(0,a.Lk)("div",{class:"text-h6"}," Bus message ",-1),Zs={class:"text-h6"},ei={class:"text-h6"},li={class:"text-h6"},ti="ModifiedGridConnectDialog",ai={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,s=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.wB)(s,(()=>{console.log(ti+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(l,t)=>{const o=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])])),default:(0,a.k6)((()=>[Ys])),_:1}),(0,a.bF)(d,{class:"fit"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Zs,"direction: "+(0,n.v_)(e.busMessage.direction),1),(0,a.Lk)("div",ei," message: "+(0,n.v_)(e.busMessage.json.text),1),(0,a.Lk)("div",li," encoded: "+(0,n.v_)(e.busMessage.json.encoded),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},oi=ai,ni=oi;p()(ai,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A}),p()(ai,"directives",{ClosePopup:De.A});const si=(0,a.Lk)("div",{class:"text-h6"}," New node detected ",-1),ii=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Accept the first free node number below "),(0,a.Lk)("br"),(0,a.eW)(" or enter a new one ")],-1),di={class:"text-h6"},ri=(0,a.Lk)("br",null,null,-1),ui=(0,a.Lk)("br",null,null,-1),ci=(0,a.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1),mi=(0,a.Lk)("div",{class:"text-h6"}," Enter a group for this node (optional) ",-1),bi="NewNodeDialog",pi={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0},moduleName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(""),r=(0,o.KR)(""),u=(0,o.KR)(0),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(bi+": WATCH model"),console.log(bi+": WATCH model: previousNodeNumber "+c.previousNodeNumber),u.value=p(),r.value=""})),(0,a.wB)(u,(()=>{console.log(bi+": WATCH model: newNodeNumber "+u.value);try{r.value=i.state.layout.nodeDetails[u.value].name,d.value=i.state.layout.nodeDetails[u.value].group}catch(e){console.log(bi+": WATCH newNodeNumber "+e)}}));const p=()=>{var e=0,l=256;i.state.layout.layoutDetails.baseNodeNumber&&(l=i.state.layout.layoutDetails.baseNodeNumber);for(var t=Object.keys(i.state.nodes),a=l;a<65535;a++)if(!t.includes(a.toString())){console.log(bi+" first free node number: "+a),e=a;break}return e},v=e=>{var l=Object.keys(i.state.nodes);return l.includes(e)?(console.log(bi+" node number in use: "+e),!1):(console.log(bi+" free node number: "+e),!0)};(0,a.$u)((()=>{}));const g=()=>{if(console.log(bi+" new node number: "+u.value),console.log(bi+" new node name: "+r.value),console.log(bi+" new group name: "+d.value),v(u.value))i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),b.value=!1;else{t.notify({message:"node number is already assigned - still proceed?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),i.setters.node_group(u.value,d.value),b.value=!1}},{label:"NO",color:"white",handler:()=>{}}]})}};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[si])),_:1}),(0,a.bF)(i,{class:"q-pa-md",color:"orange-1"},{default:(0,a.k6)((()=>[ii,(0,a.bF)(s,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),autofocus:""},null,8,["modelValue"]),(0,a.Lk)("div",di,[(0,a.eW)(" This node was previously "+(0,n.v_)(c.previousNodeNumber),1),ri,(0,a.eW)(" The module type is CAN"+(0,n.v_)(c.moduleName),1),ui])])),_:1}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)((()=>[ci,(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)((()=>[mi,(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{flat:"",label:"Accept",onClick:l[3]||(l[3]=e=>g())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},vi=pi,gi=vi;p()(pi,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A,QCardActions:Be.A}),p()(pi,"directives",{ClosePopup:De.A});const fi=(0,a.Lk)("div",{class:"text-h6"}," Add Layout ",-1),yi={class:"q-pa-md row"},ki=(0,a.Lk)("div",{class:"text-h6"},"Add new layout",-1),hi=(0,a.Lk)("p",null,"enter a name for a new layout",-1),_i="AddLayoutDialog",qi={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),n=(0,o.KR)(""),s=((0,o.KR)([]),e),i=l,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(_i+": WATCH model")}));const u=(0,a.EW)((()=>Object.values(t.state.layouts_list)));(0,a.wB)(u,(()=>{})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=async()=>{console.log(_i+": Change layout"),t.methods.change_layout(n.value),t.methods.request_layout_list(),n.value="",await d(50),r.value=!1};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[fi])),_:1}),(0,a.Lk)("div",yi,[(0,a.bF)(d,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[ki,(0,a.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),hi,(0,a.bF)(t,{color:"positive",label:"Add",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},Ni=qi,Vi=Ni;p()(qi,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QCardSection:_.A,QInput:O.A}),p()(qi,"directives",{ClosePopup:De.A});const Fi=(0,a.Lk)("div",{class:"text-h6"}," Edit connection details ",-1),xi={class:"q-pa-xs row"},wi=(0,a.Lk)("br",null,null,-1),Ci=(0,a.Lk)("br",null,null,-1),Ai=(0,a.Lk)("br",null,null,-1),Ii={class:"q-pa-xs row"},Ri=(0,a.Lk)("br",null,null,-1),Qi=(0,a.Lk)("br",null,null,-1),Ei=(0,a.Lk)("br",null,null,-1),Li=(0,a.Lk)("br",null,null,-1),Wi={class:"q-pa-xs row"},Si=(0,a.Lk)("br",null,null,-1),Ti={class:"q-pa-xs row"},Bi=(0,a.Lk)("br",null,null,-1),Di="EditConnectionDetailsDialog",Ki={__name:"EditConnectionDetailsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),n=(0,o.KR)(""),s=(0,o.KR)(""),i=(0,o.KR)(""),r=(0,o.KR)(""),u=(0,o.KR)(["Auto","SerialPort","Network"]),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(Di+": WATCH model"),n.value=t.state.layout.connectionDetails.mode,s.value=t.state.layout.connectionDetails.serialPort,i.value=t.state.layout.connectionDetails.host,r.value=t.state.layout.connectionDetails.hostPort})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=async()=>{console.log(Di+": clickSave"),t.state.layout.connectionDetails.mode=n.value,"SerialPort"==n.value?t.state.layout.connectionDetails.serialPort=s.value:t.state.layout.connectionDetails.serialPort="","Network"==n.value?(t.state.layout.connectionDetails.host=i.value,t.state.layout.connectionDetails.hostPort=r.value):(t.state.layout.connectionDetails.host="",t.state.layout.connectionDetails.hostPort=""),t.methods.update_layout(),await d(50),b.value=!1};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),d=(0,a.g2)("q-select"),c=(0,a.g2)("q-card"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{style:{"min-width":"650px",height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[Fi])),_:1}),(0,a.Lk)("div",xi,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{autofocus:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),options:u.value,label:"Mode"},null,8,["modelValue","options"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Auto will connect to the first CANUSB or CANUSB4 it finds "),wi,(0,a.eW)(" SerialPort will connect to the serial port entered below"),Ci,(0,a.eW)(" Network will use the address & port entered below "),Ai])),_:1})]),(0,a.Lk)("div",Ii,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),label:"serialPort",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Forces MMC to use this specific serial port"),Ri,(0,a.eW)(" Windows example: COM3"),Qi,(0,a.eW)(" Linux example: ttyUSB2"),Ei,(0,a.eW)(" Leave blank if 'SerialPort' not selected"),Li])),_:1})]),(0,a.Lk)("div",Wi,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),label:"Host",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Name or IP address of machine to use for CAN connection"),Si,(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1})]),(0,a.Lk)("div",Ti,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),label:"Host Port",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Port number of machine for CAN connection"),Bi,(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1})]),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{color:"primary",label:"save",onClick:l[4]||(l[4]=e=>p()),"no-caps":""})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ui=Ki,Xi=Ui;p()(Ki,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QSelect:te.A,QInput:O.A,QCardActions:Be.A}),p()(Ki,"directives",{ClosePopup:De.A});const Pi=(0,a.Lk)("div",{class:"text-h6"}," Information about the Startup Dialog ",-1),Oi=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Startup dialog is intended to allow selection of layout and connection method ",-1),zi=(0,a.Lk)("div",{class:"text_body1"}," To allow operation with more than one model railway layout, data is stored against a named layout ",-1),Mi=(0,a.Lk)("div",{class:"text_body1"}," Layouts can be selected, added or deleted at this point, and each layout also retains it's own connection method ",-1),ji=(0,a.Lk)("div",{class:"text_body1"}," A 'default' layout is created automatically, but it's recommended to add a named layout ",-1),Hi=(0,a.Lk)("div",{class:"text_body1"}," The default method of connecting is 'Auto', which will cause MMC to open a connection using the first CANUSB or CANUSB4 it finds, and no further configuration is needed if this is the required connection ",-1),Gi=(0,a.Lk)("div",{class:"text_body1"}," The 'SerialPort' option will force the connection onto a specific serial port, which may be required if there is more than one CANUSB, or another device than accepts a serial connection ",-1),$i=(0,a.Lk)("div",{class:"text_body1"}," The Network option allows a TCP/IP connection to another service, like cbusServer or CANether ",-1),Ji=(0,a.Lk)("div",{class:"text_body1"}," The 'Host' parameter allows connection to either a remoted connection, or the same machine the MMC is running on - Computer names or IP addresses can be entered for the Host setting ",-1),Yi=(0,a.Lk)("div",{class:"text_body1"},[(0,a.eW)(" There is a useful Technical Bulletin on the CANether that explains network connections in more detail "),(0,a.Lk)("a",{href:"https://www.merg.org.uk/merg_wiki/lib/exe/fetch.php?media=cbus:cbus:cbusmodules:canether:canether_connection_and_configuration_technical_bulletin_draft_1.pdf"},"link")],-1),Zi=(0,a.Lk)("div",{class:"text_body1"}," The connection method can be configured using the EDIT button for the selected layout, and each layout will retain it's own connection details ",-1),ed=(0,a.Lk)("div",{class:"text_body1"}," The selected layout is saved automatically when changes are made ",-1),ld=(0,a.Lk)("div",{class:"text_body1"}," When 'Auto' or 'SerialPort' modes are selected, an 'embedded' cbusServer is automatically started on port 5550, which can be used by other applications at the same time, such as FCU ",-1),td=(0,a.Lk)("div",{class:"text_body1"}," With all connection options, 'modified Grid Connect' is the data format used to transfer messages to and from the modules ",-1),ad=(0,a.Lk)("div",{class:"text_body1"}," Grid Connect is an established byte orientated data format used to encode the bit orientated CAN bus data format, such that it can be transmitted over stream connections, like serial or TCP/IP ",-1),od=(0,a.Lk)("div",{class:"text_body1"}," 'modified Grid Connect' is a variant of the Grid Connect format that has small modifications for use with CBUS devices ",-1),nd={__name:"StartupInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[Pi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Oi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[zi,Mi,ji])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Hi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Gi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[$i,Ji,Yi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Zi,ed])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ld])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[td,ad,od])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},sd=nd,id=sd;p()(nd,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A}),p()(nd,"directives",{ClosePopup:De.A});const dd=(0,a.Lk)("div",{class:"text-h6"}," Startup ",-1),rd={class:"q-pa-md row"},ud=(0,a.Lk)("div",{class:"text-h6"},"Select Layout",-1),cd={class:"text-h6"},md=(0,a.Lk)("div",{class:"text-h6"}," Selected layout ",-1),bd={class:"bg-light-blue-1 text-h6"},pd=(0,a.Lk)("div",{class:"text-h6"}," Connection details ",-1),vd=(0,a.Lk)("div",{class:"text-body"},[(0,a.eW)(" The default 'Auto' setting will connect to the first CANUSB or CANUSB4 it finds"),(0,a.Lk)("br"),(0,a.eW)(" Please click INFO for details on the other options"),(0,a.Lk)("br")],-1),gd=(0,a.Lk)("br",null,null,-1),fd={class:"text-h6"},yd="StartupDialog",kd={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)("<not selected>"),u=(0,o.KR)([]),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)([]),f=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],y=e,k=l,h=(0,a.EW)({get(){return y.modelValue},set(e){k("update:modelValue",e)}});(0,a.wB)(h,(()=>{V()}));const _=(0,a.EW)((()=>Object.values(i.state.layout)));(0,a.wB)(_,(()=>{N()}));const q=(0,a.EW)((()=>Object.values(i.state.layouts_list)));(0,a.wB)(q,(()=>{V()}));const N=()=>{try{void 0==i.state.layout.connectionDetails&&(i.state.layout.connectionDetails={},i.state.layout.connectionDetails["mode"]="Auto",i.state.layout.connectionDetails["serialPort"]="",i.state.layout.connectionDetails["host"]="",i.state.layout.connectionDetails["hostPort"]="",i.methods.update_layout())}catch(e){}g.value=[],g.value.push("Mode: "+i.state.layout.connectionDetails.mode),"SerialPort"==i.state.layout.connectionDetails.mode&&g.value.push("serialPort: "+i.state.layout.connectionDetails.serialPort),"Network"==i.state.layout.connectionDetails.mode&&(g.value.push("Host: "+i.state.layout.connectionDetails.host),g.value.push("Host Port: "+i.state.layout.connectionDetails.hostPort)),v.value=!0},V=()=>{u.value=[],q.value.forEach((e=>{u.value.push({layout:e})}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const F=async()=>{console.log(yd+": clickAddNewLayout"),c.value=!0},x=async e=>{console.log(yd+": clickDeleteLayout ",e);t.notify({message:"Are you sure you want to delete this?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_layout(e),await d(50),i.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},w=async()=>{console.log(yd+": clickEditConnectionDetails"),m.value=!0},C=async()=>{console.log(yd+": clickInfo"),b.value=!0},A=()=>{console.log(yd+": clickExit");t.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.STOP_SERVER(),await d(50)}},{label:"NO",color:"white",handler:()=>{}}]})},I=async()=>{console.log(yd+": clickProceed"),i.state.layout!={}&&(i.methods.start_connection(i.state.layout.connectionDetails),await d(500),i.state.inStartup=!1,h.value=!1)},R=async e=>{console.log(yd+": clickLayouts on ",e),r.value=e,i.methods.change_layout(r.value),p.value=(0,o.KR)(!0)};return(e,l)=>{const t=(0,a.g2)("q-btn"),s=(0,a.g2)("q-space"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-td"),v=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-card"),_=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(t,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[0]||(l[0]=e=>C())}),(0,a.bF)(s),(0,a.bF)(t,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Exit",onClick:l[1]||(l[1]=e=>A()),"no-caps":""})])),default:(0,a.k6)((()=>[dd])),_:1}),(0,a.Lk)("div",rd,[(0,a.bF)(k,{inline:"",class:"q-pa-xs",flat:"",style:{width:"380px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)((()=>[ud,(0,a.bF)(v,{flat:"",bordered:"",dense:"",rows:u.value,columns:f,"row-key":"name","hide-header":"",pagination:{rowsPerPage:8}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(d,{key:"layout",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(t,{flat:"",color:"primary",label:e.value,onClick:l=>R(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"]),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(t,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:l=>x(e.value),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:1},8,["rows"])])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",cd,[(0,a.eW)(" click to add a new layout   "),(0,a.bF)(t,{color:"positive",label:"Add",onClick:l[2]||(l[2]=e=>F())})])])),_:1})])),_:1}),(0,a.bF)(k,{flat:"",inline:"",class:"q-pa-xs",style:{width:"380px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[md,(0,a.Lk)("div",bd,(0,n.v_)(r.value),1)])),_:1}),(0,a.bF)(y,{style:{width:"350px",height:"300px"}},{default:(0,a.k6)((()=>[pd,(0,a.bF)(k,{flat:"",style:{height:"100px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,((e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},(0,n.v_)(g.value[l]),1)))),128))])),_:1}),vd,gd,(0,a.Lk)("div",fd,[(0,a.bF)(t,{color:"positive",label:"Edit",onClick:l[3]||(l[3]=e=>w())}),(0,a.eW)("   Edit connection details ")])])),_:1})])),_:1}),(0,a.bF)(y,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{align:"center"},{default:(0,a.k6)((()=>[p.value?((0,a.uX)(),(0,a.Wv)(t,{key:0,color:"primary",label:"Proceed",onClick:l[4]||(l[4]=e=>I())})):(0,a.Q3)("",!0),p.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(t,{key:1,disabled:"",color:"primary",label:"Proceed",onClick:l[5]||(l[5]=e=>I())}))])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Vi),{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Xi),{modelValue:m.value,"onUpdate:modelValue":l[8]||(l[8]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(id),{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},hd=kd,_d=hd;p()(kd,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QSpace:me.A,QCardSection:_.A,QTable:vl.A,QTd:fl.A,QCardActions:Be.A});var qd=t(9104);const Nd=JSON.parse('{"name":"MMC-CLIENT","version":"0.7.14","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"See package.json => scripts for available tests.\\" && exit 0","test:unit:ui":"majestic","test:unit":"jest","test:unit:ci":"jest --ci","test:unit:coverage":"jest --coverage","test:unit:watch":"jest --watch","test:unit:watchAll":"jest --watchAll"},"dependencies":{"@quasar/extras":"^1.0.0","core-js":"^3.6.5","json-logic-js":"^2.0.5","quasar":"^2.0.0","sass":"^1.69.5","socket.io-client":"^4.4.1","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","@quasar/quasar-app-extension-testing-unit-jest":"^3.0.3","@vue/test-utils":"^2.4.6","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-jest":"^28.8.3","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","jest":"^29.7.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}'),Vd={class:"text-h6"},Fd=(0,a.Lk)("div",{class:"text-h6"},"List of Backups",-1),xd="BackupDialog",wd={__name:"BackupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)([]),d=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],r=e,u=l,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,(()=>{console.log(xd+": WATCH model"),t.methods.request_backups_list(t.state.layout.layoutDetails.title)}));const m=(0,a.EW)((()=>t.state.backups_list));(0,a.wB)(m,(()=>{console.log(xd+": WATCH backupList"),b()}));const b=()=>{i.value=[],m.value.forEach((e=>{console.log(xd+": update "+e),i.value.push({backup:e})}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{s.value="";var e=new Date,l=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()+"_"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds(),a="backup_"+l;console.log(xd+": clickBackup "+a);var o={fileName:a,layout:t.state.layout};t.methods.save_backup(o),s.value="Backup saved to "+a,t.methods.request_backups_list(t.state.layout.layoutDetails.title)},v=e=>{console.log(xd+": clickBackupList on ",e)};return(e,l)=>{const r=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(y,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Vd," System backups for layout: "+(0,n.v_)((0,o.R1)(t).state.layout.layoutDetails.title),1)])),_:1})])),_:1}),(0,o.R1)(t).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"positive",label:"Backup",onClick:l[0]||(l[0]=e=>p()),"no-caps":""}),(0,a.eW)("   backup system to user storage ")])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(t).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:1,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(s.value),1)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(b,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Fd,(0,a.bF)(f,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",color:"primary",label:e.value,onClick:l=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Cd=wd,Ad=Cd;p()(wd,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QTable:vl.A,QTd:fl.A}),p()(wd,"directives",{ClosePopup:De.A});var Id=t(8652);const Rd=(0,a.Lk)("div",{class:"text-h6"}," System ",-1),Qd=(0,a.Lk)("div",{class:"text-h6"},"Backend",-1),Ed=(0,a.Lk)("div",{class:"text-h6"},"Frontend",-1),Ld=(0,a.Lk)("span",{class:"text-h6"},"user directory  ",-1),Wd=(0,a.Lk)("span",{class:"text-h6"},"system directory  ",-1),Sd="SystemDialog",Td={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Sd+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{console.log(Sd+": clickBackup"),s.value=!0},c=()=>{(0,Id.A)(t.state.serverStatus.systemDirectory).then((()=>{})).catch((()=>{}))},m=()=>{(0,Id.A)(t.state.serverStatus.userDirectory).then((()=>{})).catch((()=>{}))};return(e,l)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-input"),v=(0,a.g2)("q-checkbox"),g=(0,a.g2)("q-card-actions"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"900px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[Rd])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[Qd,(0,a.Lk)("div",null,"Backend App version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.App)),1),(0,a.Lk)("div",null,"API version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.API)),1),(0,a.Lk)("div",null,"node version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.node)),1)])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[Ed,(0,a.Lk)("div",null,"Frontend App version "+(0,n.v_)((0,o.R1)(Nd).version),1),(0,a.Lk)("div",null,"Quasar framework "+(0,n.v_)(e.$q.version),1),(0,a.Lk)("div",null,"Vue version "+(0,n.v_)(a.rE))])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[Ld,(0,a.eW)(" "+(0,n.v_)((0,o.R1)(t).state.serverStatus.userDirectory)+"   ",1),(0,a.bF)(i,{dense:"",color:"primary",size:"xs",label:"copy",onClick:l[0]||(l[0]=e=>m()),"no-caps":""})]),(0,a.Lk)("div",null,[Wd,(0,a.eW)(" "+(0,n.v_)((0,o.R1)(t).state.serverStatus.systemDirectory)+"   ",1),(0,a.bF)(i,{dense:"",color:"primary",size:"xs",label:"copy",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})])])),_:1}),(0,o.R1)(t).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{color:"positive",label:"Backup",onClick:l[2]||(l[2]=e=>u()),"no-caps":""}),(0,a.eW)("   Open the dialog to manage backups ")])),_:1})):(0,a.Q3)("",!0),(0,a.bo)((0,a.bF)(b,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:"Base Node Number",outlined:"",modelValue:(0,o.R1)(t).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.R1)(t).state.layout.layoutDetails.baseNodeNumber=e),onChange:l[4]||(l[4]=e=>(0,o.R1)(t).methods.update_layout())},null,8,["modelValue"])])),_:1},512),[[qd.aG,(0,o.R1)(t).state.advanced]]),(0,a.bF)(b,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:(0,o.R1)(t).state.develop,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.R1)(t).state.develop=e),label:"Develop"},null,8,["modelValue"]),(0,a.eW)("    Enables development features ")])),_:1}),(0,a.bF)(g,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ad),{modelValue:s.value,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value=e)},null,8,["modelValue"])],64)}}},Bd=Td,Dd=Bd;p()(Td,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A,QInput:O.A,QCheckbox:m.A,QCardActions:Be.A}),p()(Td,"directives",{ClosePopup:De.A});const Kd=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1),Ud={key:0,class:"text-red"},Xd=(0,a.Lk)("div",{class:"text-h6"}," Example q-card ",-1),Pd="DialogExampleCompositionAPI",Od={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=(0,o.KR)(!1),n=e,s=l,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(()=>{console.log(Pd+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const d=()=>{t.value=!t.value};return(e,l)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-card-actions"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[Kd])),_:1})])),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",color:"positive",label:"example button"}),(0,a.bF)(o,{flat:"",color:"negative",label:"example button"})])),_:1}),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64)),t.value?((0,a.uX)(),(0,a.CE)("div",Ud,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64))])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin"},{default:(0,a.k6)((()=>[Xd])),_:1})])),_:1}),(0,a.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",label:"toggle show more",onClick:l[0]||(l[0]=e=>d())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},zd=Od,Md=zd;p()(Od,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A,QCardActions:Be.A}),p()(Od,"directives",{ClosePopup:De.A});const jd=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events View ",-1),Hd=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Events view is intended to allow management of all the events on the layout ",-1),Gd=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Bus Events View' ",-1),$d=(0,a.Lk)("div",{class:"text_body1"}," The Events view shows events that have been read from nodes, captured from the CAN Bus, or entered manually ",-1),Jd=(0,a.Lk)("div",{class:"text_body1"}," This list of events is retained for the layout selected, so the known events for a particular layout will be restored at startup ",-1),Yd=(0,a.Lk)("div",{class:"text_body1"}," For a new layout, use SCAN NODES to read the stored events from all the nodes to fill the list, and anytime a new node is added ",-1),Zd=(0,a.Lk)("div",{class:"text_body1"}," There is only one entry for each event, irrespective of how many nodes produce that event ",-1),er=(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, irrespective of which node sent it ",-1),lr=(0,a.Lk)("div",{class:"text_body1"},[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status is dependant on the event actually being captured from the bus, and if that event has not been sent, or the application has been restarted, the status will be 'unknown' ")],-1),tr=(0,a.Lk)("div",{class:"text_body1"}," In this view, for short events, the 'send ON/OFF' feature will use '0' as the Sending Node Number, so not linked to any particular node ",-1),ar=(0,a.Lk)("div",{class:"text_body1"}," An event can be created manually (add event) and will not be associated with any particular node until the 'teach' option is used ",-1),or=(0,a.Lk)("div",{class:"text_body1"}," The toggle option allows viewing of just short events, or all events ",-1),nr=(0,a.Lk)("div",{class:"text_body1"}," The list is likely to be very large, as some nodes have large numbers of default events ",-1),sr=(0,a.Lk)("div",{class:"text_body1"}," So it's recommended to use the search option to filter the list, and using group names for events ",-1),ir=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),dr=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),rr={__name:"EventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[jd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Hd,Gd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[$d])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Jd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Yd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Zd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[er,lr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[tr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ar])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[or])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[nr,sr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ir,dr])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ur=rr,cr=ur;p()(rr,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A}),p()(rr,"directives",{ClosePopup:De.A});const mr="GenericNodeList",br={__name:"GenericNodeList",props:{nodeNumberList:{type:Object,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)(!1),r=(0,o.KR)(0),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(""),b=(0,o.KR)(""),p=e,v=(0,o.KR)([]),g=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Node Group",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],f=async()=>{v.value=[],p.nodeNumberList.forEach((e=>{var l=t.getters.node_name(e);v.value.push({nodeNumber:e,name:l,group:t.getters.node_group(e)})}))},y=async e=>{m.value="",c.value=!0;for(let l=0;l<1e3;l++){if(m.value.length>0)break;await d(10)}c.value=!1},k=async e=>{b.value="",u.value=!0;for(let l=0;l<1e4;l++){if(b.value.length>0)break;await d(10)}u.value=!1};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{f()}));const h=e=>{console.log(mr+": clickDelete");l.notify({message:"Are you sure you want to delete this event?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{console.log("removeEvent "+e+" "+p.eventIdentifier),t.methods.remove_event(e,p.eventIdentifier)}},{label:"NO",color:"white",handler:()=>{}}]})},_=async e=>{console.log(mr+": clickVariables: node "+e+" eventIdentifer "+p.eventIdentifier),r.value=e,await y(e),await k(e),await t.methods.request_event_variables_by_identifier(e,p.eventIdentifier),i.value=!0};return(l,t)=>{const s=(0,a.g2)("q-td"),d=(0,a.g2)("q-btn"),p=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(k,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"no-margin q-py-none-xs",style:{width:"750px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{flat:"",bordered:"",dense:"",rows:v.value,columns:g,"row-key":"nodeNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(p,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{key:"nodeNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>_(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>h(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)((0,o.R1)(El),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),nodeNumber:r.value,eventIdentifier:e.eventIdentifier},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(It),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),nodeNumber:r.value,onNodeParametersLoadingDialog:t[2]||(t[2]=e=>m.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(St),{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),nodeNumber:r.value,onNodeVariablesLoadingDialog:t[4]||(t[4]=e=>b.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},pr=br,vr=pr;p()(br,"components",{QCard:h.A,QCardSection:_.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QBtn:ce.A});const gr={class:"text-h6"},fr="LinkedNodesDialog",yr={__name:"LinkedNodesDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,(()=>{}));const r=(0,o.KR)([]),u=(0,a.EW)((()=>t.state.nodes.updateTimestamp));(0,a.wB)(u,(()=>{s.eventIdentifier&&c()}));const c=async()=>{try{r.value=[];let e=Object.values(t.state.nodes);e.forEach((e=>{if(e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let l=Object.values(e.storedEventsNI);l.forEach((async l=>{l.eventIdentifier==s.eventIdentifier&&r.value.push(e.nodeNumber)}))}}))}catch(e){console.log(fr+": update__nodes_table "+e)}};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{s.eventIdentifier&&c()})),(l,i)=>{const u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",gr," Nodes linked to event: "+(0,n.v_)((0,o.R1)(t).getters.event_name(s.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(vr),{nodeNumberList:r.value,eventIdentifier:e.eventIdentifier},null,8,["nodeNumberList","eventIdentifier"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},kr=yr,hr=kr;p()(yr,"components",{QDialog:Se.A,QCard:h.A,QCardSection:_.A,QBanner:Te.A,QBtn:ce.A}),p()(yr,"directives",{ClosePopup:De.A});const _r=e=>((0,a.Qi)("data-v-35cd05eb"),e=e(),(0,a.jt)(),e),qr={style:{height:"45vh"}},Nr=_r((()=>(0,a.Lk)("div",{class:"text-h6"},"Events View",-1))),Vr={class:"text-h6",style:{"min-width":"250px"}},Fr={class:"q-pa-xs row"},xr=_r((()=>(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Events"),(0,a.Lk)("br")],-1))),wr={class:"text-body2"},Cr="EventsView",Ar={__name:"EventsView",setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)(""),d={rowsPerPage:0};let r=(0,o.KR)([]);const u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(""),f=(0,o.KR)(),y=(0,o.KR)(0),k=(0,o.KR)(0),h=(0,o.KR)(!1),_=(0,o.KR)(0),q=(0,o.KR)({0:"view all events",1:"view short events only"}),N=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"linkedNodes",field:"linkedNodes",required:!0,label:"Linked Nodes",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=(0,a.EW)((()=>Object.values(t.state.layout.eventDetails)));(0,a.wB)(V,(()=>{C()}));const F=(0,a.EW)((()=>t.state.layout.eventDetails));(0,a.wB)(F,(()=>{C()}));const x=(0,a.EW)((()=>t.state.nodes.updateTimestamp));(0,a.wB)(x,(()=>{console.log(Cr+": WATCH: nodesUpdated "+x.value),C()}));const w=(0,a.EW)((()=>Object.values(t.state.busEvents)));(0,a.wB)(w,(()=>{console.log(Cr+": WATCH busEvents"),C()}));const C=()=>{let e=[],l=t.state.layout.eventDetails;for(let o of Object.keys(l).sort()){var a=parseInt(o.substring(0,4),16);if(void 0==t.state.event_view_status[o]&&(t.state.event_view_status[o]="unknown"),1==_.value&&a>0);else{let n={};n["eventIdentifier"]=o,n["nodeNumber"]=a,n["eventNumber"]=parseInt(o.slice(4,8),16),n["type"]=0==a?"short":"long",n["name"]=t.getters.event_name(o),n["colour"]=l[o].colour,n["group"]=l[o].group,n["status"]=t.state.event_view_status[o],n["linkedNodeCount"]=I(o),e.push(n)}}r.value=e},A=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].colour:"blue",I=e=>{var l=0;let a=Object.keys(t.state.nodes);try{a.forEach((a=>{e in t.state.nodes[a].storedEventsNI&&l++}))}catch{}return l};t.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{var l=e.json.eventIdentifier,a=e.json.opCode,o="unknown";90!=a&&98!=a||(console.log(Cr+": BUS_TRAFFIC_EVENT : ON event "+l),o="on"),91!=a&&99!=a||(console.log(Cr+": BUS_TRAFFIC_EVENT : OFF event "+l),o="off"),"unknown"!=o&&(void 0!=t.state.event_view_status[l]&&(t.state.event_view_status[l]=o),C())})),(0,a.KC)((()=>{C()})),(0,a.sV)((()=>{C()}));const R=()=>{console.log(Cr+": clickAddEvent"),u.value=!0},Q=e=>{console.log(Cr+": clickDelete");l.notify({message:"Are you sure you want to delete this event?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{delete t.state.layout.eventDetails[e],t.state.update_layout_needed=!0,C()}},{label:"NO",color:"white",handler:()=>{}}]})},E=e=>{console.log(Cr+": clickEventName "+e),g.value=e,f.value=t.getters.event_name(e),c.value=!0},L=()=>{console.log(Cr+": clickInfo"),p.value=!0},W=e=>{console.log(Cr+": clickLinkedNodes "+e),g.value=e,v.value=!0},S=()=>{console.log(Cr+": clickScanNodes");var e=Object.keys(t.state.nodes);e.forEach((e=>{t.methods.request_all_node_events(e)}))},T=(e,l)=>{console.log(Cr+": send OFF "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_off_event(e,o):t.methods.long_off_event(a,o)},B=(e,l)=>{console.log(Cr+": send ON "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_on_event(e,o):t.methods.long_on_event(a,o)},D=e=>{console.log(Cr+": clickTeach "+e),g.value=e,b.value=!0},K=()=>{console.log(Cr+": clickToggleShowEventsJSON"),h.value?h.value=!1:h.value=!0},U=()=>{console.log(Cr+": clickToggleViewMode"),_.value++,_.value>1&&(_.value=0),C()};return(e,l)=>{const s=(0,a.g2)("q-btn"),f=(0,a.g2)("q-space"),V=(0,a.g2)("q-icon"),F=(0,a.g2)("q-input"),x=(0,a.g2)("q-banner"),w=(0,a.g2)("q-td"),C=(0,a.g2)("q-chip"),I=(0,a.g2)("q-tr"),X=(0,a.g2)("q-table"),P=(0,a.g2)("q-card-actions"),O=(0,a.g2)("q-card-section"),z=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",qr,[(0,a.bF)(x,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:l[0]||(l[0]=e=>U())}),(0,a.Lk)("div",Vr,(0,n.v_)(q.value[_.value]),1),(0,a.eW)("      "),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[1]||(l[1]=e=>L())}),(0,a.bF)(f),(0,a.eW)("      "),(0,a.bF)(F,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("      "),(0,a.bF)(f),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"SCAN NODES","no-caps":"",onClick:l[3]||(l[3]=e=>S())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:l[4]||(l[4]=e=>R())})])),default:(0,a.k6)((()=>[Nr])),_:1}),(0,a.bF)(z,null,{default:(0,a.k6)((()=>[(0,a.bF)(O,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"events-table",dense:"",rows:(0,o.R1)(r),columns:N,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:d,"onUpdate:pagnation":l[5]||(l[5]=e=>d=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(I,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(w,{key:"eventName",props:e,class:(0,n.C4)("text-"+A(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(w,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+A(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+A(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+A(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"type",props:e,class:(0,n.C4)("text-"+A(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(C,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("ON")])),_:1})):"off"==e.row.status?((0,a.uX)(),(0,a.Wv)(C,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("OFF")])),_:1})):((0,a.uX)(),(0,a.Wv)(C,{key:2,color:"white","text-color":"blue"},{default:(0,a.k6)((()=>[(0,a.eW)("unknown")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(w,{key:"linkedNodes",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.linkedNodeCount)+" ",1),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"view",onClick:l=>W(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"]),(0,a.bF)(w,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>E(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>D(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>B(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>T(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"]),(0,a.bF)(s,{disabled:0!=e.row.linkedNodeCount,dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>Q(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),(0,a.bF)(P,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle event details json",onClick:l[6]||(l[6]=e=>K())})])),_:1}),h.value?((0,a.uX)(),(0,a.Wv)(O,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Fr,[xr,(0,a.Lk)("div",wr,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.layout.eventDetails),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})]),(0,a.bF)((0,o.R1)($l),{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Vt),{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(hr),{modelValue:v.value,"onUpdate:modelValue":l[10]||(l[10]=e=>v.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ft),{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e),sendingNodeNumber:y.value,eventNumber:k.value,eventIdentifier:g.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(cr),{modelValue:p.value,"onUpdate:modelValue":l[12]||(l[12]=e=>p.value=e)},null,8,["modelValue"])],64)}}},Ir=(0,E.A)(Ar,[["__scopeId","data-v-35cd05eb"]]),Rr=Ir;p()(Ar,"components",{QBanner:Te.A,QBtn:ce.A,QSpace:me.A,QInput:O.A,QIcon:ua.A,QCard:h.A,QCardSection:_.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QChip:ss.A,QCardActions:Be.A,QField:ca.A});const Qr=(0,a.Lk)("div",{class:"text-h6"}," Information about the Bus Events View ",-1),Er=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Bus Events view is intended to show the event activity on the CAN Bus from the start of the application ",-1),Lr=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Events View' ",-1),Wr=(0,a.Lk)("div",{class:"text_body1"}," Events read from node will not appear in this view until they have been sent by a node & captured from the CAN Bus ",-1),Sr=(0,a.Lk)("div",{class:"text_body1"}," For some nodes, default events can't be read from the node (as some do not treat them as 'stored events') ",-1),Tr=(0,a.Lk)("div",{class:"text_body1"}," But these default events will appear in this view once they've been sent ",-1),Br=(0,a.Lk)("div",{class:"text_body1"}," This view takes account of the source node, so if the same event has been sent by two different nodes, there will be two entries for that event ",-1),Dr=(0,a.Lk)("div",{class:"text_body1"}," This is intended to make it easy to see which nodes are sending which events ",-1),Kr=(0,a.Lk)("div",{class:"text_body1"}," In this view, the 'send ON/OFF' feature will use the Source Node Number of the row selected, thus replicating the event from that specific node ",-1),Ur=(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, from that particular sending node ",-1),Xr=(0,a.Lk)("div",{class:"text_body1"}," The Bus Events view will be empty at startup, and can also be cleared, to only show events from that point onwards ",-1),Pr=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),Or=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),zr={__name:"BusEventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[Qr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Er,Lr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Wr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Sr,Tr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Br,Dr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Kr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Ur])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Xr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Pr,Or])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Mr=zr,jr=Mr;p()(zr,"components",{QDialog:Se.A,QCard:h.A,QBanner:Te.A,QBtn:ce.A}),p()(zr,"directives",{ClosePopup:De.A});const Hr=e=>((0,a.Qi)("data-v-8af700f2"),e=e(),(0,a.jt)(),e),Gr={style:{height:"45vh"}},$r=Hr((()=>(0,a.Lk)("div",{class:"text-h6"}," Bus Events ",-1))),Jr={class:"text-h6",style:{"min-width":"250px"}},Yr={class:"q-pa-xs row"},Zr=Hr((()=>(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1))),eu={class:"text-body2"},lu="BusEventsView",tu={__name:"BusEventsView",setup(e){const l=(0,a.WQ)("store"),t=((0,o.KR)("nodes"),(0,o.KR)("")),s={rowsPerPage:0};let i=(0,o.KR)();const d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(""),b=(0,o.KR)(),p=(0,o.KR)(0),v=(0,o.KR)(0),g=(0,o.KR)(!1),f=(0,o.KR)(0),y=(0,o.KR)({0:"view all bus events",1:"view short bus events only"}),k=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],h=(0,a.EW)((()=>Object.values(l.state.busEvents))),_=(0,a.EW)((()=>l.state.layout));(0,a.wB)(h,(()=>{q()})),(0,a.wB)(_,(()=>{q()}));const q=()=>{let e=[];try{let a=l.state.busEvents;if(a)for(let o of Object.keys(a).sort((function(e,l){return a[e].eventIdentifier<a[l].eventIdentifier?-1:1}))){var t=parseInt(a[o].eventIdentifier.slice(0,4),16);if(1==f.value&&t>0);else{let t={};t["eventIdentifier"]=a[o].eventIdentifier,t["nodeNumber"]=a[o].nodeNumber,t["eventNumber"]=a[o].eventNumber,t["status"]=a[o].status,t["type"]=a[o].type,t["count"]=a[o].count,t["name"]=l.getters.event_name(a[o].eventIdentifier),t["colour"]=l.getters.event_colour(a[o].eventIdentifier),t["group"]=l.getters.event_group(a[o].eventIdentifier),e.push(t)}}}catch(a){console.log(lu+": update_bus_events "+a)}i.value=e},N=e=>l.getters.event_colour(e);(0,a.KC)((()=>{l.methods.refresh_bus_events(),q()})),(0,a.sV)((()=>{l.methods.refresh_bus_events(),q()}));const V=e=>{console.log(lu+": clickEventName "+e),m.value=e,b.value=l.getters.event_name(e),d.value=!0},F=()=>{console.log(lu+": clickInfo"),c.value=!0},x=(e,t)=>{console.log(lu+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,o):l.methods.long_off_event(a,o)},w=(e,t)=>{console.log(lu+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,o):l.methods.long_on_event(a,o)},C=e=>{console.log(lu+": clickTeach"),m.value=e,u.value=!0},A=()=>{console.log(lu+": clickToggleShowBusEventsJSON"),g.value?g.value=!1:g.value=!0},I=()=>{console.log(lu+": clickToggleViewMode"),f.value++,f.value>1&&(f.value=0),q()};return(e,b)=>{const h=(0,a.g2)("q-btn"),_=(0,a.g2)("q-icon"),q=(0,a.g2)("q-input"),R=(0,a.g2)("q-banner"),Q=(0,a.g2)("q-td"),E=(0,a.g2)("q-chip"),L=(0,a.g2)("q-tr"),W=(0,a.g2)("q-table"),S=(0,a.g2)("q-card-section"),T=(0,a.g2)("q-card"),B=(0,a.g2)("q-card-actions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",Gr,[(0,a.bF)(R,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:b[0]||(b[0]=e=>I())}),(0,a.Lk)("div",Jr,(0,n.v_)(y.value[f.value]),1),(0,a.eW)("      "),(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:b[1]||(b[1]=e=>F())}),(0,a.eW)("      "),(0,a.bF)(q,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:t.value,"onUpdate:modelValue":b[2]||(b[2]=e=>t.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("      "),(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Clear Events",onClick:b[3]||(b[3]=e=>(0,o.R1)(l).methods.clear_bus_events()),"no-caps":""})])),default:(0,a.k6)((()=>[$r])),_:1}),(0,a.bF)(T,null,{default:(0,a.k6)((()=>[(0,a.bF)(S,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{class:"bus-events-table",dense:"",rows:(0,o.R1)(i),columns:k,filter:t.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:s,"onUpdate:pagnation":b[4]||(b[4]=e=>s=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{key:"eventName",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"group",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"type",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(E,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("ON")])),_:1})):((0,a.uX)(),(0,a.Wv)(E,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("OFF")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(Q,{key:"count",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props","class"]),(0,a.bF)(Q,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>V(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>C(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>w(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>x(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),g.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Yr,[Zr,(0,a.Lk)("div",eu,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.busEvents),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(B,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{flat:"",label:"Toggle bus events json",onClick:b[5]||(b[5]=e=>A())})])),_:1})]),(0,a.bF)((0,o.R1)(Vt),{modelValue:d.value,"onUpdate:modelValue":b[6]||(b[6]=e=>d.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:u.value,"onUpdate:modelValue":b[7]||(b[7]=e=>u.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ft),{modelValue:r.value,"onUpdate:modelValue":b[8]||(b[8]=e=>r.value=e),sendingNodeNumber:p.value,eventNumber:v.value,eventIdentifier:m.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(jr),{modelValue:c.value,"onUpdate:modelValue":b[9]||(b[9]=e=>c.value=e)},null,8,["modelValue"])],64)}}},au=(0,E.A)(tu,[["__scopeId","data-v-8af700f2"]]),ou=au;p()(tu,"components",{QBanner:Te.A,QBtn:ce.A,QInput:O.A,QIcon:ua.A,QCard:h.A,QCardSection:_.A,QTable:vl.A,QTr:gl.A,QTd:fl.A,QChip:ss.A,QCardActions:Be.A,QField:ca.A});const nu=e=>((0,a.Qi)("data-v-705745b0"),e=e(),(0,a.jt)(),e),su=nu((()=>(0,a.Lk)("div",{class:"text-h6 no-margin no-padding"}," MMC ",-1))),iu={class:"text-h6 no-margin no-padding float-right"},du={class:"text-h6 float-right"},ru={class:"text-h6 float-right"},uu={class:"text-h6 float-right"},cu={class:"text-h6 float-right"},mu=nu((()=>(0,a.Lk)("div",{class:"text-h6"}," Bus traffic ",-1))),bu={class:"text-bold text-blue"},pu=nu((()=>(0,a.Lk)("span",null,": ",-1))),vu={class:"text-bold"},gu="MainLayout",fu={__name:"MainLayout",setup(e){const{fQ:l,RZ:t}=i.Ay,d=(0,s.A)(),r=(0,a.WQ)("store"),u=(0,o.KR)({}),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),y=((0,o.KR)(!0),(0,o.KR)(!1)),k=(0,o.KR)(0),h=(0,o.KR)(""),_=(0,o.KR)(!1),q=(0,o.KR)(!1),N=(0,o.KR)("dummyModule/index.html"),V=(0,o.KR)(null),F=(0,o.KR)("NodesView");const x=(0,a.EW)((()=>Object.values(r.state.nodeTraffic)));(0,a.wB)(x,(()=>{V.value.setScrollPercentage("vertical",1),setTimeout(I,200)}));const w=(0,a.EW)((()=>{var e="";try{e=r.state.layout.layoutDetails.title}catch(l){}return e}));(0,a.KC)((()=>{r.methods.request_server_status(),r.methods.request_layout_list()})),(0,a.sV)((()=>{setInterval(C,5e3),setInterval(A,2e3)})),(0,a.$u)((()=>{V.value.setScrollPercentage("vertical",1)}));const C=()=>{r.methods.request_server_status()},A=()=>{1==r.state.update_layout_needed&&(r.state.update_layout_needed=!1,r.methods.update_layout())},I=()=>{V.value.setScrollPercentage("vertical",1)};r.eventBus.on("REQUEST_NODE_NUMBER_EVENT",((e,l)=>{console.log(gu+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e+" moduleName "+l),k.value=e,h.value=l,f.value=!0})),r.eventBus.on("SERVER_STATUS_EVENT",(e=>{try{0==e.busConnection.state&&d.notify({message:"Server has no connection to the CAN BUS",caption:"attempting to re-connect",timeout:2e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}catch(l){console.log(gu+": SERVER_STATUS_EVENT: "+l)}})),r.eventBus.on("SERVER_DISCONNECT",(()=>{d.notify({message:"MMC-server has disconnected",caption:"please restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}));const R=()=>{console.log(gu+": clickBusEventsView"),F.value="BusEventsView"},Q=()=>{console.log(gu+": clickEventView"),F.value="EventsView"},E=()=>{console.log(gu+": clickNodeView"),F.value="NodesView"},L=()=>{console.log(gu+": clickCbusErrors"),b.value=!0},W=()=>{console.log(gu+": clickExample"),_.value=!0},S=()=>{console.log(gu+": clickExit");d.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{r.methods.STOP_SERVER(),await sleep(50)}},{label:"NO",color:"white",handler:()=>{}}]})},T=()=>{console.log(gu+": clickiframe"),q.value=!0},B=()=>{console.log(gu+": clickJson"),p.value=!0},D=()=>{console.log(gu+": clickLayout"),v.value=!0},K=e=>{console.log(gu+": clickSingleBusEvent"),u.value=e,V.value.setScrollPercentage("vertical",1),g.value=!0},U=()=>{console.log(gu+": clickSystem"),y.value=!0};return(e,l)=>{const t=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),i=(0,a.g2)("q-list"),d=(0,a.g2)("q-menu"),x=(0,a.g2)("q-btn"),C=(0,a.g2)("q-toolbar-title"),A=(0,a.g2)("q-toolbar"),I=(0,a.g2)("q-space"),X=(0,a.g2)("q-header"),P=(0,a.g2)("q-banner"),O=(0,a.g2)("q-item-label"),z=(0,a.g2)("q-scroll-area"),M=(0,a.g2)("q-card"),j=(0,a.g2)("q-drawer"),H=(0,a.g2)("q-page"),G=(0,a.g2)("q-page-container"),$=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)($,{view:"hHh lpR fFf"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"row bg-primary text-white no-margin no-padding",style:{height:"7vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(A,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{flat:"",dense:"",icon:"menu"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"auto-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{clickable:"",onClick:l[0]||(l[0]=e=>D())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("Layout")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[1]||(l[1]=e=>B())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("JSON")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[2]||(l[2]=e=>L())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("CBUS errors")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[3]||(l[3]=e=>U())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("System")])),_:1})])),_:1}),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,clickable:"",onClick:l[4]||(l[4]=e=>W())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("Example")])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:1,clickable:"",onClick:l[5]||(l[5]=e=>T())},{default:(0,a.k6)((()=>[(0,a.bF)(t,null,{default:(0,a.k6)((()=>[(0,a.eW)("Example iFrame")])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.bF)(C,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,a.k6)((()=>[su])),_:1})])),_:1}),(0,a.bF)(A,{class:"col no-margin no-padding",style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.Lk)("div",iu,(0,n.v_)(w.value),1)])),_:1}),(0,a.bF)(A,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(I)])),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",du,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Bus Events",onClick:l[6]||(l[6]=e=>R()),"no-caps":""})])])),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ru,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Events view",onClick:l[7]||(l[7]=e=>Q()),"no-caps":""})])])),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",uu,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Nodes view",onClick:l[8]||(l[8]=e=>E()),"no-caps":""})])])),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.Lk)("div",cu,[(0,a.bF)(x,{size:"md",color:"negative",label:"Exit",onClick:l[9]||(l[9]=e=>S()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(j,{class:"no-margin no-padding",modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=e=>c.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.bF)(P,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs"},{default:(0,a.k6)((()=>[mu])),_:1}),(0,a.bF)(M,{class:"no-margin no-padding",style:{height:"83vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(z,{id:"demo",ref_key:"scrollAreaRef",ref:V,style:{height:"82vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(r).state.nodeTraffic,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e,clickable:"",dense:"",onClick:l=>K(e)},{default:(0,a.k6)((()=>[(0,a.bF)(O,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",bu,(0,n.v_)(e.direction),1),pu,(0,a.Lk)("span",vu,(0,n.v_)(e.json.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1}),(0,a.eW)(" Click message to show encoding ")])),_:1},8,["modelValue"]),0==(0,o.R1)(r).state.inStartup?((0,a.uX)(),(0,a.Wv)(G,{key:0,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,a.k6)((()=>["BusEventsView"==F.value?((0,a.uX)(),(0,a.Wv)(H,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(ou))])),_:1})):(0,a.Q3)("",!0),"EventsView"==F.value?((0,a.uX)(),(0,a.Wv)(H,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Rr))])),_:1})):(0,a.Q3)("",!0),"NodesView"==F.value?((0,a.uX)(),(0,a.Wv)(H,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(ds))])),_:1})):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)((0,o.R1)(fs),{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ns),{modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Bs),{modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Js),{modelValue:v.value,"onUpdate:modelValue":l[14]||(l[14]=e=>v.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ni),{modelValue:g.value,"onUpdate:modelValue":l[15]||(l[15]=e=>g.value=e),busMessage:u.value},null,8,["modelValue","busMessage"]),(0,a.bF)((0,o.R1)(gi),{modelValue:f.value,"onUpdate:modelValue":l[16]||(l[16]=e=>f.value=e),previousNodeNumber:k.value,moduleName:h.value},null,8,["modelValue","previousNodeNumber","moduleName"]),(0,a.bF)((0,o.R1)(_d),{modelValue:(0,o.R1)(r).state.inStartup,"onUpdate:modelValue":l[17]||(l[17]=e=>(0,o.R1)(r).state.inStartup=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Dd),{modelValue:y.value,"onUpdate:modelValue":l[18]||(l[18]=e=>y.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Md),{modelValue:_.value,"onUpdate:modelValue":l[19]||(l[19]=e=>_.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(es),{modelValue:q.value,"onUpdate:modelValue":l[20]||(l[20]=e=>q.value=e),URL:N.value},null,8,["modelValue","URL"])],64)}}};var yu=t(2008),ku=t(8416),hu=t(6914),_u=t(5998),qu=t(5173),Nu=t(9150),Vu=t(6056),Fu=t(9383),xu=t(5205),wu=t(7716);const Cu=(0,E.A)(fu,[["__scopeId","data-v-705745b0"]]),Au=Cu;p()(fu,"components",{QLayout:yu.A,QHeader:ku.A,QToolbar:hu.A,QBtn:ce.A,QMenu:_u.A,QList:ms.A,QItem:bs.A,QItemSection:qu.A,QToolbarTitle:Nu.A,QSpace:me.A,QDrawer:Vu.A,QBanner:Te.A,QCard:h.A,QScrollArea:Fu.A,QItemLabel:ps.A,QPageContainer:xu.A,QPage:wu.A})}}]);