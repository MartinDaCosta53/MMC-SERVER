"use strict";(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[408],{4408:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Qu});var a=l(1758),o=l(8734),n=l(8790),s=(l(9862),l(4907)),i=l(8336);l(239);function d(e){return new Promise((function(t,l){setTimeout((()=>{t()}),e)}))}const r={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),n={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,o.KR)(!1),i=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(i,(()=>{s.value=!!(i.value&n[t.bit])}));const d=()=>{let e=i.value;console.log(`EventVariableBit update_checked ${s.value} ${e}`),s.value?e|=n[t.bit]:e&=~n[t.bit],console.log(`EventVariableBit update_checked-2 ${s.value} ${e}`),l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,e)};return(0,a.sV)((()=>{var e=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);s.value=!!(e&n[t.bit])})),(t,l)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:e.name,onClick:d,"left-label":""},null,8,["modelValue","label"])}}};var u=l(7022),c=l(8582),m=l.n(c);const b=r,p=b;m()(r,"components",{QCheckbox:u.A});const v={class:"text-h6"},g={class:"text-subtitle2"},f={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",v,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",g,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.bitCollection,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,o.R1)(p),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,bit:t.bitPosition,name:t.label},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","bit","name"])])))),128))])),_:1})])),_:1})}}};var k=l(3316),y=l(4189);const h=f,_=h;m()(f,"components",{QCard:k.A,QCardSection:y.A});const V={class:"text-h6"},q={class:"text-subtitle2"},F={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",V,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",q,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(p),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit"])])),_:1})])),_:1})}}},x=F,N=x;m()(F,"components",{QCard:k.A,QCardSection:y.A});const w={class:"q-pa-xs row"},C={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},A={class:"GroupTitle q-py-none"},I={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",C,[(0,a.Lk)("div",A,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)((0,o.R1)(ge),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])]))}};var Q=l(2807);const R=(0,Q.A)(I,[["__scopeId","data-v-f64addbe"]]),E=R,L={class:"text-h6"},W={class:"text-subtitle2"},S={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},name:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},displayOffset:{type:Number,default:0}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e})),u=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(u,(()=>{d.value=((u.value&r.value)>>t.startBit)+t.displayOffset}));const c=e=>{let a=u.value,o=e;o-=t.displayOffset,o<t.min||o>t.max||""==e?(s.value=!0,i.value="Invalid Value "+e+" : Valid Range "+(t.min+t.displayOffset)+" - "+(t.max+t.displayOffset)):(o<<=t.startBit,a|=o&r.value,a&=o|~r.value,i.value="",s.value=!1,l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a))};return(0,a.sV)((()=>{let e=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);d.value=((e&r.value)>>t.startBit)+t.displayOffset})),(t,l)=>{const o=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(u,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",L,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",W,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:c},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}};var T=l(7837);const B=S,D=B;function K(e,t,l){var a=null;if(t.nv){var o=l.state.nodes[e].nodeVariables[t.nv];for(var n in t.labels)o==t.labels[n].value&&(a=t.labels[n].label)}return a}function U(e,t,l,a){var o=!0;if(void 0!=t.evBit)if(void 0!=a){var n=l.state.nodes[e].storedEventsNI[a];if(n){var s=n.variables[t.evBit.index];s=(s&2**t.evBit.bit)>>t.evBit.bit,o=X(s,t)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=t.ev)if(void 0!=a){n=l.state.nodes[e].storedEventsNI[a];if(n){s=n.variables[t.ev];o=X(s,t)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}else console.log("parseLogicElement: ERROR: ev - event index (argument3) not defined ");if(void 0!=t.nvBit){s=l.state.nodes[e].nodeVariables[t.nvBit.index];s=(s&2**t.nvBit.bit)>>t.nvBit.bit,o=X(s,t)}if(void 0!=t.nv){s=l.state.nodes[e].nodeVariables[t.nv];o=X(s,t)}return o}function X(e,t){var l=!0;return void 0!=t.equals&&t.equals!=e&&(l=!1),void 0!=t.greaterThan&&e<=t.greaterThan&&(l=!1),void 0!=t.in&&(l=!1,t.in.forEach((function(t){e==t&&(l=!0)}))),void 0!=t.lessThan&&e>=t.lessThan&&(l=!1),void 0!=t.notEqual&&t.notEqual==e&&(l=!1),l}m()(S,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const O={class:"text-h6"},P={class:"text-subtitle2"},z={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)();var i=(0,o.KR)();const d=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(d,(()=>{s.value=d.value&t.bitMask}));const r=e=>{let a=d.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,console.log(`EventVariableSelect: byteValue ${a}`),l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a)};return(0,a.sV)((()=>{let e=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);for(var a in s.value=e&t.bitMask,i.value=[],t.options)if(void 0!=t.options[a].overload){var o=K(t.nodeNumber,t.options[a].overload,l);if(o){var n={value:t.options[a].value,label:o};i.value.push(n)}}else void 0!=t.options[a].label&&i.value.push(t.options[a])})),(t,l)=>{const d=(0,a.g2)("q-select"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",O,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",P,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(d,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),r],options:(0,o.R1)(i),"popup-content-class":"q-pm-none","map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}};var M=l(4940);const j=z,H=j;m()(z,"components",{QCard:k.A,QCardSection:y.A,QSelect:M.A});const $={class:"text-h6"},G={class:"text-subtitle2"},J="EventVariableSlider",Y={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)((()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e})),r=(0,a.EW)((()=>{var e=u.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),u=(0,a.EW)({get(){return(l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)&d.value)>>t.startBit},set(e){let a=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);if(e<=t.max&&e>=t.min){let o=e;o<<=t.startBit,a|=o&d.value,a&=o|~d.value,s.value=!1,i.value="",l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a)}else console.log(J+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),c=e=>{s.value&&console.log(J+`: Invalid Value : ${e}`)};return(0,a.sV)((()=>{})),(t,l)=>{const o=(0,a.g2)("q-badge"),s=(0,a.g2)("q-slider"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",$,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",G,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(s,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),max:e.max,min:e.min,onChange:c},null,8,["modelValue","max","min"])])),_:1})])),_:1})}}};var Z=l(3954),ee=l(1444);const te=Y,le=te;m()(Y,"components",{QCard:k.A,QCardSection:y.A,QBadge:Z.A,QSlider:ee.A});const ae={class:"no-padding no-margin"},oe={class:"no-padding no-margin"},ne={class:"no-padding no-margin row",style:{border:"1px solid grey"}},se={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=e,l=(0,o.KR)(),n=(0,o.KR)();(0,a.WQ)("store");return(0,a.sV)((()=>{l.value=t.configuration.tabPanels,n.value=l.value[0].displayTitle})),(e,s)=>{const i=(0,a.g2)("q-tab"),d=(0,a.g2)("q-tabs"),r=(0,a.g2)("q-tab-panel"),u=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",ae,[(0,a.bF)(d,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(i,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.Lk)("div",oe,[(0,a.bF)(u,{"keep-alive":"",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(r,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ne,[(0,a.bF)((0,o.R1)(ge),{configuration:e.items,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])}}};var ie=l(2980),de=l(327),re=l(9041),ue=l(1746);const ce=se,me=ce;m()(se,"components",{QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A});const be={class:"q-pa-xs row"},pe={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),n=e=>{var a=!0;return e.visibilityLogic&&(a=U(t.nodeNumber,e.visibilityLogic,l,t.eventIdentifier)),a};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(l,s)=>((0,a.uX)(),(0,a.CE)("div",be,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["EventVariableBitArray"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(_),{key:0,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"EventVariableBitSingle"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(N),{key:1,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"EventVariableGroup"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(E),{key:2,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0),"EventVariableNumber"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(D),{key:3,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,startBit:e.startBit,endBit:e.endBit,displayOffset:e.displayOffset,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","startBit","endBit","displayOffset","min","max","configuration"])):(0,a.Q3)("",!0),"EventVariableSelect"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(H),{key:4,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options"])):(0,a.Q3)("",!0),"EventVariableSlider"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(le),{key:5,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit"])):(0,a.Q3)("",!0),"EventVariableTabs"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(me),{key:6,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0)])))),128))]))}},ve=pe,ge=ve,fe="EventVariableRaw",ke={__name:"EventVariableRaw",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const t=e,l=t.name?t.name:"Event Variable "+t.eventVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>n.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{try{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,n.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,e))}catch(l){console.log(fe+": update_event : "+l)}};return(0,a.sV)((()=>{d.value=n.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)})),(e,t)=>{const n=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-pa-none",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",label:(0,o.R1)(l),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})])),_:1})}}},ye=ke,he=ye;m()(ke,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const _e=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor ",-1),Ve={class:"row items-start q-gutter-md"},qe={key:0,class:"text-subtitle2"},Fe=(0,a.Lk)("p",{class:"text-negative"},"Module Descriptor not found",-1),xe=[Fe],Ne=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor Data ",-1),we={class:"text-h6"},Ce=(0,a.Lk)("div",{class:"text-h6"}," File upload ",-1),Ae=(0,a.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),Ie=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file will be stored with it's original filename"),(0,a.Lk)("br"),(0,a.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a.Lk)("br"),(0,a.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1),Qe=(0,a.Lk)("div",{class:"text-subtitle2"},"Current node:",-1),Re={class:"text-subtitle2"},Ee=(0,a.Lk)("br",null,null,-1),Le=(0,a.Lk)("br",null,null,-1),We=(0,a.Lk)("br",null,null,-1),Se=(0,a.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1),Te="ManageModuleDescriptorsDialog",Be={__name:"ManageModuleDescriptorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(Te+": WATCH model")}));const p=(0,a.EW)((()=>l.state.nodes[l.state.selected_node].moduleDescriptorFilename)),v=(0,a.EW)((()=>{var e="";return l.state.nodes[l.state.selected_node].moduleDescriptorFilename&&(e=l.state.nodes[l.state.selected_node].moduleDescriptorFilename.split(".",1)[0],g()),e}));(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const g=()=>{console.log("checkFileLoad"),l.state.nodeDescriptors[l.state.selected_node]?(r.value=!0,console.log(Te+": WATCH moduleDescriptorFilename "+r.value)):console.log(Te+": checkFileLoad failed for node "+l.state.selected_node)},f=()=>{let e=JSON.stringify(l.state.nodeDescriptors[l.state.selected_node],null,"  "),t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",l.state.nodes[l.state.selected_node].moduleDescriptorFilename),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},k=()=>{if(u.value){var e=u.value.name;console.log(Te+": selected filename "+e);let t=new FileReader;t.readAsText(u.value),t.onload=function(){try{var a=JSON.parse(t.result);a["moduleDescriptorFilename"]=e,console.log(Te+": actionUpload: "+a.moduleDescriptorFilename),console.log(Te+": actionUpload: result: "+JSON.stringify(a)),l.methods.import_module_descriptor(a)}catch(o){console.log(Te+": actionUpload: failed JSON parse")}},u.value=null}else console.log(Te+": actionUpload: uploadFile no value ")},y=()=>{console.log(Te+": clickDownload"),s.value=!0},h=()=>{console.log(Te+": clickUpload"),i.value=!0},_=()=>{console.log(Te+": clickView"),d.value=!0};return(e,t)=>{const c=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),V=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-card"),F=(0,a.g2)("q-dialog"),x=(0,a.g2)("q-file"),N=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(F,{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.k6)((()=>[_e])),_:1}),(0,a.Lk)("div",Ve,[(0,a.bF)(q,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(v.value)+" ",1),r.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",qe,xe))])),_:1}),(0,a.bF)(V,{align:"evenly",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{color:"positive",disabled:!r.value,label:"View",onClick:t[0]||(t[0]=e=>_()),"no-caps":""},null,8,["disabled"]),(0,a.bF)(c,{color:"positive",disabled:!r.value,label:"Download",onClick:t[1]||(t[1]=e=>y()),"no-caps":""},null,8,["disabled"]),(0,a.bF)(c,{color:"positive",label:"Upload",onClick:t[2]||(t[2]=e=>h()),"no-caps":""})])),_:1})])),_:1})]),(0,a.bF)(F,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.k6)((()=>[Ne])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(V,{align:"right",class:"text-primary"}),(0,a.Lk)("p",null,(0,n.v_)(JSON.stringify((0,o.R1)(l).state.nodeDescriptors[(0,o.R1)(l).state.selected_node],null,"  ")),1)])),_:1}),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{color:"positive",label:"Close"},null,512),[[N]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(F,{modelValue:s.value,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",we," Download "+(0,n.v_)(p.value),1)])),_:1}),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{color:"positive",label:"Download",onClick:t[4]||(t[4]=e=>f(p.value))},null,512),[[N,2]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(F,{modelValue:i.value,"onUpdate:modelValue":t[8]||(t[8]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{style:{"min-width":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,a.k6)((()=>[Ce])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[Ae,Ie])),_:1}),(0,a.bF)(x,{modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[Qe,(0,a.Lk)("div",Re,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleName),1),Ee,(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleIdentifier),1),Le,(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleVersion),1),We])])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[Se])),_:1}),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{color:"positive",label:"Upload",onClick:t[7]||(t[7]=e=>k())},null,512),[[N]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])}}};var De=l(2156),Ke=l(6868),Ue=l(1693),Xe=l(2669),Oe=l(9980),Pe=l(8672);const ze=Be,Me=ze;m()(Be,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A,QFile:Oe.A}),m()(Be,"directives",{ClosePopup:Pe.A});const je={class:"text-h6"},He={key:0,class:"text-h6"},$e={class:"q-pa-xs row"},Ge={class:"q-pa-xs row"},Je=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1),Ye={class:"text-body2"},Ze={class:"q-pa-xs row"},et=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Stored events"),(0,a.Lk)("br")],-1),tt={class:"text-body2"},lt="EventVariablesDialog",at={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=e,v=t,g=(0,a.EW)({get(){return p.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(g,(()=>{r.value=!1,m.value=!1})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((async()=>{try{p.nodeNumber?(void 0!=i.state.nodeDescriptors[p.nodeNumber]?(d.value=i.state.nodeDescriptors[p.nodeNumber].eventVariables,u.value=!1):(d.value={},r.value=!0,u.value=!0),f()):r.value=!0}catch(e){console.log(lt+": onUpdated: error: "+e)}}));const f=()=>{1!=i.state.loadFile_notification_raised[p.nodeNumber]&&("Unknown"==i.state.nodes[p.nodeNumber].moduleName?(l.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[p.nodeNumber]=!0):void 0!=i.state.nodes[p.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[p.nodeNumber]&&(l.notify({message:"Failed to load module file "+i.state.nodes[p.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[p.nodeNumber]=!0),i.state.loadFile_notification_raised[p.nodeNumber])},k=()=>{if(console.log(lt+": clickClose"),p.newEvent)try{var e=i.state.nodes[p.nodeNumber],t=e.storedEventsNI[p.eventIdentifier].variables[1];i.methods.event_teach_by_identifier(p.nodeNumber,p.eventIdentifier,1,t)}catch(l){console.log(lt+": clickClose "+l)}},y=()=>{console.log(lt+": clickToggleVariablesDescriptor"),m.value=!m.value},h=()=>{console.log(lt+": clickToggleRaw"),r.value=!r.value},_=()=>{console.log(lt+": clickToggleStoredEvents:"),b.value=!b.value},V=()=>{console.log(lt+": clickUpdateModuleDescriptor"),c.value=!0};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-separator"),q=(0,a.g2)("q-card"),F=(0,a.g2)("q-card-actions"),x=(0,a.g2)("q-dialog"),N=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=e=>g.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(l,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[0]||(t[0]=e=>V())}),(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close",onClick:k},null,512),[[N]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",je," Node: "+(0,n.v_)((0,o.R1)(i).getters.node_name(p.nodeNumber))+"       Event: "+(0,n.v_)((0,o.R1)(i).getters.event_name(p.eventIdentifier))+"       ",1)])),_:1})])),_:1}),(0,a.bF)(q,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{action:(0,a.k6)((()=>[(0,a.bF)(l,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[1]||(t[1]=e=>V())})])),default:(0,a.k6)((()=>[u.value?((0,a.uX)(),(0,a.CE)("div",He," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0)])),_:1}),(0,a.Lk)("div",$e,[(0,o.R1)(i).state.nodeDescriptors[p.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(ge),{key:0,configuration:(0,o.R1)(i).state.nodeDescriptors[p.nodeNumber].eventVariables,nodeNumber:p.nodeNumber,eventIdentifier:p.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])):(0,a.Q3)("",!0)]),(0,a.bF)(f),r.value?((0,a.uX)(),(0,a.Wv)(v,{key:0,class:"q-pa-xs row"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(i).state.nodes[p.nodeNumber].parameters[5],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(he),{eventVariableIndex:e,nodeNumber:p.nodeNumber,eventIdentifier:p.eventIdentifier,key:e},null,8,["eventVariableIndex","nodeNumber","eventIdentifier"])))),128)),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0),m.value?((0,a.uX)(),(0,a.Wv)(v,{key:1,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ge,[Je,(0,a.Lk)("div",Ye,[(0,a.Lk)("pre",null,(0,n.v_)(d.value),1)])]),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.Wv)(v,{key:2,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ze,[et,(0,a.Lk)("div",tt,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(i).state.nodes[p.nodeNumber].storedEventsNI),1)])]),(0,a.bF)(f)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(F,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{flat:"",label:"Toggle stored events view",onClick:t[2]||(t[2]=e=>_())}),(0,a.bF)(l,{flat:"",label:"Toggle variable descriptor view",onClick:t[3]||(t[3]=e=>y())}),(0,a.bF)(l,{flat:"",label:"Toggle raw view",onClick:t[4]||(t[4]=e=>h())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Me),{modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=e=>c.value=e)},null,8,["modelValue"])],64)}}};var ot=l(386);const nt=at,st=nt;m()(at,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QSeparator:ot.A,QCardActions:Xe.A}),m()(at,"directives",{ClosePopup:Pe.A});const it="EventFunctions";function dt(e,t,l){console.log(it+`: createNewEvent: ${t} : ${l}`);var a=e.state.nodes[t];a.storedEventsNI[l]={eventIdentifier:l,eventIndex:1,node:t,variables:{}},a.storedEventsNI[l].variables[0]=a.parameters[5];for(var o=1;o<=a.parameters[5];o++)a.storedEventsNI[l].variables[o]=0}const rt={class:"text-h6"},ut={key:0,class:"text-h6"},ct={key:0},mt={class:"q-gutter-sm"},bt={key:0},pt=(0,a.Lk)("div",{class:"text-h4"},"Node Number",-1),vt=(0,a.Lk)("div",{class:"text-h6"},"Consumed events will need the number of the node that produces the event",-1),gt=(0,a.Lk)("div",{class:"text-h6"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),ft=(0,a.Lk)("div",{class:"text-h4"},"Event Number",-1),kt={key:1},yt=(0,a.Lk)("div",{class:"text-h4"},"Device Number",-1),ht={key:2},_t=(0,a.Lk)("div",{class:"text-h6"},"Once event is added, select edit for the event from the event list to modify event variables",-1),Vt={__name:"AddEventToNodeDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),d=(0,o.KR)(!0);var r=(0,o.KR)();const u=(0,o.KR)(!1),c=(0,o.KR)(""),m=e,b=t,p=(0,a.EW)({get(){return m.modelValue},set(e){b("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{0==l.state.nodes[l.state.selected_node].parameters[4]&&d.value,s.value=null,i.value=null,r.value=null,0==l.state.nodes[l.state.selected_node].parameters[4]&&(d.value=!1)}));const v=()=>{"short"==r.value&&(s.value=0),c.value=parseInt(s.value).toString(16).toUpperCase().padStart(4,0)+parseInt(i.value).toString(16).toUpperCase().padStart(4,0),dt(l,l.state.selected_node,c.value),u.value=!0};return(e,t)=>{const m=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-radio"),k=(0,a.g2)("q-input"),y=(0,a.g2)("q-card-actions"),h=(0,a.g2)("q-card"),_=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=e=>p.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(h,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",rt," Add event for node "+(0,n.v_)((0,o.R1)(l).getters.node_name((0,o.R1)(l).state.selected_node)),1)])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[0==d.value?((0,a.uX)(),(0,a.CE)("div",ut," This module does not support any stored events ")):(0,a.Q3)("",!0)])),_:1}),d.value?((0,a.uX)(),(0,a.CE)("div",ct,[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",mt,[(0,a.bF)(f,{modelValue:(0,o.R1)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.i9)(r)?r.value=e:r=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(f,{modelValue:(0,o.R1)(r),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.i9)(r)?r.value=e:r=e),val:"short",label:"Short event"},null,8,["modelValue"])])])),_:1}),"long"==(0,o.R1)(r)?((0,a.uX)(),(0,a.CE)("div",bt,[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[pt])),_:1}),(0,a.bF)(g,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[vt,gt])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[ft])),_:1}),(0,a.bF)(g,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.Q3)("",!0),"short"==(0,o.R1)(r)?((0,a.uX)(),(0,a.CE)("div",kt,[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[yt])),_:1}),(0,a.bF)(g,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.Q3)("",!0),null!=(0,o.R1)(r)?((0,a.uX)(),(0,a.CE)("div",ht,[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[_t])),_:1})])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[d.value?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(m,{key:0,flat:"",label:"Add Event",onClick:t[5]||(t[5]=e=>v())},null,512)),[[V]]):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(st),{modelValue:u.value,"onUpdate:modelValue":t[7]||(t[7]=e=>u.value=e),nodeNumber:(0,o.R1)(l).state.selected_node,eventIdentifier:c.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}};var qt=l(7878);const Ft=Vt,xt=Ft;m()(Vt,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QRadio:qt.A,QInput:T.A,QCardActions:Xe.A}),m()(Vt,"directives",{ClosePopup:Pe.A});const Nt={class:"text-h6"},wt=(0,a.Lk)("div",{class:"text-h6"},"Are you sure you want to delete all events for this node?",-1),Ct="DeleteAllEventsDialog",At={__name:"DeleteAllEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log(Ct+": deleteAllEvents "+s.nodeNumber),l.methods.delete_all_events(s.nodeNumber)};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,s)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Nt," Delete all events for node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[wt])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},It=At,Qt=It;m()(At,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(At,"directives",{ClosePopup:Pe.A});const Rt={class:"text-h6"},Et="AdvancedEventsDialog",Lt={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=()=>{console.log(Et+": deleteAllEvents "+i.nodeNumber),s.value=!0};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,i)=>{const d=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(p,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Rt," Advanced events functions for node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(m,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"positive",label:"Delete all events",onClick:i[0]||(i[0]=e=>u())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Qt),{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Wt=Lt,St=Wt;m()(Lt,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(Lt,"directives",{ClosePopup:Pe.A});const Tt={class:"text-h6"},Bt={class:"text-h6"},Dt={class:"text-h6"},Kt=(0,a.Lk)("div",{class:"text-h6"},"Generate event",-1),Ut=(0,a.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1),Xt={class:"q-pa-md q-gutter-sm"},Ot="SendEventDialog",Pt={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Ot+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_off_event(e,i.eventNumber)};return(e,t)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Tt," Test event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(i.eventIdentifier)),1)])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",Bt,"Sending Node "+(0,n.v_)(i.sendingNodeNumber),1),(0,a.Lk)("div",Dt,"Event "+(0,n.v_)(s.value)+":"+(0,n.v_)(i.eventNumber),1)])),_:1}),(0,a.bF)(b,{class:"q-pa-md"},{default:(0,a.k6)((()=>[Kt,Ut,(0,a.Lk)("div",Xt,[(0,a.bo)((0,a.bF)(d,{color:"green",label:"ON",onClick:t[0]||(t[0]=e=>u())},null,512),[[f]]),(0,a.bo)((0,a.bF)(d,{color:"negative",label:"OFF",onClick:t[1]||(t[1]=e=>c())},null,512),[[f]])])])),_:1}),(0,a.bF)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},zt=Pt,Mt=zt;m()(Pt,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Pt,"directives",{ClosePopup:Pe.A});const jt={class:"text-h6"},Ht=(0,a.Lk)("div",{class:"text-h6"},"Are you sure you want to delete this event?",-1),$t={__name:"DeleteEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log("removeEvent "+s.nodeNumber+" "+s.eventIdentifier),l.methods.remove_event(s.nodeNumber,s.eventIdentifier)};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",jt," Delete event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(s.eventIdentifier)),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Ht])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"positive",label:"Yes",onClick:t[0]||(t[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Gt=$t,Jt=Gt;m()($t,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()($t,"directives",{ClosePopup:Pe.A});const Yt={class:"text-h6"},Zt=(0,a.Lk)("div",{class:"text-h6"},"Event name",-1),el=(0,a.Lk)("div",{class:"text-h6"},"Event group",-1),tl="NameEventDialog",ll={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(""),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{l.state.layout.eventDetails[d.eventIdentifier]&&(s.value=l.state.layout.eventDetails[d.eventIdentifier].name,i.value=l.state.layout.eventDetails[d.eventIdentifier].group)}));const c=()=>{console.log(tl+": clickAccept: name: "+d.eventIdentifier+" "+s.value),l.setters.event_name(d.eventIdentifier,s.value),l.setters.event_group(d.eventIdentifier,i.value),s.value="",i.value=""};return(e,t)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Yt," Edit name for event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(d.eventIdentifier)),1)])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[Zt,(0,a.bF)(b,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[el,(0,a.bF)(b,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>c())},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},al=ll,ol=al;m()(ll,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(ll,"directives",{ClosePopup:Pe.A});const nl=(0,a.Lk)("div",{class:"text-h6"},"Node parameters are still loading",-1),sl=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1),il={__name:"parametersLoadingDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-btn"),s=(0,a.g2)("q-card-actions"),i=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[nl,sl])),_:1}),(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},dl=il,rl=dl;m()(il,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QCardActions:Xe.A,QBtn:Ue.A}),m()(il,"directives",{ClosePopup:Pe.A});const ul=(0,a.Lk)("div",{class:"text-h6"},"Node Variables are still loading",-1),cl=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1),ml={__name:"NodevariablesLoadingDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-btn"),s=(0,a.g2)("q-card-actions"),i=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[ul,cl])),_:1}),(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},bl=ml,pl=bl;m()(ml,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QCardActions:Xe.A,QBtn:Ue.A}),m()(ml,"directives",{ClosePopup:Pe.A});const vl={class:"text-h6"},gl=(0,a.Lk)("div",{class:"text-h6"},"Teach Event",-1),fl=(0,a.Lk)("div",{class:"text-subtitle2"},"Select node",-1),kl={class:"q-pa-xs q-gutter-sm"},yl=(0,a.Lk)("div",{class:"text-h6"},"Taught Events",-1),hl=(0,a.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1),_l="EventTeachDialog",Vl={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(0),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=e,p=t,v=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(v,(()=>{g.value=""}));const g=(0,o.KR)(),f=(0,o.KR)([]),k=(0,o.KR)([]),y=(0,o.KR)([]),h=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],_=(0,a.EW)((()=>Object.values(l.state.nodes)));(0,a.wB)(_,(()=>{V()}));const V=async()=>{y.value=[],k.value=[],_.value.forEach((e=>{if(Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach((async t=>{if(t.eventIdentifier==b.eventIdentifier){k.value.push(e.nodeNumber);var a=l.state.layout.nodeDetails[e.nodeNumber].name;y.value.push({number:e.nodeNumber,name:a,eventIndex:t.eventIndex,eventIdentifier:t.eventIdentifier})}}))}})),q()},q=()=>{try{f.value=[];var e=l.state.nodes;for(var t in e){var a=!0;for(var o in k.value)k.value[o]==t&&(a=!1);if(a&&e[t].consumer){var n=t+": ";l.state.layout&&(l.state.layout.nodeDetails[t]&&(n+=l.state.layout.nodeDetails[t].name),f.value.push(n))}}}catch(s){console.log(_l+": update_available_nodes: "+s)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{b.eventIdentifier&&V()}));const F=async e=>{if(l.state.nodes[e].parameters[9]);else{l.methods.request_all_node_parameters(e,20,100),c.value=!0;var t=0;try{while(void 0==l.state.nodes[e].parameters[9])if(await d(10),t++,t>500)throw"failed to read Node Parameters";c.value=!1}catch(a){console.log(_l+": checkNodeParameters: "+a),c.value=!1}await d(1e3)}},x=async e=>{var t=l.state.nodes[e].parameters[6];if(l.state.nodes[e].nodeVariables[t]);else{l.methods.request_all_node_variables(e,l.state.nodes[e].parameters[6],100,1),u.value=!0;var a=10*t+20;try{while(void 0==l.state.nodes[e].nodeVariables[t])if(await d(10),a--,a<0)throw"failed to read Node Variables";u.value=!1}catch(o){console.log(_l+": checkNodeVariables: "+o),u.value=!1}await d(1e3)}},N=async()=>{if(console.log(_l+`: clickTeachEvent: ${g.value} : ${b.eventIdentifier}`),""!=g.value){var e=g.value.split(":"),t=parseInt(e[0]);await F(t),await x(t),dt(l,t,b.eventIdentifier),i.value=t,s.value=b.eventIdentifier,m.value=!0,r.value=!0,g.value=void 0}},w=(e,t)=>{console.log(_l+": clickVariables "+e+" "+t),i.value=e,s.value=t,m.value=!1,r.value=!0};return(e,t)=>{const d=(0,a.g2)("q-btn"),p=(0,a.g2)("q-banner"),k=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-select"),V=(0,a.g2)("q-card"),q=(0,a.g2)("q-td"),F=(0,a.g2)("q-tr"),x=(0,a.g2)("q-table"),C=(0,a.g2)("q-dialog"),A=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[A]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",vl," Teach event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(b.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(V,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[gl,fl,(0,a.bF)(_,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),options:f.value},null,8,["modelValue","options"]),(0,a.Lk)("div",kl,[(0,a.bF)(d,{color:"negative",label:"Teach",onClick:t[1]||(t[1]=e=>N()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(V,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)((()=>[yl,hl,(0,a.bF)(x,{flat:"",bordered:"",dense:"",rows:y.value,columns:h,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{body:(0,a.k6)((e=>[(0,a.bF)(F,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{key:"number",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.number),1)])),_:2},1032,["props"]),(0,a.bF)(q,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,a.bF)(q,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>w(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(st),{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),nodeNumber:i.value,eventIdentifier:s.value,newEvent:m.value},null,8,["modelValue","nodeNumber","eventIdentifier","newEvent"]),(0,a.bF)((0,o.R1)(rl),{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(pl),{modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e)},null,8,["modelValue"])],64)}}};var ql=l(528),Fl=l(4488),xl=l(5262);const Nl=Vl,wl=Nl;m()(Vl,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QSelect:M.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A}),m()(Vl,"directives",{ClosePopup:Pe.A});const Cl=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events By Node View ",-1),Al=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of the events for a specific node ",-1),Il=(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),Ql=(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1),Rl=(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1),El=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),Ll=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),Wl=(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1),Sl=(0,a.Lk)("div",{class:"text_body1"}," The event source shows if the event has been read from the module (stored event) or if the event hasn't been read from the module, but has been seen on the CAN bus (Bus event), which is the case for default events on some modules that can't be read from the module ",-1),Tl={__name:"EventsByNodeViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[Cl])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Al])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Il,Ql])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Rl])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[El,Ll])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Wl])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Sl])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Bl=Tl,Dl=Bl;m()(Tl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A}),m()(Tl,"directives",{ClosePopup:Pe.A});const Kl={style:{height:"45vh"}},Ul={class:"text-h6"},Xl={class:"full-width"},Ol="EventsListByNode",Pl={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const t=(0,a.WQ)("store"),l=(0,o.KR)([]),s=(0,o.KR)(""),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(),g=(0,o.KR)(""),f=((0,o.KR)(0),(0,o.KR)(0));(0,o.KR)();const k=e,y=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",required:!1,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventIndex",field:"eventIndex",required:!0,label:"Event index",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],h=(0,a.EW)((()=>k.nodeNumber));(0,a.wB)(h,(()=>{F()}));const _=(0,a.EW)((()=>Object.values(t.state.nodes[k.nodeNumber].storedEvents)));(0,a.wB)(_,(()=>{F()}));const V=(0,a.EW)((()=>Object.values(t.state.busEvents)));(0,a.wB)(V,(()=>{F()}));const q=(0,a.EW)((()=>t.state.layout.eventDetails));(0,a.wB)(q,(()=>{F()}));const F=()=>{l.value=[];var e=Object.values(t.state.nodes[k.nodeNumber].storedEvents);e.forEach((e=>{var a=parseInt(e.eventIdentifier.substr(0,4),16),o=parseInt(e.eventIdentifier.substr(4,4),16);let n={};n["eventIdentifier"]=e.eventIdentifier,n["eventName"]=t.getters.event_name(e.eventIdentifier),n["eventGroup"]=t.getters.event_group(e.eventIdentifier),n["eventIndex"]=e.eventIndex,n["nodeNumber"]=a,n["eventNumber"]=o,n["eventType"]=0==a?"short":"long",n["storedEvent"]=!0,n["source"]="stored event",l.value.push(n)}));var a=Object.values(t.state.busEvents);a.forEach((a=>{if(a.nodeNumber==k.nodeNumber){var o=!1,n=a.eventIdentifier;if("short"==a.type&&(n="0000"+n.substr(4,4)),e.forEach((e=>{n==e.eventIdentifier&&(o=!0)})),0==o){let e={};e["eventIdentifier"]=n,e["eventName"]=t.getters.event_name(n),e["eventGroup"]=t.getters.event_group(n),e["nodeNumber"]=a.nodeNumber,e["eventNumber"]=a.eventNumber,e["eventType"]=a.type,e["storedEvent"]=!1,e["source"]="bus event",l.value.push(e)}}})),l.value.sort((function(e,t){return e.eventIdentifier<t.eventIdentifier?-1:1}))},x=e=>{t.methods.request_all_event_variables(k.nodeNumber,e,100,t.state.nodes[k.nodeNumber].parameters[5])};(0,a.KC)((()=>{F()})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{}));const N=()=>{console.log(Ol+": clickAddEvent"),i.value=!0},w=()=>{console.log(Ol+": clickAdvanced"),d.value=!0},C=e=>{console.log(Ol+": clickDelete"),r.value=!0,g.value=e},A=e=>{console.log(Ol+": clickEventName "+e),g.value=e,v.value=t.getters.event_name(e),b.value=!0},I=()=>{console.log(Ol+": clickInfo"),m.value=!0},Q=()=>{console.log(Ol+": clickRefresh"),t.methods.request_all_node_events(k.nodeNumber),F()},R=e=>{console.log(Ol+": send OFF "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_off_event(k.nodeNumber,a):t.methods.long_off_event(l,a)},E=e=>{console.log(Ol+": send ON "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_on_event(k.nodeNumber,a):t.methods.long_on_event(l,a)},L=e=>{console.log(Ol+": clickTeach"),g.value=e,u.value=!0},W=(e,t)=>{x(e),g.value=t,console.log(Ol+": clickVariables: node "+k.nodeNumber),c.value=!0};return(v,h)=>{const _=(0,a.g2)("q-btn"),V=(0,a.g2)("q-space"),q=(0,a.g2)("q-icon"),F=(0,a.g2)("q-input"),x=(0,a.g2)("q-banner"),S=(0,a.g2)("q-td"),T=(0,a.g2)("q-tr"),B=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",Kl,[(0,a.bF)(x,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(_,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:h[0]||(h[0]=e=>I())}),(0,a.bF)(V),(0,a.eW)("      "),(0,a.bF)(F,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"true",size:"xs",debounce:"300",modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=e=>s.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("    "),(0,a.bF)(_,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:h[2]||(h[2]=e=>N())}),(0,a.bF)(_,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:h[3]||(h[3]=e=>w())}),(0,a.bF)(_,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:h[4]||(h[4]=e=>Q())})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Ul," Events for node : "+(0,n.v_)((0,o.R1)(t).getters.node_name(k.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",Xl,[(0,a.bF)(B,{class:"my-sticky-header-table",bordered:"",dense:"",rows:l.value,columns:y,filter:s.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(T,{props:e,class:(0,n.C4)([g.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(S,{key:"eventIdentifier",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"eventName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventName),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"eventGroup",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventGroup),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"nodeNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"eventNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"eventIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIndex),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"eventType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventType),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"source",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.source),1)])),_:2},1032,["props"]),(0,a.bF)(S,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>A(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:t=>W(e.row.eventIndex,e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>L(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>E(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>R(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"]),(0,a.bF)(_,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>C(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"])]),(0,a.bF)((0,o.R1)(xt),{modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=e=>i.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(St),{modelValue:d.value,"onUpdate:modelValue":h[6]||(h[6]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(ol),{modelValue:b.value,"onUpdate:modelValue":h[7]||(h[7]=e=>b.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(wl),{modelValue:u.value,"onUpdate:modelValue":h[8]||(h[8]=e=>u.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:p.value,"onUpdate:modelValue":h[9]||(h[9]=e=>p.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:f.value,eventIdentifier:g.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:r.value,"onUpdate:modelValue":h[10]||(h[10]=e=>r.value=e),nodeNumber:e.nodeNumber,eventIdentifier:g.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(st),{modelValue:c.value,"onUpdate:modelValue":h[11]||(h[11]=e=>c.value=e),nodeNumber:e.nodeNumber,eventIdentifier:g.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Dl),{modelValue:m.value,"onUpdate:modelValue":h[12]||(h[12]=e=>m.value=e)},null,8,["modelValue"])])}}};var zl=l(3676),Ml=l(492),jl=l(7156);const Hl=(0,Q.A)(Pl,[["__scopeId","data-v-2c528a22"]]),$l=Hl;m()(Pl,"components",{QBanner:Ke.A,QBtn:Ue.A,QSpace:zl.A,QInput:T.A,QIcon:Ml.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QField:jl.A});const Gl={class:"text-h6"},Jl=(0,a.Lk)("div",{class:"text-h6"},"Are you sure you want to delete this node?",-1),Yl="DeleteNodeDialog",Zl={__name:"DeleteNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const r=()=>{console.log(Yl+": deleting node "+s.nodeNumber),l.methods.remove_node(s.nodeNumber),l.eventBus.emit("NODE_DELETED_EVENT",s.nodeNumber)};return(t,s)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Gl," Delete node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[Jl])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",colour:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]]),(0,a.bo)((0,a.bF)(i,{flat:"",colour:"positive",label:"No"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ea=Zl,ta=ea;m()(Zl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Zl,"directives",{ClosePopup:Pe.A});const la={class:"text-h6"},aa={class:"q-pa-xs row"},oa=(0,a.Lk)("div",{class:"text-h6"},"Select a file to upload",-1),na=(0,a.Lk)("br",null,null,-1),sa={class:"text-h6"},ia=(0,a.Lk)("br",null,null,-1),da=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Warnings: "),(0,a.Lk)("br")],-1),ra=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Disconnect all SLiM nodes to prevent corruption. "),(0,a.Lk)("br")],-1),ua=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Ensure there is mimimal or no traffic on the CAN bus before programming to avoid failure (issue with older bootloader firmware). "),(0,a.Lk)("br")],-1),ca=(0,a.Lk)("div",{class:"text-body1"}," In the event of a failure, and if the node is left in bootmode (both leds lit), then retry with the 'Program in Boot Mode' option checked. ",-1),ma="ProgramNodeDialog",ba={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)("");var m=0,b=void 0;const p=e,v=t,g=(0,a.EW)({get(){return p.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(g,(()=>{s.value=""})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const f=async()=>{if(s.value){var e=s.value.name;console.log(ma+": selected filename "+e);let t=new FileReader;t.readAsText(s.value),t.onload=function(){try{console.log(ma+": actionUpload: result: "+t.result)}catch(e){console.log(ma+": actionUpload: "+e)}l.methods.program_node(p.nodeNumber,b,m,s.value)}}else console.log(ma+": actionUpload: uploadFile no value ")};l.eventBus.on("PROGRAM_NODE_PROGRESS",(e=>{c.value=e}));const k=async()=>{m=i.value?1|m:-2&m,m=d.value?2|m:-3&m,m=r.value?4|m:-5&m,m=u.value?8|m:-9&m,b=l.state.nodes[p.nodeNumber].parameters[9],console.log(ma+": clickProgram: node: "+p.nodeNumber+" cpuType: "+b+" flags: "+m),await f()};return(t,m)=>{const b=(0,a.g2)("q-btn"),p=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-file"),y=(0,a.g2)("q-checkbox"),h=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-card"),V=(0,a.g2)("q-dialog"),q=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(V,{modelValue:g.value,"onUpdate:modelValue":m[6]||(m[6]=e=>g.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{style:{"min-width":"750px"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(b,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[q]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",la,"   program Node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",aa,[(0,a.bF)(_,{flat:"",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[oa])),_:1}),(0,a.bF)(f,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(v,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.eW)(" FLASH memory is always programmed ")])),_:1}),(0,a.bF)(v,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=e=>i.value=e),label:"Program configuration"},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:d.value,"onUpdate:modelValue":m[2]||(m[2]=e=>d.value=e),label:"Program EEPROM"},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:r.value,"onUpdate:modelValue":m[3]||(m[3]=e=>r.value=e),label:"Ignore CPU type"},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{modelValue:u.value,"onUpdate:modelValue":m[4]||(m[4]=e=>u.value=e),label:"Program in Boot Mode"},null,8,["modelValue"])])),_:1}),na,(0,a.bF)(h,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{color:"primary",label:"Program",onClick:m[5]||(m[5]=e=>k())})])),_:1})])),_:1}),(0,a.bF)(_,{flat:"",class:"q-pa-sm",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",sa," Node CPU type: "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].cpuName)+" ("+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].parameters[9])+") ",1),ia])),_:1}),da,ra,ua,ca])),_:1})]),(0,a.bF)(v,{class:"bg-info text-h6 text-white"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Status: "+(0,n.v_)(c.value),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},pa=ba,va=pa;m()(ba,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QFile:Oe.A,QCheckbox:u.A,QCardActions:Xe.A}),m()(ba,"directives",{ClosePopup:Pe.A});const ga={class:"text-h6"},fa={class:"q-pa-md"},ka="SetCanIdDialog",ya={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,r=t,u=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{}));const c=async()=>{s.value&&(console.log(ka+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),l.methods.set_can_id(i.nodeNumber,s.value),await d(100),l.methods.query_all_nodes()),s.value=void 0};return(t,i)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",ga," Set CAN ID for node : "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Current CAN ID: "+(0,n.v_)((0,o.R1)(l).getters.node_can_id(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",fa,[(0,a.eW)(" Enter new CAN ID, 1 to 99 "),(0,a.bF)(b,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ha=ya,_a=ha;m()(ya,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(ya,"directives",{ClosePopup:Pe.A});const Va={class:"text-h6"},qa="AdvancedNodeDialog",Fa={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=e,u=t,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}}),m=()=>{console.log(qa+": clickCanIdEnumeration "+r.nodeNumber),l.methods.node_can_id_enum(r.nodeNumber)},b=()=>{console.log(qa+": clickDeleteNode "+r.nodeNumber),s.value=!0},p=()=>{console.log(qa+": clickProgramNode "+r.nodeNumber),i.value=!0},v=()=>{console.log(qa+": clickResetNode "+r.nodeNumber),l.methods.reset_node(r.nodeNumber)},g=()=>{console.log(qa+": clickSetCAN_ID "+r.nodeNumber),d.value=!0};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,r)=>{const u=(0,a.g2)("q-btn"),f=(0,a.g2)("q-banner"),k=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(h,{modelValue:c.value,"onUpdate:modelValue":r[5]||(r[5]=e=>c.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Va," Advanced functions for node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(k,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete node",onClick:r[0]||(r[0]=e=>b())})])),_:1}),(0,a.bF)(k,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:r[1]||(r[1]=e=>m())})])),_:1}),(0,a.bF)(k,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:r[2]||(r[2]=e=>g())})])),_:1}),(0,a.bF)(k,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:r[3]||(r[3]=e=>v())})])),_:1}),(0,a.bF)(k,{align:"left"},{default:(0,a.k6)((()=>[(0,o.R1)(l).state.develop?((0,a.uX)(),(0,a.Wv)(u,{key:0,dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:r[4]||(r[4]=e=>p())})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ta),{modelValue:s.value,"onUpdate:modelValue":r[6]||(r[6]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(va),{modelValue:i.value,"onUpdate:modelValue":r[7]||(r[7]=e=>i.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(_a),{modelValue:d.value,"onUpdate:modelValue":r[8]||(r[8]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},xa=Fa,Na=xa;m()(Fa,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(Fa,"directives",{ClosePopup:Pe.A});const wa={class:"text-h6"},Ca=(0,a.Lk)("div",{class:"text-h6"},"Name",-1),Aa=(0,a.Lk)("div",{class:"text-h6"},"Group",-1),Ia={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)((()=>{l.state.layout.nodeDetails[d.nodeNumber]&&(s.value=l.state.layout.nodeDetails[d.nodeNumber].name,i.value=l.getters.node_group(d.nodeNumber))}));const c=()=>{console.log("new node name: "+s.value),l.setters.node_name(d.nodeNumber,s.value),l.setters.node_group(d.nodeNumber,i.value)};return(t,l)=>{const o=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-input"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",wa," Edit name for node : "+(0,n.v_)(e.nodeNumber),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[Ca,(0,a.bF)(r,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[Aa,(0,a.bF)(r,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Qa=Ia,Ra=Qa;m()(Ia,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(Ia,"directives",{ClosePopup:Pe.A});const Ea={__name:"NodeParameter",props:["Name","Value"],setup(e){return(t,l)=>{const o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:""},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.Name),1),(0,a.eW)(" : "+(0,n.v_)(e.Value),1)])),_:1})}}},La=Ea,Wa=La;m()(Ea,"components",{QCard:k.A});const Sa={__name:"NodeParameterRaw",props:["nodeNumber","parameterIndex"],setup(e){const t=(0,a.WQ)("store"),l=e,o=(0,a.EW)((()=>t.getters.node_parameter_name(l.nodeNumber,l.parameterIndex))),n=(0,a.EW)((()=>t.getters.node_parameter_value(l.nodeNumber,l.parameterIndex)));return(e,t)=>{const l=(0,a.g2)("q-input"),s=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(s,{class:"q-pa-xs",flat:"",style:{"min-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{filled:"",label:o.value,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),outlined:"",disable:"",readonly:""},null,8,["label","modelValue"])])),_:1})}}},Ta=Sa,Ba=Ta;m()(Sa,"components",{QCard:k.A,QInput:T.A});const Da={class:"text-h6"},Ka=(0,a.Lk)("div",{class:"text-body1"}," Raw node parameter values ",-1),Ua={class:"q-pa-none row"},Xa="NodeParametersDialog",Oa={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,a.EW)((()=>l.state.nodes[i.nodeNumber].moduleDescriptorFilename));(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{console.log(Xa+": clickUpdateModuleDescriptor"),s.value=!0};return(t,d)=>{const m=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-separator"),g=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"700px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(m,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:d[0]||(d[0]=e=>c())}),(0,a.bo)((0,a.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Da," Parameter Information for "+(0,n.v_)((0,o.R1)(l).getters.node_name(i.nodeNumber)),1)])),_:1}),(0,a.bF)(g,{style:{"max-height":"80vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Wa),{Name:"Node Number",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Events Currently Stored",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Manufacturer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module Identifier",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Producer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Consumer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Consume own Events",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"VLCB",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Node Variables",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Events Supported",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Event Variables",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"CPU Name",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Interface",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Firmware Version",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,o.R1)(l).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Beta Version",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"]),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),(0,a.bF)(v),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),Ka,(0,a.Lk)("div",Ua,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[i.nodeNumber].parameters[0]+1,((t,l)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ba),{nodeNumber:e.nodeNumber,parameterIndex:l,key:l},null,8,["nodeNumber","parameterIndex"])))),128))])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Me),{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=e=>s.value=e)},null,8,["modelValue"])],64)}}},Pa=Oa,za=Pa;m()(Oa,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QSeparator:ot.A}),m()(Oa,"directives",{ClosePopup:Pe.A});const Ma={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1}},setup(e){const t=e,l=(0,a.WQ)("store"),n=(0,o.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.EW)({get(){return l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]},set(e){t.learn?l.methods.update_node_variable_in_learn_mode(t.nodeNumber,t.variableIndex,e):l.methods.update_node_variable(t.nodeNumber,t.variableIndex,e)}});(0,a.wB)(i,((e,a)=>{n.value=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit])}));const d=()=>{let e=i.value;n.value?e|=s[t.bit]:e&=~s[t.bit],t.learn?l.methods.update_node_variable_in_learn_mode(t.nodeNumber,t.variableIndex,e):l.methods.update_node_variable(t.nodeNumber,t.variableIndex,e)};return(0,a.sV)((()=>{const e=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit]);n.value=e})),(t,l)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:e.label,onClick:d,"right-label":""},null,8,["modelValue","label"])}}},ja=Ma,Ha=ja;m()(Ma,"components",{QCheckbox:u.A});const $a={class:"text-h6"},Ga={class:"text-subtitle2"},Ja={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""}},setup(e){const t=(0,a.WQ)("store");(0,o.KR)();var l=(0,o.KR)();const s=e,i=(0,a.EW)((()=>t.state.nodes[s.nodeNumber].nodeVariables));function d(){for(var e in l.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=K(s.nodeNumber,s.bitCollection[e].overload,t);if(a){var o={bitPosition:s.bitCollection[e].bitPosition,label:a};l.value.push(o)}}else s.bitCollection[e].label&&l.value.push(s.bitCollection[e])}return(0,a.wB)(i,(()=>{d()})),(0,a.sV)((()=>{d()})),(t,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",$a,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",Ga,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l),(t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,o.R1)(Ha),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:t.bitPosition,label:t.label},null,8,["nodeNumber","variableIndex","bit","label"])])))),128))])),_:1})])),_:1})}}},Ya=Ja,Za=Ya;m()(Ja,"components",{QCard:k.A,QCardSection:y.A});const eo={class:"text-h6"},to={class:"text-subtitle2"},lo={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",eo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",to,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(Ha),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit},null,8,["nodeNumber","variableIndex","bit"])])),_:1})])),_:1})}}},ao=lo,oo=ao;m()(lo,"components",{QCard:k.A,QCardSection:y.A});const no={class:"text-h6"},so={class:"text-subtitle2"},io={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:65025},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const t=e,l=(t.name&&t.name,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>(l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexHigh]<<8)+l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexLow]));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<t.min||e>t.max?(console.log(`Invalid Value : ${e}`),s.value=!0,i.value="Invalid Value"):(console.log(`Value Ok : ${e}`),s.value=!1,i.value="",l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexHigh,e>>8),l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexLow,255&e))};return(0,a.sV)((()=>{d.value=(l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexHigh]<<8)+l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexLow]})),(t,l)=>{const o=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",no,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",so,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{mask:"#####",debounce:"1000",hint:e.hint,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["hint","modelValue","error-message","error"])])),_:1})])),_:1})}}},ro=io,uo=ro;m()(io,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const co={class:"q-pa-xs row"},mo={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},bo={class:"GroupTitle q-py-none"},po={__name:"NodeVariableGroup",props:{configuration:Object},setup(e){(0,a.WQ)("store"),(0,o.KR)("nvGroup");return(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(t,l)=>((0,a.uX)(),(0,a.CE)("div",co,[(0,a.Lk)("div",mo,[(0,a.Lk)("div",bo,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)((0,o.R1)(Xo),{configuration:e.configuration.groupItems},null,8,["configuration"])])]))}},vo=(0,Q.A)(po,[["__scopeId","data-v-88ba305a"]]),go=vo,fo={class:"text-h6"},ko={class:"text-subtitle2"},yo={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<t.min||e>t.max?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,e))};return(0,a.sV)((()=>{d.value=r.value})),(t,l)=>{const o=(0,a.g2)("q-input"),r=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",fo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",ko,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}},ho=yo,_o=ho;m()(yo,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const Vo={class:"text-h6"},qo={class:"text-subtitle2"},Fo={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},learn:{type:Boolean,default:!1}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(),i=(0,a.EW)((()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(i,(()=>{s.value=i.value&t.bitMask}));const d=e=>{console.log(`NodeVariableSelect update_variable ${e.value}`);let a=i.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,a)};return(0,a.sV)((()=>{s.value=i.value&t.bitMask})),(t,l)=>{const o=(0,a.g2)("q-select"),i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Vo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",qo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},xo=Fo,No=xo;m()(Fo,"components",{QCard:k.A,QCardSection:y.A,QSelect:M.A});const wo={class:"text-h6"},Co={class:"text-subtitle2"},Ao={key:0},Io="NodeVariableSlider",Qo={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)((()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e}));let r=l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex];const u=(0,a.EW)((()=>c.value?{height:"150px"}:{height:"120px"})),c=(0,a.EW)((()=>{var e=!1;return t&&(e=!!t.configuration.outputOnWrite),e}));(0,a.wB)(c,(()=>{}));const m=(0,a.EW)((()=>{var e=b.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),b=(0,a.EW)({get(){return(l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]&d.value)>>t.startBit},set(e){if(e<=t.max&&e>=t.min){let a=e;a<<=t.startBit,r|=a&d.value,r&=a|~d.value,s.value=!1,i.value="",l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,r)}else console.log(Io+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),p=e=>{s.value&&console.log(Io+`: Invalid Value : ${e}`)};(0,a.$u)((()=>{})),(0,a.sV)((()=>{}));const v=()=>{console.log(Io+": clickTest"),l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,r)};return(t,l)=>{const o=(0,a.g2)("q-badge"),s=(0,a.g2)("q-slider"),i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:(0,n.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",wo,(0,n.v_)(e.displayTitle),1),(0,a.Lk)("div",Co,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(o,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(m.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(s,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=e=>b.value=e),max:e.max,min:e.min,onChange:p},null,8,["modelValue","max","min"]),c.value?((0,a.uX)(),(0,a.CE)("div",Ao,[(0,a.bF)(i,{dense:"",label:"Test",onClick:l[1]||(l[1]=e=>v()),"no-caps":""})])):(0,a.Q3)("",!0)])),_:1},8,["style"])])),_:1})}}},Ro=Qo,Eo=Ro;m()(Qo,"components",{QCard:k.A,QCardSection:y.A,QBadge:Z.A,QSlider:ee.A,QBtn:Ue.A});const Lo={class:"no-padding no-margin"},Wo={class:"no-padding no-margin row",style:{border:"1px solid grey"}},So={__name:"NodeVariableTabs",props:{configuration:Object},setup(e){const t=e,l=(0,o.KR)(),n=(0,o.KR)();(0,a.WQ)("store"),(0,o.KR)("nvTabs"),(0,o.KR)("92vw");return(0,a.sV)((()=>{l.value=t.configuration.tabPanels,n.value=l.value[0].displayTitle})),(0,a.wB)(n,(()=>{})),(0,a.$u)((()=>{})),(e,t)=>{const s=(0,a.g2)("q-tab"),i=(0,a.g2)("q-tabs"),d=(0,a.g2)("q-tab-panel"),r=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",Lo,[(0,a.bF)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(r,{"keep-alive":"",modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),class:"no-padding no-margin"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,name:e.displayTitle,class:"no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Wo,[(0,a.bF)((0,o.R1)(Xo),{configuration:e.items},null,8,["configuration"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}},To=So,Bo=To;m()(So,"components",{QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A});const Do={class:"q-pa-xs row"},Ko={__name:"NodeVariables",props:{configuration:Object},setup(e){const t=(0,a.WQ)("store");function l(e){var l=!0;return e.visibilityLogic&&(l=U(t.state.selected_node,e.visibilityLogic,t)),l}return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(n,s)=>((0,a.uX)(),(0,a.CE)("div",Do,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["NodeVariableBitArray"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Za),{key:0,nodeNumber:(0,o.R1)(t).state.selected_node,variableIndex:e.nodeVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,learn:!1},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"NodeVariableBitSingle"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(oo),{key:1,nodeNumber:(0,o.R1)(t).state.selected_node,variableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,bit:e.bit},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit"])):(0,a.Q3)("",!0),"NodeVariableDual"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(uo),{key:2,NodeVariableIndexLow:e.nodeVariableIndexLow,NodeVariableIndexHigh:e.nodeVariableIndexHigh,NodeNumber:(0,o.R1)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle"])):(0,a.Q3)("",!0),"NodeVariableGroup"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(go),{key:3,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0),"NodeVariableNumber"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(_o),{key:4,"node-number":(0,o.R1)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,"node-variable-index":e.nodeVariableIndex},null,8,["node-number","displayTitle","displaySubTitle","node-variable-index"])):(0,a.Q3)("",!0),"NodeVariableSelect"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(No),{key:5,nodeVariableIndex:e.nodeVariableIndex,nodeNumber:(0,o.R1)(t).state.selected_node,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options"])):(0,a.Q3)("",!0),"NodeVariableSlider"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Eo),{key:6,"node-number":(0,o.R1)(t).state.selected_node,nodeVariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableTabs"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Bo),{key:7,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0)])))),128))]))}},Uo=Ko,Xo=Uo,Oo={__name:"NodeVariableRaw",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const t=e,l=t.name?t.name:"Variable"+t.nodeVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,o.KR)(),r=(0,a.EW)((()=>n.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",n.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,e))};return(0,a.sV)((()=>{d.value=r.value})),(e,t)=>{const n=(0,a.g2)("q-input"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-pa-xs",flat:"",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",class:"bg-white",filled:"",label:(0,o.R1)(l),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})}}},Po=Oo,zo=Po;m()(Oo,"components",{QCard:k.A,QInput:T.A});const Mo={class:"text-h6"},jo={key:0,class:"text-h6"},Ho={key:1,class:"text-h6"},$o={key:1,class:"q-pa-none row"},Go={class:"q-pa-xs row"},Jo=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1),Yo={class:"text-body2"},Zo="NodevariablesDialog",en={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=e,p=t,v=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(v,(()=>{r.value=!1,m.value=!1}));const g=(0,a.EW)((()=>{var e=void 0;return b.nodeNumber&&void 0!=i.state.nodeDescriptors[b.nodeNumber]&&(e=i.state.nodeDescriptors[b.nodeNumber].nodeVariables),e}));(0,a.wB)(g,(()=>{void 0==g.value?(r.value=!0,d.value=!0):d.value=!1})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{b.nodeNumber&&(f(),0==i.state.nodes[b.nodeNumber].parameters[6]?u.value=!0:u.value=!1)}));const f=()=>{void 0==i.state.loadFile_notification_raised[b.nodeNumber]&&("Unknown"==i.state.nodes[b.nodeNumber].moduleName?(l.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0):void 0!=i.state.nodes[b.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[b.nodeNumber]&&(l.notify({message:"Failed to load module file "+i.state.nodes[b.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0),i.state.loadFile_notification_raised[b.nodeNumber]),void 0==g.value?(r.value=!0,d.value=!0):d.value=!1},k=()=>{console.log(Zo+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},y=()=>{console.log(Zo+": clickToggleNodeDescriptor"),m.value?m.value=!1:m.value=!0},h=()=>{console.log(Zo+": clickUpdateModuleDescriptor"),c.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),p=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-card"),V=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-dialog"),F=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=e=>v.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[0]||(l[0]=e=>h())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[F]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Mo," Node Variables for node : "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1})])),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>[d.value?((0,a.uX)(),(0,a.CE)("div",jo," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0),u.value?((0,a.uX)(),(0,a.CE)("div",Ho," this node has no variables to display ")):(0,a.Q3)("",!0)])),_:1}),(0,o.R1)(i).state.nodeDescriptors[b.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Xo),{key:0,configuration:(0,o.R1)(i).state.nodeDescriptors[b.nodeNumber].nodeVariables},null,8,["configuration"])):(0,a.Q3)("",!0),r.value?((0,a.uX)(),(0,a.CE)("div",$o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(i).state.nodes[b.nodeNumber].parameters[6],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(zo),{"node-variable-index":e,"node-number":b.nodeNumber,key:e},null,8,["node-variable-index","node-number"])))),128))])):(0,a.Q3)("",!0),m.value?((0,a.uX)(),(0,a.Wv)(f,{key:2,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Go,[Jo,(0,a.Lk)("div",Yo,[(0,a.Lk)("pre",null,(0,n.v_)(g.value),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:l[1]||(l[1]=e=>y())}),(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:l[2]||(l[2]=e=>k())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Me),{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e)},null,8,["modelValue"])],64)}}},tn=en,ln=tn;m()(en,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(en,"directives",{ClosePopup:Pe.A});const an=(0,a.Lk)("div",{class:"text-h6"}," Information about the Nodes View ",-1),on=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of all the nodes on the layout ",-1),nn=(0,a.Lk)("div",{class:"text_body1"}," When first connected, a QNN is issued to find all the nodes on the network, and the list created from the responses ",-1),sn=(0,a.Lk)("div",{class:"text_body1"}," The REFRESH button can be used at any point to resend a QNN to update the display, when a new node is added for instance ",-1),dn=(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),rn=(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1),un=(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1),cn=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),mn=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),bn=(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1),pn={__name:"NodesViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[an])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[on])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[nn,sn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[dn,rn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[un])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[cn,mn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[bn])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},vn=pn,gn=vn;m()(pn,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A}),m()(pn,"directives",{ClosePopup:Pe.A});const fn={class:"text-h6"},kn={key:0,class:"q-pa-xs row"},yn=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Diagnostics"),(0,a.Lk)("br")],-1),hn={class:"text-body2"},_n="VLCBDiagnosticsDialog",Vn={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)([]),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(_n+": WATCH model")}));const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,a.EW)((()=>{var e=void 0;return d.nodeNumber&&l.state.nodes[d.nodeNumber].services[d.serviceIndex]&&(e=Object.values(l.state.nodes[d.nodeNumber].services[d.serviceIndex].diagnostics)),e}));(0,a.wB)(m,(()=>{m.value&&b()}));const b=()=>{i.value=[],m.value.forEach((e=>{if(0!=e.DiagnosticCode){let t={};t["diagnosticCode"]=e.DiagnosticCode,t["diagnosticValue"]=e.DiagnosticValue,t["diagnosticName"]=e.DiagnosticName,i.value.push(t)}}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(_n+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(t,d)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),k=(0,a.g2)("q-card"),y=(0,a.g2)("q-card-actions"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",fn," VLCB Diagnostics for "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"no-margin q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(v,{key:"diagnosticCode",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticCode),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticValue",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticValue),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,a.uX)(),(0,a.CE)("div",kn,[yn,(0,a.Lk)("div",hn,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)])])):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",label:"Toggle diagnostics json",onClick:d[0]||(d[0]=e=>p())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},qn=Vn,Fn=qn;m()(Vn,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QCardActions:Xe.A}),m()(Vn,"directives",{ClosePopup:Pe.A});const xn=(0,a.Lk)("div",{class:"text-h6"}," VLCB Services ",-1),Nn={key:0,class:"q-pa-xs row"},wn=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Services"),(0,a.Lk)("br")],-1),Cn={class:"text-body2"},An="VLCBServicesDialog",In={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)([]),r=(0,o.KR)(null),u=e,c=t,m=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.wB)(m,(()=>{}));const b=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"diagnostics",field:"diagnostics",required:!0,label:"",align:"left"}],p=(0,a.EW)((()=>{var e={};return u.nodeNumber&&(e=Object.values(l.state.nodes[u.nodeNumber].services)),e}));(0,a.wB)(p,(()=>{v()}));const v=()=>{d.value=[],p.value.forEach((e=>{let t={};t["serviceIndex"]=e.ServiceIndex,t["serviceType"]=e.ServiceType,t["serviceName"]=e.ServiceName,t["serviceVersion"]=e.ServiceVersion,d.value.push(t)}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const g=()=>{console.log(An+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},f=e=>{console.log(`clickiagnostics: index ${e}`),l.methods.request_diagnostics(u.nodeNumber,e),r.value=e,i.value=!0};return(t,u)=>{const c=(0,a.g2)("q-btn"),p=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-td"),y=(0,a.g2)("q-tr"),h=(0,a.g2)("q-table"),_=(0,a.g2)("q-card"),V=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-dialog"),F=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=e=>m.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[F]])])),default:(0,a.k6)((()=>[xn])),_:1})])),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"no-margin q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"vlcb-services-table",dense:"",rows:d.value,columns:b,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(y,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(k,{key:"serviceIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceIndex),1)])),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceType),1)])),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceName),1)])),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceVersion",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceVersion),1)])),_:2},1032,["props"]),(0,a.bF)(k,{key:"diagnostics",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(c,{color:"primary",flat:"",rounded:"",label:"diagnostics",onClick:t=>f(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,a.uX)(),(0,a.CE)("div",Nn,[wn,(0,a.Lk)("div",Cn,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services),1)])])):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(V,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{flat:"",label:"Toggle services json",onClick:u[0]||(u[0]=e=>g())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Fn),{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:r.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},Qn=In,Rn=Qn;m()(In,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QCardActions:Xe.A}),m()(In,"directives",{ClosePopup:Pe.A});const En=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1),Ln=["src"],Wn="DialogExampleCompositionAPI",Sn={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store"),(0,o.KR)(!1);const l=e,n=t,s=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});(0,a.wB)(s,(()=>{console.log(Wn+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(t,l)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])])),default:(0,a.k6)((()=>[En])),_:1})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,Ln)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Tn=Sn,Bn=Tn;m()(Sn,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A}),m()(Sn,"directives",{ClosePopup:Pe.A});const Dn=e=>((0,a.Qi)("data-v-a02fd7ce"),e=e(),(0,a.jt)(),e),Kn={style:{height:"45vh"}},Un=Dn((()=>(0,a.Lk)("div",{class:"text-h6"},"Nodes View",-1))),Xn="NodesList",On={__name:"NodesView",setup(e){const t=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"left",sortable:!0},{name:"CANID",field:"CANID",required:!0,label:"CAN ID",align:"left",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)([]),r=(0,o.KR)(),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(),f=(0,o.KR)(!1),k=(0,o.KR)(!1),y=(0,o.KR)(!1),h=(0,o.KR)(!1),_=(0,o.KR)("dummyModule/index.html"),V=(0,a.EW)((()=>Object.values(l.state.nodes)));(0,a.wB)(V,(()=>{F()}));const q=(0,a.EW)((()=>l.state.layout.nodeDetails));(0,a.wB)(q,(()=>{F()}));const F=()=>{i.value=[],V.value.forEach((e=>{let t={};t["nodeNumber"]=e.nodeNumber,t["CANID"]=e.CANID,t["nodeName"]=l.getters.node_name(e.nodeNumber),t["group"]=l.getters.node_group(e.nodeNumber),t["moduleName"]=e.moduleName,t["component"]=e.component,t["status"]=e.status,e.flim?t["mode"]="FLiM":e.VLCB?t["mode"]="unInit":t["mode"]="SLiM",t["events"]=e.eventCount,t["vlcb"]=e.VLCB,i.value.push(t)}))},x=e=>e in l.state.layout.nodeDetails?l.state.layout.nodeDetails[e].colour:"blue";(0,a.KC)((()=>{l.methods.query_all_nodes()}));const N=async e=>{if(l.state.nodes[e].parameters[9]);else{l.methods.request_all_node_parameters(e,20,100),f.value=!0;var t=0;try{while(void 0==l.state.nodes[e].parameters[9])if(await d(10),t++,t>500)throw"failed to read Node Parameters";f.value=!1}catch(a){console.log(Xn+": checkNodeParameters: "+a),f.value=!1}}},w=async e=>{var t=l.state.nodes[e].parameters[6];if(l.state.nodes[e].nodeVariables[t]);else{l.methods.request_all_node_variables(e,l.state.nodes[e].parameters[6],100,1),k.value=!0;var a=10*t+20;try{while(void 0==l.state.nodes[e].nodeVariables[t])if(await d(10),a--,a<0)throw"failed to read Node Variables";k.value=!1}catch(o){console.log(Xn+": checkNodeParameters: "+o),k.value=!1}}},C=async e=>{l.state.selected_node=e,l.methods.request_all_node_events(l.state.selected_node),g.value=e,u.value=!0,await d(200),l.methods.request_service_discovery(l.state.selected_node),await d(200)};l.eventBus.on("NODE_DELETED_EVENT",(e=>{l.state.selected_node==e&&(u.value=!1)}));const A=async e=>{await N(e),r.value=e,g.value=e,c.value=!0,console.log(Xn+": clickAdvanced: node"+l.state.selected_node)},I=async e=>{await N(e),await w(e),await C(e),console.log(Xn+": clickEvents: node",e)},Q=()=>{console.log(Xn+": clickInfo"),p.value=!0},R=async e=>{await N(e),C(e),console.log(Xn+": clickNameNode: node "+e),m.value=!0},E=async e=>{l.methods.request_all_node_parameters(e,20,100),await C(e),console.log(Xn+": clickParameters: node "+e),b.value=!0},L=()=>{console.log(Xn+": clickRefresh"),l.methods.query_all_nodes()},W=async e=>{await N(e),await C(e),console.log(Xn+": clickVariables: node "+e),1e3==e&&l.state.develop?h.value=!0:l.state.nodes[e].parameters[9]&&(l.methods.request_all_node_variables(e,l.state.nodes[e].parameters[6],100,1),v.value=!0)},S=async e=>{console.log(Xn+": clickVLCB"),await C(e),l.methods.request_diagnostics(e),y.value=!0};return(e,d)=>{const V=(0,a.g2)("q-btn"),q=(0,a.g2)("q-space"),F=(0,a.g2)("q-icon"),N=(0,a.g2)("q-input"),w=(0,a.g2)("q-banner"),C=(0,a.g2)("q-td"),T=(0,a.g2)("q-chip"),B=(0,a.g2)("q-tr"),D=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",Kn,[(0,a.bF)(w,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:d[0]||(d[0]=e=>Q())}),(0,a.bF)(q),(0,a.eW)("      "),(0,a.bF)(N,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"true",size:"xs",debounce:"300",modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=e=>s.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("    "),(0,a.bF)(V,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:d[2]||(d[2]=e=>L())})])),default:(0,a.k6)((()=>[Un])),_:1}),(0,a.Lk)("div",null,[(0,a.bF)(D,{class:"my-sticky-header-table",bordered:"",dense:"",rows:i.value,columns:t,filter:s.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(B,{props:e,class:(0,n.C4)([g.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(C,{key:"nodeNumber",class:(0,n.C4)("text-"+x(e.row.nodeNumber)),props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["class","props"]),(0,a.bF)(C,{key:"CANID",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.CANID),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"nodeName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeName),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"moduleName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.moduleName),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"mode",props:e},{default:(0,a.k6)((()=>["FLiM"==e.row.mode?((0,a.uX)(),(0,a.Wv)(T,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024)):((0,a.uX)(),(0,a.Wv)(T,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024))])),_:2},1032,["props"]),(0,a.bF)(C,{key:"status",props:e},{default:(0,a.k6)((()=>[e.row.status?((0,a.uX)(),(0,a.Wv)(T,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("OK")])),_:1})):((0,a.uX)(),(0,a.Wv)(T,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("Error")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(C,{key:"events",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.events),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"actions"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",onClick:t=>I(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",onClick:t=>R(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:t=>E(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>W(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),e.row.vlcb?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(V,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:t=>S(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.uX)(),(0,a.Wv)(V,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",onClick:t=>S(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0),(0,a.bF)(V,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",onClick:t=>A(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"]),1==u.value?((0,a.uX)(),(0,a.Wv)((0,o.R1)($l),{key:0,nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["nodeNumber"])):(0,a.Q3)("",!0),(0,a.bF)((0,o.R1)(Na),{modelValue:c.value,"onUpdate:modelValue":d[3]||(d[3]=e=>c.value=e),nodeNumber:r.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ra),{modelValue:m.value,"onUpdate:modelValue":d[4]||(d[4]=e=>m.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(za),{modelValue:b.value,"onUpdate:modelValue":d[5]||(d[5]=e=>b.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(ln),{modelValue:v.value,"onUpdate:modelValue":d[6]||(d[6]=e=>v.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(rl),{modelValue:f.value,"onUpdate:modelValue":d[7]||(d[7]=e=>f.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(gn),{modelValue:p.value,"onUpdate:modelValue":d[8]||(d[8]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(pl),{modelValue:k.value,"onUpdate:modelValue":d[9]||(d[9]=e=>k.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Rn),{modelValue:y.value,"onUpdate:modelValue":d[10]||(d[10]=e=>y.value=e),nodeNumber:(0,o.R1)(l).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Bn),{modelValue:h.value,"onUpdate:modelValue":d[11]||(d[11]=e=>h.value=e),URL:_.value},null,8,["modelValue","URL"])])])}}};var Pn=l(6760);const zn=(0,Q.A)(On,[["__scopeId","data-v-a02fd7ce"]]),Mn=zn;m()(On,"components",{QBanner:Ke.A,QBtn:Ue.A,QSpace:zl.A,QInput:T.A,QIcon:Ml.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QChip:Pn.A,QField:jl.A});const jn=(0,a.Lk)("div",{class:"text-h6"}," Information about the Bus Events View ",-1),Hn=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Bus Events view is intended to show the event activity on the CAN Bus from the start of the application ",-1),$n=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Events View' ",-1),Gn=(0,a.Lk)("div",{class:"text_body1"}," Events read from node will not appear in this view until they have been sent by a node & captured from the CAN Bus ",-1),Jn=(0,a.Lk)("div",{class:"text_body1"}," For some nodes, default events can't be read from the node (as some do not treat them as 'stored events') ",-1),Yn=(0,a.Lk)("div",{class:"text_body1"}," But these default events will appear in this view once they've been sent ",-1),Zn=(0,a.Lk)("div",{class:"text_body1"}," This view takes account of the source node, so if the same event has been sent by two different nodes, there will be two entries for that event ",-1),es=(0,a.Lk)("div",{class:"text_body1"}," This is intended to make it easy to see which nodes are sending which events ",-1),ts=(0,a.Lk)("div",{class:"text_body1"}," In this view, the 'send ON/OFF' feature will use the Source Node Number of the row selected, thus replicating the event from that specific node ",-1),ls=(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, from that particular sending node ",-1),as=(0,a.Lk)("div",{class:"text_body1"}," The Bus Events view will be empty at startup, and can also be cleared, to only show events from that point onwards ",-1),os=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),ns=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),ss={__name:"BusEventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[jn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Hn,$n])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Gn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Jn,Yn])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Zn,es])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ts])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ls])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[as])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[os,ns])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},is=ss,ds=is;m()(ss,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A}),m()(ss,"directives",{ClosePopup:Pe.A});const rs=(0,a.Lk)("div",{class:"text-h6"}," Bus Events Dialog ",-1),us=(0,a.Lk)("div",{class:"col-2 q-table__title text-h4"},"Bus Events",-1),cs={class:"q-pa-xs row"},ms=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1),bs={class:"text-body2"},ps="BusEventsDialog",vs={__name:"BusEventsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=((0,o.KR)("nodes"),(0,o.KR)("")),i={rowsPerPage:0};let d=(0,o.KR)();const r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(""),p=(0,o.KR)(),v=(0,o.KR)(0),g=(0,o.KR)(0),f=(0,o.KR)(!1),k=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!1},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!1},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!1},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],y=e,h=t,_=(0,a.EW)({get(){return y.modelValue},set(e){h("update:modelValue",e)}});(0,a.wB)(_,(()=>{}));const V=(0,a.EW)((()=>Object.values(l.state.busEvents))),q=(0,a.EW)((()=>l.state.layout));(0,a.wB)(V,(()=>{F()})),(0,a.wB)(q,(()=>{F()}));const F=()=>{let e=[];try{let t=l.state.busEvents;if(t)for(let a of Object.keys(t).sort()){let o={};o["eventIdentifier"]=t[a].eventIdentifier,o["nodeNumber"]=t[a].nodeNumber,o["eventNumber"]=t[a].eventNumber,o["status"]=t[a].status,o["type"]=t[a].type,o["count"]=t[a].count,o["name"]=l.getters.event_name(t[a].eventIdentifier),o["colour"]=l.getters.event_colour(t[a].eventIdentifier),o["group"]=l.getters.event_group(t[a].eventIdentifier),e.push(o)}}catch(t){console.log(ps+": update_bus_events "+t)}d.value=e},x=e=>l.getters.event_colour(e);(0,a.KC)((()=>{})),(0,a.sV)((()=>{l.methods.refresh_bus_events()}));const N=e=>{console.log(ps+": clickEventName "+e),b.value=e,p.value=l.getters.event_name(e),r.value=!0},w=()=>{console.log(ps+": clickInfo"),m.value=!0},C=(e,t)=>{console.log(ps+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,o):l.methods.long_off_event(a,o)},A=(e,t)=>{console.log(ps+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,o):l.methods.long_on_event(a,o)},I=e=>{console.log(ps+": clickTeach"),b.value=e,c.value=!0},Q=()=>{console.log(ps+": clickToggleShowBusEventsJSON"),f.value?f.value=!1:f.value=!0};return(e,t)=>{const p=(0,a.g2)("q-btn"),y=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-section"),V=(0,a.g2)("q-space"),q=(0,a.g2)("q-icon"),F=(0,a.g2)("q-input"),R=(0,a.g2)("q-td"),E=(0,a.g2)("q-chip"),L=(0,a.g2)("q-tr"),W=(0,a.g2)("q-table"),S=(0,a.g2)("q-card"),T=(0,a.g2)("q-card-actions"),B=(0,a.g2)("q-dialog"),D=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(B,{modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=e=>_.value=e),persistent:"","full-width":""},{default:(0,a.k6)((()=>[(0,a.bF)(S,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[D]])])),default:(0,a.k6)((()=>[rs])),_:1})])),_:1}),(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{title:"Bus Events",class:"bus-events-table",dense:"",rows:(0,o.R1)(d),columns:k,filter:s.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:i,"onUpdate:pagnation":t[4]||(t[4]=e=>i=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{top:(0,a.k6)((()=>[us,(0,a.bF)(V),(0,a.bF)(p,{dense:"",class:"q-mx-xs",size:"md",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>w())}),(0,a.bF)(V),(0,a.bF)(F,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)((()=>[(0,a.bF)(q,{name:"search"})])),_:1},8,["modelValue"]),(0,a.bF)(V),(0,a.bF)(p,{color:"negative",label:"Refresh Events",onClick:t[2]||(t[2]=e=>(0,o.R1)(l).methods.refresh_bus_events()),"no-caps":""}),(0,a.bF)(V),(0,a.bF)(p,{color:"negative",label:"Clear Events",onClick:t[3]||(t[3]=e=>(0,o.R1)(l).methods.clear_bus_events()),"no-caps":""})])),body:(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(R,{key:"eventName",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"group",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"type",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(E,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("ON")])),_:1})):((0,a.uX)(),(0,a.Wv)(E,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("OFF")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(R,{key:"count",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>N(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>I(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>A(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>C(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),f.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",cs,[ms,(0,a.Lk)("div",bs,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.busEvents),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(T,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{flat:"",label:"Toggle bus events json",onClick:t[5]||(t[5]=e=>Q())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ol),{modelValue:r.value,"onUpdate:modelValue":t[7]||(t[7]=e=>r.value=e),eventIdentifier:b.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(wl),{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=e=>c.value=e),eventIdentifier:b.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:u.value,"onUpdate:modelValue":t[9]||(t[9]=e=>u.value=e),sendingNodeNumber:v.value,eventNumber:g.value,eventIdentifier:b.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(ds),{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=e=>m.value=e)},null,8,["modelValue"])],64)}}};m()(vs,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:ql.A,QSpace:zl.A,QInput:T.A,QIcon:Ml.A,QTr:Fl.A,QTd:xl.A,QChip:Pn.A,QCardActions:Xe.A}),m()(vs,"directives",{ClosePopup:Pe.A});const gs={class:"q-pa-md q-gutter-sm"},fs=(0,a.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1),ks="BusTrafficDialog",ys={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=((0,o.KR)(!1),e),i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,(()=>{console.log(ks+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(e,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-item-label"),c=(0,a.g2)("q-item"),m=(0,a.g2)("q-list"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup"),g=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)("div",gs,[(0,a.bF)(p,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),position:e.left},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{width:"300px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[fs])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{bordered:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodeTraffic,(e=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:e,clickable:"",dense:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.direction+"   "+e.json.mnemonic),1)])),_:2},1024)])),_:2},1024)),[[g]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","position"])])}}};var hs=l(3999),_s=l(124),Vs=l(3796),qs=l(9626);const Fs=ys,xs=Fs;m()(ys,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QList:hs.A,QItem:_s.A,QItemLabel:Vs.A}),m()(ys,"directives",{ClosePopup:Pe.A,Ripple:qs.A});const Ns=(0,a.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1),ws=(0,a.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1),Cs="CbusErrorsDialog",As={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(Cs+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{l.methods.clear_cbus_errors()};return(e,t)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-space"),p=(0,a.g2)("q-icon"),v=(0,a.g2)("q-input"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-tr"),k=(0,a.g2)("q-table"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[Ns])),_:1})])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{title:"Nodes",rows:Object.values((0,o.R1)(l).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{top:(0,a.k6)((()=>[ws,(0,a.bF)(b),(0,a.bF)(v,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)((()=>[(0,a.bF)(p,{name:"search"})])),_:1},8,["modelValue"]),(0,a.bF)(b),(0,a.bF)(d,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})])),body:(0,a.k6)((e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(g,{key:"id",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.id),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"type",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Error",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Error),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Message",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Message),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"node",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.node),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"count",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Is=As,Qs=Is;m()(As,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:ql.A,QSpace:zl.A,QInput:T.A,QIcon:Ml.A,QTr:Fl.A,QTd:xl.A}),m()(As,"directives",{ClosePopup:Pe.A});const Rs=(0,a.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1),Es=(0,a.Lk)("div",{class:"text-h6"},"Events",-1),Ls=(0,a.Lk)("div",{class:"text-h6"},"Cbus Errors",-1),Ws=(0,a.Lk)("div",{class:"text-h6"},"Layout",-1),Ss=(0,a.Lk)("div",{class:"text-h6"},"Layouts",-1),Ts=(0,a.Lk)("div",{class:"text-h6"},"Descriptor List",-1),Bs=(0,a.Lk)("div",{class:"text-h6"},"Node Descriptors",-1),Ds=(0,a.Lk)("div",{class:"text-h6"},"Nodes",-1),Ks=(0,a.Lk)("div",{class:"text-h6"},"Server Status",-1),Us=(0,a.Lk)("div",{class:"text-h6"},"Node Traffic",-1),Xs="JsonDialog",Os={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)("nodes"),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,a.wB)(r,(()=>{console.log(Xs+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab"),m=(0,a.g2)("q-tabs"),b=(0,a.g2)("q-tab-panel"),p=(0,a.g2)("q-tab-panels"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[Rs])),_:1})])),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,a.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.bF)(c,{name:"layout",label:"Layout"}),(0,a.bF)(c,{name:"layouts",label:"Layouts"}),(0,a.bF)(c,{name:"nodes",label:"Nodes"}),(0,a.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.bF)(c,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,a.bF)(c,{name:"serverStatus",label:"server Status"}),(0,a.bF)(c,{name:"traffic",label:"Traffic"})])),_:1},8,["modelValue"]),(0,a.bF)(p,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),animated:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{name:"busEvents"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Es,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.busEvents)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"cbusErrors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ls,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.cbus_errors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layout"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ws,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.layout)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layouts"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ss,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.layouts_list)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptorList"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ts,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodeDescriptorList)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Bs,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodeDescriptors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodes"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ds,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodes)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"serverStatus"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Ks,(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.serverStatus)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"traffic"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[Us,(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.nodeTraffic)+"\n              ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ps=Os,zs=Ps;m()(Os,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A}),m()(Os,"directives",{ClosePopup:Pe.A});const Ms=(0,a.Lk)("div",{class:"text-h6"}," Manage Layout ",-1),js={class:"q-pa-md q-mr-sm rounded-borders"},Hs={class:"text-h5 text-black"},$s={class:"text-h6 text-black"},Gs={class:"q-pa-md row"},Js=(0,a.Lk)("div",{class:"text-h6"},"Change layout",-1),Ys=(0,a.Lk)("p",null,"Click on the list of layouts to select an existing layout, or enter a name for a new layout, then click change",-1),Zs=(0,a.Lk)("div",{class:"text-h6"},"List of Layouts",-1),ei=(0,a.Lk)("div",{class:"text-h6 text-black"},"Edit layout details",-1),ti="LayoutDialog",li={__name:"LayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)([]),d=[{name:"layout",field:"layout",required:!0,label:"Layout",align:"left",sortable:!0}],r=e,u=t,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,(()=>{b()}));const m=(0,a.EW)((()=>Object.values(l.state.layouts_list)));(0,a.wB)(m,(()=>{b()}));const b=()=>{i.value=[],m.value.forEach((e=>{i.value.push({layout:e})}))},p=()=>{console.log(ti+": Change layout"),l.methods.change_layout(s.value),l.methods.request_layout_list(),s.value=""},v=e=>{console.log(ti+": clickLayouts on ",e),s.value=e};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const r=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),m=(0,a.g2)("q-input"),b=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-td"),k=(0,a.g2)("q-table"),y=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(y,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"900px"}},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])])),default:(0,a.k6)((()=>[Ms])),_:1}),(0,a.Lk)("div",js,[(0,a.Lk)("div",Hs,(0,n.v_)((0,o.R1)(l).state.layout.layoutDetails.title),1),(0,a.Lk)("div",$s,(0,n.v_)((0,o.R1)(l).state.layout.layoutDetails.subTitle),1)]),(0,a.Lk)("div",Gs,[(0,a.bF)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Js,(0,a.bF)(m,{class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),Ys,(0,a.bF)(r,{color:"negative",label:"change",onClick:t[1]||(t[1]=e=>p()),"no-caps":""})])),_:1})])),_:1}),(0,a.bF)(g,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Zs,(0,a.bF)(k,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",color:"primary",label:e.value,onClick:t=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)(g,{inline:"",class:"q-pa-md",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[ei,(0,a.bF)(m,{label:"Sub Title",outlined:"",modelValue:(0,o.R1)(l).state.layout.layoutDetails.subTitle,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.R1)(l).state.layout.layoutDetails.subTitle=e),onChange:t[3]||(t[3]=e=>(0,o.R1)(l).methods.update_layout())},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},ai=li,oi=ai;m()(li,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QTable:ql.A,QTd:xl.A}),m()(li,"directives",{ClosePopup:Pe.A});const ni=(0,a.Lk)("div",{class:"text-h6"}," Bus message ",-1),si={class:"text-h6"},ii={class:"text-h6"},di={class:"text-h6"},ri="ModifiedGridConnectDialog",ui={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,s=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.wB)(s,(()=>{console.log(ri+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,l)=>{const o=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])])),default:(0,a.k6)((()=>[ni])),_:1}),(0,a.bF)(d,{class:"fit"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",si,"direction: "+(0,n.v_)(e.busMessage.direction),1),(0,a.Lk)("div",ii," message: "+(0,n.v_)(e.busMessage.json.text),1),(0,a.Lk)("div",di," encoded: "+(0,n.v_)(e.busMessage.json.encoded),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ci=ui,mi=ci;m()(ui,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A}),m()(ui,"directives",{ClosePopup:Pe.A});const bi=(0,a.Lk)("div",{class:"text-h6"}," New node detected ",-1),pi=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Accept the first free node number below "),(0,a.Lk)("br"),(0,a.eW)(" or enter a new one ")],-1),vi={class:"text-h6"},gi=(0,a.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1),fi="NewNodeDialog",ki={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(0),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(fi+": WATCH model"),console.log(fi+": WATCH model: previousNodeNumber "+d.previousNodeNumber),i.value=c()}));const c=()=>{var e=0,t=256;l.state.layout.layoutDetails.baseNodeNumber&&(t=l.state.layout.layoutDetails.baseNodeNumber);for(var a=Object.keys(l.state.nodes),o=t;o<65535;o++)if(!a.includes(o.toString())){console.log(fi+" first free node number: "+o),e=o;break}return e};(0,a.$u)((()=>{}));const m=()=>{console.log(fi+" new node number: "+i.value),console.log(fi+" new node name: "+s.value),l.methods.set_node_number(i.value),l.setters.node_name(i.value,s.value)};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),r=(0,a.g2)("q-input"),c=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[bi])),_:1}),(0,a.bF)(c,{class:"q-pa-md",color:"orange-1"},{default:(0,a.k6)((()=>[pi,(0,a.bF)(r,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),autofocus:""},null,8,["modelValue"]),(0,a.Lk)("div",vi," This node was previously "+(0,n.v_)(d.previousNodeNumber),1)])),_:1}),(0,a.bF)(c,{class:"q-pa-md"},{default:(0,a.k6)((()=>[gi,(0,a.bF)(r,{"input-style":{fontSize:"25px"},dense:"",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>m())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},yi=ki,hi=yi;m()(ki,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(ki,"directives",{ClosePopup:Pe.A});const _i=(0,a.Lk)("div",{class:"text-h6"}," Add Layout ",-1),Vi={class:"q-pa-md row"},qi=(0,a.Lk)("div",{class:"text-h6"},"Add new layout",-1),Fi=(0,a.Lk)("p",null,"enter a name for a new layout",-1),xi="AddLayoutDialog",Ni={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=(0,o.KR)(""),s=((0,o.KR)([]),e),i=t,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(xi+": WATCH model")}));const u=(0,a.EW)((()=>Object.values(l.state.layouts_list)));(0,a.wB)(u,(()=>{})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=async()=>{console.log(xi+": Change layout"),l.methods.change_layout(n.value),l.methods.request_layout_list(),n.value="",await d(50),r.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[_i])),_:1}),(0,a.Lk)("div",Vi,[(0,a.bF)(d,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[qi,(0,a.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),Fi,(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},wi=Ni,Ci=wi;m()(Ni,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A}),m()(Ni,"directives",{ClosePopup:Pe.A});const Ai=(0,a.Lk)("div",{class:"text-h6"}," Edit connection details ",-1),Ii={class:"q-pa-xs row"},Qi=(0,a.Lk)("br",null,null,-1),Ri=(0,a.Lk)("br",null,null,-1),Ei=(0,a.Lk)("br",null,null,-1),Li={class:"q-pa-xs row"},Wi=(0,a.Lk)("br",null,null,-1),Si=(0,a.Lk)("br",null,null,-1),Ti=(0,a.Lk)("br",null,null,-1),Bi=(0,a.Lk)("br",null,null,-1),Di={class:"q-pa-xs row"},Ki=(0,a.Lk)("br",null,null,-1),Ui={class:"q-pa-xs row"},Xi=(0,a.Lk)("br",null,null,-1),Oi="EditConnectionDetailsDialog",Pi={__name:"EditConnectionDetailsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=(0,o.KR)(""),s=(0,o.KR)(""),i=(0,o.KR)(""),r=(0,o.KR)(""),u=(0,o.KR)(["Auto","SerialPort","Network"]),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(Oi+": WATCH model"),n.value=l.state.layout.connectionDetails.mode,s.value=l.state.layout.connectionDetails.serialPort,i.value=l.state.layout.connectionDetails.host,r.value=l.state.layout.connectionDetails.hostPort})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=async()=>{console.log(Oi+": clickSave"),l.state.layout.connectionDetails.mode=n.value,"SerialPort"==n.value?l.state.layout.connectionDetails.serialPort=s.value:l.state.layout.connectionDetails.serialPort="","Network"==n.value?(l.state.layout.connectionDetails.host=i.value,l.state.layout.connectionDetails.hostPort=r.value):(l.state.layout.connectionDetails.host="",l.state.layout.connectionDetails.hostPort=""),l.methods.update_layout(),await d(50),b.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),d=(0,a.g2)("q-select"),c=(0,a.g2)("q-card"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{style:{"min-width":"650px",height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[Ai])),_:1}),(0,a.Lk)("div",Ii,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{autofocus:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),options:u.value,label:"Mode"},null,8,["modelValue","options"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Auto will connect to the first CANUSB or CANUSB4 it finds "),Qi,(0,a.eW)(" SerialPort will connect to the serial port entered below"),Ri,(0,a.eW)(" Network will use the address & port entered below "),Ei])),_:1})]),(0,a.Lk)("div",Li,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),label:"serialPort",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Forces MMC to use this specific serial port"),Wi,(0,a.eW)(" Windows example: COM3"),Si,(0,a.eW)(" Linux example: ttyUSB2"),Ti,(0,a.eW)(" Leave blank if 'SerialPort' not selected"),Bi])),_:1})]),(0,a.Lk)("div",Di,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),label:"Host",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Name or IP address of machine to use for CAN connection"),Ki,(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1})]),(0,a.Lk)("div",Ui,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),label:"Host Port",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Port number of machine for CAN connection"),Xi,(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1})]),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{color:"primary",label:"save",onClick:t[4]||(t[4]=e=>p()),"no-caps":""})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},zi=Pi,Mi=zi;m()(Pi,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QSelect:M.A,QInput:T.A,QCardActions:Xe.A}),m()(Pi,"directives",{ClosePopup:Pe.A});const ji=(0,a.Lk)("div",{class:"text-h6"}," Information about the Startup Dialog ",-1),Hi=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Startup dialog is intended to allow selection of layout and connection method ",-1),$i=(0,a.Lk)("div",{class:"text_body1"}," To allow operation with more than one model railway layout, data is stored against a named layout ",-1),Gi=(0,a.Lk)("div",{class:"text_body1"}," Layouts can be selected, added or deleted at this point, and each layout also retains it's own connection method ",-1),Ji=(0,a.Lk)("div",{class:"text_body1"}," A 'default' layout is created automatically, but it's recommended to add a named layout ",-1),Yi=(0,a.Lk)("div",{class:"text_body1"}," The default method of connecting is 'Auto', which will cause MMC to open a connection using the first CANUSB or CANUSB4 it finds, and no further configuration is needed if this is the required connection ",-1),Zi=(0,a.Lk)("div",{class:"text_body1"}," The 'SerialPort' option will force the connection onto a specific serial port, which may be required if there is more than one CANUSB, or another device than accepts a serial connection ",-1),ed=(0,a.Lk)("div",{class:"text_body1"}," The Network option allows a TCP/IP connection to another service, like cbusServer or CANether ",-1),td=(0,a.Lk)("div",{class:"text_body1"}," The 'Host' parameter allows connection to either a remoted connection, or the same machine the MMC is running on - Computer names or IP addresses can be entered for the Host setting ",-1),ld=(0,a.Lk)("div",{class:"text_body1"},[(0,a.eW)(" There is a useful Technical Bulletin on the CANether that explains network connections in more detail "),(0,a.Lk)("a",{href:"https://www.merg.org.uk/merg_wiki/lib/exe/fetch.php?media=cbus:cbus:cbusmodules:canether:canether_connection_and_configuration_technical_bulletin_draft_1.pdf"},"link")],-1),ad=(0,a.Lk)("div",{class:"text_body1"}," The connection method can be configured using the EDIT button for the selected layout, and each layout will retain it's own connection details ",-1),od=(0,a.Lk)("div",{class:"text_body1"}," The selected layout is saved automatically when changes are made ",-1),nd=(0,a.Lk)("div",{class:"text_body1"}," When 'Auto' or 'SerialPort' modes are selected, an 'embedded' cbusServer is automatically started on port 5550, which can be used by other applications at the same time, such as FCU ",-1),sd=(0,a.Lk)("div",{class:"text_body1"}," With all connection options, 'modified Grid Connect' is the data format used to transfer messages to and from the modules ",-1),id=(0,a.Lk)("div",{class:"text_body1"}," Grid Connect is an established byte orientated data format used to encode the bit orientated CAN bus data format, such that it can be transmitted over stream connections, like serial or TCP/IP ",-1),dd=(0,a.Lk)("div",{class:"text_body1"}," 'modified Grid Connect' is a variant of the Grid Connect format that has small modifications for use with CBUS devices ",-1),rd={__name:"StartupInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[ji])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Hi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[$i,Gi,Ji])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Yi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Zi])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ed,td,ld])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[ad,od])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[nd])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[sd,id,dd])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ud=rd,cd=ud;m()(rd,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A}),m()(rd,"directives",{ClosePopup:Pe.A});const md=(0,a.Lk)("div",{class:"text-h6"}," Startup ",-1),bd={class:"q-pa-md row"},pd=(0,a.Lk)("div",{class:"text-h6"},"Select Layout",-1),vd={class:"text-h6"},gd=(0,a.Lk)("div",{class:"text-h6"}," Selected layout ",-1),fd={class:"bg-light-blue-1 text-h6"},kd=(0,a.Lk)("div",{class:"text-h6"}," Connection details ",-1),yd=(0,a.Lk)("div",{class:"text-body"},[(0,a.eW)(" The default 'Auto' setting will connect to the first CANUSB or CANUSB4 it finds"),(0,a.Lk)("br"),(0,a.eW)(" Please click INFO for details on the other options"),(0,a.Lk)("br")],-1),hd=(0,a.Lk)("br",null,null,-1),_d={class:"text-h6"},Vd="StartupDialog",qd={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)("<not selected>"),u=(0,o.KR)([]),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)([]),f=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],k=e,y=t,h=(0,a.EW)({get(){return k.modelValue},set(e){y("update:modelValue",e)}});(0,a.wB)(h,(()=>{F()}));const _=(0,a.EW)((()=>Object.values(i.state.layout)));(0,a.wB)(_,(()=>{q()}));const V=(0,a.EW)((()=>Object.values(i.state.layouts_list)));(0,a.wB)(V,(()=>{F()}));const q=()=>{try{void 0==i.state.layout.connectionDetails&&(i.state.layout.connectionDetails={},i.state.layout.connectionDetails["mode"]="Auto",i.state.layout.connectionDetails["serialPort"]="",i.state.layout.connectionDetails["host"]="",i.state.layout.connectionDetails["hostPort"]="",i.methods.update_layout())}catch(e){}g.value=[],g.value.push("Mode: "+i.state.layout.connectionDetails.mode),"SerialPort"==i.state.layout.connectionDetails.mode&&g.value.push("serialPort: "+i.state.layout.connectionDetails.serialPort),"Network"==i.state.layout.connectionDetails.mode&&(g.value.push("Host: "+i.state.layout.connectionDetails.host),g.value.push("Host Port: "+i.state.layout.connectionDetails.hostPort)),v.value=!0},F=()=>{u.value=[],V.value.forEach((e=>{u.value.push({layout:e})}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const x=async()=>{console.log(Vd+": clickAddNewLayout"),c.value=!0},N=async e=>{console.log(Vd+": clickDeleteLayout ",e);l.notify({message:"Are you sure you want to delete this?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_layout(e),await d(50),i.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},w=async()=>{console.log(Vd+": clickEditConnectionDetails"),m.value=!0},C=async()=>{console.log(Vd+": clickInfo"),b.value=!0},A=()=>{console.log(Vd+": clickExit");l.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.STOP_SERVER(),await d(50)}},{label:"NO",color:"white",handler:()=>{}}]})},I=async()=>{console.log(Vd+": clickProceed"),i.state.layout!={}&&(i.methods.start_connection(i.state.layout.connectionDetails),await d(500),i.state.inStartup=!1,h.value=!1)},Q=async e=>{console.log(Vd+": clickLayouts on ",e),r.value=e,i.methods.change_layout(r.value),p.value=(0,o.KR)(!0)};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-space"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-td"),v=(0,a.g2)("q-table"),k=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card"),_=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(V,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>C())}),(0,a.bF)(s),(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Exit",onClick:t[1]||(t[1]=e=>A()),"no-caps":""})])),default:(0,a.k6)((()=>[md])),_:1}),(0,a.Lk)("div",bd,[(0,a.bF)(y,{inline:"",class:"q-pa-xs",flat:"",style:{width:"380px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)((()=>[pd,(0,a.bF)(v,{flat:"",bordered:"",dense:"",rows:u.value,columns:f,"row-key":"name","hide-header":"",pagination:{rowsPerPage:8}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(d,{key:"layout",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(l,{flat:"",color:"primary",label:e.value,onClick:t=>Q(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"]),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:t=>N(e.value),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:1},8,["rows"])])),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",vd,[(0,a.eW)(" click to add a new layout   "),(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[2]||(t[2]=e=>x())})])])),_:1})])),_:1}),(0,a.bF)(y,{flat:"",inline:"",class:"q-pa-xs",style:{width:"380px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[gd,(0,a.Lk)("div",fd,(0,n.v_)(r.value),1)])),_:1}),(0,a.bF)(k,{style:{width:"350px",height:"300px"}},{default:(0,a.k6)((()=>[kd,(0,a.bF)(y,{flat:"",style:{height:"100px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},(0,n.v_)(g.value[t]),1)))),128))])),_:1}),yd,hd,(0,a.Lk)("div",_d,[(0,a.bF)(l,{color:"positive",label:"Edit",onClick:t[3]||(t[3]=e=>w())}),(0,a.eW)("   Edit connection details ")])])),_:1})])),_:1}),(0,a.bF)(k,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{align:"center"},{default:(0,a.k6)((()=>[p.value?((0,a.uX)(),(0,a.Wv)(l,{key:0,color:"primary",label:"Proceed",onClick:t[4]||(t[4]=e=>I())})):(0,a.Q3)("",!0),p.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:1,disabled:"",color:"primary",label:"Proceed",onClick:t[5]||(t[5]=e=>I())}))])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ci),{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Mi),{modelValue:m.value,"onUpdate:modelValue":t[8]||(t[8]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(cd),{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Fd=qd,xd=Fd;m()(qd,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QSpace:zl.A,QCardSection:y.A,QTable:ql.A,QTd:xl.A,QCardActions:Xe.A});var Nd=l(9104);const wd=JSON.parse('{"name":"MMC-CLIENT","version":"0.7.0","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"No test specified\\" && exit 0"},"dependencies":{"@quasar/extras":"^1.0.0","core-js":"^3.6.5","quasar":"^2.0.0","sass":"^1.69.5","socket.io-client":"^4.4.1","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}'),Cd={class:"text-h6"},Ad=(0,a.Lk)("div",{class:"text-h6"},"List of Backups",-1),Id="BackupDialog",Qd={__name:"BackupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)([]),d=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],r=e,u=t,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,(()=>{console.log(Id+": WATCH model"),l.methods.request_backups_list(l.state.layout.layoutDetails.title)}));const m=(0,a.EW)((()=>l.state.backups_list));(0,a.wB)(m,(()=>{console.log(Id+": WATCH backupList"),b()}));const b=()=>{i.value=[],m.value.forEach((e=>{console.log(Id+": update "+e),i.value.push({backup:e})}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{s.value="";var e=new Date,t=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()+"_"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds(),a="backup_"+t;console.log(Id+": clickBackup "+a);var o={fileName:a,layout:l.state.layout};l.methods.save_backup(o),s.value="Backup saved to "+a,l.methods.request_backups_list(l.state.layout.layoutDetails.title)},v=e=>{console.log(Id+": clickBackupList on ",e)};return(e,t)=>{const r=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-table"),k=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(k,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Cd," System backups for layout: "+(0,n.v_)((0,o.R1)(l).state.layout.layoutDetails.title),1)])),_:1})])),_:1}),(0,o.R1)(l).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{color:"positive",label:"Backup",onClick:t[0]||(t[0]=e=>p()),"no-caps":""}),(0,a.eW)("   backup system to user storage ")])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(l).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:1,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(s.value),1)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(b,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[Ad,(0,a.bF)(f,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",color:"primary",label:e.value,onClick:t=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Rd=Qd,Ed=Rd;m()(Qd,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:ql.A,QTd:xl.A}),m()(Qd,"directives",{ClosePopup:Pe.A});var Ld=l(8652);const Wd=(0,a.Lk)("div",{class:"text-h6"}," System ",-1),Sd=(0,a.Lk)("div",{class:"text-h6"},"Backend",-1),Td=(0,a.Lk)("div",{class:"text-h6"},"Frontend",-1),Bd=(0,a.Lk)("span",{class:"text-h6"},"user directory  ",-1),Dd=(0,a.Lk)("span",{class:"text-h6"},"system directory  ",-1),Kd="SystemDialog",Ud={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Kd+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{console.log(Kd+": clickBackup"),s.value=!0},c=()=>{(0,Ld.A)(l.state.serverStatus.systemDirectory).then((()=>{})).catch((()=>{}))},m=()=>{(0,Ld.A)(l.state.serverStatus.userDirectory).then((()=>{})).catch((()=>{}))};return(e,t)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-input"),v=(0,a.g2)("q-checkbox"),g=(0,a.g2)("q-card-actions"),f=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"min-width":"900px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])])),default:(0,a.k6)((()=>[Wd])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[Sd,(0,a.Lk)("div",null,"Backend App version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.App)),1),(0,a.Lk)("div",null,"API version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.API)),1),(0,a.Lk)("div",null,"node version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.node)),1)])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[Td,(0,a.Lk)("div",null,"Frontend App version "+(0,n.v_)((0,o.R1)(wd).version),1),(0,a.Lk)("div",null,"Quasar framework "+(0,n.v_)(e.$q.version),1),(0,a.Lk)("div",null,"Vue version "+(0,n.v_)(a.rE))])),_:1}),(0,a.bF)(b,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[Bd,(0,a.eW)(" "+(0,n.v_)((0,o.R1)(l).state.serverStatus.userDirectory)+"   ",1),(0,a.bF)(i,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[0]||(t[0]=e=>m()),"no-caps":""})]),(0,a.Lk)("div",null,[Dd,(0,a.eW)(" "+(0,n.v_)((0,o.R1)(l).state.serverStatus.systemDirectory)+"   ",1),(0,a.bF)(i,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})])])),_:1}),(0,o.R1)(l).state.develop?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{color:"positive",label:"Backup",onClick:t[2]||(t[2]=e=>u()),"no-caps":""}),(0,a.eW)("   Open the dialog to manage backups ")])),_:1})):(0,a.Q3)("",!0),(0,a.bo)((0,a.bF)(b,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{label:"Base Node Number",outlined:"",modelValue:(0,o.R1)(l).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.R1)(l).state.layout.layoutDetails.baseNodeNumber=e),onChange:t[4]||(t[4]=e=>(0,o.R1)(l).methods.update_layout())},null,8,["modelValue"])])),_:1},512),[[Nd.aG,(0,o.R1)(l).state.advanced]]),(0,a.bF)(b,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:(0,o.R1)(l).state.develop,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,o.R1)(l).state.develop=e),label:"Develop"},null,8,["modelValue"]),(0,a.eW)("    Enables development features ")])),_:1}),(0,a.bF)(g,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ed),{modelValue:s.value,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value=e)},null,8,["modelValue"])],64)}}},Xd=Ud,Od=Xd;m()(Ud,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QInput:T.A,QCheckbox:u.A,QCardActions:Xe.A}),m()(Ud,"directives",{ClosePopup:Pe.A});const Pd=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1),zd={key:0,class:"text-red"},Md=(0,a.Lk)("div",{class:"text-h6"}," Example q-card ",-1),jd="DialogExampleCompositionAPI",Hd={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=(0,o.KR)(!1),n=e,s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(()=>{console.log(jd+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const d=()=>{l.value=!l.value};return(e,t)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-card-actions"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[Pd])),_:1})])),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",color:"positive",label:"example button"}),(0,a.bF)(o,{flat:"",color:"negative",label:"example button"})])),_:1}),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64)),l.value?((0,a.uX)(),(0,a.CE)("div",zd,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64))])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin"},{default:(0,a.k6)((()=>[Md])),_:1})])),_:1}),(0,a.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",label:"toggle show more",onClick:t[0]||(t[0]=e=>d())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},$d=Hd,Gd=$d;m()(Hd,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(Hd,"directives",{ClosePopup:Pe.A});const Jd=(0,a.Lk)("div",{class:"text-h6"}," Add event ",-1),Yd={class:"q-gutter-sm"},Zd={key:0},er=(0,a.Lk)("div",{class:"text-h4"},"Node Number",-1),tr=(0,a.Lk)("div",{class:"text-h6"},"Consumed events will need the number of the node that produces the event",-1),lr=(0,a.Lk)("div",{class:"text-h6"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),ar=(0,a.Lk)("div",{class:"text-h4"},"Event Number",-1),or={key:1},nr=(0,a.Lk)("div",{class:"text-h4"},"Device Number",-1),sr={key:2},ir=(0,a.Lk)("div",{class:"text-h6"},"Once event is added, select edit for the event from the event list to modify event variables",-1),dr="AddEventToLayoutDialog",rr={__name:"AddEventToLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=(0,o.KR)(),s=(0,o.KR)(),i=(0,o.KR)(!0),d=(0,o.KR)(),r=(0,o.KR)(""),u=e,c=t,m=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{n.value=null,s.value=null,d.value=null}));const b=()=>{console.log(dr+": clickAddEvent "+n.value+" "+s.value),"short"==d.value&&(n.value=0),r.value=parseInt(n.value).toString(16).toUpperCase().padStart(4,0)+parseInt(s.value).toString(16).toUpperCase().padStart(4,0),l.setters.event_name(r.value,r.value)};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),r=(0,a.g2)("q-radio"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[Jd])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",Yd,[(0,a.bF)(r,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(r,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),val:"short",label:"Short event"},null,8,["modelValue"])])])),_:1}),"long"==d.value?((0,a.uX)(),(0,a.CE)("div",Zd,[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[er])),_:1}),(0,a.bF)(u,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[tr,lr])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>[ar])),_:1}),(0,a.bF)(u,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.Q3)("",!0),"short"==d.value?((0,a.uX)(),(0,a.CE)("div",or,[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[nr])),_:1}),(0,a.bF)(u,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,a.Q3)("",!0),null!=d.value?((0,a.uX)(),(0,a.CE)("div",sr,[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[ir])),_:1}),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[i.value?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(l,{key:0,label:"Add Event",onClick:t[5]||(t[5]=e=>b())},null,512)),[[f]]):(0,a.Q3)("",!0)])),_:1})])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"])}}},ur=rr,cr=ur;m()(rr,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QRadio:qt.A,QInput:T.A,QCardActions:Xe.A}),m()(rr,"directives",{ClosePopup:Pe.A});const mr=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events View ",-1),br=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Events view is intended to allow management of all the events on the layout ",-1),pr=(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Bus Events View' ",-1),vr=(0,a.Lk)("div",{class:"text_body1"}," The Events view shows events that have been read from nodes, captured from the CAN Bus, or entered manually ",-1),gr=(0,a.Lk)("div",{class:"text_body1"}," This list of events is retained for the layout selected, so the known events for a particular layout will be restored at startup ",-1),fr=(0,a.Lk)("div",{class:"text_body1"}," For a new layout, use SCAN NODES to read the stored events from all the nodes to fill the list, and anytime a new node is added ",-1),kr=(0,a.Lk)("div",{class:"text_body1"}," There is only one entry for each event, irrespective of how many nodes produce that event ",-1),yr=(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, irrespective of which node sent it ",-1),hr=(0,a.Lk)("div",{class:"text_body1"},[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status is dependant on the event actually being captured from the bus, and if that event has not been sent, or the application has been restarted, the status will be 'unknown' ")],-1),_r=(0,a.Lk)("div",{class:"text_body1"}," In this view, for short events, the 'send ON/OFF' feature will use '0' as the Sending Node Number, so not linked to any particular node ",-1),Vr=(0,a.Lk)("div",{class:"text_body1"}," An event can be created manually (add event) and will not be associated with any particular node until the 'teach' option is used ",-1),qr=(0,a.Lk)("div",{class:"text_body1"}," The toggle option allows viewing of just short events, or all events ",-1),Fr=(0,a.Lk)("div",{class:"text_body1"}," The list is likely to be very large, as some nodes have large numbers of default events ",-1),xr=(0,a.Lk)("div",{class:"text_body1"}," So it's recommended to use the search option to filter the list, and using group names for events ",-1),Nr=(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),wr=(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1),Cr={__name:"EventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[mr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[br,pr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[vr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[gr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[fr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[kr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[yr,hr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[_r])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Vr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[qr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Fr,xr])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[Nr,wr])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ar=Cr,Ir=Ar;m()(Cr,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A}),m()(Cr,"directives",{ClosePopup:Pe.A});const Qr={class:"text-h6"},Rr={__name:"GenericNodeList",props:{nodeNumberList:{type:Object,required:!0},displayTitle:{type:String,required:!1}},setup(e){const t=(0,a.WQ)("store"),l=e,s=(0,o.KR)([]),i=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0}],d=async()=>{s.value=[],l.nodeNumberList.forEach((e=>{var l=t.getters.node_name(e);s.value.push({number:e,name:l})}))};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{d()})),(t,l)=>{const o=(0,a.g2)("q-td"),d=(0,a.g2)("q-tr"),r=(0,a.g2)("q-table"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Qr,(0,n.v_)(e.displayTitle),1),(0,a.bF)(r,{flat:"",bordered:"",dense:"",rows:s.value,columns:i,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{body:(0,a.k6)((e=>[(0,a.bF)(d,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{key:"number",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.number),1)])),_:2},1032,["props"]),(0,a.bF)(o,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})}}},Er=Rr,Lr=Er;m()(Rr,"components",{QCard:k.A,QCardSection:y.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A});const Wr={class:"text-h6"},Sr={__name:"LinkedNodesDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,(()=>{}));const r=(0,o.KR)([]),u=(0,a.EW)((()=>Object.values(l.state.nodes)));(0,a.wB)(u,(()=>{c()}));const c=async()=>{r.value=[],u.value.forEach((e=>{if(Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach((async t=>{t.eventIdentifier==s.eventIdentifier&&r.value.push(e.nodeNumber)}))}}))};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{s.eventIdentifier&&c()})),(e,t)=>{const i=(0,a.g2)("q-btn"),u=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Wr," Nodes linked to event: "+(0,n.v_)((0,o.R1)(l).getters.event_name(s.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Lr),{nodeNumberList:r.value,displayTitle:"Linked Nodes"},null,8,["nodeNumberList"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Tr=Sr,Br=Tr;m()(Sr,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A}),m()(Sr,"directives",{ClosePopup:Pe.A});const Dr=e=>((0,a.Qi)("data-v-0be39fea"),e=e(),(0,a.jt)(),e),Kr={style:{height:"45vh"}},Ur=Dr((()=>(0,a.Lk)("div",{class:"text-h6"},"Events View",-1))),Xr={class:"text-h6",style:{"min-width":"250px"}},Or={class:"q-pa-xs row"},Pr=Dr((()=>(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Events"),(0,a.Lk)("br")],-1))),zr={class:"text-body2"},Mr="EventsView",jr={__name:"EventsView",setup(e){const t=(0,a.WQ)("store"),l=((0,o.KR)("nodes"),(0,o.KR)("")),s={rowsPerPage:0};let i=(0,o.KR)([]);const d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(""),v=(0,o.KR)(),g=(0,o.KR)(0),f=(0,o.KR)(0),k=(0,o.KR)(!1),y=(0,o.KR)(0),h=(0,o.KR)({0:"view all events",1:"view short events only"}),_=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=(0,a.EW)((()=>Object.values(t.state.layout.eventDetails)));(0,a.wB)(V,(()=>{x()}));const q=(0,a.EW)((()=>t.state.layout.eventDetails));(0,a.wB)(q,(()=>{x()}));const F=(0,a.EW)((()=>Object.values(t.state.busEvents)));(0,a.wB)(F,(()=>{console.log(Mr+": WATCH busEvents"),x()}));const x=()=>{console.log(Mr+":Update Events");let e=[],l=t.state.layout.eventDetails;for(let o of Object.keys(l).sort()){var a=parseInt(o.substring(0,4),16);if(void 0==t.state.event_view_status[o]&&(t.state.event_view_status[o]="unknown"),1==y.value&&a>0);else{let n={};n["eventIdentifier"]=o,n["nodeNumber"]=a,n["eventNumber"]=parseInt(o.slice(4,8),16),n["type"]=0==a?"short":"long",n["name"]=l[o].name,n["colour"]=l[o].colour,n["group"]=l[o].group,n["status"]=t.state.event_view_status[o],n["linkedNodeCount"]=C(o),e.push(n)}}i.value=e},N=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].colour:"blue",w=(0,a.EW)((()=>Object.keys(t.state.nodes)));(0,a.wB)(w,(()=>{}));const C=e=>{var l=0;try{w.value.forEach((a=>{e in t.state.nodes[a].storedEventsNI&&l++}))}catch{}return l};t.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{var l=e.json.eventIdentifier,a=e.json.opCode,o="unknown";90!=a&&98!=a||(console.log(Mr+": BUS_TRAFFIC_EVENT : ON event "+l),o="on"),91!=a&&99!=a||(console.log(Mr+": BUS_TRAFFIC_EVENT : OFF event "+l),o="off"),"unknown"!=o&&(void 0!=t.state.event_view_status[l]&&(t.state.event_view_status[l]=o),x())})),(0,a.KC)((()=>{x()})),(0,a.sV)((()=>{x()}));const A=()=>{console.log(Mr+": clickAddEvent"),d.value=!0},I=e=>{console.log(Mr+": clickEventName "+e),p.value=e,v.value=t.getters.event_name(e),r.value=!0},Q=()=>{console.log(Mr+": clickInfo"),m.value=!0},R=()=>{var e=Object.values(t.state.nodes);try{e.forEach((e=>{t.methods.request_all_node_events(e.nodeNumber),x()}))}catch(l){console.log(Mr+": clickScanNodes: "+l)}},E=(e,l)=>{console.log(Mr+": send OFF "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_off_event(e,o):t.methods.long_off_event(a,o)},L=(e,l)=>{console.log(Mr+": send ON "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_on_event(e,o):t.methods.long_on_event(a,o)},W=e=>{console.log(Mr+": clickTeach"),p.value=e,c.value=!0},S=()=>{console.log(Mr+": clickToggleShowEventsJSON"),k.value?k.value=!1:k.value=!0},T=()=>{console.log(Mr+": clickToggleViewMode"),y.value++,y.value>1&&(y.value=0),x()};return(e,v)=>{const V=(0,a.g2)("q-btn"),q=(0,a.g2)("q-space"),F=(0,a.g2)("q-icon"),x=(0,a.g2)("q-input"),w=(0,a.g2)("q-banner"),C=(0,a.g2)("q-td"),B=(0,a.g2)("q-chip"),D=(0,a.g2)("q-tr"),K=(0,a.g2)("q-table"),U=(0,a.g2)("q-card-actions"),X=(0,a.g2)("q-card-section"),O=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",Kr,[(0,a.bF)(w,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:v[0]||(v[0]=e=>T())}),(0,a.Lk)("div",Xr,(0,n.v_)(h.value[y.value]),1),(0,a.eW)("      "),(0,a.bF)(V,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:v[1]||(v[1]=e=>Q())}),(0,a.bF)(q),(0,a.eW)("      "),(0,a.bF)(x,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"true",size:"xs",debounce:"300",modelValue:l.value,"onUpdate:modelValue":v[2]||(v[2]=e=>l.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("      "),(0,a.bF)(q),(0,a.bF)(V,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"SCAN NODES","no-caps":"",onClick:v[3]||(v[3]=e=>R())}),(0,a.bF)(V,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:v[4]||(v[4]=e=>A())})])),default:(0,a.k6)((()=>[Ur])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(K,{class:"events-table",dense:"",rows:(0,o.R1)(i),columns:_,filter:l.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:s,"onUpdate:pagnation":v[5]||(v[5]=e=>s=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(D,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(C,{key:"eventName",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(C,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(C,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(C,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(C,{key:"type",props:e,class:(0,n.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(C,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(B,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("ON")])),_:1})):"off"==e.row.status?((0,a.uX)(),(0,a.Wv)(B,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("OFF")])),_:1})):((0,a.uX)(),(0,a.Wv)(B,{key:2,color:"white","text-color":"blue"},{default:(0,a.k6)((()=>[(0,a.eW)("unknown")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(C,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(V,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>I(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>W(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>L(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(V,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>E(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),(0,a.bF)(U,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{flat:"",label:"Toggle event details json",onClick:v[6]||(v[6]=e=>S())})])),_:1}),k.value?((0,a.uX)(),(0,a.Wv)(X,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Or,[Pr,(0,a.Lk)("div",zr,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.layout.eventDetails),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})]),(0,a.bF)((0,o.R1)(cr),{modelValue:d.value,"onUpdate:modelValue":v[7]||(v[7]=e=>d.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ol),{modelValue:r.value,"onUpdate:modelValue":v[8]||(v[8]=e=>r.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(wl),{modelValue:c.value,"onUpdate:modelValue":v[9]||(v[9]=e=>c.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Br),{modelValue:b.value,"onUpdate:modelValue":v[10]||(v[10]=e=>b.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:u.value,"onUpdate:modelValue":v[11]||(v[11]=e=>u.value=e),sendingNodeNumber:g.value,eventNumber:f.value,eventIdentifier:p.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Ir),{modelValue:m.value,"onUpdate:modelValue":v[12]||(v[12]=e=>m.value=e)},null,8,["modelValue"])],64)}}},Hr=(0,Q.A)(jr,[["__scopeId","data-v-0be39fea"]]),$r=Hr;m()(jr,"components",{QBanner:Ke.A,QBtn:Ue.A,QSpace:zl.A,QInput:T.A,QIcon:Ml.A,QCard:k.A,QCardSection:y.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QChip:Pn.A,QCardActions:Xe.A,QField:jl.A});const Gr=e=>((0,a.Qi)("data-v-b835d370"),e=e(),(0,a.jt)(),e),Jr={style:{height:"45vh"}},Yr=Gr((()=>(0,a.Lk)("div",{class:"text-h6"}," Bus Events ",-1))),Zr={class:"text-h6",style:{"min-width":"250px"}},eu={class:"q-pa-xs row"},tu=Gr((()=>(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1))),lu={class:"text-body2"},au="BusEventsView",ou={__name:"BusEventsView",setup(e){const t=(0,a.WQ)("store"),l=((0,o.KR)("nodes"),(0,o.KR)("")),s={rowsPerPage:0};let i=(0,o.KR)();const d=(0,o.KR)(!1),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(""),b=(0,o.KR)(),p=(0,o.KR)(0),v=(0,o.KR)(0),g=(0,o.KR)(!1),f=(0,o.KR)(0),k=(0,o.KR)({0:"view all bus events",1:"view short bus events only"}),y=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],h=(0,a.EW)((()=>Object.values(t.state.busEvents))),_=(0,a.EW)((()=>t.state.layout));(0,a.wB)(h,(()=>{V()})),(0,a.wB)(_,(()=>{V()}));const V=()=>{let e=[];try{let a=t.state.busEvents;if(a)for(let o of Object.keys(a).sort()){var l=parseInt(a[o].eventIdentifier.slice(0,4),16);if(1==f.value&&l>0);else{let l={};l["eventIdentifier"]=a[o].eventIdentifier,l["nodeNumber"]=a[o].nodeNumber,l["eventNumber"]=a[o].eventNumber,l["status"]=a[o].status,l["type"]=a[o].type,l["count"]=a[o].count,l["name"]=t.getters.event_name(a[o].eventIdentifier),l["colour"]=t.getters.event_colour(a[o].eventIdentifier),l["group"]=t.getters.event_group(a[o].eventIdentifier),e.push(l)}}}catch(a){console.log(au+": update_bus_events "+a)}i.value=e},q=e=>t.getters.event_colour(e);(0,a.KC)((()=>{t.methods.refresh_bus_events(),V()})),(0,a.sV)((()=>{t.methods.refresh_bus_events(),V()}));const F=e=>{console.log(au+": clickEventName "+e),m.value=e,b.value=t.getters.event_name(e),d.value=!0},x=()=>{console.log(au+": clickInfo"),c.value=!0},N=(e,l)=>{console.log(au+": send OFF "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_off_event(e,o):t.methods.long_off_event(a,o)},w=(e,l)=>{console.log(au+": send ON "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_on_event(e,o):t.methods.long_on_event(a,o)},C=e=>{console.log(au+": clickTeach"),m.value=e,u.value=!0},A=()=>{console.log(au+": clickToggleShowBusEventsJSON"),g.value?g.value=!1:g.value=!0},I=()=>{console.log(au+": clickToggleViewMode"),f.value++,f.value>1&&(f.value=0),V()};return(e,b)=>{const h=(0,a.g2)("q-btn"),_=(0,a.g2)("q-icon"),V=(0,a.g2)("q-input"),Q=(0,a.g2)("q-banner"),R=(0,a.g2)("q-td"),E=(0,a.g2)("q-chip"),L=(0,a.g2)("q-tr"),W=(0,a.g2)("q-table"),S=(0,a.g2)("q-card-section"),T=(0,a.g2)("q-card"),B=(0,a.g2)("q-card-actions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",Jr,[(0,a.bF)(Q,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:b[0]||(b[0]=e=>I())}),(0,a.Lk)("div",Zr,(0,n.v_)(k.value[f.value]),1),(0,a.eW)("      "),(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:b[1]||(b[1]=e=>x())}),(0,a.eW)("      "),(0,a.bF)(V,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"true",size:"xs",debounce:"300",modelValue:l.value,"onUpdate:modelValue":b[2]||(b[2]=e=>l.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),(0,a.eW)("      "),(0,a.bF)(h,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Clear Events",onClick:b[3]||(b[3]=e=>(0,o.R1)(t).methods.clear_bus_events()),"no-caps":""})])),default:(0,a.k6)((()=>[Yr])),_:1}),(0,a.bF)(T,null,{default:(0,a.k6)((()=>[(0,a.bF)(S,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{class:"bus-events-table",dense:"",rows:(0,o.R1)(i),columns:y,filter:l.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:s,"onUpdate:pagnation":b[4]||(b[4]=e=>s=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(R,{key:"eventName",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"group",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"type",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(E,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>[(0,a.eW)("ON")])),_:1})):((0,a.uX)(),(0,a.Wv)(E,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)("OFF")])),_:1}))])),_:2},1032,["props"]),(0,a.bF)(R,{key:"count",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props","class"]),(0,a.bF)(R,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>F(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>C(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>w(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send ON")])),_:2},1032,["onClick"]),(0,a.bF)(h,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>N(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>[(0,a.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),g.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",eu,[tu,(0,a.Lk)("div",lu,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.busEvents),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(B,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{flat:"",label:"Toggle bus events json",onClick:b[5]||(b[5]=e=>A())})])),_:1})]),(0,a.bF)((0,o.R1)(ol),{modelValue:d.value,"onUpdate:modelValue":b[6]||(b[6]=e=>d.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(wl),{modelValue:u.value,"onUpdate:modelValue":b[7]||(b[7]=e=>u.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:r.value,"onUpdate:modelValue":b[8]||(b[8]=e=>r.value=e),sendingNodeNumber:p.value,eventNumber:v.value,eventIdentifier:m.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(ds),{modelValue:c.value,"onUpdate:modelValue":b[9]||(b[9]=e=>c.value=e)},null,8,["modelValue"])],64)}}},nu=(0,Q.A)(ou,[["__scopeId","data-v-b835d370"]]),su=nu;m()(ou,"components",{QBanner:Ke.A,QBtn:Ue.A,QInput:T.A,QIcon:Ml.A,QCard:k.A,QCardSection:y.A,QTable:ql.A,QTr:Fl.A,QTd:xl.A,QChip:Pn.A,QCardActions:Xe.A,QField:jl.A});const iu=e=>((0,a.Qi)("data-v-767f2006"),e=e(),(0,a.jt)(),e),du=iu((()=>(0,a.Lk)("div",{class:"text-h6 no-margin no-padding"}," MMC ",-1))),ru={class:"text-h6 no-margin no-padding float-right"},uu={class:"text-h6 float-right"},cu={class:"text-h6 float-right"},mu={class:"text-h6 float-right"},bu={class:"text-h6 float-right"},pu=iu((()=>(0,a.Lk)("div",{class:"text-h6"}," Bus traffic ",-1))),vu={class:"text-bold text-blue"},gu=iu((()=>(0,a.Lk)("span",null,": ",-1))),fu={class:"text-bold"},ku="MainLayout",yu={__name:"MainLayout",setup(e){const{fQ:t,RZ:l}=i.Ay,d=(0,s.A)(),r=(0,a.WQ)("store"),u=(0,o.KR)({}),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),k=((0,o.KR)(!0),(0,o.KR)(!1)),y=(0,o.KR)(0),h=(0,o.KR)(!1),_=(0,o.KR)(!1),V=(0,o.KR)("dummyModule/index.html"),q=(0,o.KR)(null),F=(0,o.KR)("NodesView");const x=(0,a.EW)((()=>Object.values(r.state.nodeTraffic)));(0,a.wB)(x,(()=>{q.value.setScrollPercentage("vertical",1),setTimeout(A,200)}));const N=(0,a.EW)((()=>{var e="";try{e=r.state.layout.layoutDetails.title}catch(t){}return e}));(0,a.KC)((()=>{r.methods.request_server_status(),r.methods.request_layout_list()})),(0,a.sV)((()=>{setInterval(w,5e3),setInterval(C,2e3)})),(0,a.$u)((()=>{q.value.setScrollPercentage("vertical",1)}));const w=()=>{r.methods.request_server_status()},C=()=>{1==r.state.update_layout_needed&&(r.state.update_layout_needed=!1,r.methods.update_layout())},A=()=>{q.value.setScrollPercentage("vertical",1)};r.eventBus.on("REQUEST_NODE_NUMBER_EVENT",(e=>{console.log(ku+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e),y.value=e,f.value=!0})),r.eventBus.on("SERVER_STATUS_EVENT",(e=>{try{0==e.busConnection.state&&d.notify({message:"Server has no connection to the CAN BUS",caption:"please check & restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}catch(t){console.log(ku+": SERVER_STATUS_EVENT: "+t)}})),r.eventBus.on("SERVER_DISCONNECT",(()=>{d.notify({message:"MMC-server has disconnected",caption:"please restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}));const I=()=>{console.log(ku+": clickBusEventsView"),F.value="BusEventsView"},Q=()=>{console.log(ku+": clickEventView"),F.value="EventsView"},R=()=>{console.log(ku+": clickNodeView"),F.value="NodesView"},E=()=>{console.log(ku+": clickCbusErrors"),b.value=!0},L=()=>{console.log(ku+": clickExample"),h.value=!0},W=()=>{console.log(ku+": clickExit");d.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{r.methods.STOP_SERVER(),await sleep(50)}},{label:"NO",color:"white",handler:()=>{}}]})},S=()=>{console.log(ku+": clickiframe"),_.value=!0},T=()=>{console.log(ku+": clickJson"),p.value=!0},B=()=>{console.log(ku+": clickLayout"),v.value=!0},D=e=>{console.log(ku+": clickSingleBusEvent"),u.value=e,q.value.setScrollPercentage("vertical",1),g.value=!0},K=()=>{console.log(ku+": clickSystem"),k.value=!0};return(e,t)=>{const l=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),i=(0,a.g2)("q-list"),d=(0,a.g2)("q-menu"),x=(0,a.g2)("q-btn"),w=(0,a.g2)("q-toolbar-title"),C=(0,a.g2)("q-toolbar"),A=(0,a.g2)("q-space"),U=(0,a.g2)("q-header"),X=(0,a.g2)("q-banner"),O=(0,a.g2)("q-item-label"),P=(0,a.g2)("q-scroll-area"),z=(0,a.g2)("q-card"),M=(0,a.g2)("q-drawer"),j=(0,a.g2)("q-page"),H=(0,a.g2)("q-page-container"),$=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)($,{view:"hHh lpR fFf"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{class:"row bg-primary text-white no-margin no-padding",style:{height:"7vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(C,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{flat:"",dense:"",icon:"menu"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"auto-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{clickable:"",onClick:t[0]||(t[0]=e=>B())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("Layout")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[1]||(t[1]=e=>T())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("JSON")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[2]||(t[2]=e=>E())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("CBUS errors")])),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[3]||(t[3]=e=>K())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("System")])),_:1})])),_:1}),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,clickable:"",onClick:t[4]||(t[4]=e=>L())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("Example")])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:1,clickable:"",onClick:t[5]||(t[5]=e=>S())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>[(0,a.eW)("Example iFrame")])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.bF)(w,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,a.k6)((()=>[du])),_:1})])),_:1}),(0,a.bF)(C,{class:"col no-margin no-padding",style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(A),(0,a.Lk)("div",ru,(0,n.v_)(N.value),1)])),_:1}),(0,a.bF)(C,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(A)])),_:1}),(0,a.bF)(C,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",uu,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Bus Events",onClick:t[6]||(t[6]=e=>I()),"no-caps":""})])])),_:1}),(0,a.bF)(C,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",cu,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Events view",onClick:t[7]||(t[7]=e=>Q()),"no-caps":""})])])),_:1}),(0,a.bF)(C,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",mu,[(0,a.bF)(x,{size:"md",color:"secondary",label:"Nodes view",onClick:t[8]||(t[8]=e=>R()),"no-caps":""})])])),_:1}),(0,a.bF)(C,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(A),(0,a.Lk)("div",bu,[(0,a.bF)(x,{size:"md",color:"negative",label:"Exit",onClick:t[9]||(t[9]=e=>W()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(M,{class:"no-margin no-padding",modelValue:c.value,"onUpdate:modelValue":t[10]||(t[10]=e=>c.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.bF)(X,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs"},{default:(0,a.k6)((()=>[pu])),_:1}),(0,a.bF)(z,{class:"no-margin no-padding",style:{height:"83vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(P,{id:"demo",ref_key:"scrollAreaRef",ref:q,style:{height:"82vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(r).state.nodeTraffic,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e,clickable:"",dense:"",onClick:t=>D(e)},{default:(0,a.k6)((()=>[(0,a.bF)(O,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",vu,(0,n.v_)(e.direction),1),gu,(0,a.Lk)("span",fu,(0,n.v_)(e.json.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1}),(0,a.eW)(" Click message to show encoding ")])),_:1},8,["modelValue"]),0==(0,o.R1)(r).state.inStartup?((0,a.uX)(),(0,a.Wv)(H,{key:0,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,a.k6)((()=>["BusEventsView"==F.value?((0,a.uX)(),(0,a.Wv)(j,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(su))])),_:1})):(0,a.Q3)("",!0),"EventsView"==F.value?((0,a.uX)(),(0,a.Wv)(j,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)($r))])),_:1})):(0,a.Q3)("",!0),"NodesView"==F.value?((0,a.uX)(),(0,a.Wv)(j,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Mn))])),_:1})):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)((0,o.R1)(xs),{modelValue:m.value,"onUpdate:modelValue":t[11]||(t[11]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Qs),{modelValue:b.value,"onUpdate:modelValue":t[12]||(t[12]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(zs),{modelValue:p.value,"onUpdate:modelValue":t[13]||(t[13]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(oi),{modelValue:v.value,"onUpdate:modelValue":t[14]||(t[14]=e=>v.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(mi),{modelValue:g.value,"onUpdate:modelValue":t[15]||(t[15]=e=>g.value=e),busMessage:u.value},null,8,["modelValue","busMessage"]),(0,a.bF)((0,o.R1)(hi),{modelValue:f.value,"onUpdate:modelValue":t[16]||(t[16]=e=>f.value=e),previousNodeNumber:y.value},null,8,["modelValue","previousNodeNumber"]),(0,a.bF)((0,o.R1)(xd),{modelValue:(0,o.R1)(r).state.inStartup,"onUpdate:modelValue":t[17]||(t[17]=e=>(0,o.R1)(r).state.inStartup=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Od),{modelValue:k.value,"onUpdate:modelValue":t[18]||(t[18]=e=>k.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Gd),{modelValue:h.value,"onUpdate:modelValue":t[19]||(t[19]=e=>h.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Bn),{modelValue:_.value,"onUpdate:modelValue":t[20]||(t[20]=e=>_.value=e),URL:V.value},null,8,["modelValue","URL"])],64)}}};var hu=l(2008),_u=l(8416),Vu=l(6914),qu=l(5998),Fu=l(5173),xu=l(9150),Nu=l(6056),wu=l(9383),Cu=l(5205),Au=l(7716);const Iu=(0,Q.A)(yu,[["__scopeId","data-v-767f2006"]]),Qu=Iu;m()(yu,"components",{QLayout:hu.A,QHeader:_u.A,QToolbar:Vu.A,QBtn:Ue.A,QMenu:qu.A,QList:hs.A,QItem:_s.A,QItemSection:Fu.A,QToolbarTitle:xu.A,QSpace:zl.A,QDrawer:Nu.A,QBanner:Ke.A,QCard:k.A,QScrollArea:wu.A,QItemLabel:Vs.A,QPageContainer:Cu.A,QPage:Au.A})}}]);