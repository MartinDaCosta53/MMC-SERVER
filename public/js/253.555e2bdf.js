(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[253],{4253:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Mi});var a=l(1758),o=l(8734),n=l(8790),s=(l(9862),l(4907)),i=l(8336),r=(l(7781),l(9526),l(5565));const d="EventFunctions";async function u(e,t,l){console.log(d+": refreshEventIndexes: Node "+t),e.methods.request_all_node_events(t),await(0,r.yy)(500)}function c(e,t,l){console.log(d+`: createNewEvent: ${t} : ${l}`);var a=!1,o=e.state.nodes[t];if(void 0==o.storedEventsNI[l]){o.storedEventsNI[l]={eventIdentifier:l,eventIndex:1,node:t,variables:{}},o.storedEventsNI[l].variables[0]=o.parameters[5];for(var n=1;n<=o.parameters[5];n++)o.storedEventsNI[l].variables[n]=0;a=!0}else console.log(d+`: createNewEvent: event already exists ${t} : ${l}`);return a}function m(e,t){for(var l=0,a=e;a<=t;a++)l+=1<<a;return l}function b(e,t,l,a,o){if(void 0!=a&&void 0!=o)var n=m(a,o);else a=0,n=255;void 0==t&&(t=1),void 0==l&&(l=0);let s=e;return s&=n,s>>=a,s*=t,s+=l,s}function p(e,t,l,a,o,n){if(void 0!=o&&void 0!=n)var s=m(o,n);else s=255,o=0;void 0==l&&(l=1),void 0==a&&(a=0);let i=e,r=t-a;return r=r/l&255,r<<=o,i|=r&s,i&=r|~s,i}function v(e){let t;return void 0!=e.linkedVariables&&(t=void 0!=e.linkedVariables.EV?e.linkedVariables.EV:void 0),t}function g(e){let t;return void 0!=e.linkedVariables&&(t=void 0!=e.linkedVariables.NV?e.linkedVariables.NV:void 0),t}const f={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),n={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,o.KR)(!1),i=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(i,(()=>{s.value=!!(i.value&n[t.bit])}));const r=()=>{let e=i.value;s.value?e|=n[t.bit]:e&=~n[t.bit],l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,e,!0,v(t.configuration))};return(0,a.sV)((()=>{var e=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);s.value=!!(e&n[t.bit])})),(t,l)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:e.name,onClick:r,"left-label":""},null,8,["modelValue","label"])}}};var y=l(7022),k=l(8582),h=l.n(k);const _=f,N=_;h()(f,"components",{QCheckbox:y.A});const q={class:"text-h6"},x={class:"text-subtitle2"},V={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",q,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)])),_:1})]),(0,a.Lk)("div",x,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.bitCollection,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,o.R1)(N),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,bit:t.bitPosition,name:t.label,configuration:e.configuration},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","bit","name","configuration"])])))),128))])),_:1})])),_:1})}}};var F=l(3316),w=l(4189);const C=V,A=C;h()(V,"components",{QCard:F.A,QCardSection:w.A});const E={class:"text-h6"},R={class:"text-subtitle2"},I={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",E,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)])),_:1})]),(0,a.Lk)("div",R,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(N),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","configuration"])])),_:1})])),_:1})}}},Q=I,S=Q;h()(I,"components",{QCard:F.A,QCardSection:w.A});const L={class:"q-pa-xs no-margin"},W={style:{border:"2px solid grey"},class:"q-py-none no-margin"},T={class:"GroupTitle q-py-none no-margin"},D={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",W,[(0,a.Lk)("div",T,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.configuration.displaySubTitle),1)])),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Ae),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])),_:1})])])}}};var B=l(2807);const K=(0,B.A)(D,[["__scopeId","data-v-35e13b86"]]),U=K;h()(D,"components",{QCardSection:w.A});const O={class:"text-h6"},P={class:"text-subtitle2"},X={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),d=(0,a.EW)((()=>{let e=255*t.displayScale+t.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":"###"})),u=(0,a.EW)((()=>t.min*t.displayScale+t.displayOffset)),c=(0,a.EW)((()=>t.max*t.displayScale+t.displayOffset)),m=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(m,(()=>{r.value=b(m.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)}));const g=e=>{let a=m.value,o=Number(e);o<u.value?(s.value=!0,i.value="Value less than "+u.value):o>c.value?(s.value=!0,i.value="Value more than "+c.value):(a=p(a,o,t.displayScale,t.displayOffset,t.startBit,t.endBit),i.value="",s.value=!1,l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a,!0,v(t.configuration)))};return(0,a.sV)((()=>{l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);r.value=b(m.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)})),(t,l)=>{const o=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-badge"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(p,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",O,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)])),_:1})]),(0,a.Lk)("div",P,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(m,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)(" range "+(0,n.v_)(u.value)+" to "+(0,n.v_)(c.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(b,{mask:d.value,debounce:"1000",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:g},null,8,["mask","modelValue","error-message","error"])])),_:1})])),_:1})}}};var z=l(3954),M=l(7837);const j=X,G=j;h()(X,"components",{QCard:F.A,QCardSection:w.A,QBadge:z.A,QInput:M.A});var H=l(8433),$=l.n(H);class J{constructor(){this.node=void 0,this.eventIdentifier=void 0;var e=function(e){return this.node.storedEventsNI[this.eventIdentifier].variables[e]}.bind(this);$().add_operation("EV",e);var t=function(e,t){let l=!1,a=this.node.storedEventsNI[this.eventIdentifier].variables[e];return(a&2**t)>0&&(l=!0),l}.bind(this);$().add_operation("EVbit",t);var l=function(e){return this.node.parameters[e]}.bind(this);$().add_operation("NP",l);var a=function(e,t){let l=!1;return(this.node.parameters[e]&2**t)>0&&(l=!0),l}.bind(this);$().add_operation("NPbit",a);var o=function(e){return this.node.nodeVariables[e]}.bind(this);$().add_operation("NV",o);var n=function(e,t){let l=!1;return(this.node.nodeVariables[e]&2**t)>0&&(l=!0),l}.bind(this);$().add_operation("NVbit",n)}evaluate(e,t,l){this.node=e,this.eventIdentifier=l;try{let e=$().apply(t);return console.log("mdfLogic.parse: logic: "+JSON.stringify(t)+" result: "+e),e}catch(e){return console.log("mdfLogic.parse "+e),!1}}}function Y(e,t,l){var a=null;if(t.nv){var o=l.state.nodes[e].nodeVariables[t.nv];for(var n in t.labels)o==t.labels[n].value&&(a=t.labels[n].label)}return a}function Z(e,t,l,a){var o=!0;if(void 0!=t.evBit)if(void 0!=a){var n=l.state.nodes[e].storedEventsNI[a];if(n){var s=n.variables[t.evBit.index];s=(s&2**t.evBit.bit)>>t.evBit.bit,o=ee(s,t)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=t.ev)if(void 0!=a){n=l.state.nodes[e].storedEventsNI[a];if(n){s=n.variables[t.ev];o=ee(s,t)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}else console.log("parseLogicElement: ERROR: ev - event index (argument3) not defined ");if(void 0!=t.nvBit){s=l.state.nodes[e].nodeVariables[t.nvBit.index];s=(s&2**t.nvBit.bit)>>t.nvBit.bit,o=ee(s,t)}if(void 0!=t.nv){s=l.state.nodes[e].nodeVariables[t.nv];o=ee(s,t)}if(void 0!=t.JLL){let n=new J;o=n.evaluate(l.state.nodes[e],t.JLL,a)}return o}function ee(e,t){var l=!0;return void 0!=t.equals&&t.equals!=e&&(l=!1),void 0!=t.greaterThan&&e<=t.greaterThan&&(l=!1),void 0!=t.in&&(l=!1,t.in.forEach((function(t){e==t&&(l=!0)}))),void 0!=t.lessThan&&e>=t.lessThan&&(l=!1),void 0!=t.notEqual&&t.notEqual==e&&(l=!1),l}const te={class:"text-h6"},le={class:"text-subtitle2"},ae={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)();var i=(0,o.KR)();const r=(0,a.EW)((()=>l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(r,(()=>{s.value=r.value&t.bitMask}));const d=e=>{let a=r.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a,!0,v(t.configuration))};return(0,a.sV)((()=>{let e=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);for(var a in s.value=e&t.bitMask,i.value=[],t.options)if(void 0!=t.options[a].overload){var o=Y(t.nodeNumber,t.options[a].overload,l);if(o){var n={value:t.options[a].value,label:o};i.value.push(n)}}else void 0!=t.options[a].label&&i.value.push(t.options[a])})),(t,l)=>{const r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-select"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",te,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(r,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)])),_:1})]),(0,a.Lk)("div",le,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(u,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),d],options:(0,o.R1)(i),"popup-content-class":"q-pm-none","map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}};var oe=l(4940);const ne=ae,se=ne;h()(ae,"components",{QCard:F.A,QCardSection:w.A,QSelect:oe.A});const ie={class:"text-h6"},re={class:"text-subtitle2"},de="EventVariableSlider",ue={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,a.EW)((()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e})),d=(0,a.EW)((()=>{var e=u.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),u=(0,a.EW)({get(){return(l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)&r.value)>>t.startBit},set(e){let a=l.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex);if(e<=t.max&&e>=t.min){let o=e;o<<=t.startBit,a|=o&r.value,a&=o|~r.value,s.value=!1,i.value="",l.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,a,!0,v(t.configuration))}else console.log(de+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.sV)((()=>{}));const c=()=>{console.log(de+": clickNegative"),u.value>t.min&&u.value--},m=()=>{console.log(de+": clickNegative"),u.value>t.min+5?u.value-=5:u.value=t.min},b=()=>{console.log(de+": clickPositive"),u.value<t.max&&u.value++},p=()=>{console.log(de+": clickPositive"),u.value<t.max-5?u.value+=5:u.value=t.max};return(t,l)=>{const o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),r=(0,a.g2)("q-btn"),v=(0,a.g2)("q-space"),g=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ie,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)])),_:1})]),(0,a.Lk)("div",re,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(d.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(i,{"model-value":u.value,max:e.max,min:e.min,onChange:l[0]||(l[0]=e=>{u.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(g,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})])),_:1}),(0,a.bF)(v),(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:l[2]||(l[2]=e=>m()),"no-caps":""})])),_:1}),(0,a.bF)(v),(0,a.bF)(v),(0,a.bF)(v),(0,a.bF)(v),(0,a.bF)(v),(0,a.bF)(v),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:l[3]||(l[3]=e=>p()),"no-caps":""})])),_:1}),(0,a.bF)(v),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:l[4]||(l[4]=e=>b()),"no-caps":""})])),_:1})])),_:1})])),_:1})])),_:1})}}};var ce=l(1444),me=l(1693),be=l(3676);const pe=ue,ve=pe;h()(ue,"components",{QCard:F.A,QCardSection:w.A,QBadge:z.A,QSlider:ce.A,QBtn:me.A,QSpace:be.A});const ge={class:"no-padding no-margin"},fe={class:"no-padding no-margin"},ye={class:"no-padding no-margin",style:{border:"1px solid grey"}},ke={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=e,l=(0,o.KR)(),s=(0,o.KR)();(0,a.WQ)("store");return(0,a.sV)((()=>{l.value=t.configuration.tabPanels,s.value=l.value[0].displayTitle})),(e,i)=>{const r=(0,a.g2)("q-tab"),d=(0,a.g2)("q-tabs"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab-panel"),m=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",ge,[(0,a.bF)(d,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(r,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.Lk)("div",fe,[(0,a.bF)(m,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ye,[(0,a.bF)(u,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.displaySubTitle),1)])),_:2},1024),(0,a.bF)(u,{class:"row"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Ae),{configuration:e.items,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])),_:2},1024)])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])}}};var he=l(2980),_e=l(327),Ne=l(9041),qe=l(1746);const xe=ke,Ve=xe;h()(ke,"components",{QTabs:he.A,QTab:_e.A,QTabPanels:Ne.A,QTabPanel:qe.A,QCardSection:w.A});const Fe={class:"q-pa-xs row"},we={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),n=e=>{var a=!0;return e.visibilityLogic&&(a=Z(t.nodeNumber,e.visibilityLogic,l,t.eventIdentifier)),a};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(l,s)=>((0,a.uX)(),(0,a.CE)("div",Fe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["EventVariableBitArray"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(A),{key:0,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableBitSingle"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(S),{key:1,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableGroup"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(U),{key:2,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0),"EventVariableNumber"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(G),{key:3,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,startBit:e.startBit,endBit:e.endBit,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","startBit","endBit","min","max","configuration"])):(0,a.Q3)("",!0),"EventVariableSelect"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(se),{key:4,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"EventVariableSlider"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(ve),{key:5,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"EventVariableTabs"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ve),{key:6,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0)])))),128))]))}},Ce=we,Ae=Ce,Ee="EventVariableRaw",Re={__name:"EventVariableRaw",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const t=e,l=t.name?t.name:"Event Variable "+t.eventVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),d=(0,a.EW)((()=>n.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)));(0,a.wB)(d,(()=>{r.value=d.value}));const u=e=>{try{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,n.methods.event_teach_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex,e))}catch(e){console.log(Ee+": update_event : "+e)}};return(0,a.sV)((()=>{r.value=n.getters.event_variable_by_identifier(t.nodeNumber,t.eventIdentifier,t.eventVariableIndex)})),(e,t)=>{const n=(0,a.g2)("q-input"),d=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-pa-none",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",label:(0,o.R1)(l),debounce:"1000",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})])),_:1})}}},Ie=Re,Qe=Ie;h()(Re,"components",{QCard:F.A,QCardSection:w.A,QInput:M.A});const Se={class:"text-h6"},Le="MDFDownloadDialog",We={__name:"MDFDownloadDialog",props:{modelValue:{type:Boolean,required:!0},moduleDescriptorFilename:{type:String}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=e,s=t,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(()=>{console.log(Le+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const d=async e=>{console.log(Le+": actionDownload"),await(0,r.yy)(500);let t=JSON.stringify(l.state.exported_MDF,null,"  "),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(t,l)=>{const o=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Se," Download "+(0,n.v_)(e.moduleDescriptorFilename),1)])),_:1}),(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{color:"positive",label:"Download",onClick:l[0]||(l[0]=t=>d(e.moduleDescriptorFilename))},null,512),[[m,2]])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var Te=l(2156),De=l(6868),Be=l(2669),Ke=l(8672);const Ue=We,Oe=Ue;h()(We,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(We,"directives",{ClosePopup:Ke.A});const Pe={class:"text-subtitle2"},Xe="MDFUploadDialog",ze={__name:"MDFUploadDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,r=t,d=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(d,(()=>{console.log(Xe+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{if(s.value){var e=s.value.name;console.log(Xe+": selected filename "+e);let t=new FileReader;t.readAsText(s.value),t.onload=function(){try{var a=JSON.parse(t.result);a["moduleDescriptorFilename"]=e,console.log(Xe+": actionUpload: "+a.moduleDescriptorFilename),l.methods.import_module_descriptor(i.nodeNumber,a)}catch(e){console.log(Xe+": actionUpload: failed JSON parse")}},s.value=null}else console.log(Xe+": actionUpload: uploadFile no value ")};return(e,t)=>{const i=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-file"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," MDF upload ",-1))])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file will be stored with it's original filename"),(0,a.Lk)("br"),(0,a.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a.Lk)("br"),(0,a.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1)]))),_:1}),(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-subtitle2"},"Current node:",-1)),(0,a.Lk)("div",Pe,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleName),1),t[5]||(t[5]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleIdentifier),1),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(l).state.nodes[(0,o.R1)(l).state.selected_node].moduleVersion),1),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1))])])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1)]))),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{color:"positive",label:"Upload",onClick:t[1]||(t[1]=e=>u())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var Me=l(9980);const je=ze,Ge=je;h()(ze,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QFile:Me.A,QCardActions:Be.A}),h()(ze,"directives",{ClosePopup:Ke.A});const He={class:"text-subtitle2"},$e={class:"q-pa-xs row"},Je={class:"text-body2"},Ye="MDFDialog",Ze={__name:"MDFDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(),m=(0,o.KR)(),b=(0,o.KR)(),p=(0,o.KR)(!1),v=e,g=t,f=(0,a.EW)({get(){return v.modelValue},set(e){g("update:modelValue",e)}});(0,a.wB)(f,(()=>{p.value=!1,V(),F(),h()}));const y=(0,a.EW)((()=>i.state.MDFupdateTimestamp));(0,a.wB)(y,(()=>{V(),F(),h()}));const k=(0,a.EW)((()=>i.state.server.nodes[v.nodeNumber]));(0,a.wB)(k,(()=>{V(),F()}));const h=()=>{m.value="",b.value="";try{m.value=i.state.nodeDescriptors[v.nodeNumber].moduleDescriptorFilename,m.value&&(b.value=i.state.nodeDescriptors[v.nodeNumber].moduleDescriptorLocation)}catch{}},_=(0,o.KR)([]),N=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],q=(0,o.KR)([]),x=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=async()=>{void 0!=k.value&&(_.value=[],void 0!=k.value.SYSTEM_MDF_List&&k.value.SYSTEM_MDF_List.forEach((e=>{_.value.push({file:e[0],timestamp:e[1]})})),_.value.sort((function(e,t){return e.file<t.file?-1:1})))},F=async()=>{void 0!=k.value&&(q.value=[],void 0!=k.value.USER_MDF_List&&k.value.USER_MDF_List.forEach((e=>{q.value.push({file:e[0],timestamp:e[1]})})),q.value.sort((function(e,t){return e.file<t.file?-1:1})))},w=async()=>{await(0,r.yy)(500),i.methods.request_matching_mdf_list(v.nodeNumber,"USER")};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{}));const C=e=>{console.log(Ye+": clickDelete "+e);l.notify({message:"Are you sure you want to delete file "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.request_MDF_delete(e),w()}},{label:"NO",color:"white",handler:()=>{}}]})},A=()=>{console.log(Ye+": clickToggleModuleDescriptor"),p.value=!p.value},E=e=>{console.log(Ye+": clickSystemDownload"),i.methods.request_MDF_export("SYSTEM",e),c.value=e,d.value=!0},R=e=>{console.log(Ye+": clickUserDownload"),i.methods.request_MDF_export("USER",e),c.value=e,d.value=!0},I=()=>{console.log(Ye+": clickUpload"),u.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card-actions"),k=(0,a.g2)("q-card"),h=(0,a.g2)("q-td"),V=(0,a.g2)("q-tr"),F=(0,a.g2)("q-table"),w=(0,a.g2)("q-dialog"),Q=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(w,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-none q-ma-none",style:{"min-width":"950px","min-height":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[Q,3]])])),default:(0,a.k6)((()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor File Management ",-1))])),_:1})])),_:1}),(0,a.bF)(g,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{width:"500px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[l[12]||(l[12]=(0,a.Lk)("div",{class:"text-h6"},"Current node:",-1)),(0,a.Lk)("div",He,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleName),1),l[6]||(l[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleIdentifier),1),l[7]||(l[7]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleVersion),1),l[8]||(l[8]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor type: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].cpuName),1),l[9]||(l[9]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor code: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].parameters[9]),1),l[10]||(l[10]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current module descriptor: "+(0,n.v_)(m.value),1),l[11]||(l[11]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current descriptor location: "+(0,n.v_)(b.value),1)])])),_:1}),(0,a.bF)(g,{style:{width:"400px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file is matched using the module identifier, version number and processor code, the name portion is not used"),(0,a.Lk)("br"),(0,a.eW)(" If no match is found, then it will fall back to using just the module identifier and the version number"),(0,a.Lk)("br"),(0,a.eW)(" Modules that need files using the processor code are the exception, most won't use it"),(0,a.Lk)("br"),(0,a.eW)(" User files take precedence if same filename exists in System"),(0,a.Lk)("br")],-1)),(0,a.bF)(y,{class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{color:"positive",size:"sm",label:"Upload new file",onClick:l[0]||(l[0]=e=>I())})])),_:1})])),_:1})])),_:1}),(0,a.bF)(k,{flat:"",style:{"max-height":"70vh"},class:"no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{flat:"",class:"no-margin q-pa-none row"},{default:(0,a.k6)((()=>[(0,a.bF)(k,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"no-margin q-pa-xs",style:{"min-width":"380px"}},{default:(0,a.k6)((()=>[l[14]||(l[14]=(0,a.Lk)("div",{class:"text-h6"},"System files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:_.value,columns:N,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(V,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.file),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:t=>E(e.row.file),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)(k,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{class:"no-margin q-py-xs",style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[l[15]||(l[15]=(0,a.Lk)("div",{class:"text-h6"},"User files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:q.value,columns:x,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(V,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.file),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:t=>R(e.row.file),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Delete",onClick:t=>C(e.row.file),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle current module descriptor view",onClick:l[1]||(l[1]=e=>A())})])),_:1}),p.value?((0,a.uX)(),(0,a.Wv)(g,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",$e,[l[16]||(l[16]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Module descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Je,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(i).state.nodeDescriptors[v.nodeNumber]),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Oe),{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),moduleDescriptorFilename:c.value},null,8,["modelValue","moduleDescriptorFilename"]),(0,a.bF)((0,o.R1)(Ge),{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var et=l(528),tt=l(4488),lt=l(5262);const at=Ze,ot=at;h()(Ze,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A,QTable:et.A,QTr:tt.A,QTd:lt.A}),h()(Ze,"directives",{ClosePopup:Ke.A});const nt={class:"text-h6"},st={key:0,class:"text-h6"},it={class:"q-pa-xs row"},rt={class:"q-pa-xs row"},dt={class:"text-body2"},ut={class:"q-pa-xs row"},ct={class:"text-body2"},mt="EventVariablesDialog",bt={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},eventIdentifier:{type:String,required:!0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),i=(0,o.KR)(),d=(0,o.KR)(!1),u=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(),g=e,f=t,y=(0,a.EW)({get(){return g.modelValue},set(e){f("update:modelValue",e)}});(0,a.wB)(y,(()=>{d.value=!1,b.value=!1})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((async()=>{try{g.nodeNumber?void 0!=l.state.nodeDescriptors[g.nodeNumber]?(i.value=l.state.nodeDescriptors[g.nodeNumber].eventVariables,v.value=l.state.nodeDescriptors[g.nodeNumber].eventVariableInformation,u.value=!1):(i.value={},d.value=!0,u.value=!0):d.value=!0}catch(e){console.log(mt+": onUpdated: error: "+e)}}));const k=async()=>{if(console.log(mt+": clickClose: node "+g.nodeNumber+" eventIdentifier "+g.eventIdentifier),g.newEvent){console.log(mt+": clickClose: new event");try{var e=l.state.nodes[g.nodeNumber];try{var t=e.storedEventsNI[g.eventIdentifier].variables[1];void 0==t&&(t=0)}catch(e){c(l,g.nodeNumber,g.eventIdentifier),t=0}l.methods.event_teach_by_identifier(g.nodeNumber,g.eventIdentifier,1,t),await(0,r.yy)(250),l.methods.request_all_node_events(g.nodeNumber)}catch(e){console.log(mt+": clickClose "+e)}}},h=()=>{console.log(mt+": clickToggleVariablesDescriptor"),b.value=!b.value},_=()=>{console.log(mt+": clickToggleRaw"),d.value=!d.value},N=()=>{console.log(mt+": clickToggleStoredEvents:"),p.value=!p.value},q=()=>{console.log(mt+": clickUpdateModuleDescriptor"),l.methods.request_matching_mdf_list(g.nodeNumber,"USER"),l.methods.request_matching_mdf_list(g.nodeNumber,"SYSTEM"),m.value=!0};return(t,s)=>{const r=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),x=(0,a.g2)("q-separator"),V=(0,a.g2)("q-card"),F=(0,a.g2)("q-card-actions"),w=(0,a.g2)("q-dialog"),C=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(w,{modelValue:y.value,"onUpdate:modelValue":s[5]||(s[5]=e=>y.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(r,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:s[0]||(s[0]=e=>q())}),(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close",onClick:k},null,512),[[C]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",nt," Node: "+(0,n.v_)((0,o.R1)(l).getters.node_name(g.nodeNumber))+"       Event: "+(0,n.v_)((0,o.R1)(l).getters.event_name(g.eventIdentifier))+"       ",1)])),_:1})])),_:1}),(0,a.bF)(V,{class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"scroll no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(r,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:s[1]||(s[1]=e=>q())})])),default:(0,a.k6)((()=>[u.value?((0,a.uX)(),(0,a.CE)("div",st," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0)])),_:1}),v.value?((0,a.uX)(),(0,a.Wv)(f,{key:0,class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(v.value),1)])),_:1})):(0,a.Q3)("",!0),(0,a.Lk)("div",it,[(0,o.R1)(l).state.nodeDescriptors[g.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ae),{key:0,configuration:(0,o.R1)(l).state.nodeDescriptors[g.nodeNumber].eventVariables,nodeNumber:g.nodeNumber,eventIdentifier:g.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])):(0,a.Q3)("",!0)]),(0,a.bF)(x),d.value?((0,a.uX)(),(0,a.Wv)(f,{key:1,class:"q-pa-xs row"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[g.nodeNumber].parameters[5],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Qe),{eventVariableIndex:e,nodeNumber:g.nodeNumber,eventIdentifier:g.eventIdentifier,key:e},null,8,["eventVariableIndex","nodeNumber","eventIdentifier"])))),128)),(0,a.bF)(x)])),_:1})):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.Wv)(f,{key:2,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",rt,[s[7]||(s[7]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",dt,[(0,a.Lk)("pre",null,(0,n.v_)(i.value),1)])]),(0,a.bF)(x)])),_:1})):(0,a.Q3)("",!0),p.value?((0,a.uX)(),(0,a.Wv)(f,{key:3,class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ut,[s[8]||(s[8]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Stored events"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",ct,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.nodes[g.nodeNumber].storedEventsNI),1)])]),(0,a.bF)(x)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(F,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{flat:"",label:"Toggle stored events view",onClick:s[2]||(s[2]=e=>N())}),(0,a.bF)(r,{flat:"",label:"Toggle variable descriptor view",onClick:s[3]||(s[3]=e=>h())}),(0,a.bF)(r,{flat:"",label:"Toggle raw view",onClick:s[4]||(s[4]=e=>_())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ot),{modelValue:m.value,"onUpdate:modelValue":s[6]||(s[6]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var pt=l(386);const vt=bt,gt=vt;h()(bt,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QSeparator:pt.A,QCardActions:Be.A}),h()(bt,"directives",{ClosePopup:Ke.A});const ft={class:"text-h6"},yt={key:0,class:"text-h6"},kt={key:0},ht="AddEventDialog",_t={__name:"AddEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),i=(0,s.A)(),r=(0,o.KR)(),d=(0,o.KR)(),u=(0,o.KR)(),m=(0,o.KR)(),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!0),g=(0,o.KR)(!1),f=(0,o.KR)(),y=(0,o.KR)(!1),k=(0,o.KR)(""),h=(0,o.KR)("");var _=null;const N=e,q=t,x=(0,a.EW)({get(){return N.modelValue},set(e){q("update:modelValue",e)}});(0,a.wB)(x,(()=>{1==x.value&&(f.value=void 0,void 0==N.nodeNumber?h.value="Add event":h.value="Add event for node "+l.getters.node_name(N.nodeNumber))})),(0,a.wB)(d,(()=>{void 0==r.value&&"short"!=f.value||(p.value=!0)})),(0,a.wB)(r,(()=>{void 0!=d.value&&(p.value=!0)}));const V=e=>{e&&e in l.state.layout.eventDetails&&(g.value=!0,u.value=l.getters.event_name(e),m.value=l.getters.event_group(e))};(0,a.$u)((()=>{void 0!=N.nodeNumber&&0==l.state.nodes[N.nodeNumber].parameters[4]&&v.value,r.value=null,d.value=null,u.value=null,f.value=null,b.value=!1,p.value=!1,g.value=!1}));const F=()=>{console.log(ht+": clickAddEvent "+r.value+" "+d.value),k.value=_,void 0!=N.nodeNumber&&c(l,N.nodeNumber,k.value)&&(y.value=!0),g.value||(l.setters.event_name(k.value,u.value),l.setters.event_group(k.value,m.value)),x.value=!1},w=()=>{console.log(ht+": clickNext "),"short"==f.value&&(r.value=0),_=parseInt(r.value).toString(16).toUpperCase().padStart(4,0),_+=parseInt(d.value).toString(16).toUpperCase().padStart(4,0),console.log(ht+": entered_event_identifier: "+_),V(_),console.log(ht+": eventAlreadyExistsInLayoutData: "+g.value);var e=!1;if(N.nodeNumber?void 0!=l.state.nodes[N.nodeNumber].storedEventsNI[_]&&(e=!0):g.value&&(e=!0),e){i.notify({message:"This event already exists",timeout:0,position:"center",color:"primary",actions:[{label:"continue",color:"white",handler:async()=>{}}]})}else b.value=!0};return(e,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),c=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-radio"),N=(0,a.g2)("q-space"),q=(0,a.g2)("q-input"),V=(0,a.g2)("q-card"),C=(0,a.g2)("q-card-actions"),A=(0,a.g2)("q-dialog"),E=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(A,{modelValue:x.value,"onUpdate:modelValue":t[9]||(t[9]=e=>x.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{width:"600px","min-height":"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[E]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",ft,(0,n.v_)(h.value),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[0==v.value?((0,a.uX)(),(0,a.CE)("div",yt," This module does not support any stored events ")):(0,a.Q3)("",!0)])),_:1}),v.value?((0,a.uX)(),(0,a.CE)("div",kt,[(0,a.bF)(c,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{dense:"",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(_,{dense:"",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),val:"short",label:"Short event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(N)])),_:1}),(0,a.bF)(V,{style:{"min-height":"280px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,{style:{"min-height":"80px"}},{default:(0,a.k6)((()=>["long"==f.value?((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.Lk)("div",{class:"text-body"},"Consumed events will need the number of the node that produces the event",-1),(0,a.Lk)("div",{class:"text-body"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(V,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{width:"200px"}},{default:(0,a.k6)((()=>["long"==f.value?((0,a.uX)(),(0,a.Wv)(c,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text-h6"},"Node Number",-1)]))),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{dense:"",modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),type:"number",autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.Lk)("div",{class:"text-h6"},"Event Number",-1)]))),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{dense:"",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),type:"number"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.Q3)("",!0),"short"==f.value?((0,a.uX)(),(0,a.Wv)(c,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.Lk)("div",{class:"text-h6"},"Device Number",-1)]))),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{dense:"",modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),type:"number",autofocus:""},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(c,{style:{width:"350px"}},{default:(0,a.k6)((()=>[b.value||null==f.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(C,{key:0,align:"center",class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{disable:!p.value,color:"blue",label:"check event",onClick:t[5]||(t[5]=e=>w())},null,8,["disable"]),[[E]])])),_:1})),b.value?((0,a.uX)(),(0,a.Wv)(c,{key:1,class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.Lk)("div",{class:"text-h6",style:{color:"dodgerblue"}},"Event OK",-1)]))),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-body"},"Event Name and Event Group are optional values",-1)),t[19]||(t[19]=(0,a.Lk)("div",{class:"text-body"},"Input will be disabled if previously entered",-1)),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.Lk)("div",{class:"text-h6"},"Event Name",-1)]))),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{disable:g.value,dense:"",modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value=e)},null,8,["disable","modelValue"])])),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.Lk)("div",{class:"text-h6"},"Event Group",-1)]))),_:1}),(0,a.bF)(c,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{disable:g.value,dense:"",modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=e=>m.value=e)},null,8,["disable","modelValue"])])),_:1})])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{disable:!b.value,color:"blue",label:"Add Event",onClick:t[8]||(t[8]=e=>F())},null,8,["disable"]),[[E]])])),_:1})])),_:1})])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(gt),{modelValue:y.value,"onUpdate:modelValue":t[10]||(t[10]=e=>y.value=e),nodeNumber:(0,o.R1)(l).state.selected_node,eventIdentifier:k.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}};var Nt=l(7878);const qt=_t,xt=qt;h()(_t,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QRadio:Nt.A,QSpace:be.A,QInput:M.A,QCardActions:Be.A}),h()(_t,"directives",{ClosePopup:Ke.A});const Vt={class:"text-h6"},Ft="AdvancedEventsDialog",wt={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),r=e,d=t,u=(0,a.EW)({get(){return r.modelValue},set(e){d("update:modelValue",e)}}),c=()=>{console.log(Ft+": deleteAllEvents "+r.nodeNumber);l.notify({message:"Are you sure you want to delete all events for node "+i.getters.node_name(r.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_all_events(r.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"min-width":"600px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Vt," Advanced events functions for node "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(d,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete all events",onClick:l[0]||(l[0]=e=>c())},null,512),[[p]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ct=wt,At=Ct;h()(wt,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(wt,"directives",{ClosePopup:Ke.A});const Et={class:"text-h6"},Rt={class:"text-h6"},It={class:"text-h6"},Qt={class:"q-pa-md q-gutter-sm"},St="SendEventDialog",Lt={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,r=t,d=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(d,(()=>{console.log(St+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_off_event(e,i.eventNumber)};return(e,t)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Et," Test event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(i.eventIdentifier)),1)])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",Rt,"Sending Node "+(0,n.v_)(i.sendingNodeNumber),1),(0,a.Lk)("div",It,"Event "+(0,n.v_)(s.value)+":"+(0,n.v_)(i.eventNumber),1)])),_:1}),(0,a.bF)(b,{class:"q-pa-md"},{default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"},"Generate event",-1)),t[4]||(t[4]=(0,a.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1)),(0,a.Lk)("div",Qt,[(0,a.bo)((0,a.bF)(r,{color:"green",label:"ON",onClick:t[0]||(t[0]=e=>u())},null,512),[[f]]),(0,a.bo)((0,a.bF)(r,{color:"negative",label:"OFF",onClick:t[1]||(t[1]=e=>c())},null,512),[[f]])])])),_:1}),(0,a.bF)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},Wt=Lt,Tt=Wt;h()(Lt,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QCardActions:Be.A}),h()(Lt,"directives",{ClosePopup:Ke.A});const Dt={class:"text-h6"},Bt="NameEventDialog",Kt={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(""),r=e,d=t,u=(0,a.EW)({get(){return r.modelValue},set(e){d("update:modelValue",e)}});(0,a.$u)((()=>{l.state.layout.eventDetails[r.eventIdentifier]&&(s.value=l.state.layout.eventDetails[r.eventIdentifier].name,i.value=l.state.layout.eventDetails[r.eventIdentifier].group)}));const c=()=>{console.log(Bt+": clickAccept: name: "+r.eventIdentifier+" "+s.value),l.setters.event_name(r.eventIdentifier,s.value),l.setters.event_group(r.eventIdentifier,i.value),s.value="",i.value=""};return(e,t)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Dt," Edit name for event : "+(0,n.v_)((0,o.R1)(l).getters.event_name(r.eventIdentifier)),1)])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Event name",-1)),(0,a.bF)(b,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(p,{class:"q-pt-none"},{default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"},"Event group",-1)),(0,a.bF)(b,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>c())},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ut=Kt,Ot=Ut;h()(Kt,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QInput:M.A,QCardActions:Be.A}),h()(Kt,"directives",{ClosePopup:Ke.A});const Pt="NodeParametersLoadingDialog",Xt={__name:"NodeParametersLoadingDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue","NodeParametersLoadingDialog"],setup(e,{emit:t}){const l=(0,a.WQ)("store");let o=Date.now();const n=e,s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(async()=>{1==i.value&&await d(n.nodeNumber)}));const d=async e=>{if(l.state.nodes[e].parameters[9])i.value=!1;else{l.methods.request_all_node_parameters(e,20,100);let t=Date.now();try{while(void 0==l.state.nodes[e].parameters[9]){if(await(0,r.yy)(100),Date.now()>t+2e4)throw"********** failed to read Node Parameters: Max time elapsed";if(Date.now()>o+2e3)throw"********** failed to read Node Parameters: lastBusTraffic timeout "}i.value=!1}catch(e){console.log(Pt+": checkNodeParameters: "+e),i.value=!1}}s("NodeParametersLoadingDialog","finished normally")};return l.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{o=Date.now()})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-spinner-orbit"),n=(0,a.g2)("q-btn"),s=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("div",{class:"text-h6"},"Node parameters are still loading",-1),(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1)]))),_:1}),(0,a.bF)(l,{class:"text-h6",align:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{color:"primary",size:"2em"})])),_:1}),(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(n,{flat:"",label:"Close"},null,512),[[u]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var zt=l(7288);const Mt=Xt,jt=Mt;h()(Xt,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QSpinnerOrbit:zt.A,QCardActions:Be.A,QBtn:me.A}),h()(Xt,"directives",{ClosePopup:Ke.A});const Gt="NodeVariablesLoadingDialog",Ht={__name:"NodeVariablesLoadingDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue","NodeVariablesLoadingDialog"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=e,n=t,s=(0,a.EW)({get(){return o.modelValue},set(e){n("update:modelValue",e)}});(0,a.wB)(s,(async()=>{1==s.value&&(console.log(Gt+": ReadNodeVariables: "+o.nodeNumber),await i(o.nodeNumber))}));const i=async e=>{var t=l.state.nodes[e].parameters[6];if(void 0!=l.state.nodes[e].nodeVariables[t]);else{l.methods.request_all_node_variables(e,l.state.nodes[e].parameters[6]);var a=20*t+20;try{while(void 0==l.state.nodes[e].nodeVariables[t])if(await(0,r.yy)(1),a--,a<0)throw"********** failed to read Node Variables";s.value=!1}catch(e){console.log(Gt+": checkNodeParameters: "+e),s.value=!1}}n("NodeVariablesLoadingDialog","finished normally")};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-spinner-orbit"),n=(0,a.g2)("q-btn"),i=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("div",{class:"text-h6"},"Node Variables are still loading",-1),(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1)]))),_:1}),(0,a.bF)(l,{class:"text-h6",align:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{color:"primary",size:"2em"})])),_:1}),(0,a.bF)(i,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(n,{flat:"",label:"Close"},null,512),[[u]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},$t=Ht,Jt=$t;h()(Ht,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QSpinnerOrbit:zt.A,QCardActions:Be.A,QBtn:me.A}),h()(Ht,"directives",{ClosePopup:Ke.A});const Yt={class:"text-h6"},Zt={class:"q-pa-xs q-gutter-sm"},el="EventTeachDialog",tl={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(""),m=(0,o.KR)(),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(""),y=(0,o.KR)(""),k=e,h=t,_=(0,a.EW)({get(){return k.modelValue},set(e){h("update:modelValue",e)}});(0,a.wB)(_,(()=>{N.value=""}));const N=(0,o.KR)(),q=(0,o.KR)([]),x=(0,o.KR)([]),V=(0,o.KR)([]),F=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],w=(0,a.EW)((()=>i.state.nodes.updateTimestamp));(0,a.wB)(w,(()=>{k.eventIdentifier&&C()}));const C=async()=>{try{V.value=[],x.value=[];var e=Object.values(i.state.nodes);e.forEach((e=>{if(e.nodeNumber>0&&e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach((async t=>{if(t.eventIdentifier==k.eventIdentifier){x.value.push(e.nodeNumber);var l=i.getters.node_name(e.nodeNumber);V.value.push({number:e.nodeNumber,name:l,eventIndex:t.eventIndex,eventIdentifier:t.eventIdentifier})}}))}})),A()}catch(e){console.log(el+": update_taught_nodes "+e)}},A=()=>{try{q.value=[];var e=i.state.nodes;for(var t in e){let e=!0;for(var l in x.value)x.value[l]==t&&(e=!1);if(1!=i.state.nodes[t].status&&(e=!1),1!=i.state.nodes[t].flim&&(e=!1),e&&t>0){var a=t+": ";i.state.layout&&(a+=i.getters.node_name(t),q.value.push(a))}}}catch(e){console.log(el+": update_available_nodes: "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{k.eventIdentifier&&C()}));const E=async e=>{f.value="",v.value=!0;for(let e=0;e<1e3;e++){if(f.value.length>0)break;await(0,r.yy)(10)}v.value=!1},R=async e=>{y.value="",p.value=!0;for(let e=0;e<1e4;e++){if(y.value.length>0)break;await(0,r.yy)(10)}await(0,r.yy)(500),p.value=!1},I=async()=>{if(console.log(el+`: clickTeachEvent: ${N.value} : ${k.eventIdentifier}`),""!=N.value){var e=N.value.split(":"),t=parseInt(e[0]);if(m.value=t,i.state.nodes[t].eventSpaceLeft>0)await E(t),await R(t),c(i,t,k.eventIdentifier),d.value=k.eventIdentifier,g.value=!0,b.value=!0;else{l.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}N.value=void 0}},Q=async(e,t)=>{console.log(el+": clickVariables "+e+" "+t),m.value=e,d.value=t,g.value=!1,await E(e),await R(e),await u(i,k.nodeNumber),await i.methods.request_event_variables_by_identifier(e,t),b.value=!0};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-select"),c=(0,a.g2)("q-card"),h=(0,a.g2)("q-td"),x=(0,a.g2)("q-tr"),w=(0,a.g2)("q-table"),C=(0,a.g2)("q-dialog"),A=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[A]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Yt," Teach event : "+(0,n.v_)((0,o.R1)(i).getters.event_name(k.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(c,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},"Teach Event",-1)),t[9]||(t[9]=(0,a.Lk)("div",{class:"text-subtitle2"},"Select node",-1)),(0,a.bF)(u,{modelValue:N.value,"onUpdate:modelValue":t[0]||(t[0]=e=>N.value=e),options:q.value},null,8,["modelValue","options"]),(0,a.Lk)("div",Zt,[(0,a.bF)(l,{color:"negative",label:"Teach",onClick:t[1]||(t[1]=e=>I()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(c,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)((()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"},"Taught Events",-1)),t[11]||(t[11]=(0,a.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1)),(0,a.bF)(w,{flat:"",bordered:"",dense:"",rows:V.value,columns:F,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(x,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{key:"number",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.number),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(l,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>Q(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(gt),{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e),nodeNumber:m.value,eventIdentifier:d.value,newEvent:g.value},null,8,["modelValue","nodeNumber","eventIdentifier","newEvent"]),(0,a.bF)((0,o.R1)(jt),{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=e=>v.value=e),nodeNumber:m.value,onNodeParametersLoadingDialog:t[5]||(t[5]=e=>f.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=e=>p.value=e),nodeNumber:m.value,onNodeVariablesLoadingDialog:t[7]||(t[7]=e=>y.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},ll=tl,al=ll;h()(tl,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QSelect:oe.A,QTable:et.A,QTr:tt.A,QTd:lt.A}),h()(tl,"directives",{ClosePopup:Ke.A});const ol={__name:"EventsByNodeViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events By Node View ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of the events for a specific node ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The event source shows if the event has been read from the module (stored event) or if the event hasn't been read from the module, but has been seen on the CAN bus (Bus event), which is the case for default events on some modules that can't be read from the module ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},nl=ol,sl=nl;h()(ol,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(ol,"directives",{ClosePopup:Ke.A});const il={style:{height:"45vh"}},rl={class:"text-h6"},dl={class:"full-width"},ul="EventsListByNode",cl={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,o.KR)([]),r=(0,o.KR)(""),d=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(),y=(0,o.KR)(""),k=((0,o.KR)(0),(0,o.KR)(0));(0,o.KR)();const h=e,_=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",required:!1,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],N=(0,a.EW)((()=>h.nodeNumber));(0,a.wB)(N,(()=>{h.nodeNumber&&F()}));const q=(0,a.EW)((()=>Object.values(l.state.busEvents)));(0,a.wB)(q,(()=>{h.nodeNumber&&F()}));const x=(0,a.EW)((()=>l.state.layout.updateTimestamp));(0,a.wB)(x,(()=>{h.nodeNumber&&F()}));const V=(0,a.EW)((()=>l.state.nodes.updateTimestamp));(0,a.wB)(V,(()=>{h.nodeNumber&&F()}));const F=()=>{i.value=[];try{var e=Object.values(l.state.nodes[h.nodeNumber].storedEventsNI);e.forEach((e=>{var t=parseInt(e.eventIdentifier.substr(0,4),16),a=parseInt(e.eventIdentifier.substr(4,4),16);let o={};o["eventIdentifier"]=e.eventIdentifier,o["eventName"]=l.getters.event_name(e.eventIdentifier),o["eventGroup"]=l.getters.event_group(e.eventIdentifier),o["nodeNumber"]=t,o["eventNumber"]=a,o["eventType"]=0==t?"short":"long",o["storedEvent"]=!0,o["source"]="stored event",i.value.push(o)}));var t=Object.values(l.state.busEvents);t.forEach((t=>{if(t.nodeNumber==h.nodeNumber){var a=!1,o=t.eventIdentifier;if("short"==t.type&&(o="0000"+o.substr(4,4)),e.forEach((e=>{o==e.eventIdentifier&&(a=!0)})),0==a){let e={};e["eventIdentifier"]=o,e["eventName"]=l.getters.event_name(o),e["eventGroup"]=l.getters.event_group(o),e["nodeNumber"]=t.nodeNumber,e["eventNumber"]=t.eventNumber,e["eventType"]=t.type,e["storedEvent"]=!1,e["source"]="bus event",i.value.push(e)}}})),i.value.sort((function(e,t){return e.eventIdentifier<t.eventIdentifier?-1:1}))}catch{}};(0,a.KC)((()=>{h.nodeNumber&&F()})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{}));const w=()=>{if(console.log(ul+": clickAddEvent"),l.state.nodes[h.nodeNumber].eventSpaceLeft>0)d.value=!0;else{t.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},C=()=>{console.log(ul+": clickAdvanced"),c.value=!0},A=e=>{console.log(ul+": clickDelete");t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{console.log("removeEvent "+h.nodeNumber+" "+e),l.methods.remove_event(h.nodeNumber,e)}},{label:"NO",color:"white",handler:()=>{}}]})},E=e=>{console.log(ul+": clickEventName "+e),y.value=e,f.value=l.getters.event_name(e),v.value=!0},R=()=>{console.log(ul+": clickInfo"),p.value=!0},I=()=>{console.log(ul+": clickRefresh"),l.methods.request_all_node_events(h.nodeNumber),F()},Q=e=>{console.log(ul+": send OFF "+e);var t=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==t?l.methods.short_off_event(h.nodeNumber,a):l.methods.long_off_event(t,a)},S=e=>{console.log(ul+": send ON "+e);var t=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==t?l.methods.short_on_event(h.nodeNumber,a):l.methods.long_on_event(t,a)},L=e=>{console.log(ul+": clickTeach"),y.value=e,m.value=!0},W=async e=>{await u(l,h.nodeNumber),await l.methods.request_event_variables_by_identifier(h.nodeNumber,e),y.value=e,console.log(ul+": clickVariables: node "+h.nodeNumber),b.value=!0};return(t,s)=>{const u=(0,a.g2)("q-btn"),f=(0,a.g2)("q-space"),N=(0,a.g2)("q-icon"),q=(0,a.g2)("q-input"),x=(0,a.g2)("q-banner"),V=(0,a.g2)("q-td"),F=(0,a.g2)("q-tr"),T=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",il,[(0,a.bF)(x,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:s[0]||(s[0]=e=>R())}),(0,a.bF)(f),s[12]||(s[12]=(0,a.eW)("      ")),(0,a.bF)(q,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(N,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),s[13]||(s[13]=(0,a.eW)("    ")),(0,a.bF)(u,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:s[2]||(s[2]=e=>w())}),(0,a.bF)(u,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:s[3]||(s[3]=e=>C())}),(0,a.bF)(u,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:s[4]||(s[4]=e=>I())})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",rl," Events for node : "+(0,n.v_)((0,o.R1)(l).getters.node_name(h.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",dl,[(0,a.bF)(T,{class:"events-list-by-node-table",bordered:"",dense:"",rows:i.value,columns:_,filter:r.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(F,{props:e,class:(0,n.C4)([y.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(V,{key:"eventIdentifier",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"eventName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventName),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"eventGroup",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventGroup),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"nodeNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"eventNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"eventType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventType),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"source",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.source),1)])),_:2},1032,["props"]),(0,a.bF)(V,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>E(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:t=>W(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>L(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>S(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>s[14]||(s[14]=[(0,a.eW)("send ON")]))),_:2},1032,["onClick"]),(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>Q(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>s[15]||(s[15]=[(0,a.eW)("send OFF")]))),_:2},1032,["onClick"]),(0,a.bF)(u,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>A(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"])]),(0,a.bF)((0,o.R1)(xt),{modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(At),{modelValue:c.value,"onUpdate:modelValue":s[6]||(s[6]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ot),{modelValue:v.value,"onUpdate:modelValue":s[7]||(s[7]=e=>v.value=e),eventIdentifier:y.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(al),{modelValue:m.value,"onUpdate:modelValue":s[8]||(s[8]=e=>m.value=e),eventIdentifier:y.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Tt),{modelValue:g.value,"onUpdate:modelValue":s[9]||(s[9]=e=>g.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:k.value,eventIdentifier:y.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(gt),{modelValue:b.value,"onUpdate:modelValue":s[10]||(s[10]=e=>b.value=e),nodeNumber:e.nodeNumber,eventIdentifier:y.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(sl),{modelValue:p.value,"onUpdate:modelValue":s[11]||(s[11]=e=>p.value=e)},null,8,["modelValue"])])}}};var ml=l(492),bl=l(7156);const pl=(0,B.A)(cl,[["__scopeId","data-v-e251d5c2"]]),vl=pl;h()(cl,"components",{QBanner:De.A,QBtn:me.A,QSpace:be.A,QInput:M.A,QIcon:ml.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QField:bl.A});const gl="EventVariablesLoadingDialog",fl={__name:"EventVariablesLoadingDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue","EventVariablesLoadingDialog"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=((0,o.KR)(0),(0,o.KR)(0),e),s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(async()=>{1==i.value&&await d(n.nodeNumber)}));const d=async e=>{console.log(gl+": ReadAllEventVariables: "+e);Date.now();try{var t=l.state.nodes[n.nodeNumber].storedEventsNI;for(const a in t)console.log(gl+": ReadAllEventVariables: event "+a),l.methods.request_event_variables_by_identifier(e,a),await(0,r.yy)(100)}catch(e){console.log(gl+": ReadAllEventVariables: "+e)}await(0,r.yy)(2e3);while(Date.now()-l.state.cbusTrafficTimeStamp<2e3)await(0,r.yy)(100);await(0,r.yy)(2e3),s("EventVariablesLoadingDialog","finished normally"),console.log(gl+": ReadAllEventVariables: finished")};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-card-section"),o=(0,a.g2)("q-spinner-orbit"),n=(0,a.g2)("q-btn"),s=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("div",{class:"text-h6"},"Event Variables are still loading",-1),(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1)]))),_:1}),(0,a.bF)(l,{class:"text-h6",align:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{color:"primary",size:"2em"})])),_:1}),(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(n,{flat:"",label:"Close"},null,512),[[u]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},yl=fl,kl=yl;h()(fl,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QSpinnerOrbit:zt.A,QCardActions:Be.A,QBtn:me.A}),h()(fl,"directives",{ClosePopup:Ke.A});const hl={class:"text-h6"},_l="NodeBackupDialog",Nl={__name:"NodeBackupDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(""),c=(0,o.KR)(""),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=e,v=t,g=(0,a.EW)({get(){return p.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(g,(()=>{g.value&&f()}));const f=async()=>{console.log(_l+": backupNode "+p.nodeNumber);var e=!1,t="";await u(i,p.nodeNumber);let a=Date.now();c.value="",b.value=!0;for(let t=0;t<1e3;t++){if(c.value.length>0){e=!1;break}await(0,r.yy)(10);e=!0}b.value=!1,e&&(console.log(_l+": backupNode "+p.nodeNumber+" failed to load Node variables"),t="Node variable load failed");while(Date.now()-a<2e3)await(0,r.yy)(100);if(0==e){d.value="",m.value=!0;for(let t=0;t<1e4;t++){if(d.value.length>0){e=!1;break}await(0,r.yy)(10);e=!0}m.value=!1,e?(console.log(_l+": backupNode "+p.nodeNumber+" failed to load Event variables"),t="Event variable load failed"):(i.methods.save_node_backup(p.nodeNumber,i.state.nodes[p.nodeNumber]),t="Backup completed")}l.notify({message:t,timeout:0,type:"info",position:"center",actions:[{label:"Dismiss",handler:()=>{g.value=!1}}]})};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"450px","min-height":"500px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",hl," Backup node "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.Lk)("div",null,null,-1),(0,a.Lk)("div",null,null,-1)]))),_:1}),(0,a.bF)(u,null,{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text-h6"},"Node backup is starting...",-1),(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(kl),{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),nodeNumber:e.nodeNumber,onEventVariablesLoadingDialog:l[2]||(l[2]=e=>d.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value=e),nodeNumber:e.nodeNumber,onNodeVariablesLoadingDialog:l[4]||(l[4]=e=>c.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},ql=Nl,xl=ql;h()(Nl,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A}),h()(Nl,"directives",{ClosePopup:Ke.A});const Vl={__name:"ProgramNodeInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about Node Programming ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1"}," Configuration memory is used to enable or disable hardware features of the MCU. ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," EEPROM memory is used to hold non-volatile settings for the firmware (such as node number, events etc..) ",-1),(0,a.Lk)("div",{class:"text_body1"}," Re-programming EEPROM memory will force the node into an un-initialsed state (green led lit) and will need to be re-initialised with a node number (typically started by holding the button down until the yellow led starts flashing) ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Fl=Vl,wl=Fl;h()(Vl,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(Vl,"directives",{ClosePopup:Ke.A});const Cl={class:"text-h6"},Al={class:"q-pa-xs row"},El={class:"text-h6"},Rl="ProgramNodeDialog",Il={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(null),i=(0,o.KR)(!1),r=(0,o.KR)(!1),d=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(),m=(0,o.KR)(""),b=(0,o.KR)(!1);var p=0,v=void 0;const g=e,f=t,y=(0,a.EW)({get(){return g.modelValue},set(e){f("update:modelValue",e)}});(0,a.wB)(y,(()=>{s.value=null})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const k=async()=>{if(s.value){var e=s.value.name;console.log(Rl+": selected filename "+e);let t=new FileReader;t.readAsText(s.value),t.onload=function(){try{console.log(Rl+": actionUpload: result: "+t.result)}catch(e){console.log(Rl+": actionUpload: "+e)}l.methods.program_node(g.nodeNumber,v,p,s.value)}}else console.log(Rl+": actionUpload: uploadFile no value ")};l.eventBus.on("PROGRAM_NODE_PROGRESS",(e=>{if(m.value=e,e.includes("FIRMWARE:")){const t=e.split("FIRMWARE:");c.value=t[1]}}));const h=()=>{console.log(Rl+": clickInfo"),b.value=!0},_=async()=>{p=i.value?1|p:-2&p,p=r.value?2|p:-3&p,p=d.value?4|p:-5&p,p=u.value?8|p:-9&p,v=l.state.nodes[g.nodeNumber].parameters[9],console.log(Rl+": clickProgram: node: "+g.nodeNumber+" cpuType: "+v+" flags: "+p),c.value="",await k()},N=async()=>{console.log(Rl+": clickClose: flags: "+p),2&p?l.methods.query_all_nodes():l.methods.request_all_node_parameters(g.nodeNumber,20,100),y.value=!1};return(t,p)=>{const v=(0,a.g2)("q-btn"),g=(0,a.g2)("q-space"),f=(0,a.g2)("q-banner"),k=(0,a.g2)("q-card-section"),q=(0,a.g2)("q-file"),x=(0,a.g2)("q-checkbox"),V=(0,a.g2)("q-card"),F=(0,a.g2)("q-card-actions"),w=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(w,{modelValue:y.value,"onUpdate:modelValue":p[8]||(p[8]=e=>y.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{"min-width":"750px"}},{default:(0,a.k6)((()=>[(0,a.bF)(f,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:p[0]||(p[0]=e=>h())}),(0,a.bF)(g),(0,a.bF)(v,{flat:"",color:"white",size:"md",label:"Close",onClick:p[1]||(p[1]=e=>N())})])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Cl,"   program Node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",Al,[(0,a.bF)(V,{flat:"",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>p[10]||(p[10]=[(0,a.Lk)("div",{class:"text-h6"},"Select a file to upload",-1)]))),_:1}),(0,a.bF)(q,{modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(k,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>p[11]||(p[11]=[(0,a.eW)(" FLASH memory is always programmed ")]))),_:1}),(0,a.bF)(k,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:i.value,"onUpdate:modelValue":p[3]||(p[3]=e=>i.value=e),label:"Program configuration"},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:r.value,"onUpdate:modelValue":p[4]||(p[4]=e=>r.value=e),label:"Program EEPROM"},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:d.value,"onUpdate:modelValue":p[5]||(p[5]=e=>d.value=e),label:"Ignore CPU type"},null,8,["modelValue"])])),_:1}),(0,a.bF)(k,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{modelValue:u.value,"onUpdate:modelValue":p[6]||(p[6]=e=>u.value=e),label:"Program in Boot Mode"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(V,{flat:"",class:"q-pa-sm",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",El," Node CPU type: "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].cpuName)+" ("+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].parameters[9])+") ",1),p[12]||(p[12]=(0,a.Lk)("br",null,null,-1))])),_:1}),p[13]||(p[13]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Warnings: "),(0,a.Lk)("br")],-1)),p[14]||(p[14]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Disconnect all SLiM nodes to prevent corruption. "),(0,a.Lk)("br")],-1)),p[15]||(p[15]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Ensure there is mimimal or no traffic on the CAN bus before programming to avoid failure (issue with older bootloader firmware). "),(0,a.Lk)("br")],-1)),p[16]||(p[16]=(0,a.Lk)("div",{class:"text-body1"}," In the event of a failure, and if the node is left in bootmode (both leds lit), then retry with the 'Program in Boot Mode' option checked. ",-1))])),_:1})]),(0,a.bF)(k,{class:"row"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{align:"left",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"primary",label:"Program",onClick:p[7]||(p[7]=e=>_())})])),_:1}),(0,a.bF)(V,{align:"center",flat:"",class:"text-h6",style:{width:"370px"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(c.value),1)])),_:1})])),_:1}),(0,a.bF)(k,{class:"bg-info text-h6 text-white"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Status: "+(0,n.v_)(m.value),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(wl),{modelValue:b.value,"onUpdate:modelValue":p[9]||(p[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Ql=Il,Sl=Ql;h()(Il,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QSpace:be.A,QCardSection:w.A,QFile:Me.A,QCheckbox:y.A,QCardActions:Be.A});var Ll=l(9104);const Wl={class:"text-h6"},Tl={style:{"max-height":"85vh"},class:"scroll no-margin no-padding"},Dl={class:"q-pa-md row",style:{"max-height":"80vh"}},Bl={class:"text-subtitle2"},Kl={class:"text-subtitle2"},Ul={class:"text-subtitle2"},Ol={class:"text-subtitle2"},Pl={class:"text-subtitle2"},Xl={class:"text-subtitle2"},zl={class:"text-h6"},Ml="RestoreNodeDialog",jl={__name:"RestoreNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(""),u=(0,o.KR)(!1),c=(0,o.KR)(""),m=(0,o.KR)(!1),b=(0,o.KR)([]),p=(0,o.KR)(""),v=(0,o.KR)(""),g=(0,o.KR)(""),f=(0,o.KR)(""),y=(0,o.KR)("awaiting backup selection"),k=(0,o.KR)(!1),h=(0,o.KR)(!1),_=(0,o.KR)(""),N=(0,o.KR)(""),q=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],x=e,V=t,F=(0,a.EW)({get(){return x.modelValue},set(e){V("update:modelValue",e)}});(0,a.wB)(F,(()=>{F.value&&(d.value=void 0,u.value=!1,p.value="",v.value="",g.value="",f.value="",k.value=!1,i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,x.nodeNumber),i.state.restoredData={})}));const w=(0,a.EW)((()=>i.state.restoredData));(0,a.wB)(w,(()=>{try{c.value=w.value.backupNode,p.value=c.value.moduleName,v.value=c.value.parameters[6],g.value=c.value.eventCount,f.value=c.value.parameters[5]}catch(e){console.log(Ml+": WATCH restoredData "+e),c.value={},p.value="",v.value="",g.value="",f.value=""}}));const C=(0,a.EW)((()=>i.state.backups_list));(0,a.wB)(C,(()=>{A()}));const A=()=>{b.value=[],C.value.forEach((e=>{b.value.push({backup:e})}))},E=async()=>{console.log(Ml+": restoreNodeVariables"),y.value="restoring Node Variables",k.value=!0;try{let e=c.value.nodeVariables;for(let t of Object.keys(e).sort((function(e,t){return e-t})))if(t>0){let l=e[t];console.log(Ml+`: restoreNodeVariables: ${t} ${l}`);let a=!1;i.methods.update_node_variable(x.nodeNumber,t,l,a),await(0,r.yy)(100)}}catch(e){console.log(Ml+": restoreNodeVariables: "+e)}await(0,r.yy)(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<500)await(0,r.yy)(100);k.value=!1},R=async()=>{console.log(Ml+": restoreEvents"),k.value=!0;try{y.value="erasing Events",i.methods.delete_all_events(x.nodeNumber),await(0,r.yy)(2e3),y.value="restoring Events & Variables";var e=c.value.storedEventsNI;console.log(Ml+`: restoreEventVariables: storedEventsNI ${JSON.stringify(e)}`);for(const t in e)console.log(Ml+": restoreEvents: "+t),await I(t)}catch(e){console.log(Ml+": restoreEvents: "+e)}await(0,r.yy)(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<1e3)await(0,r.yy)(100);k.value=!1},I=async e=>{try{let t=c.value.storedEventsNI[e].variables;for(let l of Object.keys(t).sort((function(e,t){return e-t})))if(l>0){let t=c.value.storedEventsNI[e].variables[l],a=!1;i.methods.event_teach_by_identifier(x.nodeNumber,e,l,t,a),await(0,r.yy)(200)}}catch(e){console.log(Ml+": restoreEventVariables: "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const Q=async()=>{console.log(Ml+`: clickChangeFilename ${N.value} ${_.value}`),_.value.length>0&&i.methods.rename_node_backup(i.state.layout.layoutDetails.title,x.nodeNumber,N.value,_.value),_.value=""},S=e=>{console.log(Ml+": clickBackupList on ",e),d.value=e,i.methods.request_node_backup(i.state.layout.layoutDetails.title,x.nodeNumber,d.value),u.value=!0,y.value="ready to restore"},L=e=>{console.log(Ml+": clickDelete ",e);l.notify({message:"Are you sure you want to delete backup "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_node_backup(i.state.layout.layoutDetails.title,x.nodeNumber,e),await(0,r.yy)(50),i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,x.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},W=async e=>{if(u.value=!1,console.log(Ml+": clickRestore"),p.value==i.getters.module_name(x.nodeNumber))y.value="restore in progress",await E(),await R(),i.methods.request_all_node_variables(x.nodeNumber,i.state.nodes[x.nodeNumber].parameters[6]),await(0,r.yy)(1e3),i.methods.request_all_node_events(x.nodeNumber),y.value="restore complete\n(select a backup to run again)";else{l.notify({message:"backup module name '"+p.value+"' doesnt match restore module name",caption:"restore module name '"+i.getters.module_name(x.nodeNumber)+"'",timeout:0,position:"center",color:'negative"',multiLine:!0,actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},T=()=>{console.log(Ml+": clickToggleNodeJSON"),m.value=!m.value};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),x=(0,a.g2)("q-card-section"),V=(0,a.g2)("q-td"),w=(0,a.g2)("q-table"),C=(0,a.g2)("q-card"),A=(0,a.g2)("q-spinner-orbit"),E=(0,a.g2)("q-card-actions"),R=(0,a.g2)("q-dialog"),I=(0,a.g2)("q-input"),D=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(R,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=e=>F.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(C,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[D]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Wl," Restore Node: "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1})])),_:1}),(0,a.Lk)("div",Tl,[(0,a.Lk)("div",Dl,[(0,a.bF)(C,{flat:"",inline:"",class:"q-pa-none q-ma-none",style:{width:"450px"}},{default:(0,a.k6)((()=>[l[7]||(l[7]=(0,a.Lk)("div",{class:"text-h6"},"List of Backups",-1)),(0,a.bF)(x,{style:{"max-height":"75vh"},class:"scroll no-margin q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{class:"restore-node-table",dense:"",rows:b.value,columns:q,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(V,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",color:"primary",label:e.value,onClick:t=>S(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"]),(0,a.bF)(V,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"xs",label:"Rename",onClick:()=>{N.value=e.value,h.value=!0},"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:t=>L(e.value),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)(C,{flat:"",inline:"",class:"q-pa-none q-ma-sm",style:{"max-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(x,{style:{height:"50px"},class:"text-subtitle2"},{default:(0,a.k6)((()=>[(0,a.eW)(" Restore node "+(0,n.v_)(e.nodeNumber)+" - Module Name: "+(0,n.v_)((0,o.R1)(i).getters.module_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(C,{style:{height:"70px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)((()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-primary"},"Selected Backup",-1)),(0,a.Lk)("div",Bl,(0,n.v_)(d.value),1)])),_:1}),(0,a.bF)(C,{class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)((()=>[l[9]||(l[9]=(0,a.Lk)("div",{class:"text-primary"},"Backup file",-1)),(0,a.Lk)("div",Kl,"Module name: "+(0,n.v_)(p.value),1),(0,a.Lk)("div",Ul,"Number of Node variables: "+(0,n.v_)(v.value),1),(0,a.Lk)("div",Ol,"Number of Events: "+(0,n.v_)(g.value),1),(0,a.Lk)("div",Pl,"Number of Event variables: "+(0,n.v_)(f.value),1)])),_:1}),(0,a.bF)(C,{style:{height:"100px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)((()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-primary"},"status",-1)),(0,a.Lk)("div",Xl,(0,n.v_)(y.value),1),k.value?((0,a.uX)(),(0,a.Wv)(A,{key:0,color:"primary",size:"2em"})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.bF)(E,{align:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{disabled:!u.value,color:"primary",label:"Restore Node",onClick:l[0]||(l[0]=e=>W())},null,8,["disabled"])])),_:1})])),_:1})])),_:1})]),(0,a.bF)(C,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle node json",onClick:l[1]||(l[1]=e=>T())})])),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(x,{key:0,style:{width:"350px"},class:"text-body2 no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.Lk)("pre",null,(0,n.v_)(c.value),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(R,{modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(C,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",zl,"enter new filename for "+(0,n.v_)(N.value),1)])),_:1}),(0,a.bF)(x,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{dense:"",modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=e=>_.value=e),autofocus:"",onKeyup:l[4]||(l[4]=(0,Ll.jR)((e=>h.value=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.bF)(E,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",label:"Close"},null,512),[[D]]),(0,a.bo)((0,a.bF)(s,{flat:"",label:"change Filename",onClick:l[5]||(l[5]=e=>Q())},null,512),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}},Gl=jl,Hl=Gl;h()(jl,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTable:et.A,QTd:lt.A,QSpinnerOrbit:zt.A,QCardActions:Be.A,QInput:M.A}),h()(jl,"directives",{ClosePopup:Ke.A});const $l={class:"text-h6"},Jl={class:"q-pa-md"},Yl="SetCanIdDialog",Zl={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,d=t,u=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.$u)((()=>{}));const c=async()=>{s.value&&(console.log(Yl+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),l.methods.set_can_id(i.nodeNumber,s.value),await(0,r.yy)(100),l.methods.query_all_nodes()),s.value=void 0};return(t,i)=>{const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",$l," Set CAN ID for node : "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null," Current CAN ID: "+(0,n.v_)((0,o.R1)(l).getters.node_can_id(e.nodeNumber)),1)])),_:1}),(0,a.Lk)("div",Jl,[i[3]||(i[3]=(0,a.eW)(" Enter new CAN ID, 1 to 99 ")),(0,a.bF)(b,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ea=Zl,ta=ea;h()(Zl,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QInput:M.A,QCardActions:Be.A}),h()(Zl,"directives",{ClosePopup:Ke.A});const la={class:"text-h6"},aa="AdvancedNodeDialog",oa={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),i=(0,o.KR)(""),r=(0,o.KR)(!1),d=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=e,v=t,g=(0,a.EW)({get(){return p.modelValue},set(e){v("update:modelValue",e)}});(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const f=async()=>{console.log(aa+": clickBackupNode "+p.nodeNumber),d.value=!0},y=()=>{console.log(aa+": clickCanIdEnumeration "+p.nodeNumber),l.methods.node_can_id_enum(p.nodeNumber)},k=()=>{console.log(aa+": clickMDF"),l.methods.request_matching_mdf_list(p.nodeNumber,"USER"),l.methods.request_matching_mdf_list(p.nodeNumber,"SYSTEM"),r.value=!0},h=()=>{console.log(aa+": clickProgramNode "+p.nodeNumber),c.value=!0},_=()=>{console.log(aa+": clickResetNode "+p.nodeNumber),l.methods.reset_node(p.nodeNumber)},N=()=>{console.log(aa+": clickRestoreNode "+p.nodeNumber),m.value=!0},q=()=>{console.log(aa+": clickSetCAN_ID "+p.nodeNumber),b.value=!0};return(t,s)=>{const p=(0,a.g2)("q-btn"),v=(0,a.g2)("q-banner"),x=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-card"),F=(0,a.g2)("q-dialog"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{modelValue:g.value,"onUpdate:modelValue":s[7]||(s[7]=e=>g.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[w]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",la," Advanced functions for node "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,a.bF)(x,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Backup Node",onClick:s[0]||(s[0]=e=>f())})])),_:1}),0==(0,o.R1)(l).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(x,{key:0,align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:s[1]||(s[1]=e=>y())})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(x,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Manage Module Descriptor",onClick:s[2]||(s[2]=e=>k())})])),_:1}),(0,a.bF)(x,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:s[3]||(s[3]=e=>h())})])),_:1}),(0,a.bF)(x,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:s[4]||(s[4]=e=>_())})])),_:1}),(0,a.bF)(x,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Restore Node",onClick:s[5]||(s[5]=e=>N())})])),_:1}),0==(0,o.R1)(l).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(x,{key:1,align:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:s[6]||(s[6]=e=>q())})])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ot),{modelValue:r.value,"onUpdate:modelValue":s[8]||(s[8]=e=>r.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(xl),{modelValue:d.value,"onUpdate:modelValue":s[9]||(s[9]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Sl),{modelValue:c.value,"onUpdate:modelValue":s[10]||(s[10]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Hl),{modelValue:m.value,"onUpdate:modelValue":s[11]||(s[11]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(ta),{modelValue:b.value,"onUpdate:modelValue":s[12]||(s[12]=e=>b.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:u.value,"onUpdate:modelValue":s[13]||(s[13]=e=>u.value=e),nodeNumber:e.nodeNumber,onNodeVariablesLoadingDialog:s[14]||(s[14]=e=>i.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},na=oa,sa=na;h()(oa,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(oa,"directives",{ClosePopup:Ke.A});const ia={class:"text-h6"},ra={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),r=e,d=t,u=(0,a.EW)({get(){return r.modelValue},set(e){d("update:modelValue",e)}});(0,a.$u)((()=>{l.state.layout.nodeDetails[r.nodeNumber]&&(s.value=l.state.layout.nodeDetails[r.nodeNumber].name,i.value=l.getters.node_group(r.nodeNumber))}));const c=()=>{console.log("new node name: "+s.value),l.setters.node_name(r.nodeNumber,s.value),l.setters.node_group(r.nodeNumber,i.value)};return(t,l)=>{const o=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),d=(0,a.g2)("q-input"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",ia," Edit name for node : "+(0,n.v_)(e.nodeNumber),1)])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"text-h6"},"Name",-1)),(0,a.bF)(d,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)((()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"},"Group",-1)),(0,a.bF)(d,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},da=ra,ua=da;h()(ra,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QInput:M.A,QCardActions:Be.A}),h()(ra,"directives",{ClosePopup:Ke.A});const ca={__name:"NodeParameter",props:["Name","Value"],setup(e){return(t,l)=>{const o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:""},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.Name),1),(0,a.eW)(" : "+(0,n.v_)(e.Value),1)])),_:1})}}},ma=ca,ba=ma;h()(ca,"components",{QCard:F.A});const pa={__name:"NodeParameterRaw",props:["nodeNumber","parameterIndex"],setup(e){const t=(0,a.WQ)("store"),l=e,o=(0,a.EW)((()=>t.getters.node_parameter_name(l.nodeNumber,l.parameterIndex))),n=(0,a.EW)((()=>t.getters.node_parameter_value(l.nodeNumber,l.parameterIndex)));return(e,t)=>{const l=(0,a.g2)("q-input"),s=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(s,{class:"q-pa-xs",flat:"",style:{"min-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(l,{filled:"",label:o.value,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),outlined:"",disable:"",readonly:""},null,8,["label","modelValue"])])),_:1})}}},va=pa,ga=va;h()(pa,"components",{QCard:F.A,QInput:M.A});const fa={class:"text-h6"},ya={class:"q-pa-none row"},ka="NodeParametersDialog",ha={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,r=t,d=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}}),u=(0,a.EW)((()=>{try{return l.state.nodeDescriptors[i.nodeNumber].moduleDescriptorFilename}catch{return null}}));(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{console.log(ka+": clickUpdateModuleDescriptor"),l.methods.request_matching_mdf_list(i.nodeNumber,"USER"),l.methods.request_matching_mdf_list(i.nodeNumber,"SYSTEM"),s.value=!0};return(t,r)=>{const m=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-separator"),g=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"700px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(m,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:r[0]||(r[0]=e=>c())}),(0,a.bo)((0,a.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",fa," Parameter Information for "+(0,n.v_)((0,o.R1)(l).getters.node_name(i.nodeNumber)),1)])),_:1}),(0,a.bF)(g,{style:{"max-height":"80vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(ba),{Name:"Node Number",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Events Currently Stored",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Manufacturer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Module",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Module Identifier",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Producer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Consumer",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Consume own Events",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"FLiM",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].flim},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"VLCB",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Node Variables",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Events Supported",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Event Variables",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"CPU Name",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Interface",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Firmware Version",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,o.R1)(l).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Beta Version",Value:(0,o.R1)(l).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,a.bF)((0,o.R1)(ba),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"]),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),(0,a.bF)(v),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),r[3]||(r[3]=(0,a.Lk)("div",{class:"text-body1"}," Raw node parameter values ",-1)),(0,a.Lk)("div",ya,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[i.nodeNumber].parameters[0]+1,((t,l)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(ga),{nodeNumber:e.nodeNumber,parameterIndex:l,key:l},null,8,["nodeNumber","parameterIndex"])))),128))])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ot),{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},_a=ha,Na=_a;h()(ha,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QSeparator:pt.A}),h()(ha,"directives",{ClosePopup:Ke.A});const qa={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),n=(0,o.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.EW)({get(){return l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]},set(e){}});(0,a.wB)(i,((e,a)=>{n.value=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit])}));const r=()=>{let e=i.value;n.value?e|=s[t.bit]:e&=~s[t.bit],l.methods.update_node_variable(t.nodeNumber,t.variableIndex,e,!0,g(t.configuration))};return(0,a.sV)((()=>{const e=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit]);n.value=e})),(t,l)=>{const o=(0,a.g2)("q-checkbox");return(0,a.uX)(),(0,a.Wv)(o,{"min-width":"100",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:e.label,onClick:r,"right-label":""},null,8,["modelValue","label"])}}},xa=qa,Va=xa;h()(qa,"components",{QCheckbox:y.A});const Fa={class:"text-h6"},wa={class:"text-subtitle2"},Ca={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){const t=(0,a.WQ)("store");(0,o.KR)();var l=(0,o.KR)();const s=e,i=(0,a.EW)((()=>t.state.nodes[s.nodeNumber].nodeVariables));function r(){for(var e in l.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=Y(s.nodeNumber,s.bitCollection[e].overload,t);if(a){var o={bitPosition:s.bitCollection[e].bitPosition,label:a};l.value.push(o)}}else s.bitCollection[e].label&&l.value.push(s.bitCollection[e])}return(0,a.wB)(i,(()=>{r()})),(0,a.sV)((()=>{r()})),(t,s)=>{const i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding",style:{"min-width":"150px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Fa,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(i,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.variableIndex),1)])),_:1})]),(0,a.Lk)("div",wa,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l),(t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,o.R1)(Va),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:t.bitPosition,label:t.label,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","label","configuration"])])))),128))])),_:1})])),_:1})}}},Aa=Ca,Ea=Aa;h()(Ca,"components",{QCard:F.A,QCardSection:w.A});const Ra={class:"text-h6"},Ia={class:"text-subtitle2"},Qa={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"120px",height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ra,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.variableIndex),1)])),_:1})]),(0,a.Lk)("div",Ia,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(Va),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","configuration"])])),_:1})])),_:1})}}},Sa=Qa,La=Sa;h()(Qa,"components",{QCard:F.A,QCardSection:w.A});const Wa={class:"text-h6"},Ta={class:"text-subtitle2"},Da={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:65025},min:{type:Number,default:0},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),d=(0,a.EW)((()=>(l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexHigh]<<8)+l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexLow]));(0,a.wB)(d,(()=>{r.value=d.value}));const u=e=>{e<t.min||e>t.max?(console.log(`Invalid Value : ${e}`),s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexHigh,e>>8,!0,g(t.configuration)),l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexLow,255&e,!0,g(t.configuration)))};return(0,a.sV)((()=>{r.value=(l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexHigh]<<8)+l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexLow]})),(t,l)=>{const o=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-input"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Wa,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.NodeVariableIndexHigh)+" : "+(0,n.v_)(e.NodeVariableIndexLow),1)])),_:1})]),(0,a.Lk)("div",Ta,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(d,{mask:"#####",debounce:"1000",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}},Ba=Da,Ka=Ba;h()(Da,"components",{QCard:F.A,QCardSection:w.A,QInput:M.A});const Ua={class:"q-pa-xs no-margin"},Oa={style:{border:"2px solid grey"},class:"q-py-none no-margin"},Pa={class:"GroupTitle q-py-none no-margin"},Xa={__name:"NodeVariableGroup",props:{configuration:Object},setup(e){(0,a.WQ)("store"),(0,o.KR)("nvGroup");return(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(t,l)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",Ua,[(0,a.Lk)("div",Oa,[(0,a.Lk)("div",Pa,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.configuration.displaySubTitle),1)])),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(_o),{configuration:e.configuration.groupItems},null,8,["configuration"])])),_:1})])])}}},za=(0,B.A)(Xa,[["__scopeId","data-v-0bb3c5d8"]]),Ma=za;h()(Xa,"components",{QCardSection:w.A});const ja={class:"text-h6"},Ga={class:"text-subtitle2"},Ha={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),d=(0,a.EW)((()=>{let e=255*t.displayScale+t.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":"###"})),u=(0,a.EW)((()=>t.min*t.displayScale+t.displayOffset)),c=(0,a.EW)((()=>t.max*t.displayScale+t.displayOffset)),m=(0,a.EW)((()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(m,(()=>{r.value=r.value=b(m.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)}));const v=e=>{let a=m.value,o=Number(e);o<u.value?(s.value=!0,i.value="Value less than "+u.value):o>c.value?(s.value=!0,i.value="Value more than "+c.value):(a=p(a,o,t.displayScale,t.displayOffset,t.startBit,t.endBit),s.value=!1,i.value="",l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,a,!0,g(t.configuration)))};return(0,a.sV)((()=>{r.value=b(m.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)})),(t,l)=>{const o=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-badge"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(p,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ja,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)])),_:1})]),(0,a.Lk)("div",Ga,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(m,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)(" range "+(0,n.v_)(u.value)+" to "+(0,n.v_)(c.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(b,{mask:d.value,debounce:"1000",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:v},null,8,["mask","modelValue","error-message","error"])])),_:1})])),_:1})}}},$a=Ha,Ja=$a;h()(Ha,"components",{QCard:F.A,QCardSection:w.A,QBadge:z.A,QInput:M.A});const Ya={class:"text-h6"},Za={class:"text-subtitle2"},eo={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(),i=(0,a.EW)((()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(i,(()=>{s.value=i.value&t.bitMask}));const r=e=>{let a=i.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,a,!0,g(t.configuration))};return(0,a.sV)((()=>{s.value=i.value&t.bitMask})),(t,l)=>{const o=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-select"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ya,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)])),_:1})]),(0,a.Lk)("div",Za,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(i,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),r],options:e.options,"map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},to=eo,lo=to;h()(eo,"components",{QCard:F.A,QCardSection:w.A,QSelect:oe.A});const ao={class:"text-h6"},oo={class:"text-subtitle2"},no={key:0},so={key:0},io="NodeVariableSlider",ro={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,a.EW)((()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e}));let d=l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex];const u=(0,a.EW)((()=>(c.value,{height:"150px"}))),c=(0,a.EW)((()=>{var e=!1;return t&&(e=!!t.configuration.outputOnWrite),e}));(0,a.wB)(c,(()=>{}));const m=(0,a.EW)((()=>{var e=b.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),b=(0,a.EW)({get(){return(l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]&r.value)>>t.startBit},set(e){if(e<=t.max&&e>=t.min){let a=e;a<<=t.startBit,d|=a&r.value,d&=a|~r.value,s.value=!1,i.value="",l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,d,!0,g(t.configuration))}else console.log(io+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.$u)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(io+": clickCenter"),b.value=127},v=()=>{console.log(io+": clickNegative"),b.value>t.min&&b.value--},f=()=>{console.log(io+": clickNegative"),b.value>t.min+5?b.value-=5:b.value=t.min},y=()=>{console.log(io+": clickPositive"),b.value<t.max&&b.value++},k=()=>{console.log(io+": clickPositive"),b.value<t.max-5?b.value+=5:b.value=t.max},h=()=>{console.log(io+": clickTest"),l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,d)};return(t,l)=>{const o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-space"),g=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-ma-xs no-padding",style:{"min-width":"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{style:(0,n.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ao,[(0,a.eW)((0,n.v_)(e.displayTitle)+"   ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)((()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)])),_:1})]),(0,a.Lk)("div",oo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(m.value)+" "+(0,n.v_)(e.displayUnits),1)])),_:1}),(0,a.bF)(i,{"model-value":b.value,max:e.max,min:e.min,onChange:l[0]||(l[0]=e=>{b.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(g,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:l[1]||(l[1]=e=>v()),"no-caps":""})])),_:1}),(0,a.bF)(d),(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:l[2]||(l[2]=e=>f()),"no-caps":""})])),_:1}),(0,a.bF)(d),(0,a.bF)(o,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[c.value?((0,a.uX)(),(0,a.CE)("div",no,[(0,a.bF)(r,{dense:"",size:"sm",label:"Center",onClick:l[3]||(l[3]=e=>p()),"no-caps":""})])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(d),(0,a.bF)(o,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[c.value?((0,a.uX)(),(0,a.CE)("div",so,[(0,a.bF)(r,{dense:"",size:"sm",label:"Test",onClick:l[4]||(l[4]=e=>h()),"no-caps":""})])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(d),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:l[5]||(l[5]=e=>k()),"no-caps":""})])),_:1}),(0,a.bF)(d),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:l[6]||(l[6]=e=>y()),"no-caps":""})])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})}}};var uo=l(7410);const co=ro,mo=co;h()(ro,"components",{QCard:F.A,QCardSection:w.A,QIcon:ml.A,QTooltip:uo.A,QBadge:z.A,QSlider:ce.A,QBtn:me.A,QSpace:be.A});const bo={class:"no-padding no-margin"},po={class:"no-padding no-margin",style:{border:"1px solid grey"}},vo={__name:"NodeVariableTabs",props:{configuration:Object},setup(e){const t=e,l=(0,o.KR)(),s=(0,o.KR)();(0,a.WQ)("store"),(0,o.KR)("nvTabs"),(0,o.KR)("92vw");return(0,a.sV)((()=>{l.value=t.configuration.tabPanels,s.value=l.value[0].displayTitle})),(0,a.wB)(s,(()=>{})),(0,a.$u)((()=>{})),(e,t)=>{const i=(0,a.g2)("q-tab"),r=(0,a.g2)("q-tabs"),d=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-tab-panel"),c=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",bo,[(0,a.bF)(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(i,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(c,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),class:"no-padding no-margin"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.displayTitle,name:e.displayTitle,class:"no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",po,[(0,a.bF)(d,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)((()=>[(0,a.Lk)("b",null,(0,n.v_)(e.displaySubTitle),1)])),_:2},1024),(0,a.bF)(d,{class:"no-padding no-margin row"},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(_o),{configuration:e.items},null,8,["configuration"])])),_:2},1024)])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}},go=vo,fo=go;h()(vo,"components",{QTabs:he.A,QTab:_e.A,QTabPanels:Ne.A,QTabPanel:qe.A,QCardSection:w.A});const yo={class:"q-pa-xs row"},ko={__name:"NodeVariables",props:{configuration:Object},setup(e){const t=(0,a.WQ)("store");function l(e){var l=!0;return e.visibilityLogic&&(l=Z(t.state.selected_node,e.visibilityLogic,t)),l}return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{})),(n,s)=>((0,a.uX)(),(0,a.CE)("div",yo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["NodeVariableBitArray"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ea),{key:0,nodeNumber:(0,o.R1)(t).state.selected_node,variableIndex:e.nodeVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableBitSingle"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(La),{key:1,nodeNumber:(0,o.R1)(t).state.selected_node,variableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,bit:e.bit,configuration:e},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit","configuration"])):(0,a.Q3)("",!0),"NodeVariableDual"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ka),{key:2,NodeVariableIndexLow:e.nodeVariableIndexLow,NodeVariableIndexHigh:e.nodeVariableIndexHigh,NodeNumber:(0,o.R1)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableGroup"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ma),{key:3,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0),"NodeVariableNumber"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ja),{key:4,"node-number":(0,o.R1)(t).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,"node-variable-index":e.nodeVariableIndex,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","displayTitle","displaySubTitle","node-variable-index","displayScale","displayOffset","displayUnits","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableSelect"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(lo),{key:5,nodeVariableIndex:e.nodeVariableIndex,nodeNumber:(0,o.R1)(t).state.selected_node,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options,configuration:e},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"NodeVariableSlider"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(mo),{key:6,"node-number":(0,o.R1)(t).state.selected_node,nodeVariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableTabs"==e.type&&l(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(fo),{key:7,configuration:e},null,8,["configuration"])):(0,a.Q3)("",!0)])))),128))]))}},ho=ko,_o=ho,No={__name:"NodeVariableRaw",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const t=e,l=t.name?t.name:"Variable"+t.nodeVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),d=(0,a.EW)((()=>n.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]));(0,a.wB)(d,(()=>{r.value=d.value}));const u=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",n.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,e))};return(0,a.sV)((()=>{r.value=d.value})),(e,t)=>{const n=(0,a.g2)("q-input"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-pa-xs",flat:"",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{mask:"###",class:"bg-white",filled:"",label:(0,o.R1)(l),debounce:"1000",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})}}},qo=No,xo=qo;h()(No,"components",{QCard:F.A,QInput:M.A});const Vo={class:"text-h6"},Fo={key:0,class:"text-h6"},wo={key:1,class:"text-h6"},Co={key:2,class:"q-pa-none row"},Ao={class:"q-pa-xs row"},Eo={class:"text-body2"},Ro="NodevariablesDialog",Io={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),i=(0,o.KR)(!1),r=(0,o.KR)(!1),d=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(),b=e,p=t,v=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(v,(async()=>{r.value=!1,c.value=!1,void 0==g.value?(r.value=!0,i.value=!0):i.value=!1}));const g=(0,a.EW)((()=>{var e=void 0;return b.nodeNumber&&void 0!=l.state.nodeDescriptors[b.nodeNumber]&&(e=l.state.nodeDescriptors[b.nodeNumber].nodeVariables),e}));(0,a.wB)(g,(()=>{void 0==g.value?(r.value=!0,i.value=!0):(i.value=!1,m.value=l.state.nodeDescriptors[b.nodeNumber].nodeVariableInformation)})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((async()=>{b.nodeNumber&&(0==l.state.nodes[b.nodeNumber].parameters[6]?d.value=!0:d.value=!1)}));const f=()=>{console.log(Ro+": clickUpdateModuleDescriptor"),l.methods.request_matching_mdf_list(b.nodeNumber,"USER"),l.methods.request_matching_mdf_list(b.nodeNumber,"SYSTEM"),u.value=!0},y=()=>{console.log(Ro+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},k=()=>{console.log(Ro+": clickToggleNodeDescriptor"),c.value?c.value=!1:c.value=!0};return(t,s)=>{const p=(0,a.g2)("q-btn"),h=(0,a.g2)("q-banner"),_=(0,a.g2)("q-card-section"),N=(0,a.g2)("q-card"),q=(0,a.g2)("q-card-actions"),x=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(N,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(p,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:s[0]||(s[0]=e=>f())}),(0,a.bo)((0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Vo," Node Variables for node : "+(0,n.v_)((0,o.R1)(l).getters.node_name(e.nodeNumber)),1)])),_:1})])),_:1}),(0,a.bF)(N,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[i.value?((0,a.uX)(),(0,a.CE)("div",Fo," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0),d.value?((0,a.uX)(),(0,a.CE)("div",wo," this node has no variables to display ")):(0,a.Q3)("",!0)])),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(_,{key:0,class:"text-h6"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(m.value),1)])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(l).state.nodeDescriptors[b.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(_o),{key:1,configuration:(0,o.R1)(l).state.nodeDescriptors[b.nodeNumber].nodeVariables},null,8,["configuration"])):(0,a.Q3)("",!0),r.value?((0,a.uX)(),(0,a.CE)("div",Co,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[b.nodeNumber].parameters[6],(e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(xo),{"node-variable-index":e,"node-number":b.nodeNumber,key:e},null,8,["node-variable-index","node-number"])))),128))])):(0,a.Q3)("",!0),c.value?((0,a.uX)(),(0,a.Wv)(_,{key:3,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ao,[s[5]||(s[5]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Eo,[(0,a.Lk)("pre",null,(0,n.v_)(g.value),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(q,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(p,{flat:"",label:"Toggle variables descriptor view",onClick:s[1]||(s[1]=e=>k())}),(0,a.bF)(p,{flat:"",label:"Toggle raw view",onClick:s[2]||(s[2]=e=>y())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ot),{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Qo=Io,So=Qo;h()(Io,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(Io,"directives",{ClosePopup:Ke.A});const Lo="NodesViewAdvancedDialog",Wo={__name:"NodesViewAdvancedDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),n=(0,a.WQ)("store"),i=(0,o.KR)(!1),d=(0,o.KR)(!1),u=(0,o.KR)(""),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}}),p=async e=>{u.value="",d.value=!0;for(let e=0;e<1e3;e++){if(u.value.length>0)break;await(0,r.yy)(10)}d.value=!1;var t=void 0!=n.state.nodes[e].parameters[9];return 0==t&&l.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),t},v=async()=>{console.log(Lo+": clickNodeZeroParameters"),void 0==n.state.nodes[0]&&(n.state.nodes[0]={}),n.state.nodes[0].parameters={},await p(0)&&(i.value=!0)};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(c,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"}," Advanced functions ",-1))])),_:1}),(0,a.bF)(s,{align:"left"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Node 0 parameters",onClick:t[0]||(t[0]=e=>v())},null,512),[[m]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Na),{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),nodeNumber:0},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(jt),{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),nodeNumber:0,onNodeParametersLoadingDialog:t[4]||(t[4]=e=>u.value=e)},null,8,["modelValue"])],64)}}},To=Wo,Do=To;h()(Wo,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(Wo,"directives",{ClosePopup:Ke.A});const Bo={__name:"NodesViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Nodes View ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of all the nodes on the layout ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," When first connected, a QNN is issued to find all the nodes on the network, and the list created from the responses ",-1),(0,a.Lk)("div",{class:"text_body1"}," The REFRESH button can be used at any point to resend a QNN to update the display, when a new node is added for instance ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ko=Bo,Uo=Ko;h()(Bo,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(Bo,"directives",{ClosePopup:Ke.A});const Oo={class:"text-h6"},Po="VLCBDiagnosticsDialog",Xo={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)([]),r=e,d=t,u=(0,a.EW)({get(){return r.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(Po+": WATCH model")}));const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,a.EW)((()=>{var e=void 0;try{r.nodeNumber&&l.state.nodes[r.nodeNumber].services[r.serviceIndex]&&(e=Object.values(l.state.nodes[r.nodeNumber].services[r.serviceIndex].diagnostics))}catch(e){console.log(Po+": nodeServiceDiagnostics: "+e)}return e}));(0,a.wB)(m,(()=>{m.value&&b()}));const b=()=>{try{i.value=[],m.value.forEach((e=>{if(0!=e.DiagnosticCode){let t={};t["diagnosticCode"]=e.DiagnosticCode,t["diagnosticValue"]=e.DiagnosticValue,t["diagnosticName"]=e.DiagnosticName,i.value.push(t)}}))}catch(e){console.log(Po+": update_rows: "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(Po+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(t,r)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-actions"),k=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Oo," VLCB Diagnostics for "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(v,{key:"diagnosticCode",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticCode),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticValue",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticValue),1)])),_:2},1032,["props"]),(0,a.bF)(v,{key:"diagnosticName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{flat:"",label:"Toggle diagnostics json",onClick:r[0]||(r[0]=e=>p())})])),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[r[2]||(r[2]=(0,a.eW)(" Diagnostics ")),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},zo=Xo,Mo=zo;h()(Xo,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QCardActions:Be.A}),h()(Xo,"directives",{ClosePopup:Ke.A});const jo={class:"text-h6"},Go="VLCBExtendedServicesDialog",Ho={__name:"VLCBExtendedServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)([]),i=e,r=t,d=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(d,(()=>{console.log(Go+": WATCH model"),c()}));const u=[{name:"esdIndex",field:"esdIndex",required:!0,label:"Byte",align:"left",sortable:!0},{name:"esdValue",field:"esdValue",required:!1,label:"Value",align:"left",sortable:!0},{name:"esdName",field:"esdName",required:!0,label:"Name",align:"left",sortable:!0}],c=()=>{try{const e=l.state.nodes[i.nodeNumber].services[i.serviceIndex].ESD;s.value=[];for(let t of Object.keys(e).sort()){console.log(Go+": update_rows: "+t);let l={};l["esdIndex"]=t,l["esdValue"]=e[t].value,l["esdName"]=e[t].name,s.value.push(l)}}catch(e){console.log(Go+": update_rows: "+e)}};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,i)=>{const r=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-td"),p=(0,a.g2)("q-tr"),v=(0,a.g2)("q-table"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(g,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",jo," Extended service data for "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"no-margin q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"vlcb-ESD-table",dense:"",rows:s.value,columns:u,"row-key":"esdIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(p,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(b,{key:"esdIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdIndex),1)])),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdValue",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdValue),1)])),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.esdName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},$o=Ho,Jo=$o;h()(Ho,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTable:et.A,QTr:tt.A,QTd:lt.A}),h()(Ho,"directives",{ClosePopup:Ke.A});const Yo={class:"text-h6"},Zo="VLCBServicesDialog",en={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),r=(0,o.KR)(!1),d=(0,o.KR)([]),u=(0,o.KR)(null),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{g()}));const p=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"",align:"left"}],v=(0,a.EW)((()=>{var e={};try{c.nodeNumber&&(e=Object.values(l.state.nodes[c.nodeNumber].services))}catch(e){console.log(Zo+": nodeServices "+e)}return e}));(0,a.wB)(v,(()=>{g()}));const g=()=>{d.value=[];try{v.value.forEach((e=>{let t={};t["serviceIndex"]=e.ServiceIndex,t["serviceType"]=e.ServiceType,t["serviceName"]=e.ServiceName,t["serviceVersion"]=e.ServiceVersion,d.value.push(t)}))}catch(e){console.log(Zo+": update_rows "+e)}};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const f=()=>{console.log(Zo+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},y=e=>{console.log(`clickiagnostics: index ${e}`),l.methods.request_diagnostics(c.nodeNumber,e),u.value=e,i.value=!0},k=e=>{console.log(`clickESD: index ${e}`),u.value=e,r.value=!0};return(t,m)=>{const v=(0,a.g2)("q-btn"),g=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-td"),N=(0,a.g2)("q-tr"),q=(0,a.g2)("q-table"),x=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-card"),F=(0,a.g2)("q-dialog"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{modelValue:b.value,"onUpdate:modelValue":m[1]||(m[1]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(V,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(v,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[w]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",Yo," VLCB Services for "+(0,n.v_)((0,o.R1)(l).getters.node_name(c.nodeNumber)),1)])),_:1})])),_:1}),(0,a.bF)(V,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{class:"vlcb-services-table",dense:"",rows:d.value,columns:p,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(N,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(_,{key:"serviceIndex",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceIndex),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceType",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceType),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceName),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"serviceVersion",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.serviceVersion),1)])),_:2},1032,["props"]),(0,a.bF)(_,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(v,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Data",onClick:t=>k(e.row.serviceIndex),"no-caps":""},null,8,["onClick"]),(0,a.bF)(v,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Diagnostics",onClick:t=>y(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),(0,a.bF)(x,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{flat:"",label:"Toggle services json",onClick:m[0]||(m[0]=e=>f())})])),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.eW)(" Service count: "+(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].serviceCount)+" ",1),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.nodes[e.nodeNumber].services),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Mo),{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"]),(0,a.bF)((0,o.R1)(Jo),{modelValue:r.value,"onUpdate:modelValue":m[3]||(m[3]=e=>r.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},tn=en,ln=tn;h()(en,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QCardActions:Be.A}),h()(en,"directives",{ClosePopup:Ke.A});const an=["src"],on="DialogExampleCompositionAPI",nn={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store"),(0,o.KR)(!1);const l=e,n=t,s=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});(0,a.wB)(s,(()=>{console.log(on+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(t,l)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])])),default:(0,a.k6)((()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))])),_:1})])),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,an)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},sn=nn,rn=sn;h()(nn,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A}),h()(nn,"directives",{ClosePopup:Ke.A});const dn={style:{height:"45vh"}},un="NodesList",cn={__name:"NodesView",setup(e){const t=(0,s.A)(),l=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"center",sortable:!0},{name:"CANID",field:"CANID",required:!0,label:"CAN ID",align:"center",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"center",sortable:!0},{name:"spaceLeft",field:"spaceLeft",required:!0,label:"Space",align:"center",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],i=(0,a.WQ)("store"),d=(0,o.KR)(""),u=(0,o.KR)([]),c=(0,o.KR)(),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),y=(0,o.KR)(!1),k=(0,o.KR)(!1),h=(0,o.KR)(),_=(0,o.KR)(!1),N=(0,o.KR)(!1),q=(0,o.KR)(!1),x=(0,o.KR)("dummyModule/index.html"),V=(0,o.KR)(""),F=(0,o.KR)(""),w=(0,a.EW)((()=>i.state.nodes.updateTimestamp));(0,a.wB)(w,(()=>{A()}));const C=(0,a.EW)((()=>i.state.layout.updateTimestamp));(0,a.wB)(C,(()=>{A()}));const A=()=>{u.value=[];let e=Object.values(i.state.nodes);e.forEach((e=>{if(e.nodeNumber>0){let t={};t["nodeNumber"]=parseInt(e.nodeNumber),t["CANID"]=e.CANID,t["nodeName"]=i.getters.node_name(e.nodeNumber),t["group"]=i.getters.node_group(e.nodeNumber),t["moduleName"]=i.getters.module_name(e.nodeNumber),t["component"]=e.component,t["status"]=e.status,1==e.flim?t["mode"]="FLiM":0==e.flim?t["mode"]="SLiM":t["mode"]="unknown",t["events"]=e.eventCount,t["spaceLeft"]=e.eventSpaceLeft,t["vlcb"]=e.VLCB,u.value.push(t)}}))},E=e=>e in i.state.layout.nodeDetails?i.state.layout.nodeDetails[e].colour:"blue";(0,a.KC)((()=>{A()}));const R=async e=>{i.state.selected_node=e,h.value=e,m.value=!0,await(0,r.yy)(300)};i.eventBus.on("NODE_DELETED_EVENT",(e=>{i.state.selected_node==e&&(m.value=!1)}));const I=async e=>{V.value="",f.value=!0;let l=Date.now();i.state.cbusTrafficTimeStamp=Date.now();while(Date.now()-i.state.cbusTrafficTimeStamp<1e3){if(V.value.length>0)break;if(Date.now()-l>3e4){console.log(un+`: checkNodeParameters: node ${e} timeout`);break}await(0,r.yy)(100)}f.value=!1;var a=void 0!=i.state.nodes[e].parameters[9];return 0==a&&(console.log(un+`: checkNodeParameters: node ${e} failed`),t.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})),await Q(e),a},Q=async e=>{void 0==i.state.loadFile_notification_raised[e]&&void 0==i.state.nodeDescriptors[e]&&(t.notify({message:"NPD: Failed to load descriptor file for module identifier "+i.state.nodes[e].moduleIdentifier,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[e]=!0)},S=async e=>{F.value="",_.value=!0;for(let e=0;e<1e4;e++){if(F.value.length>0)break;await(0,r.yy)(10)}_.value=!1},L=e=>{console.log(un+": clickDeleteNode "+e);t.notify({message:"Are you sure you want to delete node "+i.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.remove_node(e),i.eventBus.emit("NODE_DELETED_EVENT",e)}},{label:"NO",color:"white",handler:()=>{}}]})},W=async e=>{console.log(un+": clickEvents: node "+e),h.value=e,await I(e),await S(e),i.methods.request_all_node_events(e),await R(e)},T=()=>{console.log(un+": clickInfo"),y.value=!0},D=async e=>{console.log(un+": clickNameNode: node "+e),h.value=e,await R(e),v.value=!0},B=async e=>{console.log(un+": clickNodeAdvanced"),h.value=e,await I(e),await R(e),c.value=e,b.value=!0,console.log(un+": clickAdvanced: node"+i.state.selected_node)},K=async()=>{console.log(un+": clickNodesViewAdvanced:"),p.value=!0},U=async e=>{console.log(un+": clickParameters"),h.value=e,i.state.nodes[e].parameters={},await I(e)&&(await R(e),g.value=!0)},O=()=>{console.log(un+": clickRefresh"),i.methods.query_all_nodes()},P=async e=>{console.log(un+": clickVariables: node "+e),h.value=e,await I(e),await R(e),1e3==e&&i.state.develop?q.value=!0:(await S(e),k.value=!0)},X=async e=>{console.log(un+": clickVLCB"),h.value=e,await I(e),await R(e),await i.methods.request_service_discovery(i.state.selected_node),await(0,r.yy)(200),N.value=!0};return(e,t)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),w=(0,a.g2)("q-icon"),C=(0,a.g2)("q-input"),A=(0,a.g2)("q-banner"),R=(0,a.g2)("q-td"),I=(0,a.g2)("q-chip"),Q=(0,a.g2)("q-tr"),S=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",dn,[(0,a.bF)(A,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>T())}),(0,a.bF)(r),t[16]||(t[16]=(0,a.eW)("      ")),(0,a.bF)(C,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),t[17]||(t[17]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:t[2]||(t[2]=e=>K())}),t[18]||(t[18]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:t[3]||(t[3]=e=>O())})])),default:(0,a.k6)((()=>[t[19]||(t[19]=(0,a.Lk)("div",{class:"text-h6"},"Nodes View",-1))])),_:1}),(0,a.Lk)("div",null,[(0,a.bF)(S,{class:"nodes-view-table",bordered:"",dense:"",rows:u.value,columns:l,filter:d.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(Q,{props:e,class:(0,n.C4)([h.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)((()=>[(0,a.bF)(R,{key:"nodeNumber",class:(0,n.C4)("text-"+E(e.row.nodeNumber)),props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["class","props"]),(0,a.bF)(R,{key:"CANID",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.CANID),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"nodeName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeName),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"moduleName",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.moduleName),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"mode",props:e},{default:(0,a.k6)((()=>["FLiM"==e.row.mode?((0,a.uX)(),(0,a.Wv)(I,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024)):((0,a.uX)(),(0,a.Wv)(I,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)])),_:2},1024))])),_:2},1032,["props"]),(0,a.bF)(R,{key:"status",props:e},{default:(0,a.k6)((()=>[e.row.status?((0,a.uX)(),(0,a.Wv)(I,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)("OK")]))),_:1})):((0,a.uX)(),(0,a.Wv)(I,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)("OFFLINE")]))),_:1}))])),_:2},1032,["props"]),(0,a.bF)(R,{key:"events",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.events),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"spaceLeft",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.spaceLeft),1)])),_:2},1032,["props"]),(0,a.bF)(R,{key:"actions"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",disabled:!e.row.status,onClick:t=>W(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",onClick:t=>D(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:t=>U(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",disabled:!e.row.status,onClick:t=>P(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),e.row.vlcb?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(s,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:t=>X(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.uX)(),(0,a.Wv)(s,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",disabled:!e.row.status,onClick:t=>X(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"])):(0,a.Q3)("",!0),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",disabled:!(0,o.R1)(i).state.nodes[e.row.nodeNumber].status,onClick:t=>B(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"md",label:"Delete",onClick:t=>L(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"]),(0,a.bF)((0,o.R1)(sa),{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=e=>b.value=e),nodeNumber:c.value},null,8,["modelValue","nodeNumber"]),1==m.value?((0,a.uX)(),(0,a.Wv)((0,o.R1)(vl),{key:0,nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["nodeNumber"])):(0,a.Q3)("",!0),(0,a.bF)((0,o.R1)(ua),{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=e=>v.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Na),{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(So),{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=e=>k.value=e),nodeNumber:h.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(jt),{modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=e=>f.value=e),nodeNumber:h.value,onNodeParametersLoadingDialog:t[9]||(t[9]=e=>V.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Do),{modelValue:p.value,"onUpdate:modelValue":t[10]||(t[10]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Uo),{modelValue:y.value,"onUpdate:modelValue":t[11]||(t[11]=e=>y.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:_.value,"onUpdate:modelValue":t[12]||(t[12]=e=>_.value=e),nodeNumber:h.value,onNodeVariablesLoadingDialog:t[13]||(t[13]=e=>F.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(ln),{modelValue:N.value,"onUpdate:modelValue":t[14]||(t[14]=e=>N.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(rn),{modelValue:q.value,"onUpdate:modelValue":t[15]||(t[15]=e=>q.value=e),URL:x.value},null,8,["modelValue","URL"])])])}}};var mn=l(6760);const bn=(0,B.A)(cn,[["__scopeId","data-v-d02d0e5a"]]),pn=bn;h()(cn,"components",{QBanner:De.A,QBtn:me.A,QSpace:be.A,QInput:M.A,QIcon:ml.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QChip:mn.A,QField:bl.A});const vn={class:"q-pa-md q-gutter-sm"},gn={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=((0,o.KR)(!1),e),i=t,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,(()=>{})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));return(e,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-item-label"),c=(0,a.g2)("q-item"),m=(0,a.g2)("q-list"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup"),g=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.CE)("div",vn,[(0,a.bF)(p,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),position:"left"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{style:{width:"300px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1))])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{bordered:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodeTraffic,(e=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:e,clickable:"",dense:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{dense:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.direction+"   "+e.json.mnemonic),1)])),_:2},1024)])),_:2},1024)),[[g]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}};var fn=l(3999),yn=l(124),kn=l(3796),hn=l(9626);const _n=gn,Nn=_n;h()(gn,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QList:fn.A,QItem:yn.A,QItemLabel:kn.A}),h()(gn,"directives",{ClosePopup:Ke.A,Ripple:hn.A});const qn="CbusErrorsDialog",xn={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],r=e,d=t,u=(0,a.EW)({get(){return r.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(u,(()=>{console.log(qn+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=()=>{l.methods.clear_cbus_errors()};return(e,t)=>{const r=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-space"),p=(0,a.g2)("q-icon"),v=(0,a.g2)("q-input"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-tr"),y=(0,a.g2)("q-table"),k=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1))])),_:1})])),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{title:"Nodes",rows:Object.values((0,o.R1)(l).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{top:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1)),(0,a.bF)(b),(0,a.bF)(v,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)((()=>[(0,a.bF)(p,{name:"search"})])),_:1},8,["modelValue"]),(0,a.bF)(b),(0,a.bF)(r,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})])),body:(0,a.k6)((e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(g,{key:"id",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.id),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"type",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Error",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Error),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"Message",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.Message),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"node",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.node),1)])),_:2},1032,["props"]),(0,a.bF)(g,{key:"count",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Vn=xn,Fn=Vn;h()(xn,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTable:et.A,QSpace:be.A,QInput:M.A,QIcon:ml.A,QTr:tt.A,QTd:lt.A}),h()(xn,"directives",{ClosePopup:Ke.A});const wn="ImportFunctions",Cn=l(3011),An=l(6138);function En(e,t,l){var a;try{a=Cn.xml2js(e,{compact:!0})}catch(e){throw console.log(wn+": Import Node: convert.xml2js: "+e),"convert.xml2js: "+e}try{a.MergModuleDataSet.userNodes.forEach((e=>{Sn(t,parseInt(e.nodeNum._text),e.nodeName._text,l),Wn(t,parseInt(e.nodeNum._text),e.moduleName._text,l)}))}catch(e){console.log(wn+": Import Node: userNodes "+e)}try{a.MergModuleDataSet.userEvents.forEach((e=>{0!=e.eventValue._text&&In(t,e.eventNode._text,e.eventValue._text,e.eventName._text,l)}))}catch(e){console.log(wn+": Import Node: userEvents "+e)}}function Rn(e,t,l){console.log(wn+": importSPREADSHEET: file size "+e.byteLength);let a={},o={};try{const n=An.read(e,{type:"binary"});if(void 0==n.Workbook)throw new Error("Workbook undefined");for(let e=0;e<n.SheetNames.length;e++){if("SHORT_EVENTS"==n.SheetNames[e].toUpperCase()){a=An.utils.sheet_to_json(n.Sheets[n.SheetNames[e]]),console.log(wn+"importSPREADSHEET: workbook number of Short Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(wn+`importSPREADSHEET: workbook events: \n                ${a[e].eventName}  \n                ${a[e].eventNumber}`),In(t,0,a[e].eventNumber,a[e].eventName,l),Qn(t,0,a[e].eventNumber,a[e].eventGroup,l)}if("LONG_EVENTS"==n.SheetNames[e].toUpperCase()){a=An.utils.sheet_to_json(n.Sheets[n.SheetNames[e]]),console.log(wn+"importSPREADSHEET: workbook number of Long Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(wn+`importSPREADSHEET: workbook events: \n                ${a[e].eventName}  \n                ${a[e].eventNodeNumber}:${a[e].eventNumber}`),In(t,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventName,l),Qn(t,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventGroup,l)}if("NODES"==n.SheetNames[e].toUpperCase()){o=An.utils.sheet_to_json(n.Sheets[n.SheetNames[e]]),console.log(wn+"importSPREADSHEET: workbook number of Nodes imported: "+o.length);for(let e=0;e<o.length;e++)void 0!=o[e].nodeNumber&&(console.log(wn+`importSPREADSHEET: workbook Nodes: ${o[e].nodeName} ${o[e].nodeNumber}`),Sn(t,o[e].nodeNumber,o[e].nodeName,l),Ln(t,o[e].nodeNumber,o[e].nodeGroup,l),Wn(t,o[e].nodeNumber,o[e].moduleName,l))}}}catch(e){throw console.log(wn+": importSPREADSHEET "+e),e}}function In(e,t,l,a,o){if(l>0){let n=(0,r.xT)(t,4)+(0,r.xT)(l,4);void 0==e.state.layout.eventDetails[n]?(e.setters.event_name(n,a),console.log("new event: "+n+" addEventName: "+a)):void 0==e.state.layout.eventDetails[n].name||e.state.layout.eventDetails[n].name.length<1?(e.setters.event_name(n,a),console.log("Event: "+n+": addEventName: "+a+" updated")):e.state.layout.eventDetails[n].name==a?console.log("Event: "+n+": addEventName: "+a+" match"):"overwrite"==o?(e.setters.event_name(n,a),console.log("Event "+n+": addEventName: "+a+" overwrite")):console.log("Event "+n+": addEventName: "+a+" retain")}}function Qn(e,t,l,a,o){if(l>0){let n=(0,r.xT)(t,4)+(0,r.xT)(l,4);void 0==e.state.layout.eventDetails[n]?(e.setters.event_group(n,a),console.log("new event: "+n+" addEventGroup: "+a)):void 0==e.state.layout.eventDetails[n].group||e.state.layout.eventDetails[n].group.length<1?(e.setters.event_group(n,a),console.log("Event: "+n+": addEventGroup: "+a+" updated")):e.state.layout.eventDetails[n].group==a?console.log("Event: "+n+": addEventGroup: "+a+" match"):"overwrite"==o?(e.setters.event_group(n,a),console.log("Event "+n+": addEventGroup: "+a+" overwrite")):console.log("Event "+n+": addEventGroup: "+a+" retain")}}function Sn(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_name(t,l),console.log("new node: "+t+": NodeName: "+l)):void 0==e.state.layout.nodeDetails[t].name||e.state.layout.nodeDetails[t].name.length<1?(e.setters.node_name(t,l),console.log("node "+t+": addNodeName: "+l+" updated")):e.state.layout.nodeDetails[t].name==l?console.log("node "+t+": addNodeName: "+l+" match"):"overwrite"==a?(console.log("node "+t+": addNodeName: "+l+" no match - overwrite"),e.setters.node_name(t,l)):console.log("node "+t+": addNodeName: "+l+" no match - retain"))}function Ln(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_group(t,l),console.log("new node: "+t+": nodeGroup: "+l)):void 0==e.state.layout.nodeDetails[t].group||e.state.layout.nodeDetails[t].group.length<1?(e.setters.node_group(t,l),console.log("node "+t+": nodeGroup: "+l+" updated")):e.state.layout.nodeDetails[t].group==l?console.log("node "+t+": nodeGroup: "+l+" match"):"overwrite"==a?(console.log("node "+t+": nodeGroup: "+l+" no match - overwrite"),e.setters.node_group(t,l)):console.log("node "+t+": nodeGroup: "+l+" no match - retain"))}function Wn(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_moduleName(t,l),console.log("new node: "+t+": moduleName: "+l)):void 0==e.state.layout.nodeDetails[t].moduleName||e.state.layout.nodeDetails[t].moduleName.length<1?(e.setters.node_moduleName(t,l),console.log("node "+t+": moduleName: "+l+" updated")):e.state.layout.nodeDetails[t].moduleName==l?console.log("node "+t+": moduleName: "+l+" match"):"overwrite"==a?(console.log("node "+t+": moduleName: "+l+" no match - overwrite"),e.setters.node_moduleName(t,l)):console.log("node "+t+": moduleName: "+l+" no match - retain"))}const Tn="ExportDialog",Dn={__name:"ExportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const n=l(6138),i=(0,a.WQ)("store"),r=(0,o.KR)(),d=((0,o.KR)("retain"),e),u=t,c=(0,a.EW)({get(){return d.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,(()=>{c.value&&(r.value=void 0)})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const m=async e=>{console.log(Tn+": clickExport");let t=i.state.layout.eventDetails,l=[],a=[];for(let e of Object.keys(t).sort())if("00000000"!=e){let o=[],n=parseInt(e.slice(0,4),16);o["eventName"]=t[e].name?t[e].name:"",o["eventNodeNumber"]=n,o["eventNumber"]=parseInt(e.slice(4,8),16),o["eventGroup"]=t[e].group,0==n?(delete o.eventNodeNumber,a.push(o)):l.push(o)}let o=i.state.layout.nodeDetails,s=[];for(let e of Object.keys(o).sort()){let t=[];t["nodeName"]=o[e].name?o[e].name:"",t["moduleName"]=o[e].moduleName,t["nodeNumber"]=parseInt(e),t["nodeGroup"]=o[e].group,s.push(t)}const r=n.utils.json_to_sheet(l),d=n.utils.json_to_sheet(a),u=l.reduce(((e,t)=>Math.max(e,t.eventName.length)),20);r["!cols"]=[{wch:u+5},{wch:20},{wch:20},{wch:20}];const c=a.reduce(((e,t)=>Math.max(e,t.eventName.length)),20);d["!cols"]=[{wch:c+5},{wch:20},{wch:20},{wch:20}];const m=n.utils.json_to_sheet(s),b=s.reduce(((e,t)=>Math.max(e,t.nodeName.length)),20);m["!cols"]=[{wch:b+5},{wch:20},{wch:20},{wch:20}];const p=n.utils.book_new();n.utils.book_append_sheet(p,m,"Nodes"),n.utils.book_append_sheet(p,r,"Long_Events"),n.utils.book_append_sheet(p,d,"Short_Events");const v=i.state.layout.layoutDetails.title+" export.ods";n.writeFile(p,v,{bookType:"ods",compression:!0,cellStyles:!0})};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),n=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card-actions"),i=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])])),default:(0,a.k6)((()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Export ",-1))])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text-subtitle2"}," The data exported includes node & event names ",-1)]))),_:1}),(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{color:"positive",label:"Export",onClick:t[0]||(t[0]=e=>m())},null,512),[[d,2]])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Bn=Dn,Kn=Bn;h()(Dn,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QCardActions:Be.A}),h()(Dn,"directives",{ClosePopup:Ke.A});const Un="JsonDialog",On={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,o.KR)("nodes"),i=e,r=t,d=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});return(0,a.wB)(d,(()=>{console.log(Un+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const i=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab"),m=(0,a.g2)("q-tabs"),b=(0,a.g2)("q-tab-panel"),p=(0,a.g2)("q-tab-panels"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1))])),_:1})])),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,a.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.bF)(c,{name:"layout",label:"Layout"}),(0,a.bF)(c,{name:"layouts",label:"Layouts"}),(0,a.bF)(c,{name:"nodes",label:"Nodes"}),(0,a.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.bF)(c,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,a.bF)(c,{name:"restoredData",label:"RestoredData"}),(0,a.bF)(c,{name:"server",label:"Server"}),(0,a.bF)(c,{name:"serverStatus",label:"server Status"}),(0,a.bF)(c,{name:"traffic",label:"Traffic"})])),_:1},8,["modelValue"]),(0,a.bF)(p,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),animated:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{name:"busEvents"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Events",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.busEvents)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"cbusErrors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"},"Cbus Errors",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.cbus_errors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layout"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[6]||(t[6]=(0,a.Lk)("div",{class:"text-h6"},"Layout",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.layout)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"layouts"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"},"Layouts",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.layouts_list)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptorList"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},"Descriptor List",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodeDescriptorList)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodeDescriptors"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"},"Node Descriptors",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodeDescriptors)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"nodes"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"},"Nodes",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.nodes)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"restoredData"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[11]||(t[11]=(0,a.Lk)("div",{class:"text-h6"},"restoredData",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.restoredData)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"server"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[12]||(t[12]=(0,a.Lk)("div",{class:"text-h6"},"Server",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.server)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"serverStatus"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-h6"},"Server Status",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(l).state.serverStatus)+"\n              ",1)])),_:1})])),_:1}),(0,a.bF)(b,{name:"traffic"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)((()=>[t[14]||(t[14]=(0,a.Lk)("div",{class:"text-h6"},"Node Traffic",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(l).state.nodeTraffic)+"\n              ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Pn=On,Xn=Pn;h()(On,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QTabs:he.A,QTab:_e.A,QTabPanels:Ne.A,QTabPanel:qe.A}),h()(On,"directives",{ClosePopup:Ke.A});var zn=l(4083),Mn=l.n(zn),jn=l(7123),Gn=l.n(jn),Hn=l(8626),$n=l.n(Hn);const Jn="ImportDialog",Yn={__name:"ImportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),n=(0,o.KR)(),i=(0,o.KR)("SPREADSHEET"),r=(0,o.KR)("retain"),d=(0,o.KR)(!1),u=(0,o.KR)(!1),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{b.value&&(n.value=void 0,i.value="SPREADSHEET",d.value=!1,u.value=!1)})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=()=>{console.log(Jn+": clickFCUInfo"),d.value=!0},v=()=>{console.log(Jn+": clickImport "+n.value.name);let e=new FileReader;try{"FCU"==i.value?(e.readAsText(n.value),e.onload=function(){En(e.result,l,r.value),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name,"successful","info")}):"SPREADSHEET"==i.value&&(e.readAsArrayBuffer(n.value),e.onload=function(){Rn(e.result,l,r.value),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name,"successful","info")})}catch(e){console.log(Jn+": clickImport: "+e),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name+" failed",e,"warning")}},g=()=>{console.log(Jn+": clickSheetInfo"),u.value=!0};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-radio"),m=(0,a.g2)("q-file"),f=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),k=(0,a.g2)("q-dialog"),h=(0,a.g2)("q-img"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(k,{modelValue:b.value,"onUpdate:modelValue":t[8]||(t[8]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[t[11]||(t[11]=(0,a.Lk)("div",{class:"text-h6"}," Import ",-1))])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text-h6"}," This allows the import of names, groups & modules for Events & Nodes from external files ",-1),(0,a.Lk)("div",{class:"text-h6"},"The data imported depends on the file type",-1),(0,a.Lk)("div",{class:"text-h6"},"Click the info button by each file type for more details",-1)]))),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),val:"SPREADSHEET",label:"Spreadsheet import"},null,8,["modelValue"]),t[13]||(t[13]=(0,a.eW)("     ")),(0,a.bF)(l,{dense:"",color:"primary",size:"sm",label:"info",onClick:t[1]||(t[1]=e=>g()),"no-caps":""})])),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),val:"FCU",label:"FCU configuration file import"},null,8,["modelValue"]),t[14]||(t[14]=(0,a.eW)("     ")),(0,a.bF)(l,{dense:"",color:"primary",size:"sm",label:"info",onClick:t[3]||(t[3]=e=>p()),"no-caps":""})])),_:1}),(0,a.bF)(m,{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value=e),label:"Pick one file",filled:"",style:{"max-width":"400px"}},null,8,["modelValue"]),(0,a.bF)(s,null,{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.Lk)("div",{class:"text-subtitle2"}," By default, if there is any existing data for an element being imported, this is retained, and the imported data for that element is ignored ",-1),(0,a.Lk)("div",{class:"text-subtitle2"},' However, selecting "overwrite" will result in the import being used instead ',-1)]))),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=e=>r.value=e),val:"retain",label:"Retain any existing data"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),val:"overwrite",label:"Overwrite existing data"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s),(0,a.bF)(f,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{color:"positive",label:"IMPORT",disabled:!n.value,onClick:t[7]||(t[7]=e=>v())},null,8,["disabled"]),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(k,{modelValue:u.value,"onUpdate:modelValue":t[9]||(t[9]=e=>u.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-h6"}," Import spreadsheet information ",-1))])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.Lk)("div",{class:"text-subtitle2"}," The import will accept most spreadsheet types, such as xls, xlsx & ods, but NOT csv (which strictly isn't a spreadsheet format) ",-1)]))),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for long events is expected to be on a sheet named 'Long_Events' ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:Mn(),"spinner-color":"white",style:{width:"500px"}})])])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[19]||(t[19]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for short events is expected to be on a sheet named 'Short_Events', and doesn't need the 'EventNodeNumber' column ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:Gn(),"spinner-color":"white",style:{width:"500px"}})])])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[t[20]||(t[20]=(0,a.Lk)("div",{class:"text-subtitle2"}," The node information is expected to be on a sheet named 'Nodes' ",-1)),t[21]||(t[21]=(0,a.Lk)("div",{class:"text-subtitle2"}," 'moduleName' is optional, and will be updated when the node connects anyway, but useful if the node isn't connected ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:$n(),"spinner-color":"white",style:{width:"500px"}})])])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.Lk)("div",{class:"text-subtitle2"}," NOTE: the column names are case sensitive and have no spaces, but the order of the columns doesn't matter, as it looks for columns by name, not position ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," Additional columns with different headers are ignored, as are other sheets with different names ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(k,{modelValue:d.value,"onUpdate:modelValue":t[10]||(t[10]=e=>d.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,a.k6)((()=>[t[23]||(t[23]=(0,a.Lk)("div",{class:"text-h6"}," Import FCU configuration information ",-1))])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>t[24]||(t[24]=[(0,a.Lk)("div",{class:"text-subtitle2"}," FCU confiduration files contain names for events, nodes and modules, but doesn't support groups ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," FCU confiduration files are xml, and the elements used are as follows ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For events, the elements used are: eventNode, eventValue and eventName ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For nodes, the elements used are: nodeNum, nodeName and moduleName ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var Zn=l(2665);const es=Yn,ts=es;h()(Yn,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QRadio:Nt.A,QFile:Me.A,QCardActions:Be.A,QImg:Zn.A}),h()(Yn,"directives",{ClosePopup:Ke.A});const ls={class:"text-h6"},as={class:"text-h6"},os={class:"text-h6"},ns="ModifiedGridConnectDialog",ss={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,s=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.wB)(s,(()=>{console.log(ns+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(t,l)=>{const o=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])])),default:(0,a.k6)((()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Bus message ",-1))])),_:1}),(0,a.bF)(r,{class:"fit"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ls,"direction: "+(0,n.v_)(e.busMessage.direction),1),(0,a.Lk)("div",as," message: "+(0,n.v_)(e.busMessage.json.text),1),(0,a.Lk)("div",os," encoded: "+(0,n.v_)(e.busMessage.json.encoded),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},is=ss,rs=is;h()(ss,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A}),h()(ss,"directives",{ClosePopup:Ke.A});const ds={class:"text-h6"},us="NewNodeDialog",cs={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0},moduleName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(""),d=(0,o.KR)(""),u=(0,o.KR)(0),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(us+": WATCH model"),console.log(us+": WATCH model: previousNodeNumber "+c.previousNodeNumber),u.value=p(),d.value=""})),(0,a.wB)(u,(()=>{console.log(us+": WATCH model: newNodeNumber "+u.value);try{u.value in i.state.layout.nodeDetails?(d.value=i.state.layout.nodeDetails[u.value].name,r.value=i.state.layout.nodeDetails[u.value].group):(d.value="",r.value="")}catch(e){console.log(us+": WATCH newNodeNumber "+e)}}));const p=()=>{var e=0,t=256;i.state.layout.layoutDetails.baseNodeNumber&&(t=i.state.layout.layoutDetails.baseNodeNumber);for(var l=Object.keys(i.state.nodes),a=t;a<65535;a++)if(!l.includes(a.toString())){console.log(us+" first free node number: "+a),e=a;break}return e},v=e=>{var t=Object.keys(i.state.nodes);return t.includes(e)?(console.log(us+" node number in use: "+e),!1):(console.log(us+" free node number: "+e),!0)};(0,a.$u)((()=>{}));const g=()=>{if(console.log(us+" new node number: "+u.value),console.log(us+" new node name: "+d.value),console.log(us+" new group name: "+r.value),v(u.value))i.methods.set_node_number(u.value),i.setters.node_name(u.value,d.value),b.value=!1;else{l.notify({message:"node number is already assigned - still proceed?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.set_node_number(u.value),i.setters.node_name(u.value,d.value),i.setters.node_group(u.value,r.value),b.value=!1}},{label:"NO",color:"white",handler:()=>{}}]})}};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"}," New node detected ",-1))])),_:1}),(0,a.bF)(i,{class:"q-pa-md",color:"orange-1"},{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Accept the first free node number below "),(0,a.Lk)("br"),(0,a.eW)(" or enter a new one ")],-1)),(0,a.bF)(s,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),autofocus:""},null,8,["modelValue"]),(0,a.Lk)("div",ds,[(0,a.eW)(" This node was previously "+(0,n.v_)(c.previousNodeNumber),1),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" The module type is CAN"+(0,n.v_)(c.moduleName),1),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1))])])),_:1}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)((()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)((()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"}," Enter a group for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{flat:"",label:"Accept",onClick:t[3]||(t[3]=e=>g())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ms=cs,bs=ms;h()(cs,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QInput:M.A,QCardActions:Be.A}),h()(cs,"directives",{ClosePopup:Ke.A});const ps={class:"q-pa-md row"},vs="AddLayoutDialog",gs={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=(0,o.KR)(""),s=((0,o.KR)([]),e),i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,(()=>{console.log(vs+": WATCH model")}));const u=(0,a.EW)((()=>Object.values(l.state.layouts_list)));(0,a.wB)(u,(()=>{})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const c=async()=>{console.log(vs+": Change layout"),l.methods.change_layout(n.value),l.methods.request_layout_list(),n.value="",await(0,r.yy)(50),d.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," Add Layout ",-1))])),_:1}),(0,a.Lk)("div",ps,[(0,a.bF)(r,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Add new layout",-1)),(0,a.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),t[5]||(t[5]=(0,a.Lk)("p",null,"enter a name for a new layout",-1)),(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},fs=gs,ys=fs;h()(gs,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QCardSection:w.A,QInput:M.A}),h()(gs,"directives",{ClosePopup:Ke.A});const ks={class:"q-pa-xs row"},hs={class:"q-pa-xs row"},_s={class:"q-pa-xs row"},Ns={class:"q-pa-xs row"},qs="EditConnectionDetailsDialog",xs={__name:"EditConnectionDetailsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=(0,o.KR)(""),s=(0,o.KR)(""),i=(0,o.KR)(""),d=(0,o.KR)(""),u=(0,o.KR)(["Auto","SerialPort","Network"]),c=e,m=t,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,(()=>{console.log(qs+": WATCH model"),n.value=l.state.layout.connectionDetails.mode,s.value=l.state.layout.connectionDetails.serialPort,i.value=l.state.layout.connectionDetails.host,d.value=l.state.layout.connectionDetails.hostPort})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const p=async()=>{console.log(qs+": clickSave"),l.state.layout.connectionDetails.mode=n.value,"SerialPort"==n.value?l.state.layout.connectionDetails.serialPort=s.value:l.state.layout.connectionDetails.serialPort="","Network"==n.value?(l.state.layout.connectionDetails.host=i.value,l.state.layout.connectionDetails.hostPort=d.value):(l.state.layout.connectionDetails.host="",l.state.layout.connectionDetails.hostPort=""),l.methods.update_layout(),await(0,r.yy)(50),b.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),r=(0,a.g2)("q-select"),c=(0,a.g2)("q-card"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{style:{"min-width":"650px",height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[t[6]||(t[6]=(0,a.Lk)("div",{class:"text-h6"}," Edit connection details ",-1))])),_:1}),(0,a.Lk)("div",ks,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(r,{autofocus:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),options:u.value,label:"Mode"},null,8,["modelValue","options"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)(" Auto will connect to the first CANUSB or CANUSB4 it finds "),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" SerialPort will connect to the serial port entered below"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Network will use the address & port entered below "),(0,a.Lk)("br",null,null,-1)]))),_:1})]),(0,a.Lk)("div",hs,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),label:"serialPort",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)(" Forces MMC to use this specific serial port"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Windows example: COM3"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Linux example: ttyUSB2"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'SerialPort' not selected"),(0,a.Lk)("br",null,null,-1)]))),_:1})]),(0,a.Lk)("div",_s,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),label:"Host",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)(" Name or IP address of machine to use for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'Network' not selected ")]))),_:1})]),(0,a.Lk)("div",Ns,[(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"200px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),label:"Host Port",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,a.bF)(c,{flat:"",class:"q-pa-xs",style:{width:"400px"}},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)(" Port number of machine for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'Network' not selected ")]))),_:1})]),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(l,{color:"primary",label:"save",onClick:t[4]||(t[4]=e=>p()),"no-caps":""})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Vs=xs,Fs=Vs;h()(xs,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QSelect:oe.A,QInput:M.A,QCardActions:Be.A}),h()(xs,"directives",{ClosePopup:Ke.A});const ws={__name:"StartupInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Startup Dialog ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Startup dialog is intended to allow selection of layout and connection method ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," To allow operation with more than one model railway layout, data is stored against a named layout ",-1),(0,a.Lk)("div",{class:"text_body1"}," Layouts can be selected, added or deleted at this point, and each layout also retains it's own connection method ",-1),(0,a.Lk)("div",{class:"text_body1"}," A 'default' layout is created automatically, but it's recommended to add a named layout ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The default method of connecting is 'Auto', which will cause MMC to open a connection using the first CANUSB or CANUSB4 it finds, and no further configuration is needed if this is the required connection ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The 'SerialPort' option will force the connection onto a specific serial port, which may be required if there is more than one CANUSB, or another device than accepts a serial connection ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Network option allows a TCP/IP connection to another service, like cbusServer or CANether ",-1),(0,a.Lk)("div",{class:"text_body1"}," The 'Host' parameter allows connection to either a remoted connection, or the same machine the MMC is running on - Computer names or IP addresses can be entered for the Host setting ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.eW)(" There is a useful Technical Bulletin on the CANether that explains network connections in more detail "),(0,a.Lk)("a",{href:"https://www.merg.org.uk/merg_wiki/lib/exe/fetch.php?media=cbus:cbus:cbusmodules:canether:canether_connection_and_configuration_technical_bulletin_draft_1.pdf"},"link")],-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The connection method can be configured using the EDIT button for the selected layout, and each layout will retain it's own connection details ",-1),(0,a.Lk)("div",{class:"text_body1"}," The selected layout is saved automatically when changes are made ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," When 'Auto' or 'SerialPort' modes are selected, an 'embedded' cbusServer is automatically started on port 5550, which can be used by other applications at the same time, such as FCU ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," With all connection options, 'modified Grid Connect' is the data format used to transfer messages to and from the modules ",-1),(0,a.Lk)("div",{class:"text_body1"}," Grid Connect is an established byte orientated data format used to encode the bit orientated CAN bus data format, such that it can be transmitted over stream connections, like serial or TCP/IP ",-1),(0,a.Lk)("div",{class:"text_body1"}," 'modified Grid Connect' is a variant of the Grid Connect format that has small modifications for use with CBUS devices ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Cs=ws,As=Cs;h()(ws,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(ws,"directives",{ClosePopup:Ke.A});const Es={class:"q-pa-md row"},Rs={class:"text-h6"},Is={class:"bg-light-blue-1 text-h6"},Qs={class:"text-h6"},Ss="StartupDialog",Ls={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)("<not selected>"),u=(0,o.KR)([]),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)([]),f=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],y=e,k=t,h=(0,a.EW)({get(){return y.modelValue},set(e){k("update:modelValue",e)}});(0,a.wB)(h,(()=>{x()}));const _=(0,a.EW)((()=>Object.values(i.state.layout)));(0,a.wB)(_,(()=>{q()}));const N=(0,a.EW)((()=>Object.values(i.state.layouts_list)));(0,a.wB)(N,(()=>{x()}));const q=()=>{try{void 0==i.state.layout.connectionDetails&&(i.state.layout.connectionDetails={},i.state.layout.connectionDetails["mode"]="Auto",i.state.layout.connectionDetails["serialPort"]="",i.state.layout.connectionDetails["host"]="",i.state.layout.connectionDetails["hostPort"]="",i.methods.update_layout())}catch(e){}g.value=[],g.value.push("Mode: "+i.state.layout.connectionDetails.mode),"SerialPort"==i.state.layout.connectionDetails.mode&&g.value.push("serialPort: "+i.state.layout.connectionDetails.serialPort),"Network"==i.state.layout.connectionDetails.mode&&(g.value.push("Host: "+i.state.layout.connectionDetails.host),g.value.push("Host Port: "+i.state.layout.connectionDetails.hostPort)),v.value=!0},x=()=>{u.value=[],N.value.forEach((e=>{u.value.push({layout:e})}))};(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const V=async()=>{console.log(Ss+": clickAddNewLayout"),c.value=!0},F=async e=>{console.log(Ss+": clickDeleteLayout ",e);l.notify({message:"Are you sure you want to delete layout "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_layout(e),await(0,r.yy)(50),i.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},w=async()=>{console.log(Ss+": clickEditConnectionDetails"),m.value=!0},C=async()=>{console.log(Ss+": clickInfo"),b.value=!0},A=()=>{console.log(Ss+": clickExit");l.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.STOP_SERVER(),await(0,r.yy)(50)}},{label:"NO",color:"white",handler:()=>{}}]})},E=async()=>{console.log(Ss+": clickProceed"),i.state.layout!={}&&(i.methods.start_connection(i.state.layout.connectionDetails),await(0,r.yy)(500),i.state.inStartup=!1,h.value=!1)},R=async e=>{console.log(Ss+": clickLayouts on ",e),d.value=e,i.methods.change_layout(d.value),p.value=(0,o.KR)(!0)};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-space"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-td"),v=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-card"),_=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(N,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>C())}),(0,a.bF)(s),(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Exit",onClick:t[1]||(t[1]=e=>A()),"no-caps":""})])),default:(0,a.k6)((()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"}," Startup ",-1))])),_:1}),(0,a.Lk)("div",Es,[(0,a.bF)(k,{inline:"",class:"q-pa-xs",flat:"",style:{width:"380px"}},{default:(0,a.k6)((()=>[t[12]||(t[12]=(0,a.Lk)("div",{class:"text-h6"},"Select Layout",-1)),(0,a.bF)(y,{style:{"max-height":"60vh"},class:"scroll q-ma-xs q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"startup-table",dense:"",rows:u.value,columns:f,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)((e=>[(0,a.bF)(r,{key:"layout",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(l,{flat:"",color:"primary",label:e.value,onClick:t=>R(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"]),(0,a.bF)(r,null,{default:(0,a.k6)((()=>[(0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:t=>F(e.value),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:1},8,["rows"])])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",Rs,[t[11]||(t[11]=(0,a.eW)(" click to add a new layout   ")),(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[2]||(t[2]=e=>V())})])])),_:1})])),_:1}),(0,a.bF)(k,{flat:"",inline:"",class:"q-pa-xs",style:{width:"380px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-h6"}," Selected layout ",-1)),(0,a.Lk)("div",Is,(0,n.v_)(d.value),1)])),_:1}),(0,a.bF)(y,{style:{width:"350px",height:"300px"}},{default:(0,a.k6)((()=>[t[15]||(t[15]=(0,a.Lk)("div",{class:"text-h6"}," Connection details ",-1)),(0,a.bF)(k,{flat:"",style:{height:"100px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},(0,n.v_)(g.value[t]),1)))),128))])),_:1}),t[16]||(t[16]=(0,a.Lk)("div",{class:"text-body"},[(0,a.eW)(" The default 'Auto' setting will connect to the first CANUSB or CANUSB4 it finds"),(0,a.Lk)("br"),(0,a.eW)(" Please click INFO for details on the other options"),(0,a.Lk)("br")],-1)),t[17]||(t[17]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",Qs,[(0,a.bF)(l,{color:"positive",label:"Edit",onClick:t[3]||(t[3]=e=>w())}),t[14]||(t[14]=(0,a.eW)("   Edit connection details "))])])),_:1})])),_:1}),(0,a.bF)(y,{class:"q-pa-xs"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{align:"center"},{default:(0,a.k6)((()=>[p.value?((0,a.uX)(),(0,a.Wv)(l,{key:0,color:"primary",label:"Proceed",onClick:t[4]||(t[4]=e=>E())})):(0,a.Q3)("",!0),p.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:1,disabled:"",color:"primary",label:"Proceed",onClick:t[5]||(t[5]=e=>E())}))])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ys),{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Fs),{modelValue:m.value,"onUpdate:modelValue":t[8]||(t[8]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(As),{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Ws=Ls,Ts=Ws;h()(Ls,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QSpace:be.A,QCardSection:w.A,QTable:et.A,QTd:lt.A,QCardActions:Be.A});const Ds=JSON.parse('{"name":"MMC-CLIENT","version":"0.8.1","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"See package.json => scripts for available tests.\\" && exit 0","test:unit:ui":"majestic","test:unit":"jest","test:unit:ci":"jest --ci","test:unit:coverage":"jest --coverage","test:unit:watch":"jest --watch","test:unit:watchAll":"jest --watchAll"},"dependencies":{"@quasar/extras":"^1.0.0","core-js":"^3.6.5","json-logic-js":"^2.0.5","quasar":"^2.0.0","sass":"^1.69.5","sheetjs":"^2.0.0","socket.io-client":"^4.4.1","stream":"^0.0.3","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0","xlsx":"^0.18.5","xml-js":"^1.6.11"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","@quasar/quasar-app-extension-testing-unit-jest":"^3.0.3","@vue/test-utils":"^2.4.6","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-jest":"^28.8.3","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","jest":"^29.7.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}');var Bs=l(8652);const Ks="SystemDialog",Us={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,(()=>{console.log(Ks+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const d=()=>{(0,Bs.A)(l.state.serverStatus.appStorageDirectory).then((()=>{})).catch((()=>{}))},u=()=>{(0,Bs.A)(l.state.serverStatus.systemDirectory).then((()=>{})).catch((()=>{}))},c=()=>{(0,Bs.A)(l.state.serverStatus.currentUserDirectory).then((()=>{})).catch((()=>{}))};return(e,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-checkbox"),v=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{style:{"min-width":"900px"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,a.k6)((()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"}," System ",-1))])),_:1}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},"Backend",-1)),(0,a.Lk)("div",null,"Backend App version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.App)),1),(0,a.Lk)("div",null,"API version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.API)),1),(0,a.Lk)("div",null,"node version "+(0,n.v_)(JSON.stringify((0,o.R1)(l).state.version.node)),1)])),_:1}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"},"Frontend",-1)),(0,a.Lk)("div",null,"Frontend App version "+(0,n.v_)((0,o.R1)(Ds).version),1),(0,a.Lk)("div",null,"Quasar framework "+(0,n.v_)(e.$q.version),1),(0,a.Lk)("div",null,"Vue version "+(0,n.v_)(a.rE))])),_:1}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[t[10]||(t[10]=(0,a.Lk)("span",{class:"text-h6"},"app storage directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(l).state.serverStatus.appStorageDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[0]||(t[0]=e=>d()),"no-caps":""})]),(0,a.Lk)("div",null,[t[11]||(t[11]=(0,a.Lk)("span",{class:"text-h6"},"current user directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(l).state.serverStatus.currentUserDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})]),(0,a.Lk)("div",null,[t[12]||(t[12]=(0,a.Lk)("span",{class:"text-h6"},"system directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(l).state.serverStatus.systemDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[2]||(t[2]=e=>u()),"no-caps":""})])])),_:1}),(0,a.bo)((0,a.bF)(m,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{label:"Base Node Number",outlined:"",modelValue:(0,o.R1)(l).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.R1)(l).state.layout.layoutDetails.baseNodeNumber=e),onChange:t[4]||(t[4]=e=>(0,o.R1)(l).methods.update_layout())},null,8,["modelValue"])])),_:1},512),[[Ll.aG,(0,o.R1)(l).state.advanced]]),(0,a.bF)(m,{class:"q-pa-md",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:(0,o.R1)(l).state.develop,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,o.R1)(l).state.develop=e),label:"Develop"},null,8,["modelValue"]),t[13]||(t[13]=(0,a.eW)("    Enables development features "))])),_:1}),(0,a.bF)(v,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},Os=Us,Ps=Os;h()(Us,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A,QInput:M.A,QCheckbox:y.A,QCardActions:Be.A}),h()(Us,"directives",{ClosePopup:Ke.A});const Xs={key:0,class:"text-red"},zs="DialogExampleCompositionAPI",Ms={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=(0,o.KR)(!1),n=e,s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,(()=>{console.log(zs+": WATCH model")})),(0,a.KC)((()=>{})),(0,a.sV)((()=>{}));const r=()=>{l.value=!l.value};return(e,t)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),u=(0,a.g2)("q-card-actions"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:(0,a.k6)((()=>[(0,a.bF)(d,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,a.k6)((()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))])),_:1})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",color:"positive",label:"example button"}),(0,a.bF)(o,{flat:"",color:"negative",label:"example button"})])),_:1}),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64)),l.value?((0,a.uX)(),(0,a.CE)("div",Xs,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,(e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64))])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text-h6"}," Example q-card ",-1)]))),_:1})])),_:1}),(0,a.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{flat:"",label:"toggle show more",onClick:t[0]||(t[0]=e=>r())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},js=Ms,Gs=js;h()(Ms,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A,QCardActions:Be.A}),h()(Ms,"directives",{ClosePopup:Ke.A});const Hs={__name:"EventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events View ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Events view is intended to allow management of all the events on the layout ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Bus Events View' ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," The Events view shows events that have been read from nodes, captured from the CAN Bus, or entered manually ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," This list of events is retained for the layout selected, so the known events for a particular layout will be restored at startup ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," For a new layout, use SCAN NODES to read the stored events from all the nodes to fill the list, and anytime a new node is added ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," There is only one entry for each event, irrespective of how many nodes produce that event ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, irrespective of which node sent it ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status is dependant on the event actually being captured from the bus, and if that event has not been sent, or the application has been restarted, the status will be 'unknown' ")],-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, for short events, the 'send ON/OFF' feature will use '0' as the Sending Node Number, so not linked to any particular node ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," An event can be created manually (add event) and will not be associated with any particular node until the 'teach' option is used ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.Lk)("div",{class:"text_body1"}," The toggle option allows viewing of just short events, or all events ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.Lk)("div",{class:"text_body1"}," The list is likely to be very large, as some nodes have large numbers of default events ",-1),(0,a.Lk)("div",{class:"text_body1"}," So it's recommended to use the search option to filter the list, and using group names for events ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},$s=Hs,Js=$s;h()(Hs,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(Hs,"directives",{ClosePopup:Ke.A});const Ys="GenericNodeList",Zs={__name:"GenericNodeList",props:{nodeNumberList:{type:Object,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,o.KR)(!1),d=(0,o.KR)(0),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(""),p=(0,o.KR)(""),v=e,g=(0,o.KR)([]),f=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Node Group",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],y=async()=>{g.value=[],v.nodeNumberList.forEach((e=>{var t=l.getters.node_name(e);g.value.push({nodeNumber:e,name:t,group:l.getters.node_group(e)})}))},k=async e=>{b.value="",m.value=!0;for(let e=0;e<1e3;e++){if(b.value.length>0)break;await(0,r.yy)(10)}m.value=!1},h=async e=>{p.value="",c.value=!0;for(let e=0;e<1e4;e++){if(p.value.length>0)break;await(0,r.yy)(10)}c.value=!1};(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{y()}));const _=e=>{console.log(Ys+": clickDelete");t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(v.eventIdentifier)+" from node "+l.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{console.log("removeEvent "+e+" "+v.eventIdentifier),l.methods.remove_event(e,v.eventIdentifier)}},{label:"NO",color:"white",handler:()=>{}}]})},N=async e=>{console.log(Ys+": clickVariables: node "+e+" eventIdentifer "+v.eventIdentifier),d.value=e,await k(e),await h(e),await u(l,v.nodeNumber),await l.methods.request_event_variables_by_identifier(e,v.eventIdentifier),i.value=!0};return(t,l)=>{const s=(0,a.g2)("q-td"),r=(0,a.g2)("q-btn"),u=(0,a.g2)("q-tr"),v=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(k,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"no-margin q-py-none-xs",style:{width:"750px"}},{default:(0,a.k6)((()=>[(0,a.bF)(v,{flat:"",bordered:"",dense:"",rows:g.value,columns:f,"row-key":"nodeNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)((e=>[(0,a.bF)(u,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{key:"nodeNumber",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"name",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(s,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>N(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>_(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,a.bF)((0,o.R1)(gt),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),nodeNumber:d.value,eventIdentifier:e.eventIdentifier},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(jt),{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),nodeNumber:d.value,onNodeParametersLoadingDialog:l[2]||(l[2]=e=>b.value=e)},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Jt),{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),nodeNumber:d.value,onNodeVariablesLoadingDialog:l[4]||(l[4]=e=>p.value=e)},null,8,["modelValue","nodeNumber"])],64)}}},ei=Zs,ti=ei;h()(Zs,"components",{QCard:F.A,QCardSection:w.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QBtn:me.A});const li={class:"text-h6"},ai="LinkedNodesDialog",oi={__name:"LinkedNodesDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,(()=>{}));const d=(0,o.KR)([]),u=(0,a.EW)((()=>l.state.nodes.updateTimestamp));(0,a.wB)(u,(()=>{s.eventIdentifier&&c()}));const c=async()=>{try{d.value=[];let e=Object.values(l.state.nodes);e.forEach((e=>{if(e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach((async t=>{t.eventIdentifier==s.eventIdentifier&&d.value.push(e.nodeNumber)}))}}))}catch(e){console.log(ai+": update__nodes_table "+e)}};return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(0,a.$u)((()=>{s.eventIdentifier&&c()})),(t,i)=>{const u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=e=>r.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",li," Nodes linked to event: "+(0,n.v_)((0,o.R1)(l).getters.event_name(s.eventIdentifier)),1)])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(ti),{nodeNumberList:d.value,eventIdentifier:e.eventIdentifier},null,8,["nodeNumberList","eventIdentifier"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ni=oi,si=ni;h()(oi,"components",{QDialog:Te.A,QCard:F.A,QCardSection:w.A,QBanner:De.A,QBtn:me.A}),h()(oi,"directives",{ClosePopup:Ke.A});const ii={style:{height:"45vh"}},ri={class:"text-h6",style:{"min-width":"250px"}},di={class:"q-pa-xs row"},ui={class:"text-body2"},ci="EventsView",mi={__name:"EventsView",setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,o.KR)(""),r={rowsPerPage:0};let d=(0,o.KR)([]);const u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(""),f=(0,o.KR)(),y=(0,o.KR)(0),k=(0,o.KR)(0),h=(0,o.KR)(!1),_=(0,o.KR)(0),N=(0,o.KR)({0:"view all events",1:"view short events only"}),q=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"linkedNodes",field:"linkedNodes",required:!0,label:"Linked Nodes",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],x=(0,a.EW)((()=>l.state.layout.updateTimestamp));(0,a.wB)(x,(()=>{w()}));const V=(0,a.EW)((()=>l.state.nodes.updateTimestamp));(0,a.wB)(V,(()=>{w()}));const F=(0,a.EW)((()=>Object.values(l.state.busEvents)));(0,a.wB)(F,(()=>{w()}));const w=()=>{let e=[],t=l.state.layout.eventDetails;for(let o of Object.keys(t).sort()){var a=parseInt(o.substring(0,4),16);if(void 0==l.state.event_view_status[o]&&(l.state.event_view_status[o]="unknown"),1==_.value&&a>0);else{let n={};n["eventIdentifier"]=o,n["nodeNumber"]=a,n["eventNumber"]=parseInt(o.slice(4,8),16),n["type"]=0==a?"short":"long",n["name"]=l.getters.event_name(o),n["colour"]=t[o].colour,n["group"]=t[o].group,n["status"]=l.state.event_view_status[o],n["linkedNodeCount"]=A(o),e.push(n)}}d.value=e},C=e=>e in l.state.layout.eventDetails?l.state.layout.eventDetails[e].colour:"blue",A=e=>{var t=0;let a=Object.keys(l.state.nodes);try{a.forEach((a=>{e in l.state.nodes[a].storedEventsNI&&t++}))}catch{}return t};l.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{var t=e.json.eventIdentifier,a=e.json.opCode,o="unknown";90!=a&&98!=a||(console.log(ci+": BUS_TRAFFIC_EVENT : ON event "+t),o="on"),91!=a&&99!=a||(console.log(ci+": BUS_TRAFFIC_EVENT : OFF event "+t),o="off"),"unknown"!=o&&(void 0!=l.state.event_view_status[t]&&(l.state.event_view_status[t]=o),w())})),(0,a.KC)((()=>{w()})),(0,a.sV)((()=>{w()}));const E=()=>{console.log(ci+": clickAddEvent"),u.value=!0},R=e=>{console.log(ci+": clickDelete");t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{delete l.state.layout.eventDetails[e],l.state.update_layout_needed=!0,w()}},{label:"NO",color:"white",handler:()=>{}}]})},I=e=>{console.log(ci+": clickEventName "+e),g.value=e,f.value=l.getters.event_name(e),c.value=!0},Q=()=>{console.log(ci+": clickInfo"),p.value=!0},S=e=>{console.log(ci+": clickLinkedNodes "+e),g.value=e,v.value=!0},L=()=>{console.log(ci+": clickScanNodes");var e=Object.keys(l.state.nodes);e.forEach((e=>{l.methods.request_all_node_events(e)}))},W=(e,t)=>{console.log(ci+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,o):l.methods.long_off_event(a,o)},T=(e,t)=>{console.log(ci+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,o):l.methods.long_on_event(a,o)},D=e=>{console.log(ci+": clickTeach "+e),g.value=e,b.value=!0},B=()=>{console.log(ci+": clickToggleShowEventsJSON"),h.value?h.value=!1:h.value=!0},K=()=>{console.log(ci+": clickToggleViewMode"),_.value++,_.value>1&&(_.value=0),w()};return(e,t)=>{const s=(0,a.g2)("q-btn"),f=(0,a.g2)("q-space"),x=(0,a.g2)("q-icon"),V=(0,a.g2)("q-input"),F=(0,a.g2)("q-banner"),w=(0,a.g2)("q-td"),A=(0,a.g2)("q-chip"),U=(0,a.g2)("q-tr"),O=(0,a.g2)("q-table"),P=(0,a.g2)("q-card-actions"),X=(0,a.g2)("q-card-section"),z=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",ii,[(0,a.bF)(F,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:t[0]||(t[0]=e=>K())}),(0,a.Lk)("div",ri,(0,n.v_)(N.value[_.value]),1),t[13]||(t[13]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>Q())}),(0,a.bF)(f),t[14]||(t[14]=(0,a.eW)("      ")),(0,a.bF)(V,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),t[15]||(t[15]=(0,a.eW)("      ")),(0,a.bF)(f),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"SCAN NODES","no-caps":"",onClick:t[3]||(t[3]=e=>L())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:t[4]||(t[4]=e=>E())})])),default:(0,a.k6)((()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-h6"},"Events View",-1))])),_:1}),(0,a.bF)(z,null,{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(O,{class:"events-table",dense:"",rows:(0,o.R1)(d),columns:q,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:r,"onUpdate:pagnation":t[5]||(t[5]=e=>r=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(U,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(w,{key:"eventName",props:e,class:(0,n.C4)("text-"+C(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"group",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,a.bF)(w,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+C(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+C(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+C(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"type",props:e,class:(0,n.C4)("text-"+C(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(A,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.eW)("ON")]))),_:1})):"off"==e.row.status?((0,a.uX)(),(0,a.Wv)(A,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)("OFF")]))),_:1})):((0,a.uX)(),(0,a.Wv)(A,{key:2,color:"white","text-color":"blue"},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)("unknown")]))),_:1}))])),_:2},1032,["props"]),(0,a.bF)(w,{key:"linkedNodes",props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.linkedNodeCount)+" ",1),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"view",onClick:t=>S(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"]),(0,a.bF)(w,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>I(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>D(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>T(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)("send ON")]))),_:2},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>W(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)("send OFF")]))),_:2},1032,["onClick"]),(0,a.bF)(s,{disabled:0!=e.row.linkedNodeCount,dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>R(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),(0,a.bF)(P,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle event details json",onClick:t[6]||(t[6]=e=>B())})])),_:1}),h.value?((0,a.uX)(),(0,a.Wv)(X,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",di,[t[22]||(t[22]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Events"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",ui,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.layout.eventDetails),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})]),(0,a.bF)((0,o.R1)(xt),{modelValue:u.value,"onUpdate:modelValue":t[7]||(t[7]=e=>u.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ot),{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=e=>c.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(al),{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=e=>b.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(si),{modelValue:v.value,"onUpdate:modelValue":t[10]||(t[10]=e=>v.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Tt),{modelValue:m.value,"onUpdate:modelValue":t[11]||(t[11]=e=>m.value=e),sendingNodeNumber:y.value,eventNumber:k.value,eventIdentifier:g.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Js),{modelValue:p.value,"onUpdate:modelValue":t[12]||(t[12]=e=>p.value=e)},null,8,["modelValue"])],64)}}},bi=(0,B.A)(mi,[["__scopeId","data-v-9bbce3c6"]]),pi=bi;h()(mi,"components",{QBanner:De.A,QBtn:me.A,QSpace:be.A,QInput:M.A,QIcon:ml.A,QCard:F.A,QCardSection:w.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QChip:mn.A,QCardActions:Be.A,QField:bl.A});const vi={__name:"BusEventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,o=t,n=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)((()=>{})),(0,a.sV)((()=>{})),(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)((()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])])),default:(0,a.k6)((()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Bus Events View ",-1))])),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Bus Events view is intended to show the event activity on the CAN Bus from the start of the application ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Events View' ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," Events read from node will not appear in this view until they have been sent by a node & captured from the CAN Bus ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," For some nodes, default events can't be read from the node (as some do not treat them as 'stored events') ",-1),(0,a.Lk)("div",{class:"text_body1"}," But these default events will appear in this view once they've been sent ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," This view takes account of the source node, so if the same event has been sent by two different nodes, there will be two entries for that event ",-1),(0,a.Lk)("div",{class:"text_body1"}," This is intended to make it easy to see which nodes are sending which events ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, the 'send ON/OFF' feature will use the Source Node Number of the row selected, thus replicating the event from that specific node ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, from that particular sending node ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," The Bus Events view will be empty at startup, and can also be cleared, to only show events from that point onwards ",-1)]))),_:1}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)]))),_:1})])),_:1})])),_:1},8,["modelValue"])}}},gi=vi,fi=gi;h()(vi,"components",{QDialog:Te.A,QCard:F.A,QBanner:De.A,QBtn:me.A}),h()(vi,"directives",{ClosePopup:Ke.A});const yi={style:{height:"45vh"}},ki={class:"text-h6",style:{"min-width":"250px"}},hi={class:"q-pa-xs row"},_i={class:"text-body2"},Ni="BusEventsView",qi={__name:"BusEventsView",setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=((0,o.KR)("nodes"),(0,o.KR)("")),r={rowsPerPage:0};let d=(0,o.KR)();const u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(""),v=(0,o.KR)(),g=(0,o.KR)(0),f=(0,o.KR)(0),y=(0,o.KR)(!1),k=(0,o.KR)(0),h=(0,o.KR)({0:"view all bus events",1:"view short bus events only"}),_=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],N=(0,a.EW)((()=>Object.values(l.state.busEvents))),q=(0,a.EW)((()=>l.state.layout));(0,a.wB)(N,(()=>{x()})),(0,a.wB)(q,(()=>{x()}));const x=()=>{let e=[];try{let a=l.state.busEvents;if(a)for(let o of Object.keys(a).sort((function(e,t){return a[e].eventIdentifier<a[t].eventIdentifier?-1:1}))){var t=parseInt(a[o].eventIdentifier.slice(0,4),16);if(1==k.value&&t>0);else{let t={};t["eventIdentifier"]=a[o].eventIdentifier,t["nodeNumber"]=a[o].nodeNumber,t["eventNumber"]=a[o].eventNumber,t["status"]=a[o].status,t["type"]=a[o].type,t["count"]=a[o].count,t["name"]=l.getters.event_name(a[o].eventIdentifier),t["colour"]=l.getters.event_colour(a[o].eventIdentifier),t["group"]=l.getters.event_group(a[o].eventIdentifier),e.push(t)}}}catch(e){console.log(Ni+": update_bus_events "+e)}d.value=e},V=e=>l.getters.event_colour(e);(0,a.KC)((()=>{l.methods.refresh_bus_events(),x()})),(0,a.sV)((()=>{l.methods.refresh_bus_events(),x()}));const F=()=>{console.log(Ni+": clickClearAllBusEvents");t.notify({message:"Are you sure you want to clear all bus events?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{l.methods.clear_bus_events()}},{label:"NO",color:"white",handler:()=>{}}]})},w=e=>{console.log(Ni+": clickEventName "+e),p.value=e,v.value=l.getters.event_name(e),u.value=!0},C=()=>{console.log(Ni+": clickInfo"),b.value=!0},A=(e,t)=>{console.log(Ni+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,o):l.methods.long_off_event(a,o)},E=(e,t)=>{console.log(Ni+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),o=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,o):l.methods.long_on_event(a,o)},R=e=>{console.log(Ni+": clickTeach"),p.value=e,m.value=!0},I=()=>{console.log(Ni+": clickToggleShowBusEventsJSON"),y.value?y.value=!1:y.value=!0},Q=()=>{console.log(Ni+": clickToggleViewMode"),k.value++,k.value>1&&(k.value=0),x()};return(e,t)=>{const s=(0,a.g2)("q-btn"),v=(0,a.g2)("q-icon"),N=(0,a.g2)("q-input"),q=(0,a.g2)("q-banner"),x=(0,a.g2)("q-td"),S=(0,a.g2)("q-chip"),L=(0,a.g2)("q-tr"),W=(0,a.g2)("q-table"),T=(0,a.g2)("q-card-section"),D=(0,a.g2)("q-card"),B=(0,a.g2)("q-card-actions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",yi,[(0,a.bF)(q,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)((()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:t[0]||(t[0]=e=>Q())}),(0,a.Lk)("div",ki,(0,n.v_)(h.value[k.value]),1),t[10]||(t[10]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>C())}),t[11]||(t[11]=(0,a.eW)("      ")),(0,a.bF)(N,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{size:"sm",name:"search"})])),_:1},8,["modelValue"]),t[12]||(t[12]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"CLEAR BUS EVENTS",onClick:t[3]||(t[3]=e=>F()),"no-caps":""})])),default:(0,a.k6)((()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-h6"}," Bus Events ",-1))])),_:1}),(0,a.bF)(D,null,{default:(0,a.k6)((()=>[(0,a.bF)(T,{class:"no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{class:"bus-events-table",dense:"",rows:(0,o.R1)(d),columns:_,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:r,"onUpdate:pagnation":t[4]||(t[4]=e=>r=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.bF)(x,{key:"eventName",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"group",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.group),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"type",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"status",props:e},{default:(0,a.k6)((()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(S,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)("ON")]))),_:1})):((0,a.uX)(),(0,a.Wv)(S,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)("OFF")]))),_:1}))])),_:2},1032,["props"]),(0,a.bF)(x,{key:"count",props:e,class:(0,n.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.row.count),1)])),_:2},1032,["props","class"]),(0,a.bF)(x,{key:"actions",props:e},{default:(0,a.k6)((()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>w(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>R(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>E(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)("send ON")]))),_:2},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>A(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.eW)("send OFF")]))),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),y.value?((0,a.uX)(),(0,a.Wv)(T,{key:0,class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",hi,[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",_i,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(l).state.busEvents),1)])])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.bF)(B,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{flat:"",label:"Toggle bus events json",onClick:t[5]||(t[5]=e=>I())})])),_:1})]),(0,a.bF)((0,o.R1)(Ot),{modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(al),{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=e=>m.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(Tt),{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=e=>c.value=e),sendingNodeNumber:g.value,eventNumber:f.value,eventIdentifier:p.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(fi),{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},xi=(0,B.A)(qi,[["__scopeId","data-v-0f53ca94"]]),Vi=xi;h()(qi,"components",{QBanner:De.A,QBtn:me.A,QInput:M.A,QIcon:ml.A,QCard:F.A,QCardSection:w.A,QTable:et.A,QTr:tt.A,QTd:lt.A,QChip:mn.A,QCardActions:Be.A,QField:bl.A});const Fi={class:"text-h6 no-margin no-padding float-right"},wi={class:"text-h6 float-right"},Ci={class:"text-h6 float-right"},Ai={class:"text-h6 float-right"},Ei={class:"text-h6 float-right"},Ri={class:"text-bold text-blue"},Ii={class:"text-bold"},Qi="MainLayout",Si={__name:"MainLayout",setup(e){const{getVerticalScrollPosition:t,setVerticalScrollPosition:l}=i.Ay,r=(0,s.A)(),d=(0,a.WQ)("store"),u=(0,o.KR)({}),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),v=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),y=(0,o.KR)(!1),k=((0,o.KR)(!0),(0,o.KR)(!1)),h=(0,o.KR)(0),_=(0,o.KR)(""),N=(0,o.KR)(!1),q=(0,o.KR)(!1),x=(0,o.KR)("dummyModule/index.html"),V=(0,o.KR)(null),F=(0,o.KR)("NodesView");const w=(0,a.EW)((()=>Object.values(d.state.nodeTraffic)));(0,a.wB)(w,(()=>{V.value.setScrollPercentage("vertical",1),setTimeout(I,200)}));const C=(0,a.EW)((()=>{var e="";try{e=d.state.layout.layoutDetails.title}catch(e){}return e}));(0,a.KC)((()=>{d.methods.request_server_status(),d.methods.request_layout_list()})),(0,a.sV)((()=>{setInterval(A,5e3),setInterval(E,1e3),setInterval(R,100)})),(0,a.$u)((()=>{V.value.setScrollPercentage("vertical",1)}));const A=()=>{d.methods.request_server_status()},E=()=>{1==d.state.update_layout_needed&&(d.state.update_layout_needed=!1,d.state.layout.updateTimestamp=Date.now(),d.methods.update_layout())},R=()=>{Date.now(),d.state.cbusTrafficTimeStamp},I=()=>{V.value.setScrollPercentage("vertical",1)};d.eventBus.on("GENERAL_MESSAGE_EVENT",((e,t,l)=>{console.log(Qi+": GENERAL_MESSAGE_EVENT "+JSON.stringify(e));try{r.notify({message:e,caption:t,timeout:0,type:l,position:"center",actions:[{label:"Dismiss"}]})}catch(e){console.log(Qi+": MESSAGE_EVENT: "+e)}})),d.eventBus.on("REQUEST_NODE_NUMBER_EVENT",((e,t)=>{console.log(Qi+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e+" moduleName "+t),h.value=e,_.value=t,y.value=!0})),d.eventBus.on("SERVER_STATUS_EVENT",(e=>{if(d.state.busConnection_notify)try{0==e.busConnection.state&&r.notify({message:"Server has no connection to the CAN BUS",caption:"attempting to re-connect",timeout:2e3,type:"warning",position:"center",actions:[{label:"Don't remind me again",handler:()=>{d.state.busConnection_notify=!1}},{label:"Dismiss"}]})}catch(e){console.log(Qi+": SERVER_STATUS_EVENT: "+e)}})),d.eventBus.on("SERVER_DISCONNECT",(()=>{r.notify({message:"MMC-server has disconnected",caption:"please restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}));const Q=()=>{console.log(Qi+": clickBusEventsView"),F.value="BusEventsView"},S=()=>{console.log(Qi+": clickEventView"),F.value="EventsView"},L=()=>{console.log(Qi+": clickNodeView"),F.value="NodesView"},W=()=>{console.log(Qi+": clickCbusErrors"),b.value=!0},T=()=>{console.log(Qi+": clickExample"),N.value=!0},D=()=>{console.log(Qi+": clickExit");r.notify({message:"Are you sure you want to exit and stop the server?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{d.methods.STOP_SERVER(),await sleep(50)}},{label:"NO",color:"white",handler:()=>{}}]})},B=()=>{console.log(Qi+": clickExport"),p.value=!0},K=()=>{console.log(Qi+": clickiframe"),q.value=!0},U=()=>{console.log(Qi+": clickJson"),v.value=!0},O=()=>{console.log(Qi+": clickImport"),g.value=!0},P=e=>{console.log(Qi+": clickSingleBusEvent"),u.value=e,V.value.setScrollPercentage("vertical",1),f.value=!0},X=()=>{console.log(Qi+": clickSystem"),k.value=!0};return(e,t)=>{const l=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),i=(0,a.g2)("q-list"),r=(0,a.g2)("q-menu"),w=(0,a.g2)("q-btn"),A=(0,a.g2)("q-toolbar-title"),E=(0,a.g2)("q-toolbar"),R=(0,a.g2)("q-space"),I=(0,a.g2)("q-header"),z=(0,a.g2)("q-banner"),M=(0,a.g2)("q-item-label"),j=(0,a.g2)("q-scroll-area"),G=(0,a.g2)("q-card"),H=(0,a.g2)("q-drawer"),$=(0,a.g2)("q-page"),J=(0,a.g2)("q-page-container"),Y=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(Y,{view:"hHh lpR fFf"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{class:"row bg-primary text-white no-margin no-padding",style:{height:"7vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(E,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{flat:"",dense:"",icon:"menu"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{"auto-close":""},{default:(0,a.k6)((()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{clickable:"",onClick:t[0]||(t[0]=e=>B())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[23]||(t[23]=[(0,a.eW)("Export")]))),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[1]||(t[1]=e=>O())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[24]||(t[24]=[(0,a.eW)("Import")]))),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[2]||(t[2]=e=>U())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[25]||(t[25]=[(0,a.eW)("JSON")]))),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[3]||(t[3]=e=>W())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[26]||(t[26]=[(0,a.eW)("CBUS errors")]))),_:1})])),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[4]||(t[4]=e=>X())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[27]||(t[27]=[(0,a.eW)("System")]))),_:1})])),_:1}),(0,o.R1)(d).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,clickable:"",onClick:t[5]||(t[5]=e=>T())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[28]||(t[28]=[(0,a.eW)("Example")]))),_:1})])),_:1})):(0,a.Q3)("",!0),(0,o.R1)(d).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:1,clickable:"",onClick:t[6]||(t[6]=e=>K())},{default:(0,a.k6)((()=>[(0,a.bF)(l,null,{default:(0,a.k6)((()=>t[29]||(t[29]=[(0,a.eW)("Example iFrame")]))),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.bF)(A,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,a.k6)((()=>t[30]||(t[30]=[(0,a.Lk)("div",{class:"text-h6 no-margin no-padding"}," MMC ",-1)]))),_:1})])),_:1}),(0,a.bF)(E,{class:"col no-margin no-padding",style:{"min-width":"400px"}},{default:(0,a.k6)((()=>[(0,a.bF)(R),(0,a.Lk)("div",Fi,(0,n.v_)(C.value),1)])),_:1}),(0,a.bF)(E,{class:"col no-margin no-padding"},{default:(0,a.k6)((()=>[(0,a.bF)(R)])),_:1}),(0,a.bF)(E,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",wi,[(0,a.bF)(w,{size:"md",color:"secondary",label:"Bus Events",onClick:t[7]||(t[7]=e=>Q()),"no-caps":""})])])),_:1}),(0,a.bF)(E,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ci,[(0,a.bF)(w,{size:"md",color:"secondary",label:"Events view",onClick:t[8]||(t[8]=e=>S()),"no-caps":""})])])),_:1}),(0,a.bF)(E,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Ai,[(0,a.bF)(w,{size:"md",color:"secondary",label:"Nodes view",onClick:t[9]||(t[9]=e=>L()),"no-caps":""})])])),_:1}),(0,a.bF)(E,{class:"col no-margin q-py-none"},{default:(0,a.k6)((()=>[(0,a.bF)(R),(0,a.Lk)("div",Ei,[(0,a.bF)(w,{size:"md",color:"negative",label:"Exit",onClick:t[10]||(t[10]=e=>D()),"no-caps":""})])])),_:1})])),_:1}),(0,a.bF)(H,{class:"no-margin no-padding",modelValue:c.value,"onUpdate:modelValue":t[11]||(t[11]=e=>c.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,a.k6)((()=>[(0,a.bF)(z,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs"},{default:(0,a.k6)((()=>t[31]||(t[31]=[(0,a.Lk)("div",{class:"text-h6"}," Bus traffic ",-1)]))),_:1}),(0,a.bF)(G,{class:"no-margin no-padding",style:{height:"83vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(j,{id:"demo",ref_key:"scrollAreaRef",ref:V,style:{height:"82vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(d).state.nodeTraffic,(e=>((0,a.uX)(),(0,a.Wv)(s,{key:e,clickable:"",dense:"",onClick:t=>P(e)},{default:(0,a.k6)((()=>[(0,a.bF)(M,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("span",Ri,(0,n.v_)(e.direction),1),t[32]||(t[32]=(0,a.Lk)("span",null,": ",-1)),(0,a.Lk)("span",Ii,(0,n.v_)(e.json.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1}),t[33]||(t[33]=(0,a.eW)(" Click message to show encoding "))])),_:1},8,["modelValue"]),0==(0,o.R1)(d).state.inStartup?((0,a.uX)(),(0,a.Wv)(J,{key:0,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,a.k6)((()=>["BusEventsView"==F.value?((0,a.uX)(),(0,a.Wv)($,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(Vi))])),_:1})):(0,a.Q3)("",!0),"EventsView"==F.value?((0,a.uX)(),(0,a.Wv)($,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(pi))])),_:1})):(0,a.Q3)("",!0),"NodesView"==F.value?((0,a.uX)(),(0,a.Wv)($,{key:2},{default:(0,a.k6)((()=>[(0,a.bF)((0,o.R1)(pn))])),_:1})):(0,a.Q3)("",!0)])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)((0,o.R1)(Nn),{modelValue:m.value,"onUpdate:modelValue":t[12]||(t[12]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Fn),{modelValue:b.value,"onUpdate:modelValue":t[13]||(t[13]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Kn),{modelValue:p.value,"onUpdate:modelValue":t[14]||(t[14]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Xn),{modelValue:v.value,"onUpdate:modelValue":t[15]||(t[15]=e=>v.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ts),{modelValue:g.value,"onUpdate:modelValue":t[16]||(t[16]=e=>g.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(rs),{modelValue:f.value,"onUpdate:modelValue":t[17]||(t[17]=e=>f.value=e),busMessage:u.value},null,8,["modelValue","busMessage"]),(0,a.bF)((0,o.R1)(bs),{modelValue:y.value,"onUpdate:modelValue":t[18]||(t[18]=e=>y.value=e),previousNodeNumber:h.value,moduleName:_.value},null,8,["modelValue","previousNodeNumber","moduleName"]),(0,a.bF)((0,o.R1)(Ts),{modelValue:(0,o.R1)(d).state.inStartup,"onUpdate:modelValue":t[19]||(t[19]=e=>(0,o.R1)(d).state.inStartup=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ps),{modelValue:k.value,"onUpdate:modelValue":t[20]||(t[20]=e=>k.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Gs),{modelValue:N.value,"onUpdate:modelValue":t[21]||(t[21]=e=>N.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(rn),{modelValue:q.value,"onUpdate:modelValue":t[22]||(t[22]=e=>q.value=e),URL:x.value},null,8,["modelValue","URL"])],64)}}};var Li=l(2008),Wi=l(8416),Ti=l(6914),Di=l(4436),Bi=l(5173),Ki=l(9150),Ui=l(6056),Oi=l(8958),Pi=l(5205),Xi=l(7716);const zi=(0,B.A)(Si,[["__scopeId","data-v-44797a3a"]]),Mi=zi;h()(Si,"components",{QLayout:Li.A,QHeader:Wi.A,QToolbar:Ti.A,QBtn:me.A,QMenu:Di.A,QList:fn.A,QItem:yn.A,QItemSection:Bi.A,QToolbarTitle:Ki.A,QSpace:be.A,QDrawer:Ui.A,QBanner:De.A,QCard:F.A,QScrollArea:Oi.A,QItemLabel:kn.A,QPageContainer:Pi.A,QPage:Xi.A})},4083:(e,t,l)=>{e.exports=l.p+"img/Long_Events_Sheet.7ab3be03.png"},8626:(e,t,l)=>{e.exports=l.p+"img/Nodes_sheet.22b132a9.png"},7123:(e,t,l)=>{e.exports=l.p+"img/Short_Events_Sheet.1b011d1e.png"}}]);