"use strict";(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[790],{3790:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Zi});var t=a(1758),n=a(8734),o=a(8790),s=(a(9862),a(4907)),i=a(8336);a(239);function d(e){return new Promise((function(l,a){setTimeout((()=>{l()}),e)}))}const r={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""}},setup(e){const l=e,a=(l.name?l.name:l.eventVariableIndex,(0,t.WQ)("store")),o={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,n.KR)(!1),i=(0,t.EW)((()=>a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,t.wB)(i,(()=>{s.value=!!(i.value&o[l.bit])}));const d=()=>{let e=i.value;console.log(`EventVariableBit update_checked ${s.value} ${e}`),s.value?e|=o[l.bit]:e&=~o[l.bit],console.log(`EventVariableBit update_checked-2 ${s.value} ${e}`),a.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,e)};return(0,t.sV)((()=>{var e=a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);s.value=!!(e&o[l.bit])})),(l,a)=>{const n=(0,t.g2)("q-checkbox");return(0,t.uX)(),(0,t.Wv)(n,{"min-width":"100",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),label:e.name,onClick:d,"left-label":""},null,8,["modelValue","label"])}}};var u=a(7022),c=a(8582),m=a.n(c);const b=r,p=b;m()(r,"components",{QCheckbox:u.A});const v={class:"text-h6"},g={class:"text-subtitle2"},f={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){(0,t.WQ)("store");return(0,t.sV)((()=>{})),(l,a)=>{const s=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",v,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",g,(0,o.v_)(e.displaySubTitle),1),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.bitCollection,(l=>((0,t.uX)(),(0,t.CE)("div",{key:l},[(0,t.bF)((0,n.R1)(p),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,bit:l.bitPosition,name:l.label},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","bit","name"])])))),128))])),_:1})])),_:1})}}};var k=a(3316),y=a(4189);const _=f,V=_;m()(f,"components",{QCard:k.A,QCardSection:y.A});const h={class:"text-h6"},q={class:"text-subtitle2"},N={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0}},setup(e){(0,t.WQ)("store");return(0,t.sV)((()=>{})),(l,a)=>{const s=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",h,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",q,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)((0,n.R1)(p),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit"])])),_:1})])),_:1})}}},F=N,x=F;m()(N,"components",{QCard:k.A,QCardSection:y.A});const C={class:"q-pa-xs row"},w={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},A={class:"GroupTitle q-py-none"},I={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){(0,t.WQ)("store");return(0,t.sV)((()=>{})),(l,a)=>((0,t.uX)(),(0,t.CE)("div",C,[(0,t.Lk)("div",w,[(0,t.Lk)("div",A,(0,o.v_)(e.configuration.displayTitle),1),(0,t.bF)((0,n.R1)(ge),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])]))}};var R=a(2807);const Q=(0,R.A)(I,[["__scopeId","data-v-f64addbe"]]),E=Q,W={class:"text-h6"},S={class:"text-subtitle2"},L={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},name:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},displayOffset:{type:Number,default:0}},setup(e){const l=e,a=(l.name?l.name:l.eventVariableIndex,(0,t.WQ)("store")),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),r=(0,t.EW)((()=>{for(var e=0,a=l.startBit;a<=l.endBit;a++)e+=1<<a;return e})),u=(0,t.EW)((()=>a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,t.wB)(u,(()=>{d.value=((u.value&r.value)>>l.startBit)+l.displayOffset}));const c=e=>{let t=u.value,n=e;n-=l.displayOffset,n<l.min||n>l.max||""==e?(s.value=!0,i.value="Invalid Value "+e+" : Valid Range "+(l.min+l.displayOffset)+" - "+(l.max+l.displayOffset)):(n<<=l.startBit,t|=n&r.value,t&=n|~r.value,i.value="",s.value=!1,a.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,t))};return(0,t.sV)((()=>{let e=a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);d.value=((e&r.value)>>l.startBit)+l.displayOffset})),(l,a)=>{const n=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(u,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",W,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",S,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:c},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}};var T=a(7837);const B=L,D=B;function K(e,l,a){var t=null;if(l.nv){var n=a.state.nodes[e].nodeVariables[l.nv];for(var o in l.labels)n==l.labels[o].value&&(t=l.labels[o].label)}return t}function U(e,l,a,t){var n=!0;if(void 0!=l.evBit)if(void 0!=t){var o=a.state.nodes[e].storedEventsNI[t];if(o){var s=o.variables[l.evBit.index];s=(s&2**l.evBit.bit)>>l.evBit.bit,n=X(s,l)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=l.ev)if(void 0!=t){o=a.state.nodes[e].storedEventsNI[t];if(o){s=o.variables[l.ev];n=X(s,l)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}else console.log("parseLogicElement: ERROR: ev - event index (argument3) not defined ");if(void 0!=l.nvBit){s=a.state.nodes[e].nodeVariables[l.nvBit.index];s=(s&2**l.nvBit.bit)>>l.nvBit.bit,n=X(s,l)}if(void 0!=l.nv){s=a.state.nodes[e].nodeVariables[l.nv];n=X(s,l)}return n}function X(e,l){var a=!0;return void 0!=l.equals&&l.equals!=e&&(a=!1),void 0!=l.greaterThan&&e<=l.greaterThan&&(a=!1),void 0!=l.in&&(a=!1,l.in.forEach((function(l){e==l&&(a=!0)}))),void 0!=l.lessThan&&e>=l.lessThan&&(a=!1),void 0!=l.notEqual&&l.notEqual==e&&(a=!1),a}m()(L,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const O={class:"text-h6"},P={class:"text-subtitle2"},z={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1}},setup(e){const l=e,a=(l.name?l.name:l.eventVariableIndex,(0,t.WQ)("store")),s=(0,n.KR)();var i=(0,n.KR)();const d=(0,t.EW)((()=>a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,t.wB)(d,(()=>{s.value=d.value&l.bitMask}));const r=e=>{let t=d.value;t|=e.value&l.bitMask,t&=e.value|~l.bitMask,console.log(`EventVariableSelect: byteValue ${t}`),a.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,t)};return(0,t.sV)((()=>{let e=a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);for(var t in s.value=e&l.bitMask,i.value=[],l.options)if(void 0!=l.options[t].overload){var n=K(l.nodeNumber,l.options[t].overload,a);if(n){var o={value:l.options[t].value,label:n};i.value.push(o)}}else void 0!=l.options[t].label&&i.value.push(l.options[t])})),(l,a)=>{const d=(0,t.g2)("q-select"),u=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",O,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",P,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(d,{modelValue:s.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>s.value=e),r],options:(0,n.R1)(i),"popup-content-class":"q-pm-none","map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}};var M=a(5848);const j=z,$=j;m()(z,"components",{QCard:k.A,QCardSection:y.A,QSelect:M.A});const H={class:"text-h6"},G={class:"text-subtitle2"},J="EventVariableSlider",Y={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7}},setup(e){const l=e,a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,t.EW)((()=>{for(var e=0,a=l.startBit;a<=l.endBit;a++)e+=1<<a;return e})),r=(0,t.EW)((()=>{var e=u.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),u=(0,t.EW)({get(){return(a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)&d.value)>>l.startBit},set(e){let t=a.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);if(e<=l.max&&e>=l.min){let n=e;n<<=l.startBit,t|=n&d.value,t&=n|~d.value,s.value=!1,i.value="",a.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,t)}else console.log(J+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),c=e=>{s.value&&console.log(J+`: Invalid Value : ${e}`)};return(0,t.sV)((()=>{})),(l,a)=>{const n=(0,t.g2)("q-badge"),s=(0,t.g2)("q-slider"),i=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",H,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",G,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{color:"secondary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.value)+" "+(0,o.v_)(e.displayUnits),1)])),_:1}),(0,t.bF)(s,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),max:e.max,min:e.min,onChange:c},null,8,["modelValue","max","min"])])),_:1})])),_:1})}}};var Z=a(3954),ee=a(1444);const le=Y,ae=le;m()(Y,"components",{QCard:k.A,QCardSection:y.A,QBadge:Z.A,QSlider:ee.A});const te={class:"no-padding no-margin"},ne={class:"no-padding no-margin"},oe={class:"no-padding no-margin row",style:{border:"1px solid grey"}},se={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,a=(0,n.KR)(),o=(0,n.KR)();(0,t.WQ)("store");return(0,t.sV)((()=>{a.value=l.configuration.tabPanels,o.value=a.value[0].displayTitle})),(e,s)=>{const i=(0,t.g2)("q-tab"),d=(0,t.g2)("q-tabs"),r=(0,t.g2)("q-tab-panel"),u=(0,t.g2)("q-tab-panels");return(0,t.uX)(),(0,t.CE)("div",te,[(0,t.bF)(d,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(i,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,t.Lk)("div",ne,[(0,t.bF)(u,{"keep-alive":"",modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(r,{key:e.displayTitle,name:e.displayTitle},{default:(0,t.k6)((()=>[(0,t.Lk)("div",oe,[(0,t.bF)((0,n.R1)(ge),{configuration:e.items,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])])}}};var ie=a(2980),de=a(327),re=a(9041),ue=a(1746);const ce=se,me=ce;m()(se,"components",{QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A});const be={class:"q-pa-xs row"},pe={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,a=(0,t.WQ)("store"),o=e=>{var t=!0;return e.visibilityLogic&&(t=U(l.nodeNumber,e.visibilityLogic,a,l.eventIdentifier)),t};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{})),(a,s)=>((0,t.uX)(),(0,t.CE)("div",be,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.configuration,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e},["EventVariableBitArray"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(V),{key:0,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,t.Q3)("",!0),"EventVariableBitSingle"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(x),{key:1,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","displayTitle","displaySubTitle"])):(0,t.Q3)("",!0),"EventVariableGroup"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(E),{key:2,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,t.Q3)("",!0),"EventVariableNumber"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(D),{key:3,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,startBit:e.startBit,endBit:e.endBit,displayOffset:e.displayOffset,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","startBit","endBit","displayOffset","min","max","configuration"])):(0,t.Q3)("",!0),"EventVariableSelect"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)($),{key:4,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options"])):(0,t.Q3)("",!0),"EventVariableSlider"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(ae),{key:5,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit"])):(0,t.Q3)("",!0),"EventVariableTabs"==e.type&&o(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(me),{key:6,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,t.Q3)("",!0)])))),128))]))}},ve=pe,ge=ve,fe="EventVariableRaw",ke={__name:"EventVariableRaw",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,a=l.name?l.name:"Event Variable "+l.eventVariableIndex,o=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),r=(0,t.EW)((()=>o.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)));(0,t.wB)(r,(()=>{d.value=r.value}));const u=e=>{try{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,o.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,e))}catch(a){console.log(fe+": update_event : "+a)}};return(0,t.sV)((()=>{d.value=o.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)})),(e,l)=>{const o=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(c,{class:"q-pa-none",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(o,{mask:"###",label:(0,n.R1)(a),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})])),_:1})}}},ye=ke,_e=ye;m()(ke,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const Ve=(0,t.Lk)("div",{class:"text-h6"}," Module Descriptor ",-1),he={class:"row items-start q-gutter-md"},qe={key:0,class:"text-subtitle2"},Ne=(0,t.Lk)("p",{class:"text-negative"},"Module Descriptor not found",-1),Fe=[Ne],xe=(0,t.Lk)("div",{class:"text-h6"}," Module Descriptor Data ",-1),Ce={class:"text-h6"},we=(0,t.Lk)("div",{class:"text-h6"}," File upload ",-1),Ae=(0,t.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),Ie=(0,t.Lk)("div",{class:"text-subtitle2"},[(0,t.eW)(" The file will be stored with it's original filename"),(0,t.Lk)("br"),(0,t.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,t.Lk)("br"),(0,t.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1),Re=(0,t.Lk)("div",{class:"text-subtitle2"},"Current node:",-1),Qe={class:"text-subtitle2"},Ee=(0,t.Lk)("br",null,null,-1),We=(0,t.Lk)("br",null,null,-1),Se=(0,t.Lk)("br",null,null,-1),Le=(0,t.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1),Te="ManageModuleDescriptorsDialog",Be={__name:"ManageModuleDescriptorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(!1),d=(0,n.KR)(!1),r=(0,n.KR)(!1),u=(0,n.KR)(),c=e,m=l,b=(0,t.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,t.wB)(b,(()=>{console.log(Te+": WATCH model")}));const p=(0,t.EW)((()=>a.state.nodes[a.state.selected_node].moduleDescriptorFilename)),v=(0,t.EW)((()=>{var e="";return a.state.nodes[a.state.selected_node].moduleDescriptorFilename&&(e=a.state.nodes[a.state.selected_node].moduleDescriptorFilename.split(".",1)[0],g()),e}));(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const g=()=>{console.log("checkFileLoad"),a.state.nodeDescriptors[a.state.selected_node]?(r.value=!0,console.log(Te+": WATCH moduleDescriptorFilename "+r.value)):console.log(Te+": checkFileLoad failed for node "+a.state.selected_node)},f=()=>{let e=JSON.stringify(a.state.nodeDescriptors[a.state.selected_node],null,"  "),l=document.createElement("a");l.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",a.state.nodes[a.state.selected_node].moduleDescriptorFilename),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},k=()=>{if(u.value){var e=u.value.name;console.log(Te+": selected filename "+e);let l=new FileReader;l.readAsText(u.value),l.onload=function(){try{var t=JSON.parse(l.result);t["moduleDescriptorFilename"]=e,console.log(Te+": actionUpload: "+t.moduleDescriptorFilename),console.log(Te+": actionUpload: result: "+JSON.stringify(t)),a.methods.import_module_descriptor(t)}catch(n){console.log(Te+": actionUpload: failed JSON parse")}},u.value=null}else console.log(Te+": actionUpload: uploadFile no value ")},y=()=>{console.log(Te+": clickDownload"),s.value=!0},_=()=>{console.log(Te+": clickUpload"),i.value=!0},V=()=>{console.log(Te+": clickView"),d.value=!0};return(e,l)=>{const c=(0,t.g2)("q-btn"),m=(0,t.g2)("q-banner"),g=(0,t.g2)("q-card-section"),h=(0,t.g2)("q-card-actions"),q=(0,t.g2)("q-card"),N=(0,t.g2)("q-dialog"),F=(0,t.g2)("q-file"),x=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(N,{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])])),default:(0,t.k6)((()=>[Ve])),_:1}),(0,t.Lk)("div",he,[(0,t.bF)(q,{class:"q-pa-sm",style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(v.value)+" ",1),r.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",qe,Fe))])),_:1}),(0,t.bF)(h,{align:"evenly",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{color:"positive",disabled:!r.value,label:"View",onClick:l[0]||(l[0]=e=>V()),"no-caps":""},null,8,["disabled"]),(0,t.bF)(c,{color:"positive",disabled:!r.value,label:"Download",onClick:l[1]||(l[1]=e=>y()),"no-caps":""},null,8,["disabled"]),(0,t.bF)(c,{color:"positive",label:"Upload",onClick:l[2]||(l[2]=e=>_()),"no-caps":""})])),_:1})])),_:1})]),(0,t.bF)(N,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])])),default:(0,t.k6)((()=>[xe])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.bF)(h,{align:"right",class:"text-primary"}),(0,t.Lk)("p",null,(0,o.v_)(JSON.stringify((0,n.R1)(a).state.nodeDescriptors[(0,n.R1)(a).state.selected_node],null,"  ")),1)])),_:1}),(0,t.bF)(h,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{color:"positive",label:"Close"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(N,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Ce," Download "+(0,o.v_)(p.value),1)])),_:1}),(0,t.bF)(h,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{color:"positive",label:"Download",onClick:l[4]||(l[4]=e=>f(p.value))},null,512),[[x,2]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(N,{modelValue:i.value,"onUpdate:modelValue":l[8]||(l[8]=e=>i.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{style:{"min-width":"500px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])])),default:(0,t.k6)((()=>[we])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[Ae,Ie])),_:1}),(0,t.bF)(F,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[Re,(0,t.Lk)("div",Qe,[(0,t.eW)(" Module name: "+(0,o.v_)((0,n.R1)(a).state.nodes[(0,n.R1)(a).state.selected_node].moduleName),1),Ee,(0,t.eW)(" Module identifier: "+(0,o.v_)((0,n.R1)(a).state.nodes[(0,n.R1)(a).state.selected_node].moduleIdentifier),1),We,(0,t.eW)(" Module version: "+(0,o.v_)((0,n.R1)(a).state.nodes[(0,n.R1)(a).state.selected_node].moduleVersion),1),Se])])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[Le])),_:1}),(0,t.bF)(h,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{color:"positive",label:"Upload",onClick:l[7]||(l[7]=e=>k())},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])}}};var De=a(2156),Ke=a(6868),Ue=a(1693),Xe=a(2669),Oe=a(9980),Pe=a(8672);const ze=Be,Me=ze;m()(Be,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A,QFile:Oe.A}),m()(Be,"directives",{ClosePopup:Pe.A});const je={class:"text-h6"},$e={key:0,class:"text-h6"},He={class:"q-pa-xs row"},Ge={class:"q-pa-xs row"},Je=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Variables descriptor"),(0,t.Lk)("br")],-1),Ye={class:"text-body2"},Ze={class:"q-pa-xs row"},el=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Stored events"),(0,t.Lk)("br")],-1),ll={class:"text-body2"},al="EventVariablesDialog",tl={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,s.A)(),i=(0,t.WQ)("store"),d=(0,n.KR)(),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=(0,n.KR)(!1),p=e,v=l,g=(0,t.EW)({get(){return p.modelValue},set(e){v("update:modelValue",e)}});(0,t.wB)(g,(()=>{r.value=!1,m.value=!1})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((async()=>{try{p.nodeNumber?(void 0!=i.state.nodeDescriptors[p.nodeNumber]?(d.value=i.state.nodeDescriptors[p.nodeNumber].eventVariables,u.value=!1):(d.value={},r.value=!0,u.value=!0),f()):r.value=!0}catch(e){console.log(al+": onUpdated: error: "+e)}}));const f=()=>{1!=i.state.loadFile_notification_raised[p.nodeNumber]&&("Unknown"==i.state.nodes[p.nodeNumber].moduleName?(a.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[p.nodeNumber]=!0):void 0!=i.state.nodes[p.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[p.nodeNumber]&&(a.notify({message:"Failed to load module file "+i.state.nodes[p.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[p.nodeNumber]=!0),i.state.loadFile_notification_raised[p.nodeNumber])},k=()=>{if(console.log(al+": clickClose"),p.newEvent)try{var e=i.state.nodes[p.nodeNumber],l=e.storedEventsNI[p.eventIdentifier].variables[1];i.methods.event_teach_by_identifier(p.nodeNumber,p.eventIdentifier,1,l)}catch(a){console.log(al+": clickClose "+a)}},y=()=>{console.log(al+": clickToggleVariablesDescriptor"),m.value=!m.value},_=()=>{console.log(al+": clickToggleRaw"),r.value=!r.value},V=()=>{console.log(al+": clickToggleStoredEvents:"),b.value=!b.value},h=()=>{console.log(al+": clickUpdateModuleDescriptor"),c.value=!0};return(e,l)=>{const a=(0,t.g2)("q-btn"),s=(0,t.g2)("q-banner"),v=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-separator"),q=(0,t.g2)("q-card"),N=(0,t.g2)("q-card-actions"),F=(0,t.g2)("q-dialog"),x=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(F,{modelValue:g.value,"onUpdate:modelValue":l[5]||(l[5]=e=>g.value=e),persistent:"","full-width":"","full-height":""},{default:(0,t.k6)((()=>[(0,t.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bF)(a,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[0]||(l[0]=e=>h())}),(0,t.bo)((0,t.bF)(a,{flat:"",color:"white",size:"md",label:"Close",onClick:k},null,512),[[x]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",je," Node: "+(0,o.v_)((0,n.R1)(i).getters.node_name(p.nodeNumber))+"       Event: "+(0,o.v_)((0,n.R1)(i).getters.event_name(p.eventIdentifier))+"       ",1)])),_:1})])),_:1}),(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(v,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(v,null,{action:(0,t.k6)((()=>[(0,t.bF)(a,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[1]||(l[1]=e=>h())})])),default:(0,t.k6)((()=>[u.value?((0,t.uX)(),(0,t.CE)("div",$e," *** Descriptor not loaded for this node *** ")):(0,t.Q3)("",!0)])),_:1}),(0,t.Lk)("div",He,[(0,n.R1)(i).state.nodeDescriptors[p.nodeNumber]?((0,t.uX)(),(0,t.Wv)((0,n.R1)(ge),{key:0,configuration:(0,n.R1)(i).state.nodeDescriptors[p.nodeNumber].eventVariables,nodeNumber:p.nodeNumber,eventIdentifier:p.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])):(0,t.Q3)("",!0)]),(0,t.bF)(f),r.value?((0,t.uX)(),(0,t.Wv)(v,{key:0,class:"q-pa-xs row"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(i).state.nodes[p.nodeNumber].parameters[5],(e=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(_e),{eventVariableIndex:e,nodeNumber:p.nodeNumber,eventIdentifier:p.eventIdentifier,key:e},null,8,["eventVariableIndex","nodeNumber","eventIdentifier"])))),128)),(0,t.bF)(f)])),_:1})):(0,t.Q3)("",!0),m.value?((0,t.uX)(),(0,t.Wv)(v,{key:1,class:"q-pa-xs"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ge,[Je,(0,t.Lk)("div",Ye,[(0,t.Lk)("pre",null,(0,o.v_)(d.value),1)])]),(0,t.bF)(f)])),_:1})):(0,t.Q3)("",!0),b.value?((0,t.uX)(),(0,t.Wv)(v,{key:2,class:"q-pa-xs"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ze,[el,(0,t.Lk)("div",ll,[(0,t.Lk)("pre",null,(0,o.v_)((0,n.R1)(i).state.nodes[p.nodeNumber].storedEventsNI),1)])]),(0,t.bF)(f)])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(N,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(a,{flat:"",label:"Toggle stored events view",onClick:l[2]||(l[2]=e=>V())}),(0,t.bF)(a,{flat:"",label:"Toggle variable descriptor view",onClick:l[3]||(l[3]=e=>y())}),(0,t.bF)(a,{flat:"",label:"Toggle raw view",onClick:l[4]||(l[4]=e=>_())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Me),{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e)},null,8,["modelValue"])],64)}}};var nl=a(386);const ol=tl,sl=ol;m()(tl,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QSeparator:nl.A,QCardActions:Xe.A}),m()(tl,"directives",{ClosePopup:Pe.A});const il="EventFunctions";function dl(e,l,a){console.log(il+`: createNewEvent: ${l} : ${a}`);var t=e.state.nodes[l];t.storedEventsNI[a]={eventIdentifier:a,eventIndex:1,node:l,variables:{}},t.storedEventsNI[a].variables[0]=t.parameters[5];for(var n=1;n<=t.parameters[5];n++)t.storedEventsNI[a].variables[n]=0}const rl={class:"text-h6"},ul={key:0,class:"text-h6"},cl={key:0},ml={class:"q-gutter-sm"},bl={key:0},pl=(0,t.Lk)("div",{class:"text-h4"},"Node Number",-1),vl=(0,t.Lk)("div",{class:"text-h6"},"Consumed events will need the number of the node that produces the event",-1),gl=(0,t.Lk)("div",{class:"text-h6"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),fl=(0,t.Lk)("div",{class:"text-h4"},"Event Number",-1),kl={key:1},yl=(0,t.Lk)("div",{class:"text-h4"},"Device Number",-1),_l={key:2},Vl=(0,t.Lk)("div",{class:"text-h6"},"Once event is added, select edit for the event from the event list to modify event variables",-1),hl={__name:"AddEventToNodeDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(),i=(0,n.KR)(),d=(0,n.KR)(!0);var r=(0,n.KR)();const u=(0,n.KR)(!1),c=(0,n.KR)(""),m=e,b=l,p=(0,t.EW)({get(){return m.modelValue},set(e){b("update:modelValue",e)}});(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{0==a.state.nodes[a.state.selected_node].parameters[4]&&d.value,s.value=null,i.value=null,r.value=null,0==a.state.nodes[a.state.selected_node].parameters[4]&&(d.value=!1)}));const v=()=>{"short"==r.value&&(s.value=0),c.value=parseInt(s.value).toString(16).toUpperCase().padStart(4,0)+parseInt(i.value).toString(16).toUpperCase().padStart(4,0),dl(a,a.state.selected_node,c.value),u.value=!0};return(e,l)=>{const m=(0,t.g2)("q-btn"),b=(0,t.g2)("q-banner"),g=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-radio"),k=(0,t.g2)("q-input"),y=(0,t.g2)("q-card-actions"),_=(0,t.g2)("q-card"),V=(0,t.g2)("q-dialog"),h=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(V,{modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=e=>p.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(_,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",rl," Add event for node "+(0,o.v_)((0,n.R1)(a).getters.node_name((0,n.R1)(a).state.selected_node)),1)])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[0==d.value?((0,t.uX)(),(0,t.CE)("div",ul," This module does not support any stored events ")):(0,t.Q3)("",!0)])),_:1}),d.value?((0,t.uX)(),(0,t.CE)("div",cl,[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",ml,[(0,t.bF)(f,{modelValue:(0,n.R1)(r),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.i9)(r)?r.value=e:r=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,t.bF)(f,{modelValue:(0,n.R1)(r),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.i9)(r)?r.value=e:r=e),val:"short",label:"Short event"},null,8,["modelValue"])])])),_:1}),"long"==(0,n.R1)(r)?((0,t.uX)(),(0,t.CE)("div",bl,[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[pl])),_:1}),(0,t.bF)(g,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[vl,gl])),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[fl])),_:1}),(0,t.bF)(g,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,t.Q3)("",!0),"short"==(0,n.R1)(r)?((0,t.uX)(),(0,t.CE)("div",kl,[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[yl])),_:1}),(0,t.bF)(g,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,t.Q3)("",!0),null!=(0,n.R1)(r)?((0,t.uX)(),(0,t.CE)("div",_l,[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[Vl])),_:1})])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),(0,t.bF)(y,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[d.value?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(m,{key:0,flat:"",label:"Add Event",onClick:l[5]||(l[5]=e=>v())},null,512)),[[h]]):(0,t.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(sl),{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e),nodeNumber:(0,n.R1)(a).state.selected_node,eventIdentifier:c.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}};var ql=a(7878);const Nl=hl,Fl=Nl;m()(hl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QRadio:ql.A,QInput:T.A,QCardActions:Xe.A}),m()(hl,"directives",{ClosePopup:Pe.A});const xl={class:"text-h6"},Cl=(0,t.Lk)("div",{class:"text-h6"},"Are you sure you want to delete all events for this node?",-1),wl="DeleteAllEventsDialog",Al={__name:"DeleteAllEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=e,i=l,d=(0,t.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log(wl+": deleteAllEvents "+s.nodeNumber),a.methods.delete_all_events(s.nodeNumber)};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(l,s)=>{const i=(0,t.g2)("q-btn"),u=(0,t.g2)("q-banner"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",xl," Delete all events for node "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[Cl])),_:1}),(0,t.bF)(m,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Il=Al,Rl=Il;m()(Al,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Al,"directives",{ClosePopup:Pe.A});const Ql={class:"text-h6"},El="AdvancedEventsDialog",Wl={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=()=>{console.log(El+": deleteAllEvents "+i.nodeNumber),s.value=!0};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(l,i)=>{const d=(0,t.g2)("q-btn"),c=(0,t.g2)("q-banner"),m=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Ql," Advanced events functions for node "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(m,{align:"left",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"positive",label:"Delete all events",onClick:i[0]||(i[0]=e=>u())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Rl),{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Sl=Wl,Ll=Sl;m()(Wl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(Wl,"directives",{ClosePopup:Pe.A});const Tl={class:"text-h6"},Bl={class:"text-h6"},Dl={class:"text-h6"},Kl=(0,t.Lk)("div",{class:"text-h6"},"Generate event",-1),Ul=(0,t.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1),Xl={class:"q-pa-md q-gutter-sm"},Ol="SendEventDialog",Pl={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,t.wB)(r,(()=>{console.log(Ol+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?a.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):a.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?a.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):a.methods.long_off_event(e,i.eventNumber)};return(e,l)=>{const d=(0,t.g2)("q-btn"),m=(0,t.g2)("q-banner"),b=(0,t.g2)("q-card-section"),p=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card"),g=(0,t.g2)("q-dialog"),f=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Tl," Test event : "+(0,o.v_)((0,n.R1)(a).getters.event_name(i.eventIdentifier)),1)])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",Bl,"Sending Node "+(0,o.v_)(i.sendingNodeNumber),1),(0,t.Lk)("div",Dl,"Event "+(0,o.v_)(s.value)+":"+(0,o.v_)(i.eventNumber),1)])),_:1}),(0,t.bF)(b,{class:"q-pa-md"},{default:(0,t.k6)((()=>[Kl,Ul,(0,t.Lk)("div",Xl,[(0,t.bo)((0,t.bF)(d,{color:"green",label:"ON",onClick:l[0]||(l[0]=e=>u())},null,512),[[f]]),(0,t.bo)((0,t.bF)(d,{color:"negative",label:"OFF",onClick:l[1]||(l[1]=e=>c())},null,512),[[f]])])])),_:1}),(0,t.bF)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"])}}},zl=Pl,Ml=zl;m()(Pl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Pl,"directives",{ClosePopup:Pe.A});const jl={class:"text-h6"},$l=(0,t.Lk)("div",{class:"text-h6"},"Are you sure you want to delete this event?",-1),Hl={__name:"DeleteEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=e,i=l,d=(0,t.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=()=>{console.log("removeEvent "+s.nodeNumber+" "+s.eventIdentifier),a.methods.remove_event(s.nodeNumber,s.eventIdentifier)};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(e,l)=>{const i=(0,t.g2)("q-btn"),u=(0,t.g2)("q-banner"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",jl," Delete event : "+(0,o.v_)((0,n.R1)(a).getters.event_name(s.eventIdentifier)),1)])),_:1}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[$l])),_:1}),(0,t.bF)(m,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"positive",label:"Yes",onClick:l[0]||(l[0]=e=>r())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Gl=Hl,Jl=Gl;m()(Hl,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Hl,"directives",{ClosePopup:Pe.A});const Yl={class:"text-h6"},Zl=(0,t.Lk)("div",{class:"text-h6"},"Event name",-1),ea=(0,t.Lk)("div",{class:"text-h6"},"Event group",-1),la="NameEventDialog",aa={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)(""),d=e,r=l,u=(0,t.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,t.$u)((()=>{a.state.layout.eventDetails[d.eventIdentifier]&&(s.value=a.state.layout.eventDetails[d.eventIdentifier].name,i.value=a.state.layout.eventDetails[d.eventIdentifier].group)}));const c=()=>{console.log(la+": clickAccept: name: "+d.eventIdentifier+" "+s.value),a.setters.event_name(d.eventIdentifier,s.value),a.setters.event_group(d.eventIdentifier,i.value),s.value="",i.value=""};return(e,l)=>{const r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-banner"),b=(0,t.g2)("q-input"),p=(0,t.g2)("q-card-section"),v=(0,t.g2)("q-card-actions"),g=(0,t.g2)("q-card"),f=(0,t.g2)("q-dialog"),k=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(g,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Yl," Edit name for event : "+(0,o.v_)((0,n.R1)(a).getters.event_name(d.eventIdentifier)),1)])),_:1}),(0,t.bF)(p,{class:"q-pt-none"},{default:(0,t.k6)((()=>[Zl,(0,t.bF)(b,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"q-pt-none"},{default:(0,t.k6)((()=>[ea,(0,t.bF)(b,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(v,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ta=aa,na=ta;m()(aa,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(aa,"directives",{ClosePopup:Pe.A});const oa=(0,t.Lk)("div",{class:"text-h6"},"Node parameters are still loading",-1),sa=(0,t.Lk)("div",{class:"text-h6"},"Please wait",-1),ia={__name:"parametersLoadingDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,t.WQ)("store");const a=e,n=l,o=(0,t.EW)({get(){return a.modelValue},set(e){n("update:modelValue",e)}});return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{})),(e,l)=>{const a=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-btn"),s=(0,t.g2)("q-card-actions"),i=(0,t.g2)("q-card"),d=(0,t.g2)("q-dialog"),r=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[oa,sa])),_:1}),(0,t.bF)(s,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},da=ia,ra=da;m()(ia,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QCardActions:Xe.A,QBtn:Ue.A}),m()(ia,"directives",{ClosePopup:Pe.A});const ua=(0,t.Lk)("div",{class:"text-h6"},"Node Variables are still loading",-1),ca=(0,t.Lk)("div",{class:"text-h6"},"Please wait",-1),ma={__name:"NodevariablesLoadingDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,t.WQ)("store");const a=e,n=l,o=(0,t.EW)({get(){return a.modelValue},set(e){n("update:modelValue",e)}});return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(e,l)=>{const a=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-btn"),s=(0,t.g2)("q-card-actions"),i=(0,t.g2)("q-card"),d=(0,t.g2)("q-dialog"),r=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[ua,ca])),_:1}),(0,t.bF)(s,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",label:"Close"},null,512),[[r]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ba=ma,pa=ba;m()(ma,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QCardActions:Xe.A,QBtn:Ue.A}),m()(ma,"directives",{ClosePopup:Pe.A});const va={class:"text-h6"},ga=(0,t.Lk)("div",{class:"text-h6"},"Teach Event",-1),fa=(0,t.Lk)("div",{class:"text-subtitle2"},"To consumer nodes only",-1),ka={class:"q-pa-xs q-gutter-sm"},ya=(0,t.Lk)("div",{class:"text-h6"},"Taught Events",-1),_a=(0,t.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1),Va="EventTeachDialog",ha={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)(0),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=e,p=l,v=(0,t.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}}),g=(0,n.KR)(),f=(0,n.KR)([]),k=(0,n.KR)([]),y=(0,n.KR)([]),_=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=(0,t.EW)((()=>Object.values(a.state.nodes)));(0,t.wB)(V,(()=>{h()}));const h=async()=>{y.value=[],k.value=[],V.value.forEach((e=>{if(Object.values(e.storedEventsNI).length>0){let l=Object.values(e.storedEventsNI);l.forEach((async l=>{if(l.eventIdentifier==b.eventIdentifier){k.value.push(e.nodeNumber);var t=a.state.layout.nodeDetails[e.nodeNumber].name;y.value.push({number:e.nodeNumber,name:t,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier})}}))}})),q()},q=()=>{try{f.value=[];var e=a.state.nodes;for(var l in e){var t=!0;for(var n in k.value)k.value[n]==l&&(t=!1);if(t&&e[l].consumer){var o=l+": ";a.state.layout&&(a.state.layout.nodeDetails[l]&&(o+=a.state.layout.nodeDetails[l].name),f.value.push(o))}}}catch(s){console.log(Va+": update_available_nodes: "+s)}};(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{b.eventIdentifier&&h()}));const N=async e=>{if(a.state.nodes[e].parameters[9]);else{a.methods.request_all_node_parameters(e,20,100),c.value=!0;var l=0;try{while(void 0==a.state.nodes[e].parameters[9])if(await d(10),l++,l>500)throw"failed to read Node Parameters";c.value=!1}catch(t){console.log(Va+": checkNodeParameters: "+t),c.value=!1}await d(1e3)}},F=async e=>{var l=a.state.nodes[e].parameters[6];if(a.state.nodes[e].nodeVariables[l]);else{a.methods.request_all_node_variables(e,a.state.nodes[e].parameters[6],100,1),u.value=!0;var t=10*l+20;try{while(void 0==a.state.nodes[e].nodeVariables[l])if(await d(10),t--,t<0)throw"failed to read Node Variables";u.value=!1}catch(n){console.log(Va+": checkNodeVariables: "+n),u.value=!1}await d(1e3)}},x=async()=>{if(console.log(Va+`: clickTeachEvent: ${g.value} : ${b.eventIdentifier}`),""!=g.value){var e=g.value.split(":"),l=parseInt(e[0]);await N(l),await F(l),dl(a,l,b.eventIdentifier),i.value=l,s.value=b.eventIdentifier,m.value=!0,r.value=!0,g.value=void 0}},C=(e,l)=>{console.log(Va+": clickVariables "+e+" "+l),i.value=e,s.value=l,m.value=!1,r.value=!0};return(e,l)=>{const d=(0,t.g2)("q-btn"),p=(0,t.g2)("q-banner"),k=(0,t.g2)("q-card-section"),V=(0,t.g2)("q-select"),h=(0,t.g2)("q-card"),q=(0,t.g2)("q-td"),N=(0,t.g2)("q-tr"),F=(0,t.g2)("q-table"),w=(0,t.g2)("q-dialog"),A=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(w,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(h,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[A]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",va," Teach event : "+(0,o.v_)((0,n.R1)(a).getters.event_name(b.eventIdentifier)),1)])),_:1})])),_:1}),(0,t.bF)(h,{style:{"min-width":"800px"}},{default:(0,t.k6)((()=>[(0,t.bF)(k,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[ga,fa,(0,t.bF)(V,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),options:f.value},null,8,["modelValue","options"]),(0,t.Lk)("div",ka,[(0,t.bF)(d,{color:"negative",label:"Teach",onClick:l[1]||(l[1]=e=>x()),"no-caps":""})])])),_:1})])),_:1}),(0,t.bF)(h,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,t.k6)((()=>[ya,_a,(0,t.bF)(F,{flat:"",bordered:"",dense:"",rows:y.value,columns:_,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{body:(0,t.k6)((e=>[(0,t.bF)(N,{props:e,class:"q-my-none q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{key:"number",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.number),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"name",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.name),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"actions",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(d,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>C(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(sl),{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),nodeNumber:i.value,eventIdentifier:s.value,newEvent:m.value},null,8,["modelValue","nodeNumber","eventIdentifier","newEvent"]),(0,t.bF)((0,n.R1)(ra),{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(pa),{modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=e=>u.value=e)},null,8,["modelValue"])],64)}}};var qa=a(528),Na=a(4488),Fa=a(5262);const xa=ha,Ca=xa;m()(ha,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QSelect:M.A,QTable:qa.A,QTr:Na.A,QTd:Fa.A}),m()(ha,"directives",{ClosePopup:Pe.A});const wa={style:{height:"45vh"}},Aa={class:"text-h6"},Ia={class:"full-width"},Ra="EventsListByNode",Qa={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const l=(0,t.WQ)("store"),a=(0,n.KR)([]),s=(0,n.KR)(!1),i=(0,n.KR)(!1),d=(0,n.KR)(!1),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=(0,n.KR)(),p=(0,n.KR)(""),v=((0,n.KR)(0),(0,n.KR)(0));(0,n.KR)();const g=e,f=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventIndex",field:"eventIndex",required:!0,label:"Event index",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],k=(0,t.EW)((()=>g.nodeNumber));(0,t.wB)(k,(()=>{h()}));const y=(0,t.EW)((()=>Object.values(l.state.nodes[g.nodeNumber].storedEvents)));(0,t.wB)(y,(()=>{h()}));const _=(0,t.EW)((()=>Object.values(l.state.busEvents)));(0,t.wB)(_,(()=>{h()}));const V=(0,t.EW)((()=>l.state.layout.eventDetails));(0,t.wB)(V,(()=>{h()}));const h=()=>{a.value=[];var e=Object.values(l.state.nodes[g.nodeNumber].storedEvents);e.forEach((e=>{var t=parseInt(e.eventIdentifier.substr(0,4),16),n=parseInt(e.eventIdentifier.substr(4,4),16);let o={};o["eventIdentifier"]=e.eventIdentifier,o["eventName"]=l.getters.event_name(e.eventIdentifier),o["eventGroup"]=l.getters.event_group(e.eventIdentifier),o["eventIndex"]=e.eventIndex,o["nodeNumber"]=t,o["eventNumber"]=n,o["eventType"]=0==t?"short":"long",o["storedEvent"]=!0,o["source"]="stored event",a.value.push(o)}));var t=Object.values(l.state.busEvents);t.forEach((t=>{if(t.nodeNumber==g.nodeNumber){var n=!1,o=t.eventIdentifier;if("short"==t.type&&(o="0000"+o.substr(4,4)),e.forEach((e=>{o==e.eventIdentifier&&(n=!0)})),0==n){let e={};e["eventIdentifier"]=o,e["eventName"]=l.getters.event_name(o),e["eventGroup"]=l.getters.event_group(o),e["nodeNumber"]=t.nodeNumber,e["eventNumber"]=t.eventNumber,e["eventType"]=t.type,e["storedEvent"]=!1,e["source"]="bus event",a.value.push(e)}}})),a.value.sort((function(e,l){return e.eventIdentifier<l.eventIdentifier?-1:1}))},q=e=>{l.methods.request_all_event_variables(g.nodeNumber,e,100,l.state.nodes[g.nodeNumber].parameters[5])};(0,t.KC)((()=>{h()})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{}));const N=()=>{console.log(Ra+": clickAddEvent"),s.value=!0},F=()=>{console.log(Ra+": clickAdvanced"),i.value=!0},x=e=>{console.log(Ra+": clickDelete"),d.value=!0,p.value=e},C=e=>{console.log(Ra+": clickEventName "+e),p.value=e,b.value=l.getters.event_name(e),c.value=!0},w=()=>{console.log(Ra+": clickRefresh"),l.methods.request_all_node_events(g.nodeNumber),h()},A=e=>{console.log(Ra+": send OFF "+e);var a=parseInt(e.slice(0,4),16),t=parseInt(e.slice(4,8),16);0==a?l.methods.short_off_event(g.nodeNumber,t):l.methods.long_off_event(a,t)},I=e=>{console.log(Ra+": send ON "+e);var a=parseInt(e.slice(0,4),16),t=parseInt(e.slice(4,8),16);0==a?l.methods.short_on_event(g.nodeNumber,t):l.methods.long_on_event(a,t)},R=e=>{console.log(Ra+": clickTeach"),p.value=e,r.value=!0},Q=(e,l)=>{q(e),p.value=l,console.log(Ra+": clickVariables: node "+g.nodeNumber),u.value=!0};return(b,k)=>{const y=(0,t.g2)("q-btn"),_=(0,t.g2)("q-banner"),V=(0,t.g2)("q-td"),h=(0,t.g2)("q-tr"),q=(0,t.g2)("q-table");return(0,t.uX)(),(0,t.CE)("div",wa,[(0,t.bF)(_,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bF)(y,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:k[0]||(k[0]=e=>N())}),(0,t.bF)(y,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:k[1]||(k[1]=e=>F())}),(0,t.bF)(y,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:k[2]||(k[2]=e=>w())})])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Aa," Events for node : "+(0,o.v_)((0,n.R1)(l).getters.node_name(g.nodeNumber)),1)])),_:1}),(0,t.Lk)("div",Ia,[(0,t.bF)(q,{class:"my-sticky-header-table",bordered:"",dense:"",rows:a.value,columns:f,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,t.k6)((e=>[(0,t.bF)(h,{props:e,class:(0,o.C4)([p.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,t.k6)((()=>[(0,t.bF)(V,{key:"eventIdentifier",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"eventName",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventName),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"group",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventGroup),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"nodeNumber",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.nodeNumber),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"eventNumber",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventNumber),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"eventIndex",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventIndex),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"eventType",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventType),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"source",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.source),1)])),_:2},1032,["props"]),(0,t.bF)(V,{key:"actions",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>C(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:l=>Q(e.row.eventIndex,e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>R(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>I(e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send ON")])),_:2},1032,["onClick"]),(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>A(e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send OFF")])),_:2},1032,["onClick"]),(0,t.bF)(y,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>x(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","class"])])),_:1},8,["rows"])]),(0,t.bF)((0,n.R1)(Fl),{modelValue:s.value,"onUpdate:modelValue":k[3]||(k[3]=e=>s.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(Ll),{modelValue:i.value,"onUpdate:modelValue":k[4]||(k[4]=e=>i.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(na),{modelValue:c.value,"onUpdate:modelValue":k[5]||(k[5]=e=>c.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ca),{modelValue:r.value,"onUpdate:modelValue":k[6]||(k[6]=e=>r.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ml),{modelValue:m.value,"onUpdate:modelValue":k[7]||(k[7]=e=>m.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:v.value,eventIdentifier:p.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,t.bF)((0,n.R1)(Jl),{modelValue:d.value,"onUpdate:modelValue":k[8]||(k[8]=e=>d.value=e),nodeNumber:e.nodeNumber,eventIdentifier:p.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,t.bF)((0,n.R1)(sl),{modelValue:u.value,"onUpdate:modelValue":k[9]||(k[9]=e=>u.value=e),nodeNumber:e.nodeNumber,eventIdentifier:p.value},null,8,["modelValue","nodeNumber","eventIdentifier"])])}}},Ea=Qa,Wa=Ea;m()(Qa,"components",{QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QTr:Na.A,QTd:Fa.A});const Sa={class:"text-h6"},La=(0,t.Lk)("div",{class:"text-h6"},"Are you sure you want to delete this node?",-1),Ta="DeleteNodeDialog",Ba={__name:"DeleteNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=e,i=l,d=(0,t.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const r=()=>{console.log(Ta+": deleting node "+s.nodeNumber),a.methods.remove_node(s.nodeNumber),a.eventBus.emit("NODE_DELETED_EVENT",s.nodeNumber)};return(l,s)=>{const i=(0,t.g2)("q-btn"),u=(0,t.g2)("q-banner"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Sa," Delete node "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[La])),_:1}),(0,t.bF)(m,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",colour:"positive",label:"Yes",onClick:s[0]||(s[0]=e=>r())},null,512),[[v]]),(0,t.bo)((0,t.bF)(i,{flat:"",colour:"positive",label:"No"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Da=Ba,Ka=Da;m()(Ba,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QCardActions:Xe.A}),m()(Ba,"directives",{ClosePopup:Pe.A});const Ua={class:"text-h6"},Xa=(0,t.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),Oa={class:"text-subtitle2"},Pa="ProgramNodeDialog",za={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(),i=(0,n.KR)(!1),d=(0,n.KR)(!1),r=(0,n.KR)(!1),u=(0,n.KR)("");var c=0,m=void 0;const b=e,p=l,v=(0,t.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,t.wB)(v,(()=>{})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const g=async()=>{if(s.value){var e=s.value.name;console.log(Pa+": selected filename "+e);let l=new FileReader;l.readAsText(s.value),l.onload=function(){try{console.log(Pa+": actionUpload: result: "+l.result)}catch(e){console.log(Pa+": actionUpload: "+e)}a.methods.program_node(b.nodeNumber,m,c,s.value)}}else console.log(Pa+": actionUpload: uploadFile no value ")};a.eventBus.on("PROGRAM_NODE_PROGRESS",(e=>{u.value=e}));const f=async()=>{c=i.value?1|c:-2&c,c=d.value?2|c:-3&c,c=r.value?4|c:-5&c,m=a.state.nodes[b.nodeNumber].parameters[9],console.log(Pa+": clickProgram: node: "+b.nodeNumber+" cpuType: "+m+" flags: "+c),await g()};return(l,c)=>{const m=(0,t.g2)("q-btn"),b=(0,t.g2)("q-banner"),p=(0,t.g2)("q-card-section"),g=(0,t.g2)("q-file"),k=(0,t.g2)("q-checkbox"),y=(0,t.g2)("q-card-actions"),_=(0,t.g2)("q-card"),V=(0,t.g2)("q-dialog"),h=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(V,{modelValue:v.value,"onUpdate:modelValue":c[5]||(c[5]=e=>v.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(_,{style:{"min-width":"400px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Ua," program Node "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[Xa,(0,t.Lk)("div",Oa," Node CPU type "+(0,o.v_)((0,n.R1)(a).state.nodes[e.nodeNumber].cpuName)+" ("+(0,o.v_)((0,n.R1)(a).state.nodes[e.nodeNumber].parameters[9])+") ",1)])),_:1}),(0,t.bF)(g,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=e=>s.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,t.bF)(p,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.eW)(" FLASH memory is always programmed ")])),_:1}),(0,t.bF)(p,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=e=>i.value=e),label:"Program configuration"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:d.value,"onUpdate:modelValue":c[2]||(c[2]=e=>d.value=e),label:"Program EEPROM"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:r.value,"onUpdate:modelValue":c[3]||(c[3]=e=>r.value=e),label:"Ignore CPU type"},null,8,["modelValue"])])),_:1}),(0,t.bF)(p,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(u.value),1)])),_:1}),(0,t.bF)(y,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{flat:"",label:"Program",onClick:c[4]||(c[4]=e=>f())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ma=za,ja=Ma;m()(za,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QFile:Oe.A,QCardActions:Xe.A,QCheckbox:u.A}),m()(za,"directives",{ClosePopup:Pe.A});const $a={class:"text-h6"},Ha={class:"q-pa-md"},Ga="SetCanIdDialog",Ja={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(),i=e,r=l,u=(0,t.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,t.$u)((()=>{}));const c=async()=>{s.value&&(console.log(Ga+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),a.methods.set_can_id(i.nodeNumber,s.value),await d(100),a.methods.query_all_nodes()),s.value=void 0};return(l,i)=>{const d=(0,t.g2)("q-btn"),r=(0,t.g2)("q-banner"),m=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-input"),p=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card"),g=(0,t.g2)("q-dialog"),f=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{style:{"min-width":"400px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",$a," Set CAN ID for node : "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(m,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null," Current CAN ID: "+(0,o.v_)((0,n.R1)(a).getters.node_can_id(e.nodeNumber)),1)])),_:1}),(0,t.Lk)("div",Ha,[(0,t.eW)(" Enter new CAN ID, 1 to 99 "),(0,t.bF)(b,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,t.bF)(p,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ya=Ja,Za=Ya;m()(Ja,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(Ja,"directives",{ClosePopup:Pe.A});const et={class:"text-h6"},lt="AdvancedNodeDialog",at={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(!1),d=(0,n.KR)(!1),r=e,u=l,c=(0,t.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}}),m=()=>{console.log(lt+": clickCanIdEnumeration "+r.nodeNumber),a.methods.node_can_id_enum(r.nodeNumber)},b=()=>{console.log(lt+": clickDeleteNode "+r.nodeNumber),s.value=!0},p=()=>{console.log(lt+": clickProgramNode "+r.nodeNumber),i.value=!0},v=()=>{console.log(lt+": clickResetNode "+r.nodeNumber),a.methods.reset_node(r.nodeNumber)},g=()=>{console.log(lt+": clickSetCAN_ID "+r.nodeNumber),d.value=!0};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(l,r)=>{const u=(0,t.g2)("q-btn"),f=(0,t.g2)("q-banner"),k=(0,t.g2)("q-card-actions"),y=(0,t.g2)("q-card"),_=(0,t.g2)("q-dialog"),V=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(_,{modelValue:c.value,"onUpdate:modelValue":r[5]||(r[5]=e=>c.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(y,{style:{"min-width":"450px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",et," Advanced functions for node "+(0,o.v_)((0,n.R1)(a).getters.node_name(e.nodeNumber)),1)])),_:1}),(0,t.bF)(k,{align:"left"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete node",onClick:r[0]||(r[0]=e=>b())})])),_:1}),(0,t.bF)(k,{align:"left"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:r[1]||(r[1]=e=>m())})])),_:1}),(0,t.bF)(k,{align:"left"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:r[2]||(r[2]=e=>g())})])),_:1}),(0,t.bF)(k,{align:"left"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:r[3]||(r[3]=e=>v())})])),_:1}),(0,t.bF)(k,{align:"left"},{default:(0,t.k6)((()=>[(0,n.R1)(a).state.develop?((0,t.uX)(),(0,t.Wv)(u,{key:0,dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:r[4]||(r[4]=e=>p())})):(0,t.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.eW)(" /> "),(0,t.bF)((0,n.R1)(Ka),{modelValue:s.value,"onUpdate:modelValue":r[6]||(r[6]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(ja),{modelValue:i.value,"onUpdate:modelValue":r[7]||(r[7]=e=>i.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(Za),{modelValue:d.value,"onUpdate:modelValue":r[8]||(r[8]=e=>d.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},tt=at,nt=tt;m()(at,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(at,"directives",{ClosePopup:Pe.A});const ot={class:"text-h6"},st={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,t.$u)((()=>{a.state.layout.nodeDetails[i.nodeNumber]&&(s.value=a.state.layout.nodeDetails[i.nodeNumber].name)}));const u=()=>{console.log("new node name: "+s.value),a.setters.node_name(i.nodeNumber,s.value)};return(l,a)=>{const n=(0,t.g2)("q-btn"),i=(0,t.g2)("q-banner"),d=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card-actions"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",ot," Edit name for node : "+(0,o.v_)(e.nodeNumber),1)])),_:1}),(0,t.bF)(c,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{dense:"",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",label:"Accept",onClick:a[1]||(a[1]=e=>u())},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},it=st,dt=it;m()(st,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(st,"directives",{ClosePopup:Pe.A});const rt={__name:"NodeParameter",props:["Name","Value"],setup(e){return(l,a)=>{const n=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(n,{class:"q-pa-xs",flat:""},{default:(0,t.k6)((()=>[(0,t.Lk)("b",null,(0,o.v_)(e.Name),1),(0,t.eW)(" : "+(0,o.v_)(e.Value),1)])),_:1})}}},ut=rt,ct=ut;m()(rt,"components",{QCard:k.A});const mt={class:"text-h6"},bt="NodeParametersDialog",pt={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,t.EW)((()=>a.state.nodes[i.nodeNumber].moduleDescriptorFilename));(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const c=()=>{console.log(bt+": clickUpdateModuleDescriptor"),s.value=!0};return(e,l)=>{const d=(0,t.g2)("q-btn"),m=(0,t.g2)("q-banner"),b=(0,t.g2)("q-card-section"),p=(0,t.g2)("q-card"),v=(0,t.g2)("q-dialog"),g=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(v,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(p,{style:{"min-width":"700px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bF)(d,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[0]||(l[0]=e=>c())}),(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",mt," Parameter Information for "+(0,o.v_)((0,n.R1)(a).getters.node_name(i.nodeNumber)),1)])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(ct),{Name:"Node Number",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Events Currently Stored",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Manufacturer",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Module",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Module Identifier",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Producer",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Consumer",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Consume own Events",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"VLCB",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Node Variables",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Events Supported",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Event Variables",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"CPU Name",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Interface",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Firmware Version",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,n.R1)(a).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Beta Version",Value:(0,n.R1)(a).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,t.bF)((0,n.R1)(ct),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Me),{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e)},null,8,["modelValue"])],64)}}},vt=pt,gt=vt;m()(pt,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A}),m()(pt,"directives",{ClosePopup:Pe.A});const ft="NodeVariableBit",kt={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,a=(l.name?l.name:l.variableIndex,(0,t.WQ)("store")),o=(0,n.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,t.EW)({get(){return a.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]},set(e){l.learn?a.methods.update_node_variable_in_learn_mode(l.nodeNumber,l.variableIndex,e):a.methods.update_node_variable(l.nodeNumber,l.variableIndex,e)}});(0,t.wB)(i,((e,t)=>{o.value=!!(a.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit])}));const d=()=>{let e=i.value;o.value?e|=s[l.bit]:e&=~s[l.bit],l.learn?a.methods.update_node_variable_in_learn_mode(l.nodeNumber,l.variableIndex,e):a.methods.update_node_variable(l.nodeNumber,l.variableIndex,e)};return(0,t.sV)((()=>{const e=!!(a.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit]);o.value=e})),(e,l)=>{const a=(0,t.g2)("q-checkbox");return(0,t.uX)(),(0,t.Wv)(a,{"min-width":"100",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),label:ft,onClick:d,"right-label":""},null,8,["modelValue"])}}},yt=kt,_t=yt;m()(kt,"components",{QCheckbox:u.A});const Vt={class:"text-h6"},ht={class:"text-subtitle2"},qt={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""}},setup(e){const l=(0,t.WQ)("store");(0,n.KR)();var a=(0,n.KR)();const s=e,i=(0,t.EW)((()=>l.state.nodes[s.nodeNumber].nodeVariables));function d(){for(var e in a.value=[],s.bitCollection)if(s.bitCollection[e].overload){var t=K(s.nodeNumber,s.bitCollection[e].overload,l);if(t){var n={bitPosition:s.bitCollection[e].bitPosition,label:t};a.value.push(n)}}else s.bitCollection[e].label&&a.value.push(s.bitCollection[e])}return(0,t.wB)(i,(()=>{d()})),(0,t.sV)((()=>{d()})),(l,s)=>{const i=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(d,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Vt,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",ht,(0,o.v_)(e.displaySubTitle),1),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(a),(l=>((0,t.uX)(),(0,t.CE)("div",{key:l},[(0,t.bF)((0,n.R1)(_t),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:l.bitPosition,name:l.label},null,8,["nodeNumber","variableIndex","bit","name"])])))),128))])),_:1})])),_:1})}}},Nt=qt,Ft=Nt;m()(qt,"components",{QCard:k.A,QCardSection:y.A});const xt={class:"text-h6"},Ct={class:"text-subtitle2"},wt="NodeVariableBitsingle",At={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},name:{type:String,required:!1},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){(0,t.WQ)("store");return(0,t.sV)((()=>{})),(l,a)=>{const s=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",xt,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",Ct,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)((0,n.R1)(_t),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit,learn:e.learn,name:wt},null,8,["nodeNumber","variableIndex","bit","learn"])])),_:1})])),_:1})}}},It=At,Rt=It;m()(At,"components",{QCard:k.A,QCardSection:y.A});const Qt={class:"text-h6"},Et={class:"text-subtitle2"},Wt={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:65025},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,a=(l.name&&l.name,(0,t.WQ)("store")),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),r=(0,t.EW)((()=>(a.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+a.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]));(0,t.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<l.min||e>l.max?(console.log(`Invalid Value : ${e}`),s.value=!0,i.value="Invalid Value"):(console.log(`Value Ok : ${e}`),s.value=!1,i.value="",a.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexHigh,e>>8),a.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexLow,255&e))};return(0,t.sV)((()=>{d.value=(a.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+a.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]})),(l,a)=>{const n=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Qt,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",Et,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{mask:"#####",debounce:"1000",hint:e.hint,modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["hint","modelValue","error-message","error"])])),_:1})])),_:1})}}},St=Wt,Lt=St;m()(Wt,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const Tt={class:"q-pa-xs row"},Bt={style:{border:"2px solid grey"},class:"q-pa-xs no-margin"},Dt={class:"GroupTitle q-py-none"},Kt={__name:"NodeVariableGroup",props:{configuration:Object},setup(e){(0,t.WQ)("store"),(0,n.KR)("nvGroup");return(0,t.sV)((()=>{})),(0,t.$u)((()=>{})),(l,a)=>((0,t.uX)(),(0,t.CE)("div",Tt,[(0,t.Lk)("div",Bt,[(0,t.Lk)("div",Dt,(0,o.v_)(e.configuration.displayTitle),1),(0,t.bF)((0,n.R1)(vn),{configuration:e.configuration.groupItems},null,8,["configuration"])])]))}},Ut=(0,R.A)(Kt,[["__scopeId","data-v-88ba305a"]]),Xt=Ut,Ot={class:"text-h6"},Pt={class:"text-subtitle2"},zt={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},max:{type:Number,default:255},min:{type:Number,default:0},hint:{type:String,default:""},learn:{type:Boolean,default:!1}},setup(e){const l=e,a=(l.name?l.name:l.nodeVariableIndex,(0,t.WQ)("store")),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),r=(0,t.EW)((()=>a.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,t.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<l.min||e>l.max?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",a.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,e))};return(0,t.sV)((()=>{d.value=r.value})),(l,a)=>{const n=(0,t.g2)("q-input"),r=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Ot,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",Pt,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{mask:"###",debounce:"1000",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["modelValue","error-message","error"])])),_:1})])),_:1})}}},Mt=zt,jt=Mt;m()(zt,"components",{QCard:k.A,QCardSection:y.A,QInput:T.A});const $t={class:"text-h6"},Ht={class:"text-subtitle2"},Gt={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},learn:{type:Boolean,default:!1}},setup(e){const l=e,a=(l.name?l.name:l.nodeVariableIndex,(0,t.WQ)("store")),s=(0,n.KR)(),i=(0,t.EW)((()=>a.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,t.wB)(i,(()=>{s.value=i.value&l.bitMask}));const d=e=>{console.log(`NodeVariableSelect update_variable ${e.value}`);let t=i.value;t|=e.value&l.bitMask,t&=e.value|~l.bitMask,a.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,t)};return(0,t.sV)((()=>{s.value=i.value&l.bitMask})),(l,a)=>{const n=(0,t.g2)("q-select"),i=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",$t,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",Ht,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{modelValue:s.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])])),_:1})])),_:1})}}},Jt=Gt,Yt=Jt;m()(Gt,"components",{QCard:k.A,QCardSection:y.A,QSelect:M.A});const Zt={class:"text-h6"},en={class:"text-subtitle2"},ln={key:0},an="NodeVariableSlider",tn={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object}},setup(e){const l=e,a=(l.name?l.name:l.nodeVariableIndex,(0,t.WQ)("store")),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,t.EW)((()=>{for(var e=0,a=l.startBit;a<=l.endBit;a++)e+=1<<a;return e}));let r=a.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex];const u=(0,t.EW)((()=>c.value?{height:"150px"}:{height:"120px"})),c=(0,t.EW)((()=>{var e=!1;return l&&(e=!!l.configuration.outputOnWrite),e}));(0,t.wB)(c,(()=>{}));const m=(0,t.EW)((()=>{var e=b.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e})),b=(0,t.EW)({get(){return(a.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]&d.value)>>l.startBit},set(e){if(e<=l.max&&e>=l.min){let t=e;t<<=l.startBit,r|=t&d.value,r&=t|~d.value,s.value=!1,i.value="",a.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r)}else console.log(an+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}}),p=e=>{s.value&&console.log(an+`: Invalid Value : ${e}`)};(0,t.$u)((()=>{})),(0,t.sV)((()=>{}));const v=()=>{console.log(an+": clickTest"),a.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r)};return(l,a)=>{const n=(0,t.g2)("q-badge"),s=(0,t.g2)("q-slider"),i=(0,t.g2)("q-btn"),d=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{style:(0,o.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Zt,(0,o.v_)(e.displayTitle),1),(0,t.Lk)("div",en,(0,o.v_)(e.displaySubTitle),1),(0,t.bF)(n,{color:"secondary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(m.value)+" "+(0,o.v_)(e.displayUnits),1)])),_:1}),(0,t.bF)(s,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),max:e.max,min:e.min,onChange:p},null,8,["modelValue","max","min"]),c.value?((0,t.uX)(),(0,t.CE)("div",ln,[(0,t.bF)(i,{dense:"",label:"Test",onClick:a[1]||(a[1]=e=>v()),"no-caps":""})])):(0,t.Q3)("",!0)])),_:1},8,["style"])])),_:1})}}},nn=tn,on=nn;m()(tn,"components",{QCard:k.A,QCardSection:y.A,QBadge:Z.A,QSlider:ee.A,QBtn:Ue.A});const sn={class:"no-padding no-margin"},dn={class:"no-padding no-margin row",style:{border:"1px solid grey"}},rn={__name:"NodeVariableTabs",props:{configuration:Object},setup(e){const l=e,a=(0,n.KR)(),o=(0,n.KR)();(0,t.WQ)("store"),(0,n.KR)("nvTabs"),(0,n.KR)("92vw");return(0,t.sV)((()=>{a.value=l.configuration.tabPanels,o.value=a.value[0].displayTitle})),(0,t.wB)(o,(()=>{})),(0,t.$u)((()=>{})),(e,l)=>{const s=(0,t.g2)("q-tab"),i=(0,t.g2)("q-tabs"),d=(0,t.g2)("q-tab-panel"),r=(0,t.g2)("q-tab-panels");return(0,t.uX)(),(0,t.CE)("div",sn,[(0,t.bF)(i,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,t.bF)(r,{"keep-alive":"",modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),class:"no-padding no-margin"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.displayTitle,name:e.displayTitle,class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",dn,[(0,t.bF)((0,n.R1)(vn),{configuration:e.items},null,8,["configuration"])])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}},un=rn,cn=un;m()(rn,"components",{QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A});const mn={class:"q-pa-xs row"},bn={__name:"NodeVariables",props:{configuration:Object},setup(e){const l=(0,t.WQ)("store");function a(e){var a=!0;return e.visibilityLogic&&(a=U(l.state.selected_node,e.visibilityLogic,l)),a}return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{})),(o,s)=>((0,t.uX)(),(0,t.CE)("div",mn,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.configuration,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e},["NodeVariableBitArray"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Ft),{key:0,nodeNumber:(0,n.R1)(l).state.selected_node,variableIndex:e.nodeVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,learn:!1},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle"])):(0,t.Q3)("",!0),"NodeVariableBitSingle"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Rt),{key:1,nodeNumber:(0,n.R1)(l).state.selected_node,variableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,bit:e.bit},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit"])):(0,t.Q3)("",!0),"NodeVariableDual"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Lt),{key:2,NodeVariableIndexLow:e.nodeVariableIndexLow,NodeVariableIndexHigh:e.nodeVariableIndexHigh,NodeNumber:(0,n.R1)(l).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle"])):(0,t.Q3)("",!0),"NodeVariableGroup"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Xt),{key:3,configuration:e},null,8,["configuration"])):(0,t.Q3)("",!0),"NodeVariableNumber"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(jt),{key:4,"node-number":(0,n.R1)(l).state.selected_node,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,"node-variable-index":e.nodeVariableIndex},null,8,["node-number","displayTitle","displaySubTitle","node-variable-index"])):(0,t.Q3)("",!0),"NodeVariableSelect"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Yt),{key:5,nodeVariableIndex:e.nodeVariableIndex,nodeNumber:(0,n.R1)(l).state.selected_node,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options"])):(0,t.Q3)("",!0),"NodeVariableSlider"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(on),{key:6,"node-number":(0,n.R1)(l).state.selected_node,nodeVariableIndex:e.nodeVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,t.Q3)("",!0),"NodeVariableTabs"==e.type&&a(e)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(cn),{key:7,configuration:e},null,8,["configuration"])):(0,t.Q3)("",!0)])))),128))]))}},pn=bn,vn=pn,gn={__name:"NodeVariableRaw",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},name:{type:String,required:!1}},setup(e){const l=e,a=l.name?l.name:"Variable"+l.nodeVariableIndex,o=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),r=(0,t.EW)((()=>o.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]));(0,t.wB)(r,(()=>{d.value=r.value}));const u=e=>{e<0||e>255||""==e?(s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",o.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,e))};return(0,t.sV)((()=>{d.value=r.value})),(e,l)=>{const o=(0,t.g2)("q-input"),r=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(r,{class:"q-pa-xs",flat:"",style:{"max-width":"300px"}},{default:(0,t.k6)((()=>[(0,t.bF)(o,{mask:"###",class:"bg-white",filled:"",label:(0,n.R1)(a),debounce:"1000",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:u},null,8,["label","modelValue","error-message","error"])])),_:1})}}},fn=gn,kn=fn;m()(gn,"components",{QCard:k.A,QInput:T.A});const yn={class:"text-h6"},_n={key:0,class:"text-h6"},Vn={key:1,class:"text-h6"},hn={key:1,class:"q-pa-none row"},qn={class:"q-pa-xs row"},Nn=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Variables descriptor"),(0,t.Lk)("br")],-1),Fn={class:"text-body2"},xn="NodevariablesDialog",Cn={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,s.A)(),i=(0,t.WQ)("store"),d=(0,n.KR)(!1),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=e,p=l,v=(0,t.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,t.wB)(v,(()=>{r.value=!1,m.value=!1}));const g=(0,t.EW)((()=>{var e=void 0;return b.nodeNumber&&void 0!=i.state.nodeDescriptors[b.nodeNumber]&&(e=i.state.nodeDescriptors[b.nodeNumber].nodeVariables),e}));(0,t.wB)(g,(()=>{void 0==g.value?(r.value=!0,d.value=!0):d.value=!1})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{b.nodeNumber&&(f(),0==i.state.nodes[b.nodeNumber].parameters[6]?u.value=!0:u.value=!1)}));const f=()=>{void 0==i.state.loadFile_notification_raised[b.nodeNumber]&&("Unknown"==i.state.nodes[b.nodeNumber].moduleName?(a.notify({message:"module name unknown",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0):void 0!=i.state.nodes[b.nodeNumber].moduleDescriptorFilename&&void 0==i.state.nodeDescriptors[b.nodeNumber]&&(a.notify({message:"Failed to load module file "+i.state.nodes[b.nodeNumber].moduleDescriptorFilename,timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),i.state.loadFile_notification_raised[b.nodeNumber]=!0),i.state.loadFile_notification_raised[b.nodeNumber]),void 0==g.value?(r.value=!0,d.value=!0):d.value=!1},k=()=>{console.log(xn+": clickToggleRaw"),r.value?r.value=!1:r.value=!0},y=()=>{console.log(xn+": clickToggleNodeDescriptor"),m.value?m.value=!1:m.value=!0},_=()=>{console.log(xn+": clickUpdateModuleDescriptor"),c.value=!0};return(l,a)=>{const s=(0,t.g2)("q-btn"),p=(0,t.g2)("q-banner"),f=(0,t.g2)("q-card-section"),V=(0,t.g2)("q-card"),h=(0,t.g2)("q-card-actions"),q=(0,t.g2)("q-dialog"),N=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(q,{modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value=e),persistent:"","full-width":"","full-height":""},{default:(0,t.k6)((()=>[(0,t.bF)(V,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,t.k6)((()=>[(0,t.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:a[0]||(a[0]=e=>_())}),(0,t.bo)((0,t.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",yn," Node Variables for node : "+(0,o.v_)((0,n.R1)(i).getters.node_name(e.nodeNumber)),1)])),_:1})])),_:1}),(0,t.bF)(V,null,{default:(0,t.k6)((()=>[(0,t.bF)(f,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[d.value?((0,t.uX)(),(0,t.CE)("div",_n," *** Descriptor not loaded for this node *** ")):(0,t.Q3)("",!0),u.value?((0,t.uX)(),(0,t.CE)("div",Vn," this node has no variables to display ")):(0,t.Q3)("",!0)])),_:1}),(0,n.R1)(i).state.nodeDescriptors[b.nodeNumber]?((0,t.uX)(),(0,t.Wv)((0,n.R1)(vn),{key:0,configuration:(0,n.R1)(i).state.nodeDescriptors[b.nodeNumber].nodeVariables},null,8,["configuration"])):(0,t.Q3)("",!0),r.value?((0,t.uX)(),(0,t.CE)("div",hn,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(i).state.nodes[b.nodeNumber].parameters[6],(e=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(kn),{"node-variable-index":e,"node-number":b.nodeNumber,key:e},null,8,["node-variable-index","node-number"])))),128))])):(0,t.Q3)("",!0),m.value?((0,t.uX)(),(0,t.Wv)(f,{key:2,class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",qn,[Nn,(0,t.Lk)("div",Fn,[(0,t.Lk)("pre",null,(0,o.v_)(g.value),1)])])])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(h,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:a[1]||(a[1]=e=>y())}),(0,t.bF)(s,{flat:"",label:"Toggle raw view",onClick:a[2]||(a[2]=e=>k())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Me),{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=e=>c.value=e)},null,8,["modelValue"])],64)}}},wn=Cn,An=wn;m()(Cn,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(Cn,"directives",{ClosePopup:Pe.A});const In={class:"text-h6"},Rn={key:0,class:"q-pa-xs row"},Qn=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Diagnostics"),(0,t.Lk)("br")],-1),En={class:"text-body2"},Wn="VLCBDiagnosticsDialog",Sn={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)([]),d=e,r=l,u=(0,t.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,t.wB)(u,(()=>{console.log(Wn+": WATCH model")}));const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,t.EW)((()=>{var e=void 0;return d.nodeNumber&&a.state.nodes[d.nodeNumber].services[d.serviceIndex]&&(e=Object.values(a.state.nodes[d.nodeNumber].services[d.serviceIndex].diagnostics)),e}));(0,t.wB)(m,(()=>{m.value&&b()}));const b=()=>{i.value=[],m.value.forEach((e=>{if(0!=e.DiagnosticCode){let l={};l["diagnosticCode"]=e.DiagnosticCode,l["diagnosticValue"]=e.DiagnosticValue,l["diagnosticName"]=e.DiagnosticName,i.value.push(l)}}))};(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const p=()=>{console.log(Wn+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(l,d)=>{const r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-banner"),b=(0,t.g2)("q-card-section"),v=(0,t.g2)("q-td"),g=(0,t.g2)("q-tr"),f=(0,t.g2)("q-table"),k=(0,t.g2)("q-card"),y=(0,t.g2)("q-card-actions"),_=(0,t.g2)("q-dialog"),V=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(_,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",In," VLCB Diagnostics for "+(0,o.v_)((0,n.R1)(a).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)])),_:1})])),_:1}),(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"no-margin q-pa-xs"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,t.k6)((e=>[(0,t.bF)(g,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(v,{key:"diagnosticCode",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.diagnosticCode),1)])),_:2},1032,["props"]),(0,t.bF)(v,{key:"diagnosticValue",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.diagnosticValue),1)])),_:2},1032,["props"]),(0,t.bF)(v,{key:"diagnosticName",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.diagnosticName),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,t.uX)(),(0,t.CE)("div",Rn,[Qn,(0,t.Lk)("div",En,[(0,t.Lk)("pre",null,(0,o.v_)((0,n.R1)(a).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)])])):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(y,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{flat:"",label:"Toggle diagnostics json",onClick:d[0]||(d[0]=e=>p())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ln=Sn,Tn=Ln;m()(Sn,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QTr:Na.A,QTd:Fa.A,QCardActions:Xe.A}),m()(Sn,"directives",{ClosePopup:Pe.A});const Bn=(0,t.Lk)("div",{class:"text-h6"}," VLCB Services ",-1),Dn={key:0,class:"q-pa-xs row"},Kn=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Services"),(0,t.Lk)("br")],-1),Un={class:"text-body2"},Xn="VLCBServicesDialog",On={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(!1),d=(0,n.KR)([]),r=(0,n.KR)(null),u=e,c=l,m=(0,t.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,t.wB)(m,(()=>{}));const b=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"diagnostics",field:"diagnostics",required:!0,label:"",align:"left"}],p=(0,t.EW)((()=>{var e={};return u.nodeNumber&&(e=Object.values(a.state.nodes[u.nodeNumber].services)),e}));(0,t.wB)(p,(()=>{v()}));const v=()=>{d.value=[],p.value.forEach((e=>{let l={};l["serviceIndex"]=e.ServiceIndex,l["serviceType"]=e.ServiceType,l["serviceName"]=e.ServiceName,l["serviceVersion"]=e.ServiceVersion,d.value.push(l)}))};(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const g=()=>{console.log(Xn+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},f=e=>{console.log(`clickiagnostics: index ${e}`),a.methods.request_diagnostics(u.nodeNumber,e),r.value=e,i.value=!0};return(l,u)=>{const c=(0,t.g2)("q-btn"),p=(0,t.g2)("q-banner"),v=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-td"),y=(0,t.g2)("q-tr"),_=(0,t.g2)("q-table"),V=(0,t.g2)("q-card"),h=(0,t.g2)("q-card-actions"),q=(0,t.g2)("q-dialog"),N=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(q,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=e=>m.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(V,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(c,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[N]])])),default:(0,t.k6)((()=>[Bn])),_:1})])),_:1}),(0,t.bF)(V,null,{default:(0,t.k6)((()=>[(0,t.bF)(v,{class:"no-margin q-pa-xs"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{class:"vlcb-services-table",dense:"",rows:d.value,columns:b,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{body:(0,t.k6)((e=>[(0,t.bF)(y,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(k,{key:"serviceIndex",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.serviceIndex),1)])),_:2},1032,["props"]),(0,t.bF)(k,{key:"serviceType",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.serviceType),1)])),_:2},1032,["props"]),(0,t.bF)(k,{key:"serviceName",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.serviceName),1)])),_:2},1032,["props"]),(0,t.bF)(k,{key:"serviceVersion",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.serviceVersion),1)])),_:2},1032,["props"]),(0,t.bF)(k,{key:"diagnostics",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(c,{color:"primary",flat:"",rounded:"",label:"diagnostics",onClick:l=>f(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),s.value?((0,t.uX)(),(0,t.CE)("div",Dn,[Kn,(0,t.Lk)("div",Un,[(0,t.Lk)("pre",null,(0,o.v_)((0,n.R1)(a).state.nodes[e.nodeNumber].services),1)])])):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(h,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{flat:"",label:"Toggle services json",onClick:u[0]||(u[0]=e=>g())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Tn),{modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:r.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},Pn=On,zn=Pn;m()(On,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QTr:Na.A,QTd:Fa.A,QCardActions:Xe.A}),m()(On,"directives",{ClosePopup:Pe.A});const Mn=(0,t.Lk)("div",{class:"text-h6"}," Example banner ",-1),jn=["src"],$n="DialogExampleCompositionAPI",Hn={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,t.WQ)("store"),(0,n.KR)(!1);const a=e,o=l,s=(0,t.EW)({get(){return a.modelValue},set(e){o("update:modelValue",e)}});(0,t.wB)(s,(()=>{console.log($n+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));return(l,a)=>{const n=(0,t.g2)("q-btn"),o=(0,t.g2)("q-banner"),i=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-card"),r=(0,t.g2)("q-dialog"),u=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(r,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])])),default:(0,t.k6)((()=>[Mn])),_:1})])),_:1}),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,jn)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Gn=Hn,Jn=Gn;m()(Hn,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A}),m()(Hn,"directives",{ClosePopup:Pe.A});const Yn={style:{height:"45vh"}},Zn=(0,t.Lk)("div",{class:"text-h6"},"Nodes View",-1),eo="NodesList",lo={__name:"NodesView",setup(e){const l=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"left",sortable:!0},{name:"CANID",field:"CANID",required:!0,label:"CAN ID",align:"left",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)([]),r=(0,n.KR)(),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),v=(0,n.KR)(),g=(0,n.KR)(!1),f=(0,n.KR)(!1),k=(0,n.KR)(!1),y=(0,n.KR)(!1),_=(0,n.KR)("dummyModule/index.html"),V=(0,t.EW)((()=>Object.values(a.state.nodes)));(0,t.wB)(V,(()=>{q()}));const h=(0,t.EW)((()=>a.state.layout.nodeDetails));(0,t.wB)(h,(()=>{q()}));const q=()=>{i.value=[],V.value.forEach((e=>{let l={};l["nodeNumber"]=e.nodeNumber,l["CANID"]=e.CANID,l["nodeName"]=a.getters.node_name(e.nodeNumber),l["moduleName"]=e.moduleName,l["component"]=e.component,l["status"]=e.status,l["mode"]=e.flim,l["events"]=e.eventCount,l["vlcb"]=e.VLCB,i.value.push(l)}))},N=e=>e in a.state.layout.nodeDetails?a.state.layout.nodeDetails[e].colour:"blue";(0,t.KC)((()=>{a.methods.query_all_nodes()}));const F=async e=>{if(a.state.nodes[e].parameters[9]);else{a.methods.request_all_node_parameters(e,20,100),g.value=!0;var l=0;try{while(void 0==a.state.nodes[e].parameters[9])if(await d(10),l++,l>500)throw"failed to read Node Parameters";g.value=!1}catch(t){console.log(eo+": checkNodeParameters: "+t),g.value=!1}}},x=async e=>{var l=a.state.nodes[e].parameters[6];if(a.state.nodes[e].nodeVariables[l]);else{a.methods.request_all_node_variables(e,a.state.nodes[e].parameters[6],100,1),f.value=!0;var t=10*l+20;try{while(void 0==a.state.nodes[e].nodeVariables[l])if(await d(10),t--,t<0)throw"failed to read Node Variables";f.value=!1}catch(n){console.log(eo+": checkNodeParameters: "+n),f.value=!1}}},C=async e=>{a.state.selected_node=e,a.methods.request_all_node_events(a.state.selected_node),v.value=e,u.value=!0,await d(200),a.methods.request_service_discovery(a.state.selected_node),await d(200)};a.eventBus.on("NODE_DELETED_EVENT",(e=>{a.state.selected_node==e&&(u.value=!1)}));const w=async e=>{await F(e),r.value=e,v.value=e,c.value=!0,console.log(eo+": clickAdvanced: node"+a.state.selected_node)},A=async e=>{await F(e),await x(e),await C(e),console.log(eo+": clickEvents: node",e)},I=async e=>{await F(e),C(e),console.log(eo+": clickNameNode: node "+e),m.value=!0},R=async e=>{await F(e),await C(e),console.log(eo+": clickParameters: node "+e),b.value=!0},Q=()=>{console.log(eo+": clickRefresh"),a.methods.query_all_nodes()},E=async e=>{await F(e),await C(e),console.log(eo+": clickVariables: node "+e),1e3==e&&a.state.develop?y.value=!0:a.state.nodes[e].parameters[9]&&(a.methods.request_all_node_variables(e,a.state.nodes[e].parameters[6],100,1),p.value=!0)},W=async e=>{console.log(eo+": clickVLCB"),await C(e),a.methods.request_diagnostics(e),k.value=!0};return(e,d)=>{const V=(0,t.g2)("q-btn"),h=(0,t.g2)("q-banner"),q=(0,t.g2)("q-td"),F=(0,t.g2)("q-chip"),x=(0,t.g2)("q-tr"),C=(0,t.g2)("q-table");return(0,t.uX)(),(0,t.CE)("div",Yn,[(0,t.bF)(h,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bF)(V,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:d[0]||(d[0]=e=>Q())})])),default:(0,t.k6)((()=>[Zn])),_:1}),(0,t.Lk)("div",null,[(0,t.bF)(C,{class:"my-sticky-header-table",bordered:"",dense:"",rows:i.value,columns:l,filter:s.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,t.k6)((e=>[(0,t.bF)(x,{props:e,class:(0,o.C4)([v.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,t.k6)((()=>[(0,t.bF)(q,{key:"nodeNumber",class:(0,o.C4)("text-"+N(e.row.nodeNumber)),props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.nodeNumber),1)])),_:2},1032,["class","props"]),(0,t.bF)(q,{key:"CANID",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.CANID),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"nodeName",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.nodeName),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"moduleName",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.moduleName),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"mode",props:e},{default:(0,t.k6)((()=>[e.row.mode?((0,t.uX)(),(0,t.Wv)(F,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,t.k6)((()=>[(0,t.eW)("Flim")])),_:1})):((0,t.uX)(),(0,t.Wv)(F,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,t.k6)((()=>[(0,t.eW)("Slim")])),_:1}))])),_:2},1032,["props"]),(0,t.bF)(q,{key:"status",props:e},{default:(0,t.k6)((()=>[e.row.status?((0,t.uX)(),(0,t.Wv)(F,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,t.k6)((()=>[(0,t.eW)("OK")])),_:1})):((0,t.uX)(),(0,t.Wv)(F,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,t.k6)((()=>[(0,t.eW)("Error")])),_:1}))])),_:2},1032,["props"]),(0,t.bF)(q,{key:"events",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.events),1)])),_:2},1032,["props"]),(0,t.bF)(q,{key:"actions"},{default:(0,t.k6)((()=>[(0,t.bF)(V,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",onClick:l=>A(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,t.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",onClick:l=>I(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,t.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:l=>R(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,t.bF)(V,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>E(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),e.row.vlcb?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(V,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:l=>W(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,t.uX)(),(0,t.Wv)(V,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",onClick:l=>W(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])):(0,t.Q3)("",!0),(0,t.bF)(V,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",onClick:l=>w(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props","class"])])),_:1},8,["rows","filter"]),1==u.value?((0,t.uX)(),(0,t.Wv)((0,n.R1)(Wa),{key:0,nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["nodeNumber"])):(0,t.Q3)("",!0),(0,t.bF)((0,n.R1)(nt),{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=e=>c.value=e),nodeNumber:r.value},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(dt),{modelValue:m.value,"onUpdate:modelValue":d[2]||(d[2]=e=>m.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(gt),{modelValue:b.value,"onUpdate:modelValue":d[3]||(d[3]=e=>b.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(An),{modelValue:p.value,"onUpdate:modelValue":d[4]||(d[4]=e=>p.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(ra),{modelValue:g.value,"onUpdate:modelValue":d[5]||(d[5]=e=>g.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(pa),{modelValue:f.value,"onUpdate:modelValue":d[6]||(d[6]=e=>f.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(zn),{modelValue:k.value,"onUpdate:modelValue":d[7]||(d[7]=e=>k.value=e),nodeNumber:(0,n.R1)(a).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,t.bF)((0,n.R1)(Jn),{modelValue:y.value,"onUpdate:modelValue":d[8]||(d[8]=e=>y.value=e),URL:_.value},null,8,["modelValue","URL"])])])}}};var ao=a(6760);const to=lo,no=to;m()(lo,"components",{QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QTr:Na.A,QTd:Fa.A,QChip:ao.A});const oo=(0,t.Lk)("div",{class:"text-h6"}," Bus Events Dialog ",-1),so=(0,t.Lk)("div",{class:"col-2 q-table__title text-h4"},"Bus Events",-1),io={class:"q-pa-xs row"},ro=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Bus events"),(0,t.Lk)("br")],-1),uo={class:"text-body2"},co="BusEventsDialog",mo={__name:"BusEventsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=((0,n.KR)("nodes"),(0,n.KR)("")),i={rowsPerPage:0};let d=(0,n.KR)();const r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(""),b=(0,n.KR)(),p=(0,n.KR)(0),v=(0,n.KR)(0),g=(0,n.KR)(!1),f=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!1},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!1},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!1},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],k=e,y=l,_=(0,t.EW)({get(){return k.modelValue},set(e){y("update:modelValue",e)}});(0,t.wB)(_,(()=>{}));const V=(0,t.EW)((()=>Object.values(a.state.busEvents))),h=(0,t.EW)((()=>a.state.layout));(0,t.wB)(V,(()=>{q()})),(0,t.wB)(h,(()=>{q()}));const q=()=>{try{let e=[],l=a.state.busEvents;if(l){for(let t of Object.keys(l).sort()){let n={};n["eventIdentifier"]=l[t].eventIdentifier,n["nodeNumber"]=l[t].nodeNumber,n["eventNumber"]=l[t].eventNumber,n["status"]=l[t].status,n["type"]=l[t].type,n["count"]=l[t].count,n["name"]=a.getters.event_name(l[t].eventIdentifier),n["colour"]=a.getters.event_colour(l[t].eventIdentifier),n["group"]=a.getters.event_group(l[t].eventIdentifier),e.push(n)}d.value=e}}catch(e){console.log(co+": update_bus_events "+e)}},N=e=>a.getters.event_colour(e);(0,t.KC)((()=>{a.methods.query_all_nodes()})),(0,t.sV)((()=>{a.methods.refresh_bus_events()}));const F=e=>{console.log(co+": clickEventName "+e),m.value=e,b.value=a.getters.event_name(e),r.value=!0},x=(e,l)=>{console.log(co+": send OFF "+e+" "+l);var t=parseInt(l.slice(0,4),16),n=parseInt(l.slice(4,8),16);0==t?a.methods.short_off_event(e,n):a.methods.long_off_event(t,n)},C=(e,l)=>{console.log(co+": send ON "+e+" "+l);var t=parseInt(l.slice(0,4),16),n=parseInt(l.slice(4,8),16);0==t?a.methods.short_on_event(e,n):a.methods.long_on_event(t,n)},w=e=>{console.log(co+": clickTeach"),m.value=e,c.value=!0},A=()=>{console.log(co+": clickToggleShowBusEventsJSON"),g.value?g.value=!1:g.value=!0};return(e,l)=>{const b=(0,t.g2)("q-btn"),k=(0,t.g2)("q-banner"),y=(0,t.g2)("q-card-section"),V=(0,t.g2)("q-space"),h=(0,t.g2)("q-icon"),q=(0,t.g2)("q-input"),I=(0,t.g2)("q-td"),R=(0,t.g2)("q-chip"),Q=(0,t.g2)("q-tr"),E=(0,t.g2)("q-table"),W=(0,t.g2)("q-card"),S=(0,t.g2)("q-card-actions"),L=(0,t.g2)("q-dialog"),T=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(L,{modelValue:_.value,"onUpdate:modelValue":l[5]||(l[5]=e=>_.value=e),persistent:"","full-width":""},{default:(0,t.k6)((()=>[(0,t.bF)(W,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(b,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[T]])])),default:(0,t.k6)((()=>[oo])),_:1})])),_:1}),(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.bF)(y,{class:"no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(E,{title:"Bus Events",class:"bus-events-table",dense:"",rows:(0,n.R1)(d),columns:f,filter:s.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:i,"onUpdate:pagnation":l[3]||(l[3]=e=>i=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"hide-bottom":""},{top:(0,t.k6)((()=>[so,(0,t.bF)(V),(0,t.bF)(q,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,t.k6)((()=>[(0,t.bF)(h,{name:"search"})])),_:1},8,["modelValue"]),(0,t.bF)(V),(0,t.bF)(b,{color:"negative",label:"Refresh Events",onClick:l[1]||(l[1]=e=>(0,n.R1)(a).methods.refresh_bus_events()),"no-caps":""}),(0,t.bF)(V),(0,t.bF)(b,{color:"negative",label:"Clear Events",onClick:l[2]||(l[2]=e=>(0,n.R1)(a).methods.clear_bus_events()),"no-caps":""})])),body:(0,t.k6)((e=>[(0,t.bF)(Q,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(I,{key:"eventName",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"group",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.group),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"eventIdentifier",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"nodeNumber",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"eventNumber",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"status",props:e},{default:(0,t.k6)((()=>["on"==e.row.status?((0,t.uX)(),(0,t.Wv)(R,{key:0,color:"white","text-color":"green"},{default:(0,t.k6)((()=>[(0,t.eW)("ON")])),_:1})):((0,t.uX)(),(0,t.Wv)(R,{key:1,color:"white","text-color":"red"},{default:(0,t.k6)((()=>[(0,t.eW)("OFF")])),_:1}))])),_:2},1032,["props"]),(0,t.bF)(I,{key:"type",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.type),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"count",props:e,class:(0,o.C4)("text-"+N(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.count),1)])),_:2},1032,["props","class"]),(0,t.bF)(I,{key:"actions",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(b,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>F(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(b,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>w(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(b,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>C(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send ON")])),_:2},1032,["onClick"]),(0,t.bF)(b,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>x(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),g.value?((0,t.uX)(),(0,t.Wv)(y,{key:0,class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",io,[ro,(0,t.Lk)("div",uo,[(0,t.Lk)("pre",null,(0,o.v_)((0,n.R1)(a).state.busEvents),1)])])])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(S,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{flat:"",label:"Toggle bus events json",onClick:l[4]||(l[4]=e=>A())})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(na),{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ca),{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=e=>c.value=e),eventIdentifier:m.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ml),{modelValue:u.value,"onUpdate:modelValue":l[8]||(l[8]=e=>u.value=e),sendingNodeNumber:p.value,eventNumber:v.value,eventIdentifier:m.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"])],64)}}};var bo=a(3676),po=a(492);const vo=mo,go=vo;m()(mo,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QSpace:bo.A,QInput:T.A,QIcon:po.A,QTr:Na.A,QTd:Fa.A,QChip:ao.A,QCardActions:Xe.A}),m()(mo,"directives",{ClosePopup:Pe.A});const fo={class:"q-pa-md q-gutter-sm"},ko=(0,t.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1),yo="BusTrafficDialog",_o={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=((0,n.KR)(!1),e),i=l,d=(0,t.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,t.wB)(d,(()=>{console.log(yo+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));return(e,l)=>{const s=(0,t.g2)("q-btn"),i=(0,t.g2)("q-banner"),r=(0,t.g2)("q-card-section"),u=(0,t.g2)("q-item-label"),c=(0,t.g2)("q-item"),m=(0,t.g2)("q-list"),b=(0,t.g2)("q-card"),p=(0,t.g2)("q-dialog"),v=(0,t.gN)("close-popup"),g=(0,t.gN)("ripple");return(0,t.uX)(),(0,t.CE)("div",fo,[(0,t.bF)(p,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),position:e.left},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{width:"300px"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])])),default:(0,t.k6)((()=>[ko])),_:1})])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{bordered:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(a).state.nodeTraffic,(e=>(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{key:e,clickable:"",dense:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{dense:"",class:"q-pa-none q-my-none"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.direction+"   "+e.json.mnemonic),1)])),_:2},1024)])),_:2},1024)),[[g]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","position"])])}}};var Vo=a(3999),ho=a(124),qo=a(3796),No=a(9626);const Fo=_o,xo=Fo;m()(_o,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QList:Vo.A,QItem:ho.A,QItemLabel:qo.A}),m()(_o,"directives",{ClosePopup:Pe.A,Ripple:No.A});const Co=(0,t.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1),wo=(0,t.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1),Ao="CbusErrorsDialog",Io={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=l,u=(0,t.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,t.wB)(u,(()=>{console.log(Ao+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const c=()=>{a.methods.clear_cbus_errors()};return(e,l)=>{const d=(0,t.g2)("q-btn"),r=(0,t.g2)("q-banner"),m=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-space"),p=(0,t.g2)("q-icon"),v=(0,t.g2)("q-input"),g=(0,t.g2)("q-td"),f=(0,t.g2)("q-tr"),k=(0,t.g2)("q-table"),y=(0,t.g2)("q-card"),_=(0,t.g2)("q-dialog"),V=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(_,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,t.k6)((()=>[(0,t.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])])),default:(0,t.k6)((()=>[Co])),_:1})])),_:1}),(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{title:"Nodes",rows:Object.values((0,n.R1)(a).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48},{top:(0,t.k6)((()=>[wo,(0,t.bF)(b),(0,t.bF)(v,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,t.k6)((()=>[(0,t.bF)(p,{name:"search"})])),_:1},8,["modelValue"]),(0,t.bF)(b),(0,t.bF)(d,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})])),body:(0,t.k6)((e=>[(0,t.bF)(f,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(g,{key:"id",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.id),1)])),_:2},1032,["props"]),(0,t.bF)(g,{key:"type",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.type),1)])),_:2},1032,["props"]),(0,t.bF)(g,{key:"Error",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.Error),1)])),_:2},1032,["props"]),(0,t.bF)(g,{key:"Message",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.Message),1)])),_:2},1032,["props"]),(0,t.bF)(g,{key:"node",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.node),1)])),_:2},1032,["props"]),(0,t.bF)(g,{key:"count",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.count),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Ro=Io,Qo=Ro;m()(Io,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QSpace:bo.A,QInput:T.A,QIcon:po.A,QTr:Na.A,QTd:Fa.A}),m()(Io,"directives",{ClosePopup:Pe.A});const Eo=(0,t.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1),Wo=(0,t.Lk)("div",{class:"text-h6"},"Nodes",-1),So=(0,t.Lk)("div",{class:"text-h6"},"Node Descriptors",-1),Lo=(0,t.Lk)("div",{class:"text-h6"},"Node Descriptor List",-1),To=(0,t.Lk)("div",{class:"text-h6"},"Events",-1),Bo=(0,t.Lk)("div",{class:"text-h6"},"Layout",-1),Do=(0,t.Lk)("div",{class:"text-h6"},"List of Layouts",-1),Ko=(0,t.Lk)("div",{class:"text-h6"},"Node Traffic",-1),Uo=(0,t.Lk)("div",{class:"text-h6"},"Cbus Errors",-1),Xo="JsonDialog",Oo={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)("nodes"),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,t.wB)(r,(()=>{console.log(Xo+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(e,l)=>{const i=(0,t.g2)("q-btn"),d=(0,t.g2)("q-banner"),u=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-tab"),m=(0,t.g2)("q-tabs"),b=(0,t.g2)("q-tab-panel"),p=(0,t.g2)("q-tab-panels"),v=(0,t.g2)("q-card"),g=(0,t.g2)("q-dialog"),f=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,t.k6)((()=>[Eo])),_:1})])),_:1}),(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,t.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,t.bF)(c,{name:"layout",label:"Layout"}),(0,t.bF)(c,{name:"layouts",label:"Layouts"}),(0,t.bF)(c,{name:"nodes",label:"Nodes"}),(0,t.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,t.bF)(c,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,t.bF)(c,{name:"traffic",label:"Traffic"})])),_:1},8,["modelValue"]),(0,t.bF)(p,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),animated:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{name:"nodes"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Wo,(0,t.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(a).state.nodes)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"nodeDescriptors"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[So,(0,t.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(a).state.nodeDescriptors)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"nodeDescriptorList"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Lo,(0,t.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(a).state.nodeDescriptorList)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"busEvents"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[To,(0,t.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(a).state.busEvents)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"layout"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Bo,(0,t.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(a).state.layout)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"layouts"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Do,(0,t.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(a).state.layouts_list)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"traffic"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Ko,(0,t.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(a).state.nodeTraffic)+"\n              ",1)])),_:1})])),_:1}),(0,t.bF)(b,{name:"cbusErrors"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,t.k6)((()=>[Uo,(0,t.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(a).state.cbus_errors)+"\n              ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Po=Oo,zo=Po;m()(Oo,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTabs:ie.A,QTab:de.A,QTabPanels:re.A,QTabPanel:ue.A}),m()(Oo,"directives",{ClosePopup:Pe.A});const Mo=(0,t.Lk)("div",{class:"text-h6"}," Manage Layout ",-1),jo={class:"q-pa-md q-mr-sm rounded-borders"},$o={class:"text-h5 text-black"},Ho={class:"text-h6 text-black"},Go={class:"q-pa-md row"},Jo=(0,t.Lk)("div",{class:"text-h6"},"Change layout",-1),Yo=(0,t.Lk)("p",null,"Click on the list of layouts to select an existing layout, or enter a name for a new layout, then click change",-1),Zo=(0,t.Lk)("div",{class:"text-h6"},"List of Layouts",-1),es=(0,t.Lk)("div",{class:"text-h6 text-black"},"Edit layout details",-1),ls="LayoutDialog",as={__name:"LayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)([]),d=[{name:"layout",field:"layout",required:!0,label:"Layout",align:"left",sortable:!0}],r=e,u=l,c=(0,t.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,t.wB)(c,(()=>{b()}));const m=(0,t.EW)((()=>Object.values(a.state.layouts_list)));(0,t.wB)(m,(()=>{b()}));const b=()=>{i.value=[],m.value.forEach((e=>{i.value.push({layout:e})}))},p=()=>{console.log(ls+": Change layout"),a.methods.change_layout(s.value),a.methods.request_layout_list(),s.value=""},v=e=>{console.log(ls+": clickLayouts on ",e),s.value=e};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(e,l)=>{const r=(0,t.g2)("q-btn"),u=(0,t.g2)("q-banner"),m=(0,t.g2)("q-input"),b=(0,t.g2)("q-card-section"),g=(0,t.g2)("q-card"),f=(0,t.g2)("q-td"),k=(0,t.g2)("q-table"),y=(0,t.g2)("q-dialog"),_=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(y,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(g,{style:{"min-width":"900px"}},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])])),default:(0,t.k6)((()=>[Mo])),_:1}),(0,t.Lk)("div",jo,[(0,t.Lk)("div",$o,(0,o.v_)((0,n.R1)(a).state.layout.layoutDetails.title),1),(0,t.Lk)("div",Ho,(0,o.v_)((0,n.R1)(a).state.layout.layoutDetails.subTitle),1)]),(0,t.Lk)("div",Go,[(0,t.bF)(g,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[Jo,(0,t.bF)(m,{class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),Yo,(0,t.bF)(r,{color:"negative",label:"change",onClick:l[1]||(l[1]=e=>p()),"no-caps":""})])),_:1})])),_:1}),(0,t.bF)(g,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[Zo,(0,t.bF)(k,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,t.k6)((e=>[(0,t.bF)(f,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(r,{flat:"",color:"primary",label:e.value,onClick:l=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1}),(0,t.bF)(g,{inline:"",class:"q-pa-md",flat:"",style:{"max-width":"500px"}},{default:(0,t.k6)((()=>[es,(0,t.bF)(m,{label:"Sub Title",outlined:"",modelValue:(0,n.R1)(a).state.layout.layoutDetails.subTitle,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.R1)(a).state.layout.layoutDetails.subTitle=e),onChange:l[3]||(l[3]=e=>(0,n.R1)(a).methods.update_layout())},null,8,["modelValue"])])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},ts=as,ns=ts;m()(as,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QTable:qa.A,QTd:Fa.A}),m()(as,"directives",{ClosePopup:Pe.A});const os=(0,t.Lk)("div",{class:"text-h6"}," Bus message ",-1),ss={class:"text-h6"},is={class:"text-h6"},ds={class:"text-h6"},rs="ModifiedGridConnectDialog",us={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,t.WQ)("store");const a=e,n=l,s=(0,t.EW)({get(){return a.modelValue},set(e){n("update:modelValue",e)}});return(0,t.wB)(s,(()=>{console.log(rs+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(l,a)=>{const n=(0,t.g2)("q-btn"),i=(0,t.g2)("q-banner"),d=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-card"),u=(0,t.g2)("q-dialog"),c=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])])),default:(0,t.k6)((()=>[os])),_:1}),(0,t.bF)(d,{class:"fit"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ss,"direction: "+(0,o.v_)(e.busMessage.direction),1),(0,t.Lk)("div",is," message: "+(0,o.v_)(e.busMessage.json.text),1),(0,t.Lk)("div",ds," encoded: "+(0,o.v_)(e.busMessage.json.encoded),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},cs=us,ms=cs;m()(us,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A}),m()(us,"directives",{ClosePopup:Pe.A});const bs=(0,t.Lk)("div",{class:"text-h6"}," New node detected ",-1),ps=(0,t.Lk)("div",{class:"text-h6"},[(0,t.eW)(" Accept the first free node number below "),(0,t.Lk)("br"),(0,t.eW)(" or enter a new one ")],-1),vs={class:"text-h6"},gs=(0,t.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1),fs="NewNodeDialog",ks={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)(0),d=e,r=l,u=(0,t.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,t.wB)(u,(()=>{console.log(fs+": WATCH model"),console.log(fs+": WATCH model: previousNodeNumber "+d.previousNodeNumber),i.value=c()}));const c=()=>{var e=0,l=256;a.state.layout.layoutDetails.baseNodeNumber&&(l=a.state.layout.layoutDetails.baseNodeNumber);for(var t=Object.keys(a.state.nodes),n=l;n<65535;n++)if(!t.includes(n.toString())){console.log(fs+" first free node number: "+n),e=n;break}return e};(0,t.$u)((()=>{}));const m=()=>{console.log(fs+" new node number: "+i.value),console.log(fs+" new node name: "+s.value),a.methods.set_node_number(i.value),a.setters.node_name(i.value,s.value)};return(e,l)=>{const a=(0,t.g2)("q-btn"),n=(0,t.g2)("q-banner"),r=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-card"),v=(0,t.g2)("q-dialog"),g=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(v,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(p,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(a,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,t.k6)((()=>[bs])),_:1}),(0,t.bF)(c,{class:"q-pa-md",color:"orange-1"},{default:(0,t.k6)((()=>[ps,(0,t.bF)(r,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),autofocus:""},null,8,["modelValue"]),(0,t.Lk)("div",vs," This node was previously "+(0,o.v_)(d.previousNodeNumber),1)])),_:1}),(0,t.bF)(c,{class:"q-pa-md"},{default:(0,t.k6)((()=>[gs,(0,t.bF)(r,{"input-style":{fontSize:"25px"},dense:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(b,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(a,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>m())},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ys=ks,_s=ys;m()(ks,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A,QCardActions:Xe.A}),m()(ks,"directives",{ClosePopup:Pe.A});const Vs=(0,t.Lk)("div",{class:"text-h6"}," Add Layout ",-1),hs={class:"q-pa-md row"},qs=(0,t.Lk)("div",{class:"text-h6"},"Add new layout",-1),Ns=(0,t.Lk)("p",null,"enter a name for a new layout",-1),Fs="AddLayoutDialog",xs={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),o=(0,n.KR)(""),s=((0,n.KR)([]),e),i=l,r=(0,t.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,t.wB)(r,(()=>{console.log(Fs+": WATCH model")}));const u=(0,t.EW)((()=>Object.values(a.state.layouts_list)));(0,t.wB)(u,(()=>{})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const c=async()=>{console.log(Fs+": Change layout"),a.methods.change_layout(o.value),a.methods.request_layout_list(),o.value="",await d(50),r.value=!1};return(e,l)=>{const a=(0,t.g2)("q-btn"),n=(0,t.g2)("q-banner"),s=(0,t.g2)("q-input"),i=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-card"),u=(0,t.g2)("q-dialog"),m=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(u,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{style:{"min-width":"400px"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(a,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,t.k6)((()=>[Vs])),_:1}),(0,t.Lk)("div",hs,[(0,t.bF)(d,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[qs,(0,t.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),Ns,(0,t.bF)(a,{color:"negative",label:"Add",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},Cs=xs,ws=Cs;m()(xs,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QInput:T.A}),m()(xs,"directives",{ClosePopup:Pe.A});const As=(0,t.Lk)("div",{class:"text-h6"}," Startup ",-1),Is={class:"q-pa-md row"},Rs=(0,t.Lk)("div",{class:"text-h6"},"Select Layout",-1),Qs=(0,t.Lk)("div",{class:"text-h6"}," click below to add a new layout ",-1),Es="StartupDialog",Ws={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,s.A)(),o=(0,t.WQ)("store"),i=(0,n.KR)(""),r=(0,n.KR)([]),u=(0,n.KR)(!1),c=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],m=e,b=l,p=(0,t.EW)({get(){return m.modelValue},set(e){b("update:modelValue",e)}});(0,t.wB)(p,(()=>{g()}));const v=(0,t.EW)((()=>Object.values(o.state.layouts_list)));(0,t.wB)(v,(()=>{g()}));const g=()=>{r.value=[],v.value.forEach((e=>{r.value.push({layout:e})}))};(0,t.sV)((()=>{}));const f=async()=>{console.log(Es+": clickAddNewLayout"),u.value=!0},k=async e=>{console.log(Es+": clickDeleteLayout ",e);a.notify({message:"Are you sure you want to delete this?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{o.methods.delete_layout(e),await d(50),o.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},y=async e=>{console.log(Es+": clickLayouts on ",e),i.value=e,o.methods.change_layout(i.value),o.state.inStartup=!1,await d(50),p.value=!1};return(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(e,l)=>{const a=(0,t.g2)("q-banner"),o=(0,t.g2)("q-btn"),s=(0,t.g2)("q-td"),i=(0,t.g2)("q-table"),d=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card"),b=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(v,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=e=>p.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(m,{style:{"min-width":"900px"}},{default:(0,t.k6)((()=>[(0,t.bF)(a,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{default:(0,t.k6)((()=>[As])),_:1}),(0,t.Lk)("div",Is,[(0,t.bF)(m,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[Rs,(0,t.bF)(i,{flat:"",bordered:"",dense:"",rows:r.value,columns:c,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,t.k6)((e=>[(0,t.bF)(s,{key:"layout",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(o,{flat:"",color:"primary",label:e.value,onClick:l=>y(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"]),(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(o,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:l=>k(e.value),"no-caps":""},null,8,["onClick"])])),_:2},1024)])),_:1},8,["rows"])])),_:1})])),_:1}),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[Qs,(0,t.bF)(b,{align:"center",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(o,{color:"positive",label:"Add",onClick:l[0]||(l[0]=e=>f())})])])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(ws),{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e)},null,8,["modelValue"])],64)}}},Ss=Ws,Ls=Ss;m()(Ws,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QTable:qa.A,QTd:Fa.A,QCardActions:Xe.A}),m()(Ws,"directives",{ClosePopup:Pe.A});var Ts=a(9104);const Bs=JSON.parse('{"name":"MMC-CLIENT","version":"0.6.1","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"No test specified\\" && exit 0"},"dependencies":{"@quasar/extras":"^1.0.0","core-js":"^3.6.5","quasar":"^2.0.0","sass":"^1.69.5","socket.io-client":"^4.4.1","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}'),Ds={class:"text-h6"},Ks=(0,t.Lk)("div",{class:"text-h6"},"List of Backups",-1),Us="BackupDialog",Xs={__name:"BackupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)([]),d=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],r=e,u=l,c=(0,t.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,t.wB)(c,(()=>{console.log(Us+": WATCH model"),a.methods.request_backups_list(a.state.layout.layoutDetails.title)}));const m=(0,t.EW)((()=>a.state.backups_list));(0,t.wB)(m,(()=>{console.log(Us+": WATCH backupList"),b()}));const b=()=>{i.value=[],m.value.forEach((e=>{console.log(Us+": update "+e),i.value.push({backup:e})}))};(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const p=()=>{s.value="";var e=new Date,l=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()+"_"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds(),t="backup_"+l;console.log(Us+": clickBackup "+t);var n={fileName:t,layout:a.state.layout};a.methods.save_backup(n),s.value="Backup saved to "+t,a.methods.request_backups_list(a.state.layout.layoutDetails.title)},v=e=>{console.log(Us+": clickBackupList on ",e)};return(e,l)=>{const r=(0,t.g2)("q-btn"),u=(0,t.g2)("q-banner"),m=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-card"),g=(0,t.g2)("q-td"),f=(0,t.g2)("q-table"),k=(0,t.g2)("q-dialog"),y=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Ds," System backups for layout: "+(0,o.v_)((0,n.R1)(a).state.layout.layoutDetails.title),1)])),_:1})])),_:1}),(0,n.R1)(a).state.develop?((0,t.uX)(),(0,t.Wv)(b,{key:0,class:"q-pa-md",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(r,{color:"positive",label:"Backup",onClick:l[0]||(l[0]=e=>p()),"no-caps":""}),(0,t.eW)("   backup system to user storage ")])),_:1})):(0,t.Q3)("",!0),(0,n.R1)(a).state.develop?((0,t.uX)(),(0,t.Wv)(b,{key:1,class:"q-pa-md",flat:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(s.value),1)])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(b,{inline:"",class:"q-pa-xs",flat:"",style:{"max-width":"500px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{class:"q-pa-xs"},{default:(0,t.k6)((()=>[Ks,(0,t.bF)(f,{flat:"",bordered:"",dense:"",rows:i.value,columns:d,"row-key":"name","hide-header":"",pagination:{rowsPerPage:10}},{"body-cell":(0,t.k6)((e=>[(0,t.bF)(g,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(r,{flat:"",color:"primary",label:e.value,onClick:l=>v(e.value)},null,8,["label","onClick"])])),_:2},1032,["props"])])),_:1},8,["rows"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},Os=Xs,Ps=Os;m()(Xs,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QTable:qa.A,QTd:Fa.A}),m()(Xs,"directives",{ClosePopup:Pe.A});const zs=(0,t.Lk)("div",{class:"text-h6"}," System ",-1),Ms=(0,t.Lk)("div",{class:"text-h6"},"Backend",-1),js=(0,t.Lk)("div",{class:"text-h6"},"Frontend",-1),$s="SystemDialog",Hs={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=(0,n.KR)(!1),i=e,d=l,r=(0,t.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,t.wB)(r,(()=>{console.log($s+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const u=()=>{console.log($s+": clickBackup"),s.value=!0};return(e,l)=>{const i=(0,t.g2)("q-btn"),d=(0,t.g2)("q-banner"),c=(0,t.g2)("q-card"),m=(0,t.g2)("q-input"),b=(0,t.g2)("q-checkbox"),p=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-dialog"),g=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(v,{modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(c,{style:{"min-width":"900px"}},{default:(0,t.k6)((()=>[(0,t.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])])),default:(0,t.k6)((()=>[zs])),_:1}),(0,t.bF)(c,{class:"q-pa-md",flat:"",bordered:""},{default:(0,t.k6)((()=>[Ms,(0,t.Lk)("div",null,"Backend App version "+(0,o.v_)(JSON.stringify((0,n.R1)(a).state.version.App)),1),(0,t.Lk)("div",null,"API version "+(0,o.v_)(JSON.stringify((0,n.R1)(a).state.version.API)),1),(0,t.Lk)("div",null,"node version "+(0,o.v_)(JSON.stringify((0,n.R1)(a).state.version.node)),1)])),_:1}),(0,t.bF)(c,{class:"q-pa-md",flat:"",bordered:""},{default:(0,t.k6)((()=>[js,(0,t.Lk)("div",null,"Frontend App version "+(0,o.v_)((0,n.R1)(Bs).version),1),(0,t.Lk)("div",null,"Quasar framework "+(0,o.v_)(e.$q.version),1),(0,t.Lk)("div",null,"Vue version "+(0,o.v_)(t.rE))])),_:1}),(0,n.R1)(a).state.develop?((0,t.uX)(),(0,t.Wv)(c,{key:0,class:"q-pa-md",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{color:"positive",label:"Backup",onClick:l[0]||(l[0]=e=>u()),"no-caps":""}),(0,t.eW)("   Open the dialog to manage backups ")])),_:1})):(0,t.Q3)("",!0),(0,t.bo)((0,t.bF)(c,{class:"q-pa-md",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"Base Node Number",outlined:"",modelValue:(0,n.R1)(a).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.R1)(a).state.layout.layoutDetails.baseNodeNumber=e),onChange:l[2]||(l[2]=e=>(0,n.R1)(a).methods.update_layout())},null,8,["modelValue"])])),_:1},512),[[Ts.aG,(0,n.R1)(a).state.advanced]]),(0,t.bF)(c,{class:"q-pa-md",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(b,{modelValue:(0,n.R1)(a).state.develop,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.R1)(a).state.develop=e),label:"Develop"},null,8,["modelValue"]),(0,t.eW)("    Enables development features ")])),_:1}),(0,t.bF)(p,{align:"right",class:"text-primary"})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)((0,n.R1)(Ps),{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value=e)},null,8,["modelValue"])],64)}}},Gs=Hs,Js=Gs;m()(Hs,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QInput:T.A,QCheckbox:u.A,QCardActions:Xe.A}),m()(Hs,"directives",{ClosePopup:Pe.A});const Ys=(0,t.Lk)("div",{class:"text-h6"}," Example banner ",-1),Zs={key:0,class:"text-red"},ei=(0,t.Lk)("div",{class:"text-h6"}," Example q-card ",-1),li="DialogExampleCompositionAPI",ai={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,t.WQ)("store");const a=(0,n.KR)(!1),o=e,s=l,i=(0,t.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,t.wB)(i,(()=>{console.log(li+": WATCH model")})),(0,t.KC)((()=>{})),(0,t.sV)((()=>{}));const d=()=>{a.value=!a.value};return(e,l)=>{const n=(0,t.g2)("q-btn"),o=(0,t.g2)("q-banner"),s=(0,t.g2)("q-card-section"),r=(0,t.g2)("q-card"),u=(0,t.g2)("q-card-actions"),c=(0,t.g2)("q-dialog"),m=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])])),default:(0,t.k6)((()=>[Ys])),_:1})])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{flat:"",color:"positive",label:"example button"}),(0,t.bF)(n,{flat:"",color:"negative",label:"example button"})])),_:1}),((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(5,(e=>(0,t.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64)),a.value?((0,t.uX)(),(0,t.CE)("div",Zs,[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(5,(e=>(0,t.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore."))),64))])):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(s,{class:"q-py-none no-margin"},{default:(0,t.k6)((()=>[ei])),_:1})])),_:1}),(0,t.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{flat:"",label:"toggle show more",onClick:l[0]||(l[0]=e=>d())})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},ti=ai,ni=ti;m()(ai,"components",{QDialog:De.A,QCard:k.A,QCardSection:y.A,QBanner:Ke.A,QBtn:Ue.A,QCardActions:Xe.A}),m()(ai,"directives",{ClosePopup:Pe.A});const oi=(0,t.Lk)("div",{class:"text-h6"}," Add event ",-1),si={class:"q-gutter-sm"},ii={key:0},di=(0,t.Lk)("div",{class:"text-h4"},"Node Number",-1),ri=(0,t.Lk)("div",{class:"text-h6"},"Consumed events will need the number of the node that produces the event",-1),ui=(0,t.Lk)("div",{class:"text-h6"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1),ci=(0,t.Lk)("div",{class:"text-h4"},"Event Number",-1),mi={key:1},bi=(0,t.Lk)("div",{class:"text-h4"},"Device Number",-1),pi={key:2},vi=(0,t.Lk)("div",{class:"text-h6"},"Once event is added, select edit for the event from the event list to modify event variables",-1),gi="AddEventToLayoutDialog",fi={__name:"AddEventToLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),o=(0,n.KR)(),s=(0,n.KR)(),i=(0,n.KR)(!0),d=(0,n.KR)(),r=(0,n.KR)(""),u=e,c=l,m=(0,t.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,t.KC)((()=>{})),(0,t.sV)((()=>{})),(0,t.$u)((()=>{o.value=null,s.value=null,d.value=null}));const b=()=>{console.log(gi+": clickAddEvent "+o.value+" "+s.value),"short"==d.value&&(o.value=0),r.value=parseInt(o.value).toString(16).toUpperCase().padStart(4,0)+parseInt(s.value).toString(16).toUpperCase().padStart(4,0),a.setters.event_name(r.value,r.value)};return(e,l)=>{const a=(0,t.g2)("q-btn"),n=(0,t.g2)("q-banner"),r=(0,t.g2)("q-radio"),u=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-input"),p=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card"),g=(0,t.g2)("q-dialog"),f=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=e=>m.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{style:{"min-width":"350px"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(a,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])])),default:(0,t.k6)((()=>[oi])),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",si,[(0,t.bF)(r,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,t.bF)(r,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),val:"short",label:"Short event"},null,8,["modelValue"])])])),_:1}),"long"==d.value?((0,t.uX)(),(0,t.CE)("div",ii,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[di])),_:1}),(0,t.bF)(u,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{dense:"",modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value=e),autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[ri,ui])),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)((()=>[ci])),_:1}),(0,t.bF)(u,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,t.Q3)("",!0),"short"==d.value?((0,t.uX)(),(0,t.CE)("div",mi,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[bi])),_:1}),(0,t.bF)(u,{class:"q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value=e),autofocus:""},null,8,["modelValue"])])),_:1})])):(0,t.Q3)("",!0),null!=d.value?((0,t.uX)(),(0,t.CE)("div",pi,[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[vi])),_:1}),(0,t.bF)(p,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[i.value?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(a,{key:0,label:"Add Event",onClick:l[5]||(l[5]=e=>b())},null,512)),[[f]]):(0,t.Q3)("",!0)])),_:1})])):(0,t.Q3)("",!0)])),_:1})])),_:1},8,["modelValue"])}}},ki=fi,yi=ki;m()(fi,"components",{QDialog:De.A,QCard:k.A,QBanner:Ke.A,QBtn:Ue.A,QCardSection:y.A,QRadio:ql.A,QInput:T.A,QCardActions:Xe.A}),m()(fi,"directives",{ClosePopup:Pe.A});const _i={style:{height:"45vh"}},Vi=(0,t.Lk)("div",{class:"text-h6"},"Events View",-1),hi={class:"text-h6"},qi={class:"q-pa-xs row"},Ni=(0,t.Lk)("div",{class:"text-body1"},[(0,t.eW)("Events"),(0,t.Lk)("br")],-1),Fi={class:"text-body2"},xi="EventsView",Ci={__name:"EventsView",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,t.WQ)("store"),s=((0,n.KR)("nodes"),(0,n.KR)("")),i={rowsPerPage:0};let d=(0,n.KR)([]);const r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),b=(0,n.KR)(""),p=(0,n.KR)(),v=(0,n.KR)(0),g=(0,n.KR)(0),f=(0,n.KR)(!1),k=(0,n.KR)(0),y=(0,n.KR)({0:"view all events",1:"view short events only"}),_=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!1},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!1},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],V=e,h=l,q=(0,t.EW)({get(){return V.modelValue},set(e){h("update:modelValue",e)}});(0,t.wB)(q,(()=>{C()}));const N=(0,t.EW)((()=>Object.values(a.state.layout.eventDetails)));(0,t.wB)(N,(()=>{C()}));const F=(0,t.EW)((()=>a.state.layout.eventDetails));(0,t.wB)(F,(()=>{C()}));const x=(0,t.EW)((()=>Object.values(a.state.busEvents)));(0,t.wB)(x,(()=>{console.log(xi+": WATCH busEvents"),C()}));const C=()=>{console.log(xi+":Update Events");let e=[],l=a.state.layout.eventDetails;for(let a of Object.keys(l).sort()){var t=parseInt(a.substring(0,4),16);if(1==k.value&&t>0);else{let n={};n["eventIdentifier"]=a,n["nodeNumber"]=t,n["eventNumber"]=parseInt(a.slice(4,8),16),n["name"]=l[a].name,n["colour"]=l[a].colour,n["group"]=l[a].group,n["status"]=l[a].status,e.push(n)}}d.value=e},w=e=>e in a.state.layout.eventDetails?a.state.layout.eventDetails[e].colour:"blue";a.eventBus.on("BUS_TRAFFIC_EVENT",(e=>{var l=e.json.eventIdentifier,t=e.json.opCode,n="unknown";if(90!=t&&98!=t||(console.log(xi+": BUS_TRAFFIC_EVENT : ON event "+l),n="on"),91!=t&&99!=t||(console.log(xi+": BUS_TRAFFIC_EVENT : OFF event "+l),n="off"),"unknown"!=n){let e=a.state.layout.eventDetails;for(let t of Object.keys(e).sort())t==l&&(a.state.layout.eventDetails[t].status=n);C()}})),(0,t.KC)((()=>{C()})),(0,t.sV)((()=>{C()}));const A=()=>{console.log(xi+": clickToggleViewMode"),k.value++,k.value>1&&(k.value=0),C()},I=()=>{console.log(xi+": clickAddEvent"),r.value=!0},R=e=>{console.log(xi+": clickEventName "+e),b.value=e,p.value=a.getters.event_name(e),u.value=!0},Q=(e,l)=>{console.log(xi+": send OFF "+e+" "+l);var t=parseInt(l.slice(0,4),16),n=parseInt(l.slice(4,8),16);0==t?a.methods.short_off_event(e,n):a.methods.long_off_event(t,n)},E=(e,l)=>{console.log(xi+": send ON "+e+" "+l);var t=parseInt(l.slice(0,4),16),n=parseInt(l.slice(4,8),16);0==t?a.methods.short_on_event(e,n):a.methods.long_on_event(t,n)},W=e=>{console.log(xi+": clickTeach"),b.value=e,m.value=!0},S=()=>{console.log(xi+": clickToggleShowEventsJSON"),f.value?f.value=!1:f.value=!0};return(e,l)=>{const p=(0,t.g2)("q-btn"),V=(0,t.g2)("q-banner"),h=(0,t.g2)("q-space"),q=(0,t.g2)("q-icon"),N=(0,t.g2)("q-input"),F=(0,t.g2)("q-td"),x=(0,t.g2)("q-chip"),C=(0,t.g2)("q-tr"),L=(0,t.g2)("q-table"),T=(0,t.g2)("q-card-actions"),B=(0,t.g2)("q-card-section"),D=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",_i,[(0,t.bF)(V,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,t.k6)((()=>[(0,t.bF)(p,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:l[0]||(l[0]=e=>I())})])),default:(0,t.k6)((()=>[Vi])),_:1}),(0,t.bF)(D,null,{default:(0,t.k6)((()=>[(0,t.bF)(B,{class:"no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{title:"Events View",class:"events-table",dense:"",rows:(0,n.R1)(d),columns:_,filter:s.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:i,"onUpdate:pagnation":l[3]||(l[3]=e=>i=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{top:(0,t.k6)((()=>[(0,t.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Toggle","no-caps":"",onClick:l[1]||(l[1]=e=>A())}),(0,t.Lk)("div",hi,(0,o.v_)(y.value[k.value]),1),(0,t.bF)(h),(0,t.bF)(N,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),placeholder:"Search"},{append:(0,t.k6)((()=>[(0,t.bF)(q,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,t.k6)((e=>[(0,t.bF)(C,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(F,{key:"eventName",props:e,class:(0,o.C4)("text-"+w(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.name),1)])),_:2},1032,["props","class"]),(0,t.bF)(F,{key:"group",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.group),1)])),_:2},1032,["props"]),(0,t.bF)(F,{key:"eventIdentifier",props:e,class:(0,o.C4)("text-"+w(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventIdentifier),1)])),_:2},1032,["props","class"]),(0,t.bF)(F,{key:"nodeNumber",props:e,class:(0,o.C4)("text-"+w(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.nodeNumber),1)])),_:2},1032,["props","class"]),(0,t.bF)(F,{key:"eventNumber",props:e,class:(0,o.C4)("text-"+w(e.row.eventIdentifier))},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.eventNumber),1)])),_:2},1032,["props","class"]),(0,t.bF)(F,{key:"status",props:e},{default:(0,t.k6)((()=>["on"==e.row.status?((0,t.uX)(),(0,t.Wv)(x,{key:0,color:"white","text-color":"green"},{default:(0,t.k6)((()=>[(0,t.eW)("ON")])),_:1})):"off"==e.row.status?((0,t.uX)(),(0,t.Wv)(x,{key:1,color:"white","text-color":"red"},{default:(0,t.k6)((()=>[(0,t.eW)("OFF")])),_:1})):((0,t.uX)(),(0,t.Wv)(x,{key:2,color:"white","text-color":"blue"},{default:(0,t.k6)((()=>[(0,t.eW)("unknown")])),_:1}))])),_:2},1032,["props"]),(0,t.bF)(F,{key:"actions",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>R(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>W(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,t.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>E(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send ON")])),_:2},1032,["onClick"]),(0,t.bF)(p,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>Q(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,t.k6)((()=>[(0,t.eW)("send OFF")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","filter"]),(0,t.bF)(T,{align:"right",class:"text-primary"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{flat:"",label:"Toggle event details json",onClick:l[4]||(l[4]=e=>S())})])),_:1}),f.value?((0,t.uX)(),(0,t.Wv)(B,{key:0,class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",qi,[Ni,(0,t.Lk)("div",Fi,[(0,t.Lk)("pre",null,(0,o.v_)((0,n.R1)(a).state.layout.eventDetails),1)])])])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1})]),(0,t.bF)((0,n.R1)(yi),{modelValue:r.value,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(na),{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e),eventIdentifier:b.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ca),{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=e=>m.value=e),eventIdentifier:b.value},null,8,["modelValue","eventIdentifier"]),(0,t.bF)((0,n.R1)(Ml),{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),sendingNodeNumber:v.value,eventNumber:g.value,eventIdentifier:b.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"])],64)}}},wi=Ci,Ai=wi;m()(Ci,"components",{QBanner:Ke.A,QBtn:Ue.A,QCard:k.A,QCardSection:y.A,QTable:qa.A,QSpace:bo.A,QInput:T.A,QIcon:po.A,QTr:Na.A,QTd:Fa.A,QChip:ao.A,QCardActions:Xe.A});const Ii=e=>((0,t.Qi)("data-v-103abacf"),e=e(),(0,t.jt)(),e),Ri=Ii((()=>(0,t.Lk)("div",{class:"text-h6 no-margin no-padding"}," MMC ",-1))),Qi={class:"text-h6 no-margin no-padding float-right"},Ei={class:"text-h6 float-right"},Wi={class:"text-h6 float-right"},Si={class:"text-h6 float-right"},Li=Ii((()=>(0,t.Lk)("div",{class:"text-h6"}," Bus traffic ",-1))),Ti={class:"text-bold text-blue"},Bi=Ii((()=>(0,t.Lk)("span",null,": ",-1))),Di={class:"text-bold"},Ki="MainLayout",Ui={__name:"MainLayout",setup(e){const{fQ:l,RZ:a}=i.Ay,d=(0,s.A)(),r=(0,t.WQ)("store"),u=(0,n.KR)({}),c=(0,n.KR)(!1),m=(0,n.KR)(""),b=(0,n.KR)(!1),p=(0,n.KR)(!1),v=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(!1),k=(0,n.KR)(!1),y=(0,n.KR)(!1),_=(0,n.KR)(!0),V=(0,n.KR)(!1),h=(0,n.KR)(0),q=(0,n.KR)(!1),N=(0,n.KR)(!0),F=(0,n.KR)(!1),x=(0,n.KR)("dummyModule/index.html"),C=(0,n.KR)(null),w=(0,n.KR)("nodesView");const A=(0,t.EW)((()=>Object.values(r.state.nodeTraffic)));(0,t.wB)(A,(()=>{C.value.setScrollPercentage("vertical",1),setTimeout(E,200)}));const I=(0,t.EW)((()=>Object.values(r.state.layout)));(0,t.wB)(I,(()=>{m.value=r.state.layout.layoutDetails.title})),(0,t.KC)((()=>{r.methods.request_layout_list()})),(0,t.sV)((()=>{r.methods.request_bus_connection(),setInterval(R,5e3),setInterval(Q,2e3)})),(0,t.$u)((()=>{C.value.setScrollPercentage("vertical",1)}));const R=()=>{r.methods.request_bus_connection()},Q=()=>{1==r.state.update_layout_needed&&(r.state.update_layout_needed=!1,r.methods.update_layout())},E=()=>{C.value.setScrollPercentage("vertical",1)};r.eventBus.on("REQUEST_NODE_NUMBER_EVENT",(e=>{console.log(Ki+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e),h.value=e,y.value=!0})),r.eventBus.on("BUS_CONNECTION_EVENT",(e=>{0==e.state&&d.notify({message:"Server has no connection to the CAN BUS",caption:"please check & restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})})),r.eventBus.on("SERVER_DISCONNECT",(()=>{d.notify({message:"MMC-server has disconnected",caption:"please restart application",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}));const W=()=>{console.log(Ki+": clickBusEvents"),b.value=!0},S=()=>{console.log(Ki+": clickEventView"),w.value="eventsView"},L=()=>{console.log(Ki+": clickNodeView"),w.value="nodesView"},T=()=>{console.log(Ki+": clickCbusErrors"),v.value=!0},B=()=>{console.log(Ki+": clickExample"),q.value=!0},D=()=>{console.log(Ki+": clickStop"),r.methods.STOP_SERVER()},K=()=>{console.log(Ki+": clickiframe"),F.value=!0},U=()=>{console.log(Ki+": clickJson"),g.value=!0},X=()=>{console.log(Ki+": clickLayout"),f.value=!0},O=e=>{console.log(Ki+": clickSingleBusEvent"),u.value=e,C.value.setScrollPercentage("vertical",1),k.value=!0},P=()=>{console.log(Ki+": clickSystem"),V.value=!0};return(e,l)=>{const a=(0,t.g2)("q-item-section"),s=(0,t.g2)("q-item"),i=(0,t.g2)("q-list"),d=(0,t.g2)("q-menu"),A=(0,t.g2)("q-btn"),I=(0,t.g2)("q-toolbar-title"),R=(0,t.g2)("q-toolbar"),Q=(0,t.g2)("q-space"),E=(0,t.g2)("q-header"),z=(0,t.g2)("q-banner"),M=(0,t.g2)("q-item-label"),j=(0,t.g2)("q-scroll-area"),$=(0,t.g2)("q-card"),H=(0,t.g2)("q-drawer"),G=(0,t.g2)("q-page"),J=(0,t.g2)("q-page-container"),Y=(0,t.g2)("q-layout");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(Y,{view:"hHh lpR fFf"},{default:(0,t.k6)((()=>[(0,t.bF)(E,{class:"row bg-primary text-white no-margin no-padding",style:{height:"7vh"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{class:"col no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{flat:"",dense:"",icon:"menu"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{"auto-close":""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{style:{"min-width":"100px"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{clickable:"",onClick:l[0]||(l[0]=e=>X())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("Layout")])),_:1})])),_:1}),(0,t.bF)(s,{clickable:"",onClick:l[1]||(l[1]=e=>W())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("Bus events")])),_:1})])),_:1}),(0,t.bF)(s,{clickable:"",onClick:l[2]||(l[2]=e=>U())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("JSON")])),_:1})])),_:1}),(0,t.bF)(s,{clickable:"",onClick:l[3]||(l[3]=e=>T())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("CBUS errors")])),_:1})])),_:1}),(0,t.bF)(s,{clickable:"",onClick:l[4]||(l[4]=e=>P())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("System")])),_:1})])),_:1}),(0,n.R1)(r).state.develop?((0,t.uX)(),(0,t.Wv)(s,{key:0,clickable:"",onClick:l[5]||(l[5]=e=>B())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("Example")])),_:1})])),_:1})):(0,t.Q3)("",!0),(0,n.R1)(r).state.develop?((0,t.uX)(),(0,t.Wv)(s,{key:1,clickable:"",onClick:l[6]||(l[6]=e=>K())},{default:(0,t.k6)((()=>[(0,t.bF)(a,null,{default:(0,t.k6)((()=>[(0,t.eW)("Example iFrame")])),_:1})])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1})])),_:1}),(0,t.bF)(I,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,t.k6)((()=>[Ri])),_:1})])),_:1}),(0,t.bF)(R,{class:"col no-margin no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(Q),(0,t.Lk)("div",Qi,(0,o.v_)(m.value),1)])),_:1}),(0,t.bF)(R,{class:"col no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(Q),(0,t.Lk)("div",Ei,[(0,t.bF)(A,{size:"md",color:"secondary",label:"Events view",onClick:l[7]||(l[7]=e=>S()),"no-caps":""})])])),_:1}),(0,t.bF)(R,{class:"col no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Wi,[(0,t.bF)(A,{size:"md",color:"secondary",label:"Nodes view",onClick:l[8]||(l[8]=e=>L()),"no-caps":""})])])),_:1}),(0,t.bF)(R,{class:"col no-margin q-py-none"},{default:(0,t.k6)((()=>[(0,t.bF)(Q),(0,t.Lk)("div",Si,[(0,t.bF)(A,{size:"md",color:"negative",label:"Exit",onClick:l[9]||(l[9]=e=>D()),"no-caps":""})])])),_:1})])),_:1}),(0,t.bF)(H,{class:"no-margin no-padding",modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=e=>c.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,t.k6)((()=>[(0,t.bF)(z,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs"},{default:(0,t.k6)((()=>[Li])),_:1}),(0,t.bF)($,{class:"no-margin no-padding",style:{height:"83vh"}},{default:(0,t.k6)((()=>[(0,t.bF)(j,{id:"demo",ref_key:"scrollAreaRef",ref:C,style:{height:"82vh"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(r).state.nodeTraffic,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e,clickable:"",dense:"",onClick:l=>O(e)},{default:(0,t.k6)((()=>[(0,t.bF)(M,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",Ti,(0,o.v_)(e.direction),1),Bi,(0,t.Lk)("span",Di,(0,o.v_)(e.json.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1}),(0,t.eW)(" Click message to show encoding ")])),_:1},8,["modelValue"]),0==(0,n.R1)(r).state.inStartup?((0,t.uX)(),(0,t.Wv)(J,{key:0,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,t.k6)((()=>["eventsView"==w.value?((0,t.uX)(),(0,t.Wv)(G,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(Ai),{modelValue:N.value,"onUpdate:modelValue":l[11]||(l[11]=e=>N.value=e)},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),"nodesView"==w.value?((0,t.uX)(),(0,t.Wv)(G,{key:1},{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(no))])),_:1})):(0,t.Q3)("",!0)])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)((0,n.R1)(go),{modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=e=>b.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(xo),{modelValue:p.value,"onUpdate:modelValue":l[13]||(l[13]=e=>p.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(Qo),{modelValue:v.value,"onUpdate:modelValue":l[14]||(l[14]=e=>v.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(zo),{modelValue:g.value,"onUpdate:modelValue":l[15]||(l[15]=e=>g.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(ns),{modelValue:f.value,"onUpdate:modelValue":l[16]||(l[16]=e=>f.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(ms),{modelValue:k.value,"onUpdate:modelValue":l[17]||(l[17]=e=>k.value=e),busMessage:u.value},null,8,["modelValue","busMessage"]),(0,t.bF)((0,n.R1)(_s),{modelValue:y.value,"onUpdate:modelValue":l[18]||(l[18]=e=>y.value=e),previousNodeNumber:h.value},null,8,["modelValue","previousNodeNumber"]),(0,t.bF)((0,n.R1)(Ls),{modelValue:_.value,"onUpdate:modelValue":l[19]||(l[19]=e=>_.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(Js),{modelValue:V.value,"onUpdate:modelValue":l[20]||(l[20]=e=>V.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(ni),{modelValue:q.value,"onUpdate:modelValue":l[21]||(l[21]=e=>q.value=e)},null,8,["modelValue"]),(0,t.bF)((0,n.R1)(Jn),{modelValue:F.value,"onUpdate:modelValue":l[22]||(l[22]=e=>F.value=e),URL:x.value},null,8,["modelValue","URL"])],64)}}};var Xi=a(2008),Oi=a(8416),Pi=a(6914),zi=a(5998),Mi=a(5173),ji=a(9150),$i=a(6056),Hi=a(9383),Gi=a(5205),Ji=a(7716);const Yi=(0,R.A)(Ui,[["__scopeId","data-v-103abacf"]]),Zi=Yi;m()(Ui,"components",{QLayout:Xi.A,QHeader:Oi.A,QToolbar:Pi.A,QBtn:Ue.A,QMenu:zi.A,QList:Vo.A,QItem:ho.A,QItemSection:Mi.A,QToolbarTitle:ji.A,QSpace:bo.A,QDrawer:$i.A,QBanner:Ke.A,QCard:k.A,QScrollArea:Hi.A,QItemLabel:qo.A,QPageContainer:Gi.A,QPage:Ji.A})}}]);